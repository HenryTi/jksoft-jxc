var Yw=Object.defineProperty;var Ww=(e,t,n)=>t in e?Yw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Hw=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var x=(e,t,n)=>(Ww(e,typeof t!="symbol"?t+"":t,n),n);var ST=Hw((MT,Ll)=>{function Qw(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Ut=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ny(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Dy={exports:{}},Ro={},Ey={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ba=Symbol.for("react.element"),Gw=Symbol.for("react.portal"),Kw=Symbol.for("react.fragment"),Xw=Symbol.for("react.strict_mode"),Zw=Symbol.for("react.profiler"),Jw=Symbol.for("react.provider"),eb=Symbol.for("react.context"),tb=Symbol.for("react.forward_ref"),nb=Symbol.for("react.suspense"),rb=Symbol.for("react.memo"),ib=Symbol.for("react.lazy"),Yh=Symbol.iterator;function sb(e){return e===null||typeof e!="object"?null:(e=Yh&&e[Yh]||e["@@iterator"],typeof e=="function"?e:null)}var Iy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Py=Object.assign,Ay={};function rs(e,t,n){this.props=e,this.context=t,this.refs=Ay,this.updater=n||Iy}rs.prototype.isReactComponent={};rs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};rs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Oy(){}Oy.prototype=rs.prototype;function Md(e,t,n){this.props=e,this.context=t,this.refs=Ay,this.updater=n||Iy}var Fd=Md.prototype=new Oy;Fd.constructor=Md;Py(Fd,rs.prototype);Fd.isPureReactComponent=!0;var Wh=Array.isArray,My=Object.prototype.hasOwnProperty,Td={current:null},Fy={key:!0,ref:!0,__self:!0,__source:!0};function Ty(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)My.call(t,r)&&!Fy.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var u=Array(o),c=0;c<o;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:ba,type:e,key:s,ref:a,props:i,_owner:Td.current}}function ab(e,t){return{$$typeof:ba,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Rd(e){return typeof e=="object"&&e!==null&&e.$$typeof===ba}function lb(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Hh=/\/+/g;function Pu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?lb(""+e.key):t.toString(36)}function vl(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case ba:case Gw:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+Pu(a,0):r,Wh(i)?(n="",e!=null&&(n=e.replace(Hh,"$&/")+"/"),vl(i,t,n,"",function(c){return c})):i!=null&&(Rd(i)&&(i=ab(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Hh,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",Wh(e))for(var o=0;o<e.length;o++){s=e[o];var u=r+Pu(s,o);a+=vl(s,t,n,u,i)}else if(u=sb(e),typeof u=="function")for(e=u.call(e),o=0;!(s=e.next()).done;)s=s.value,u=r+Pu(s,o++),a+=vl(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Qa(e,t,n){if(e==null)return e;var r=[],i=0;return vl(e,r,"","",function(s){return t.call(n,s,i++)}),r}function ob(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var At={current:null},gl={transition:null},ub={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:gl,ReactCurrentOwner:Td};pe.Children={map:Qa,forEach:function(e,t,n){Qa(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Qa(e,function(){t++}),t},toArray:function(e){return Qa(e,function(t){return t})||[]},only:function(e){if(!Rd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};pe.Component=rs;pe.Fragment=Kw;pe.Profiler=Zw;pe.PureComponent=Md;pe.StrictMode=Xw;pe.Suspense=nb;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ub;pe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Py({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=Td.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(u in t)My.call(t,u)&&!Fy.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&o!==void 0?o[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){o=Array(u);for(var c=0;c<u;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:ba,type:e.type,key:i,ref:s,props:r,_owner:a}};pe.createContext=function(e){return e={$$typeof:eb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Jw,_context:e},e.Consumer=e};pe.createElement=Ty;pe.createFactory=function(e){var t=Ty.bind(null,e);return t.type=e,t};pe.createRef=function(){return{current:null}};pe.forwardRef=function(e){return{$$typeof:tb,render:e}};pe.isValidElement=Rd;pe.lazy=function(e){return{$$typeof:ib,_payload:{_status:-1,_result:e},_init:ob}};pe.memo=function(e,t){return{$$typeof:rb,type:e,compare:t===void 0?null:t}};pe.startTransition=function(e){var t=gl.transition;gl.transition={};try{e()}finally{gl.transition=t}};pe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};pe.useCallback=function(e,t){return At.current.useCallback(e,t)};pe.useContext=function(e){return At.current.useContext(e)};pe.useDebugValue=function(){};pe.useDeferredValue=function(e){return At.current.useDeferredValue(e)};pe.useEffect=function(e,t){return At.current.useEffect(e,t)};pe.useId=function(){return At.current.useId()};pe.useImperativeHandle=function(e,t,n){return At.current.useImperativeHandle(e,t,n)};pe.useInsertionEffect=function(e,t){return At.current.useInsertionEffect(e,t)};pe.useLayoutEffect=function(e,t){return At.current.useLayoutEffect(e,t)};pe.useMemo=function(e,t){return At.current.useMemo(e,t)};pe.useReducer=function(e,t,n){return At.current.useReducer(e,t,n)};pe.useRef=function(e){return At.current.useRef(e)};pe.useState=function(e){return At.current.useState(e)};pe.useSyncExternalStore=function(e,t,n){return At.current.useSyncExternalStore(e,t,n)};pe.useTransition=function(){return At.current.useTransition()};pe.version="18.2.0";Ey.exports=pe;var P=Ey.exports;const ne=Ny(P),xc=Qw({__proto__:null,default:ne},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cb=P,db=Symbol.for("react.element"),fb=Symbol.for("react.fragment"),hb=Object.prototype.hasOwnProperty,mb=cb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pb={key:!0,ref:!0,__self:!0,__source:!0};function Ry(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)hb.call(t,r)&&!pb.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:db,type:e,key:s,ref:a,props:i,_owner:mb.current}}Ro.Fragment=fb;Ro.jsx=Ry;Ro.jsxs=Ry;Dy.exports=Ro;var l=Dy.exports,wc={},Ly={exports:{}},Ht={},qy={exports:{}},Uy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,U){var K=M.length;M.push(U);e:for(;0<K;){var le=K-1>>>1,fe=M[le];if(0<i(fe,U))M[le]=U,M[K]=fe,K=le;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var U=M[0],K=M.pop();if(K!==U){M[0]=K;e:for(var le=0,fe=M.length,Nt=fe>>>1;le<Nt;){var xe=2*(le+1)-1,Be=M[xe],Ye=xe+1,De=M[Ye];if(0>i(Be,K))Ye<fe&&0>i(De,Be)?(M[le]=De,M[Ye]=K,le=Ye):(M[le]=Be,M[xe]=K,le=xe);else if(Ye<fe&&0>i(De,K))M[le]=De,M[Ye]=K,le=Ye;else break e}}return U}function i(M,U){var K=M.sortIndex-U.sortIndex;return K!==0?K:M.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var u=[],c=[],d=1,f=null,m=3,y=!1,v=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(M){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=M)r(c),U.sortIndex=U.expirationTime,t(u,U);else break;U=n(c)}}function S(M){if(w=!1,p(M),!v)if(n(u)!==null)v=!0,z(b);else{var U=n(c);U!==null&&Y(S,U.startTime-M)}}function b(M,U){v=!1,w&&(w=!1,g(C),C=-1),y=!0;var K=m;try{for(p(U),f=n(u);f!==null&&(!(f.expirationTime>U)||M&&!E());){var le=f.callback;if(typeof le=="function"){f.callback=null,m=f.priorityLevel;var fe=le(f.expirationTime<=U);U=e.unstable_now(),typeof fe=="function"?f.callback=fe:f===n(u)&&r(u),p(U)}else r(u);f=n(u)}if(f!==null)var Nt=!0;else{var xe=n(c);xe!==null&&Y(S,xe.startTime-U),Nt=!1}return Nt}finally{f=null,m=K,y=!1}}var k=!1,_=null,C=-1,N=5,D=-1;function E(){return!(e.unstable_now()-D<N)}function A(){if(_!==null){var M=e.unstable_now();D=M;var U=!0;try{U=_(!0,M)}finally{U?O():(k=!1,_=null)}}else k=!1}var O;if(typeof h=="function")O=function(){h(A)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,q=T.port2;T.port1.onmessage=A,O=function(){q.postMessage(null)}}else O=function(){j(A,0)};function z(M){_=M,k||(k=!0,O())}function Y(M,U){C=j(function(){M(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){v||y||(v=!0,z(b))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(M){switch(m){case 1:case 2:case 3:var U=3;break;default:U=m}var K=m;m=U;try{return M()}finally{m=K}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,U){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var K=m;m=M;try{return U()}finally{m=K}},e.unstable_scheduleCallback=function(M,U,K){var le=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?le+K:le):K=le,M){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=K+fe,M={id:d++,callback:U,priorityLevel:M,startTime:K,expirationTime:fe,sortIndex:-1},K>le?(M.sortIndex=K,t(c,M),n(u)===null&&M===n(c)&&(w?(g(C),C=-1):w=!0,Y(S,K-le))):(M.sortIndex=fe,t(u,M),v||y||(v=!0,z(b))),M},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(M){var U=m;return function(){var K=m;m=U;try{return M.apply(this,arguments)}finally{m=K}}}})(Uy);qy.exports=Uy;var yb=qy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $y=P,Wt=yb;function $(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vy=new Set,Zs={};function ui(e,t){Ki(e,t),Ki(e+"Capture",t)}function Ki(e,t){for(Zs[e]=t,e=0;e<t.length;e++)Vy.add(t[e])}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bc=Object.prototype.hasOwnProperty,vb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qh={},Gh={};function gb(e){return bc.call(Gh,e)?!0:bc.call(Qh,e)?!1:vb.test(e)?Gh[e]=!0:(Qh[e]=!0,!1)}function xb(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function wb(e,t,n,r){if(t===null||typeof t>"u"||xb(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ot(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){mt[e]=new Ot(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];mt[t]=new Ot(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){mt[e]=new Ot(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){mt[e]=new Ot(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){mt[e]=new Ot(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){mt[e]=new Ot(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){mt[e]=new Ot(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){mt[e]=new Ot(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){mt[e]=new Ot(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ld=/[\-:]([a-z])/g;function qd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ld,qd);mt[t]=new Ot(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ld,qd);mt[t]=new Ot(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ld,qd);mt[t]=new Ot(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){mt[e]=new Ot(e,1,!1,e.toLowerCase(),null,!1,!1)});mt.xlinkHref=new Ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){mt[e]=new Ot(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ud(e,t,n,r){var i=mt.hasOwnProperty(t)?mt[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(wb(t,n,i,r)&&(n=null),r||i===null?gb(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var sr=$y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ga=Symbol.for("react.element"),ki=Symbol.for("react.portal"),Ci=Symbol.for("react.fragment"),$d=Symbol.for("react.strict_mode"),Sc=Symbol.for("react.profiler"),zy=Symbol.for("react.provider"),By=Symbol.for("react.context"),Vd=Symbol.for("react.forward_ref"),jc=Symbol.for("react.suspense"),kc=Symbol.for("react.suspense_list"),zd=Symbol.for("react.memo"),dr=Symbol.for("react.lazy"),Yy=Symbol.for("react.offscreen"),Kh=Symbol.iterator;function vs(e){return e===null||typeof e!="object"?null:(e=Kh&&e[Kh]||e["@@iterator"],typeof e=="function"?e:null)}var ze=Object.assign,Au;function Os(e){if(Au===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Au=t&&t[1]||""}return`
`+Au+e}var Ou=!1;function Mu(e,t){if(!e||Ou)return"";Ou=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var u=`
`+i[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=o);break}}}finally{Ou=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Os(e):""}function bb(e){switch(e.tag){case 5:return Os(e.type);case 16:return Os("Lazy");case 13:return Os("Suspense");case 19:return Os("SuspenseList");case 0:case 2:case 15:return e=Mu(e.type,!1),e;case 11:return e=Mu(e.type.render,!1),e;case 1:return e=Mu(e.type,!0),e;default:return""}}function Cc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ci:return"Fragment";case ki:return"Portal";case Sc:return"Profiler";case $d:return"StrictMode";case jc:return"Suspense";case kc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case By:return(e.displayName||"Context")+".Consumer";case zy:return(e._context.displayName||"Context")+".Provider";case Vd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case zd:return t=e.displayName||null,t!==null?t:Cc(e.type)||"Memo";case dr:t=e._payload,e=e._init;try{return Cc(e(t))}catch{}}return null}function Sb(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cc(t);case 8:return t===$d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Pr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Wy(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function jb(e){var t=Wy(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ka(e){e._valueTracker||(e._valueTracker=jb(e))}function Hy(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Wy(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ql(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _c(e,t){var n=t.checked;return ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Xh(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Pr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Qy(e,t){t=t.checked,t!=null&&Ud(e,"checked",t,!1)}function Nc(e,t){Qy(e,t);var n=Pr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Dc(e,t.type,n):t.hasOwnProperty("defaultValue")&&Dc(e,t.type,Pr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zh(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Dc(e,t,n){(t!=="number"||ql(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ms=Array.isArray;function Li(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Pr(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Ec(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($(91));return ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Jh(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error($(92));if(Ms(n)){if(1<n.length)throw Error($(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Pr(n)}}function Gy(e,t){var n=Pr(t.value),r=Pr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function em(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ky(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ic(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ky(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xa,Xy=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Xa=Xa||document.createElement("div"),Xa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Xa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Js(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ls={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kb=["Webkit","ms","Moz","O"];Object.keys(Ls).forEach(function(e){kb.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ls[t]=Ls[e]})});function Zy(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ls.hasOwnProperty(e)&&Ls[e]?(""+t).trim():t+"px"}function Jy(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Zy(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Cb=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pc(e,t){if(t){if(Cb[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($(61))}if(t.style!=null&&typeof t.style!="object")throw Error($(62))}}function Ac(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oc=null;function Bd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mc=null,qi=null,Ui=null;function tm(e){if(e=ka(e)){if(typeof Mc!="function")throw Error($(280));var t=e.stateNode;t&&(t=Vo(t),Mc(e.stateNode,e.type,t))}}function ev(e){qi?Ui?Ui.push(e):Ui=[e]:qi=e}function tv(){if(qi){var e=qi,t=Ui;if(Ui=qi=null,tm(e),t)for(e=0;e<t.length;e++)tm(t[e])}}function nv(e,t){return e(t)}function rv(){}var Fu=!1;function iv(e,t,n){if(Fu)return e(t,n);Fu=!0;try{return nv(e,t,n)}finally{Fu=!1,(qi!==null||Ui!==null)&&(rv(),tv())}}function ea(e,t){var n=e.stateNode;if(n===null)return null;var r=Vo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error($(231,t,typeof n));return n}var Fc=!1;if(Jn)try{var gs={};Object.defineProperty(gs,"passive",{get:function(){Fc=!0}}),window.addEventListener("test",gs,gs),window.removeEventListener("test",gs,gs)}catch{Fc=!1}function _b(e,t,n,r,i,s,a,o,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var qs=!1,Ul=null,$l=!1,Tc=null,Nb={onError:function(e){qs=!0,Ul=e}};function Db(e,t,n,r,i,s,a,o,u){qs=!1,Ul=null,_b.apply(Nb,arguments)}function Eb(e,t,n,r,i,s,a,o,u){if(Db.apply(this,arguments),qs){if(qs){var c=Ul;qs=!1,Ul=null}else throw Error($(198));$l||($l=!0,Tc=c)}}function ci(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function sv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nm(e){if(ci(e)!==e)throw Error($(188))}function Ib(e){var t=e.alternate;if(!t){if(t=ci(e),t===null)throw Error($(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return nm(i),e;if(s===r)return nm(i),t;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?e:t}function av(e){return e=Ib(e),e!==null?lv(e):null}function lv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=lv(e);if(t!==null)return t;e=e.sibling}return null}var ov=Wt.unstable_scheduleCallback,rm=Wt.unstable_cancelCallback,Pb=Wt.unstable_shouldYield,Ab=Wt.unstable_requestPaint,Xe=Wt.unstable_now,Ob=Wt.unstable_getCurrentPriorityLevel,Yd=Wt.unstable_ImmediatePriority,uv=Wt.unstable_UserBlockingPriority,Vl=Wt.unstable_NormalPriority,Mb=Wt.unstable_LowPriority,cv=Wt.unstable_IdlePriority,Lo=null,In=null;function Fb(e){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(Lo,e,void 0,(e.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:Lb,Tb=Math.log,Rb=Math.LN2;function Lb(e){return e>>>=0,e===0?32:31-(Tb(e)/Rb|0)|0}var Za=64,Ja=4194304;function Fs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=Fs(o):(s&=a,s!==0&&(r=Fs(s)))}else a=n&~i,a!==0?r=Fs(a):s!==0&&(r=Fs(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-vn(t),i=1<<n,r|=e[n],t&=~i;return r}function qb(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ub(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-vn(s),o=1<<a,u=i[a];u===-1?(!(o&n)||o&r)&&(i[a]=qb(o,t)):u<=t&&(e.expiredLanes|=o),s&=~o}}function Rc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function dv(){var e=Za;return Za<<=1,!(Za&4194240)&&(Za=64),e}function Tu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Sa(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vn(t),e[t]=n}function $b(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-vn(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Wd(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-vn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _e=0;function fv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var hv,Hd,mv,pv,yv,Lc=!1,el=[],wr=null,br=null,Sr=null,ta=new Map,na=new Map,mr=[],Vb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function im(e,t){switch(e){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":ta.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":na.delete(t.pointerId)}}function xs(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=ka(t),t!==null&&Hd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function zb(e,t,n,r,i){switch(t){case"focusin":return wr=xs(wr,e,t,n,r,i),!0;case"dragenter":return br=xs(br,e,t,n,r,i),!0;case"mouseover":return Sr=xs(Sr,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return ta.set(s,xs(ta.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,na.set(s,xs(na.get(s)||null,e,t,n,r,i)),!0}return!1}function vv(e){var t=Hr(e.target);if(t!==null){var n=ci(t);if(n!==null){if(t=n.tag,t===13){if(t=sv(n),t!==null){e.blockedOn=t,yv(e.priority,function(){mv(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=qc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Oc=r,n.target.dispatchEvent(r),Oc=null}else return t=ka(n),t!==null&&Hd(t),e.blockedOn=n,!1;t.shift()}return!0}function sm(e,t,n){xl(e)&&n.delete(t)}function Bb(){Lc=!1,wr!==null&&xl(wr)&&(wr=null),br!==null&&xl(br)&&(br=null),Sr!==null&&xl(Sr)&&(Sr=null),ta.forEach(sm),na.forEach(sm)}function ws(e,t){e.blockedOn===t&&(e.blockedOn=null,Lc||(Lc=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,Bb)))}function ra(e){function t(i){return ws(i,e)}if(0<el.length){ws(el[0],e);for(var n=1;n<el.length;n++){var r=el[n];r.blockedOn===e&&(r.blockedOn=null)}}for(wr!==null&&ws(wr,e),br!==null&&ws(br,e),Sr!==null&&ws(Sr,e),ta.forEach(t),na.forEach(t),n=0;n<mr.length;n++)r=mr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<mr.length&&(n=mr[0],n.blockedOn===null);)vv(n),n.blockedOn===null&&mr.shift()}var $i=sr.ReactCurrentBatchConfig,Bl=!0;function Yb(e,t,n,r){var i=_e,s=$i.transition;$i.transition=null;try{_e=1,Qd(e,t,n,r)}finally{_e=i,$i.transition=s}}function Wb(e,t,n,r){var i=_e,s=$i.transition;$i.transition=null;try{_e=4,Qd(e,t,n,r)}finally{_e=i,$i.transition=s}}function Qd(e,t,n,r){if(Bl){var i=qc(e,t,n,r);if(i===null)Wu(e,t,r,Yl,n),im(e,r);else if(zb(i,e,t,n,r))r.stopPropagation();else if(im(e,r),t&4&&-1<Vb.indexOf(e)){for(;i!==null;){var s=ka(i);if(s!==null&&hv(s),s=qc(e,t,n,r),s===null&&Wu(e,t,r,Yl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Wu(e,t,r,null,n)}}var Yl=null;function qc(e,t,n,r){if(Yl=null,e=Bd(r),e=Hr(e),e!==null)if(t=ci(e),t===null)e=null;else if(n=t.tag,n===13){if(e=sv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yl=e,null}function gv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ob()){case Yd:return 1;case uv:return 4;case Vl:case Mb:return 16;case cv:return 536870912;default:return 16}default:return 16}}var yr=null,Gd=null,wl=null;function xv(){if(wl)return wl;var e,t=Gd,n=t.length,r,i="value"in yr?yr.value:yr.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return wl=i.slice(e,1<r?1-r:void 0)}function bl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function tl(){return!0}function am(){return!1}function Qt(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tl:am,this.isPropagationStopped=am,this}return ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tl)},persist:function(){},isPersistent:tl}),t}var is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kd=Qt(is),ja=ze({},is,{view:0,detail:0}),Hb=Qt(ja),Ru,Lu,bs,qo=ze({},ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bs&&(bs&&e.type==="mousemove"?(Ru=e.screenX-bs.screenX,Lu=e.screenY-bs.screenY):Lu=Ru=0,bs=e),Ru)},movementY:function(e){return"movementY"in e?e.movementY:Lu}}),lm=Qt(qo),Qb=ze({},qo,{dataTransfer:0}),Gb=Qt(Qb),Kb=ze({},ja,{relatedTarget:0}),qu=Qt(Kb),Xb=ze({},is,{animationName:0,elapsedTime:0,pseudoElement:0}),Zb=Qt(Xb),Jb=ze({},is,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),eS=Qt(Jb),tS=ze({},is,{data:0}),om=Qt(tS),nS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=iS[e])?!!t[e]:!1}function Xd(){return sS}var aS=ze({},ja,{key:function(e){if(e.key){var t=nS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xd,charCode:function(e){return e.type==="keypress"?bl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),lS=Qt(aS),oS=ze({},qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),um=Qt(oS),uS=ze({},ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xd}),cS=Qt(uS),dS=ze({},is,{propertyName:0,elapsedTime:0,pseudoElement:0}),fS=Qt(dS),hS=ze({},qo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mS=Qt(hS),pS=[9,13,27,32],Zd=Jn&&"CompositionEvent"in window,Us=null;Jn&&"documentMode"in document&&(Us=document.documentMode);var yS=Jn&&"TextEvent"in window&&!Us,wv=Jn&&(!Zd||Us&&8<Us&&11>=Us),cm=String.fromCharCode(32),dm=!1;function bv(e,t){switch(e){case"keyup":return pS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _i=!1;function vS(e,t){switch(e){case"compositionend":return Sv(t);case"keypress":return t.which!==32?null:(dm=!0,cm);case"textInput":return e=t.data,e===cm&&dm?null:e;default:return null}}function gS(e,t){if(_i)return e==="compositionend"||!Zd&&bv(e,t)?(e=xv(),wl=Gd=yr=null,_i=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wv&&t.locale!=="ko"?null:t.data;default:return null}}var xS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!xS[e.type]:t==="textarea"}function jv(e,t,n,r){ev(r),t=Wl(t,"onChange"),0<t.length&&(n=new Kd("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $s=null,ia=null;function wS(e){Mv(e,0)}function Uo(e){var t=Ei(e);if(Hy(t))return e}function bS(e,t){if(e==="change")return t}var kv=!1;if(Jn){var Uu;if(Jn){var $u="oninput"in document;if(!$u){var hm=document.createElement("div");hm.setAttribute("oninput","return;"),$u=typeof hm.oninput=="function"}Uu=$u}else Uu=!1;kv=Uu&&(!document.documentMode||9<document.documentMode)}function mm(){$s&&($s.detachEvent("onpropertychange",Cv),ia=$s=null)}function Cv(e){if(e.propertyName==="value"&&Uo(ia)){var t=[];jv(t,ia,e,Bd(e)),iv(wS,t)}}function SS(e,t,n){e==="focusin"?(mm(),$s=t,ia=n,$s.attachEvent("onpropertychange",Cv)):e==="focusout"&&mm()}function jS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Uo(ia)}function kS(e,t){if(e==="click")return Uo(t)}function CS(e,t){if(e==="input"||e==="change")return Uo(t)}function _S(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xn=typeof Object.is=="function"?Object.is:_S;function sa(e,t){if(xn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!bc.call(t,i)||!xn(e[i],t[i]))return!1}return!0}function pm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ym(e,t){var n=pm(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pm(n)}}function _v(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?_v(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Nv(){for(var e=window,t=ql();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ql(e.document)}return t}function Jd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function NS(e){var t=Nv(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&_v(n.ownerDocument.documentElement,n)){if(r!==null&&Jd(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ym(n,s);var a=ym(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var DS=Jn&&"documentMode"in document&&11>=document.documentMode,Ni=null,Uc=null,Vs=null,$c=!1;function vm(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$c||Ni==null||Ni!==ql(r)||(r=Ni,"selectionStart"in r&&Jd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vs&&sa(Vs,r)||(Vs=r,r=Wl(Uc,"onSelect"),0<r.length&&(t=new Kd("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ni)))}function nl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Di={animationend:nl("Animation","AnimationEnd"),animationiteration:nl("Animation","AnimationIteration"),animationstart:nl("Animation","AnimationStart"),transitionend:nl("Transition","TransitionEnd")},Vu={},Dv={};Jn&&(Dv=document.createElement("div").style,"AnimationEvent"in window||(delete Di.animationend.animation,delete Di.animationiteration.animation,delete Di.animationstart.animation),"TransitionEvent"in window||delete Di.transitionend.transition);function $o(e){if(Vu[e])return Vu[e];if(!Di[e])return e;var t=Di[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Dv)return Vu[e]=t[n];return e}var Ev=$o("animationend"),Iv=$o("animationiteration"),Pv=$o("animationstart"),Av=$o("transitionend"),Ov=new Map,gm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Ov.set(e,t),ui(t,[e])}for(var zu=0;zu<gm.length;zu++){var Bu=gm[zu],ES=Bu.toLowerCase(),IS=Bu[0].toUpperCase()+Bu.slice(1);Or(ES,"on"+IS)}Or(Ev,"onAnimationEnd");Or(Iv,"onAnimationIteration");Or(Pv,"onAnimationStart");Or("dblclick","onDoubleClick");Or("focusin","onFocus");Or("focusout","onBlur");Or(Av,"onTransitionEnd");Ki("onMouseEnter",["mouseout","mouseover"]);Ki("onMouseLeave",["mouseout","mouseover"]);Ki("onPointerEnter",["pointerout","pointerover"]);Ki("onPointerLeave",["pointerout","pointerover"]);ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ui("onBeforeInput",["compositionend","keypress","textInput","paste"]);ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ts="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ts));function xm(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Eb(r,t,void 0,e),e.currentTarget=null}function Mv(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],u=o.instance,c=o.currentTarget;if(o=o.listener,u!==s&&i.isPropagationStopped())break e;xm(i,o,c),s=u}else for(a=0;a<r.length;a++){if(o=r[a],u=o.instance,c=o.currentTarget,o=o.listener,u!==s&&i.isPropagationStopped())break e;xm(i,o,c),s=u}}}if($l)throw e=Tc,$l=!1,Tc=null,e}function Pe(e,t){var n=t[Wc];n===void 0&&(n=t[Wc]=new Set);var r=e+"__bubble";n.has(r)||(Fv(t,e,2,!1),n.add(r))}function Yu(e,t,n){var r=0;t&&(r|=4),Fv(n,e,r,t)}var rl="_reactListening"+Math.random().toString(36).slice(2);function aa(e){if(!e[rl]){e[rl]=!0,Vy.forEach(function(n){n!=="selectionchange"&&(PS.has(n)||Yu(n,!1,e),Yu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[rl]||(t[rl]=!0,Yu("selectionchange",!1,t))}}function Fv(e,t,n,r){switch(gv(t)){case 1:var i=Yb;break;case 4:i=Wb;break;default:i=Qd}n=i.bind(null,t,n,e),i=void 0,!Fc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wu(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Hr(o),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}o=o.parentNode}}r=r.return}iv(function(){var c=s,d=Bd(n),f=[];e:{var m=Ov.get(e);if(m!==void 0){var y=Kd,v=e;switch(e){case"keypress":if(bl(n)===0)break e;case"keydown":case"keyup":y=lS;break;case"focusin":v="focus",y=qu;break;case"focusout":v="blur",y=qu;break;case"beforeblur":case"afterblur":y=qu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=lm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Gb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=cS;break;case Ev:case Iv:case Pv:y=Zb;break;case Av:y=fS;break;case"scroll":y=Hb;break;case"wheel":y=mS;break;case"copy":case"cut":case"paste":y=eS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=um}var w=(t&4)!==0,j=!w&&e==="scroll",g=w?m!==null?m+"Capture":null:m;w=[];for(var h=c,p;h!==null;){p=h;var S=p.stateNode;if(p.tag===5&&S!==null&&(p=S,g!==null&&(S=ea(h,g),S!=null&&w.push(la(h,S,p)))),j)break;h=h.return}0<w.length&&(m=new y(m,v,null,n,d),f.push({event:m,listeners:w}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&n!==Oc&&(v=n.relatedTarget||n.fromElement)&&(Hr(v)||v[er]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(v=n.relatedTarget||n.toElement,y=c,v=v?Hr(v):null,v!==null&&(j=ci(v),v!==j||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=c),y!==v)){if(w=lm,S="onMouseLeave",g="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(w=um,S="onPointerLeave",g="onPointerEnter",h="pointer"),j=y==null?m:Ei(y),p=v==null?m:Ei(v),m=new w(S,h+"leave",y,n,d),m.target=j,m.relatedTarget=p,S=null,Hr(d)===c&&(w=new w(g,h+"enter",v,n,d),w.target=p,w.relatedTarget=j,S=w),j=S,y&&v)t:{for(w=y,g=v,h=0,p=w;p;p=xi(p))h++;for(p=0,S=g;S;S=xi(S))p++;for(;0<h-p;)w=xi(w),h--;for(;0<p-h;)g=xi(g),p--;for(;h--;){if(w===g||g!==null&&w===g.alternate)break t;w=xi(w),g=xi(g)}w=null}else w=null;y!==null&&wm(f,m,y,w,!1),v!==null&&j!==null&&wm(f,j,v,w,!0)}}e:{if(m=c?Ei(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var b=bS;else if(fm(m))if(kv)b=CS;else{b=jS;var k=SS}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(b=kS);if(b&&(b=b(e,c))){jv(f,b,n,d);break e}k&&k(e,m,c),e==="focusout"&&(k=m._wrapperState)&&k.controlled&&m.type==="number"&&Dc(m,"number",m.value)}switch(k=c?Ei(c):window,e){case"focusin":(fm(k)||k.contentEditable==="true")&&(Ni=k,Uc=c,Vs=null);break;case"focusout":Vs=Uc=Ni=null;break;case"mousedown":$c=!0;break;case"contextmenu":case"mouseup":case"dragend":$c=!1,vm(f,n,d);break;case"selectionchange":if(DS)break;case"keydown":case"keyup":vm(f,n,d)}var _;if(Zd)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else _i?bv(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(wv&&n.locale!=="ko"&&(_i||C!=="onCompositionStart"?C==="onCompositionEnd"&&_i&&(_=xv()):(yr=d,Gd="value"in yr?yr.value:yr.textContent,_i=!0)),k=Wl(c,C),0<k.length&&(C=new om(C,e,null,n,d),f.push({event:C,listeners:k}),_?C.data=_:(_=Sv(n),_!==null&&(C.data=_)))),(_=yS?vS(e,n):gS(e,n))&&(c=Wl(c,"onBeforeInput"),0<c.length&&(d=new om("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=_))}Mv(f,t)})}function la(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wl(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ea(e,n),s!=null&&r.unshift(la(e,s,i)),s=ea(e,t),s!=null&&r.push(la(e,s,i))),e=e.return}return r}function xi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wm(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var o=n,u=o.alternate,c=o.stateNode;if(u!==null&&u===r)break;o.tag===5&&c!==null&&(o=c,i?(u=ea(n,s),u!=null&&a.unshift(la(n,u,o))):i||(u=ea(n,s),u!=null&&a.push(la(n,u,o)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var AS=/\r\n?/g,OS=/\u0000|\uFFFD/g;function bm(e){return(typeof e=="string"?e:""+e).replace(AS,`
`).replace(OS,"")}function il(e,t,n){if(t=bm(t),bm(e)!==t&&n)throw Error($(425))}function Hl(){}var Vc=null,zc=null;function Bc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yc=typeof setTimeout=="function"?setTimeout:void 0,MS=typeof clearTimeout=="function"?clearTimeout:void 0,Sm=typeof Promise=="function"?Promise:void 0,FS=typeof queueMicrotask=="function"?queueMicrotask:typeof Sm<"u"?function(e){return Sm.resolve(null).then(e).catch(TS)}:Yc;function TS(e){setTimeout(function(){throw e})}function Hu(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ra(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ra(t)}function jr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function jm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ss=Math.random().toString(36).slice(2),_n="__reactFiber$"+ss,oa="__reactProps$"+ss,er="__reactContainer$"+ss,Wc="__reactEvents$"+ss,RS="__reactListeners$"+ss,LS="__reactHandles$"+ss;function Hr(e){var t=e[_n];if(t)return t;for(var n=e.parentNode;n;){if(t=n[er]||n[_n]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=jm(e);e!==null;){if(n=e[_n])return n;e=jm(e)}return t}e=n,n=e.parentNode}return null}function ka(e){return e=e[_n]||e[er],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ei(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function Vo(e){return e[oa]||null}var Hc=[],Ii=-1;function Mr(e){return{current:e}}function Oe(e){0>Ii||(e.current=Hc[Ii],Hc[Ii]=null,Ii--)}function Ee(e,t){Ii++,Hc[Ii]=e.current,e.current=t}var Ar={},jt=Mr(Ar),Rt=Mr(!1),ri=Ar;function Xi(e,t){var n=e.type.contextTypes;if(!n)return Ar;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Lt(e){return e=e.childContextTypes,e!=null}function Ql(){Oe(Rt),Oe(jt)}function km(e,t,n){if(jt.current!==Ar)throw Error($(168));Ee(jt,t),Ee(Rt,n)}function Tv(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error($(108,Sb(e)||"Unknown",i));return ze({},n,r)}function Gl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ar,ri=jt.current,Ee(jt,e),Ee(Rt,Rt.current),!0}function Cm(e,t,n){var r=e.stateNode;if(!r)throw Error($(169));n?(e=Tv(e,t,ri),r.__reactInternalMemoizedMergedChildContext=e,Oe(Rt),Oe(jt),Ee(jt,e)):Oe(Rt),Ee(Rt,n)}var Yn=null,zo=!1,Qu=!1;function Rv(e){Yn===null?Yn=[e]:Yn.push(e)}function qS(e){zo=!0,Rv(e)}function Fr(){if(!Qu&&Yn!==null){Qu=!0;var e=0,t=_e;try{var n=Yn;for(_e=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Yn=null,zo=!1}catch(i){throw Yn!==null&&(Yn=Yn.slice(e+1)),ov(Yd,Fr),i}finally{_e=t,Qu=!1}}return null}var Pi=[],Ai=0,Kl=null,Xl=0,Xt=[],Zt=0,ii=null,Wn=1,Hn="";function Br(e,t){Pi[Ai++]=Xl,Pi[Ai++]=Kl,Kl=e,Xl=t}function Lv(e,t,n){Xt[Zt++]=Wn,Xt[Zt++]=Hn,Xt[Zt++]=ii,ii=e;var r=Wn;e=Hn;var i=32-vn(r)-1;r&=~(1<<i),n+=1;var s=32-vn(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Wn=1<<32-vn(t)+i|n<<i|r,Hn=s+e}else Wn=1<<s|n<<i|r,Hn=e}function ef(e){e.return!==null&&(Br(e,1),Lv(e,1,0))}function tf(e){for(;e===Kl;)Kl=Pi[--Ai],Pi[Ai]=null,Xl=Pi[--Ai],Pi[Ai]=null;for(;e===ii;)ii=Xt[--Zt],Xt[Zt]=null,Hn=Xt[--Zt],Xt[Zt]=null,Wn=Xt[--Zt],Xt[Zt]=null}var Yt=null,Bt=null,qe=!1,hn=null;function qv(e,t){var n=en(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function _m(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Yt=e,Bt=jr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Yt=e,Bt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ii!==null?{id:Wn,overflow:Hn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=en(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Yt=e,Bt=null,!0):!1;default:return!1}}function Qc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Gc(e){if(qe){var t=Bt;if(t){var n=t;if(!_m(e,t)){if(Qc(e))throw Error($(418));t=jr(n.nextSibling);var r=Yt;t&&_m(e,t)?qv(r,n):(e.flags=e.flags&-4097|2,qe=!1,Yt=e)}}else{if(Qc(e))throw Error($(418));e.flags=e.flags&-4097|2,qe=!1,Yt=e}}}function Nm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Yt=e}function sl(e){if(e!==Yt)return!1;if(!qe)return Nm(e),qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Bc(e.type,e.memoizedProps)),t&&(t=Bt)){if(Qc(e))throw Uv(),Error($(418));for(;t;)qv(e,t),t=jr(t.nextSibling)}if(Nm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Bt=jr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Bt=null}}else Bt=Yt?jr(e.stateNode.nextSibling):null;return!0}function Uv(){for(var e=Bt;e;)e=jr(e.nextSibling)}function Zi(){Bt=Yt=null,qe=!1}function nf(e){hn===null?hn=[e]:hn.push(e)}var US=sr.ReactCurrentBatchConfig;function dn(e,t){if(e&&e.defaultProps){t=ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Zl=Mr(null),Jl=null,Oi=null,rf=null;function sf(){rf=Oi=Jl=null}function af(e){var t=Zl.current;Oe(Zl),e._currentValue=t}function Kc(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Vi(e,t){Jl=e,rf=Oi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Tt=!0),e.firstContext=null)}function rn(e){var t=e._currentValue;if(rf!==e)if(e={context:e,memoizedValue:t,next:null},Oi===null){if(Jl===null)throw Error($(308));Oi=e,Jl.dependencies={lanes:0,firstContext:e}}else Oi=Oi.next=e;return t}var Qr=null;function lf(e){Qr===null?Qr=[e]:Qr.push(e)}function $v(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,lf(t)):(n.next=i.next,i.next=n),t.interleaved=n,tr(e,r)}function tr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var fr=!1;function of(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Kn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function kr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,tr(e,n)}return i=r.interleaved,i===null?(t.next=t,lf(r)):(t.next=i.next,i.next=t),r.interleaved=t,tr(e,n)}function Sl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Wd(e,n)}}function Dm(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function eo(e,t,n,r){var i=e.updateQueue;fr=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var u=o,c=u.next;u.next=null,a===null?s=c:a.next=c,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;a=0,d=c=u=null,o=s;do{var m=o.lane,y=o.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,w=o;switch(m=t,y=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){f=v.call(y,f,m);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,m=typeof v=="function"?v.call(y,f,m):v,m==null)break e;f=ze({},f,m);break e;case 2:fr=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,m=i.effects,m===null?i.effects=[o]:m.push(o))}else y={eventTime:y,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=y,u=f):d=d.next=y,a|=m;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;m=o,o=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(d===null&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);ai|=a,e.lanes=a,e.memoizedState=f}}function Em(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var zv=new $y.Component().refs;function Xc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Bo={isMounted:function(e){return(e=e._reactInternals)?ci(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=It(),i=_r(e),s=Kn(r,i);s.payload=t,n!=null&&(s.callback=n),t=kr(e,s,i),t!==null&&(gn(t,e,i,r),Sl(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=It(),i=_r(e),s=Kn(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=kr(e,s,i),t!==null&&(gn(t,e,i,r),Sl(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=It(),r=_r(e),i=Kn(n,r);i.tag=2,t!=null&&(i.callback=t),t=kr(e,i,r),t!==null&&(gn(t,e,r,n),Sl(t,e,r))}};function Im(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!sa(n,r)||!sa(i,s):!0}function Bv(e,t,n){var r=!1,i=Ar,s=t.contextType;return typeof s=="object"&&s!==null?s=rn(s):(i=Lt(t)?ri:jt.current,r=t.contextTypes,s=(r=r!=null)?Xi(e,i):Ar),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Bo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Pm(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bo.enqueueReplaceState(t,t.state,null)}function Zc(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=zv,of(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=rn(s):(s=Lt(t)?ri:jt.current,i.context=Xi(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Xc(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Bo.enqueueReplaceState(i,i.state,null),eo(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Ss(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=i.refs;o===zv&&(o=i.refs={}),a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error($(284));if(!n._owner)throw Error($(290,e))}return e}function al(e,t){throw e=Object.prototype.toString.call(t),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Am(e){var t=e._init;return t(e._payload)}function Yv(e){function t(g,h){if(e){var p=g.deletions;p===null?(g.deletions=[h],g.flags|=16):p.push(h)}}function n(g,h){if(!e)return null;for(;h!==null;)t(g,h),h=h.sibling;return null}function r(g,h){for(g=new Map;h!==null;)h.key!==null?g.set(h.key,h):g.set(h.index,h),h=h.sibling;return g}function i(g,h){return g=Nr(g,h),g.index=0,g.sibling=null,g}function s(g,h,p){return g.index=p,e?(p=g.alternate,p!==null?(p=p.index,p<h?(g.flags|=2,h):p):(g.flags|=2,h)):(g.flags|=1048576,h)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function o(g,h,p,S){return h===null||h.tag!==6?(h=tc(p,g.mode,S),h.return=g,h):(h=i(h,p),h.return=g,h)}function u(g,h,p,S){var b=p.type;return b===Ci?d(g,h,p.props.children,S,p.key):h!==null&&(h.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===dr&&Am(b)===h.type)?(S=i(h,p.props),S.ref=Ss(g,h,p),S.return=g,S):(S=Dl(p.type,p.key,p.props,null,g.mode,S),S.ref=Ss(g,h,p),S.return=g,S)}function c(g,h,p,S){return h===null||h.tag!==4||h.stateNode.containerInfo!==p.containerInfo||h.stateNode.implementation!==p.implementation?(h=nc(p,g.mode,S),h.return=g,h):(h=i(h,p.children||[]),h.return=g,h)}function d(g,h,p,S,b){return h===null||h.tag!==7?(h=ei(p,g.mode,S,b),h.return=g,h):(h=i(h,p),h.return=g,h)}function f(g,h,p){if(typeof h=="string"&&h!==""||typeof h=="number")return h=tc(""+h,g.mode,p),h.return=g,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Ga:return p=Dl(h.type,h.key,h.props,null,g.mode,p),p.ref=Ss(g,null,h),p.return=g,p;case ki:return h=nc(h,g.mode,p),h.return=g,h;case dr:var S=h._init;return f(g,S(h._payload),p)}if(Ms(h)||vs(h))return h=ei(h,g.mode,p,null),h.return=g,h;al(g,h)}return null}function m(g,h,p,S){var b=h!==null?h.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return b!==null?null:o(g,h,""+p,S);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Ga:return p.key===b?u(g,h,p,S):null;case ki:return p.key===b?c(g,h,p,S):null;case dr:return b=p._init,m(g,h,b(p._payload),S)}if(Ms(p)||vs(p))return b!==null?null:d(g,h,p,S,null);al(g,p)}return null}function y(g,h,p,S,b){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(p)||null,o(h,g,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ga:return g=g.get(S.key===null?p:S.key)||null,u(h,g,S,b);case ki:return g=g.get(S.key===null?p:S.key)||null,c(h,g,S,b);case dr:var k=S._init;return y(g,h,p,k(S._payload),b)}if(Ms(S)||vs(S))return g=g.get(p)||null,d(h,g,S,b,null);al(h,S)}return null}function v(g,h,p,S){for(var b=null,k=null,_=h,C=h=0,N=null;_!==null&&C<p.length;C++){_.index>C?(N=_,_=null):N=_.sibling;var D=m(g,_,p[C],S);if(D===null){_===null&&(_=N);break}e&&_&&D.alternate===null&&t(g,_),h=s(D,h,C),k===null?b=D:k.sibling=D,k=D,_=N}if(C===p.length)return n(g,_),qe&&Br(g,C),b;if(_===null){for(;C<p.length;C++)_=f(g,p[C],S),_!==null&&(h=s(_,h,C),k===null?b=_:k.sibling=_,k=_);return qe&&Br(g,C),b}for(_=r(g,_);C<p.length;C++)N=y(_,g,C,p[C],S),N!==null&&(e&&N.alternate!==null&&_.delete(N.key===null?C:N.key),h=s(N,h,C),k===null?b=N:k.sibling=N,k=N);return e&&_.forEach(function(E){return t(g,E)}),qe&&Br(g,C),b}function w(g,h,p,S){var b=vs(p);if(typeof b!="function")throw Error($(150));if(p=b.call(p),p==null)throw Error($(151));for(var k=b=null,_=h,C=h=0,N=null,D=p.next();_!==null&&!D.done;C++,D=p.next()){_.index>C?(N=_,_=null):N=_.sibling;var E=m(g,_,D.value,S);if(E===null){_===null&&(_=N);break}e&&_&&E.alternate===null&&t(g,_),h=s(E,h,C),k===null?b=E:k.sibling=E,k=E,_=N}if(D.done)return n(g,_),qe&&Br(g,C),b;if(_===null){for(;!D.done;C++,D=p.next())D=f(g,D.value,S),D!==null&&(h=s(D,h,C),k===null?b=D:k.sibling=D,k=D);return qe&&Br(g,C),b}for(_=r(g,_);!D.done;C++,D=p.next())D=y(_,g,C,D.value,S),D!==null&&(e&&D.alternate!==null&&_.delete(D.key===null?C:D.key),h=s(D,h,C),k===null?b=D:k.sibling=D,k=D);return e&&_.forEach(function(A){return t(g,A)}),qe&&Br(g,C),b}function j(g,h,p,S){if(typeof p=="object"&&p!==null&&p.type===Ci&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Ga:e:{for(var b=p.key,k=h;k!==null;){if(k.key===b){if(b=p.type,b===Ci){if(k.tag===7){n(g,k.sibling),h=i(k,p.props.children),h.return=g,g=h;break e}}else if(k.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===dr&&Am(b)===k.type){n(g,k.sibling),h=i(k,p.props),h.ref=Ss(g,k,p),h.return=g,g=h;break e}n(g,k);break}else t(g,k);k=k.sibling}p.type===Ci?(h=ei(p.props.children,g.mode,S,p.key),h.return=g,g=h):(S=Dl(p.type,p.key,p.props,null,g.mode,S),S.ref=Ss(g,h,p),S.return=g,g=S)}return a(g);case ki:e:{for(k=p.key;h!==null;){if(h.key===k)if(h.tag===4&&h.stateNode.containerInfo===p.containerInfo&&h.stateNode.implementation===p.implementation){n(g,h.sibling),h=i(h,p.children||[]),h.return=g,g=h;break e}else{n(g,h);break}else t(g,h);h=h.sibling}h=nc(p,g.mode,S),h.return=g,g=h}return a(g);case dr:return k=p._init,j(g,h,k(p._payload),S)}if(Ms(p))return v(g,h,p,S);if(vs(p))return w(g,h,p,S);al(g,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,h!==null&&h.tag===6?(n(g,h.sibling),h=i(h,p),h.return=g,g=h):(n(g,h),h=tc(p,g.mode,S),h.return=g,g=h),a(g)):n(g,h)}return j}var Ji=Yv(!0),Wv=Yv(!1),Ca={},Pn=Mr(Ca),ua=Mr(Ca),ca=Mr(Ca);function Gr(e){if(e===Ca)throw Error($(174));return e}function uf(e,t){switch(Ee(ca,t),Ee(ua,e),Ee(Pn,Ca),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ic(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ic(t,e)}Oe(Pn),Ee(Pn,t)}function es(){Oe(Pn),Oe(ua),Oe(ca)}function Hv(e){Gr(ca.current);var t=Gr(Pn.current),n=Ic(t,e.type);t!==n&&(Ee(ua,e),Ee(Pn,n))}function cf(e){ua.current===e&&(Oe(Pn),Oe(ua))}var $e=Mr(0);function to(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Gu=[];function df(){for(var e=0;e<Gu.length;e++)Gu[e]._workInProgressVersionPrimary=null;Gu.length=0}var jl=sr.ReactCurrentDispatcher,Ku=sr.ReactCurrentBatchConfig,si=0,Ve=null,it=null,ot=null,no=!1,zs=!1,da=0,$S=0;function yt(){throw Error($(321))}function ff(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!xn(e[n],t[n]))return!1;return!0}function hf(e,t,n,r,i,s){if(si=s,Ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,jl.current=e===null||e.memoizedState===null?YS:WS,e=n(r,i),zs){s=0;do{if(zs=!1,da=0,25<=s)throw Error($(301));s+=1,ot=it=null,t.updateQueue=null,jl.current=HS,e=n(r,i)}while(zs)}if(jl.current=ro,t=it!==null&&it.next!==null,si=0,ot=it=Ve=null,no=!1,t)throw Error($(300));return e}function mf(){var e=da!==0;return da=0,e}function Cn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Ve.memoizedState=ot=e:ot=ot.next=e,ot}function sn(){if(it===null){var e=Ve.alternate;e=e!==null?e.memoizedState:null}else e=it.next;var t=ot===null?Ve.memoizedState:ot.next;if(t!==null)ot=t,it=e;else{if(e===null)throw Error($(310));it=e,e={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},ot===null?Ve.memoizedState=ot=e:ot=ot.next=e}return ot}function fa(e,t){return typeof t=="function"?t(e):t}function Xu(e){var t=sn(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=it,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,u=null,c=s;do{var d=c.lane;if((si&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(o=u=f,a=r):u=u.next=f,Ve.lanes|=d,ai|=d}c=c.next}while(c!==null&&c!==s);u===null?a=r:u.next=o,xn(r,t.memoizedState)||(Tt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ve.lanes|=s,ai|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Zu(e){var t=sn(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);xn(s,t.memoizedState)||(Tt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Qv(){}function Gv(e,t){var n=Ve,r=sn(),i=t(),s=!xn(r.memoizedState,i);if(s&&(r.memoizedState=i,Tt=!0),r=r.queue,pf(Zv.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||ot!==null&&ot.memoizedState.tag&1){if(n.flags|=2048,ha(9,Xv.bind(null,n,r,i,t),void 0,null),ut===null)throw Error($(349));si&30||Kv(n,t,i)}return i}function Kv(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ve.updateQueue,t===null?(t={lastEffect:null,stores:null},Ve.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Xv(e,t,n,r){t.value=n,t.getSnapshot=r,Jv(t)&&eg(e)}function Zv(e,t,n){return n(function(){Jv(t)&&eg(e)})}function Jv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!xn(e,n)}catch{return!0}}function eg(e){var t=tr(e,1);t!==null&&gn(t,e,1,-1)}function Om(e){var t=Cn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:e},t.queue=e,e=e.dispatch=BS.bind(null,Ve,e),[t.memoizedState,e]}function ha(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ve.updateQueue,t===null?(t={lastEffect:null,stores:null},Ve.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function tg(){return sn().memoizedState}function kl(e,t,n,r){var i=Cn();Ve.flags|=e,i.memoizedState=ha(1|t,n,void 0,r===void 0?null:r)}function Yo(e,t,n,r){var i=sn();r=r===void 0?null:r;var s=void 0;if(it!==null){var a=it.memoizedState;if(s=a.destroy,r!==null&&ff(r,a.deps)){i.memoizedState=ha(t,n,s,r);return}}Ve.flags|=e,i.memoizedState=ha(1|t,n,s,r)}function Mm(e,t){return kl(8390656,8,e,t)}function pf(e,t){return Yo(2048,8,e,t)}function ng(e,t){return Yo(4,2,e,t)}function rg(e,t){return Yo(4,4,e,t)}function ig(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sg(e,t,n){return n=n!=null?n.concat([e]):null,Yo(4,4,ig.bind(null,t,e),n)}function yf(){}function ag(e,t){var n=sn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ff(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function lg(e,t){var n=sn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ff(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function og(e,t,n){return si&21?(xn(n,t)||(n=dv(),Ve.lanes|=n,ai|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Tt=!0),e.memoizedState=n)}function VS(e,t){var n=_e;_e=n!==0&&4>n?n:4,e(!0);var r=Ku.transition;Ku.transition={};try{e(!1),t()}finally{_e=n,Ku.transition=r}}function ug(){return sn().memoizedState}function zS(e,t,n){var r=_r(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},cg(e))dg(t,n);else if(n=$v(e,t,n,r),n!==null){var i=It();gn(n,e,r,i),fg(n,t,r)}}function BS(e,t,n){var r=_r(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(cg(e))dg(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,xn(o,a)){var u=t.interleaved;u===null?(i.next=i,lf(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=$v(e,t,i,r),n!==null&&(i=It(),gn(n,e,r,i),fg(n,t,r))}}function cg(e){var t=e.alternate;return e===Ve||t!==null&&t===Ve}function dg(e,t){zs=no=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fg(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Wd(e,n)}}var ro={readContext:rn,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},YS={readContext:rn,useCallback:function(e,t){return Cn().memoizedState=[e,t===void 0?null:t],e},useContext:rn,useEffect:Mm,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,kl(4194308,4,ig.bind(null,t,e),n)},useLayoutEffect:function(e,t){return kl(4194308,4,e,t)},useInsertionEffect:function(e,t){return kl(4,2,e,t)},useMemo:function(e,t){var n=Cn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Cn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=zS.bind(null,Ve,e),[r.memoizedState,e]},useRef:function(e){var t=Cn();return e={current:e},t.memoizedState=e},useState:Om,useDebugValue:yf,useDeferredValue:function(e){return Cn().memoizedState=e},useTransition:function(){var e=Om(!1),t=e[0];return e=VS.bind(null,e[1]),Cn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ve,i=Cn();if(qe){if(n===void 0)throw Error($(407));n=n()}else{if(n=t(),ut===null)throw Error($(349));si&30||Kv(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Mm(Zv.bind(null,r,s,e),[e]),r.flags|=2048,ha(9,Xv.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Cn(),t=ut.identifierPrefix;if(qe){var n=Hn,r=Wn;n=(r&~(1<<32-vn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=da++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=$S++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},WS={readContext:rn,useCallback:ag,useContext:rn,useEffect:pf,useImperativeHandle:sg,useInsertionEffect:ng,useLayoutEffect:rg,useMemo:lg,useReducer:Xu,useRef:tg,useState:function(){return Xu(fa)},useDebugValue:yf,useDeferredValue:function(e){var t=sn();return og(t,it.memoizedState,e)},useTransition:function(){var e=Xu(fa)[0],t=sn().memoizedState;return[e,t]},useMutableSource:Qv,useSyncExternalStore:Gv,useId:ug,unstable_isNewReconciler:!1},HS={readContext:rn,useCallback:ag,useContext:rn,useEffect:pf,useImperativeHandle:sg,useInsertionEffect:ng,useLayoutEffect:rg,useMemo:lg,useReducer:Zu,useRef:tg,useState:function(){return Zu(fa)},useDebugValue:yf,useDeferredValue:function(e){var t=sn();return it===null?t.memoizedState=e:og(t,it.memoizedState,e)},useTransition:function(){var e=Zu(fa)[0],t=sn().memoizedState;return[e,t]},useMutableSource:Qv,useSyncExternalStore:Gv,useId:ug,unstable_isNewReconciler:!1};function ts(e,t){try{var n="",r=t;do n+=bb(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Ju(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Jc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var QS=typeof WeakMap=="function"?WeakMap:Map;function hg(e,t,n){n=Kn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){so||(so=!0,ud=r),Jc(e,t)},n}function mg(e,t,n){n=Kn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Jc(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Jc(e,t),typeof r!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Fm(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new QS;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=oj.bind(null,e,t,n),t.then(e,e))}function Tm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Rm(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Kn(-1,1),t.tag=2,kr(n,t,1))),n.lanes|=1),e)}var GS=sr.ReactCurrentOwner,Tt=!1;function Dt(e,t,n,r){t.child=e===null?Wv(t,null,n,r):Ji(t,e.child,n,r)}function Lm(e,t,n,r,i){n=n.render;var s=t.ref;return Vi(t,i),r=hf(e,t,n,r,s,i),n=mf(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,nr(e,t,i)):(qe&&n&&ef(t),t.flags|=1,Dt(e,t,r,i),t.child)}function qm(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!kf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,pg(e,t,s,r,i)):(e=Dl(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:sa,n(a,r)&&e.ref===t.ref)return nr(e,t,i)}return t.flags|=1,e=Nr(s,r),e.ref=t.ref,e.return=t,t.child=e}function pg(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(sa(s,r)&&e.ref===t.ref)if(Tt=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Tt=!0);else return t.lanes=e.lanes,nr(e,t,i)}return ed(e,t,n,r,i)}function yg(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(Fi,Vt),Vt|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ee(Fi,Vt),Vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ee(Fi,Vt),Vt|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ee(Fi,Vt),Vt|=r;return Dt(e,t,i,n),t.child}function vg(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ed(e,t,n,r,i){var s=Lt(n)?ri:jt.current;return s=Xi(t,s),Vi(t,i),n=hf(e,t,n,r,s,i),r=mf(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,nr(e,t,i)):(qe&&r&&ef(t),t.flags|=1,Dt(e,t,n,i),t.child)}function Um(e,t,n,r,i){if(Lt(n)){var s=!0;Gl(t)}else s=!1;if(Vi(t,i),t.stateNode===null)Cl(e,t),Bv(t,n,r),Zc(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var u=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=rn(c):(c=Lt(n)?ri:jt.current,c=Xi(t,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||u!==c)&&Pm(t,a,r,c),fr=!1;var m=t.memoizedState;a.state=m,eo(t,r,a,i),u=t.memoizedState,o!==r||m!==u||Rt.current||fr?(typeof d=="function"&&(Xc(t,n,d,r),u=t.memoizedState),(o=fr||Im(t,n,o,r,m,u,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Vv(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:dn(t.type,o),a.props=c,f=t.pendingProps,m=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=rn(u):(u=Lt(n)?ri:jt.current,u=Xi(t,u));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||m!==u)&&Pm(t,a,r,u),fr=!1,m=t.memoizedState,a.state=m,eo(t,r,a,i);var v=t.memoizedState;o!==f||m!==v||Rt.current||fr?(typeof y=="function"&&(Xc(t,n,y,r),v=t.memoizedState),(c=fr||Im(t,n,c,r,m,v,u)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),a.props=r,a.state=v,a.context=u,r=c):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return td(e,t,n,r,s,i)}function td(e,t,n,r,i,s){vg(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&Cm(t,n,!1),nr(e,t,s);r=t.stateNode,GS.current=t;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Ji(t,e.child,null,s),t.child=Ji(t,null,o,s)):Dt(e,t,o,s),t.memoizedState=r.state,i&&Cm(t,n,!0),t.child}function gg(e){var t=e.stateNode;t.pendingContext?km(e,t.pendingContext,t.pendingContext!==t.context):t.context&&km(e,t.context,!1),uf(e,t.containerInfo)}function $m(e,t,n,r,i){return Zi(),nf(i),t.flags|=256,Dt(e,t,n,r),t.child}var nd={dehydrated:null,treeContext:null,retryLane:0};function rd(e){return{baseLanes:e,cachePool:null,transitions:null}}function xg(e,t,n){var r=t.pendingProps,i=$e.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ee($e,i&1),e===null)return Gc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Qo(a,r,0,null),e=ei(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=rd(n),t.memoizedState=nd,e):vf(t,a));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return KS(e,t,a,r,o,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,o=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Nr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Nr(o,s):(s=ei(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?rd(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=nd,r}return s=e.child,e=s.sibling,r=Nr(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function vf(e,t){return t=Qo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ll(e,t,n,r){return r!==null&&nf(r),Ji(t,e.child,null,n),e=vf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function KS(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=Ju(Error($(422))),ll(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Qo({mode:"visible",children:r.children},i,0,null),s=ei(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Ji(t,e.child,null,a),t.child.memoizedState=rd(a),t.memoizedState=nd,s);if(!(t.mode&1))return ll(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error($(419)),r=Ju(s,r,void 0),ll(e,t,a,r)}if(o=(a&e.childLanes)!==0,Tt||o){if(r=ut,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,tr(e,i),gn(r,e,i,-1))}return jf(),r=Ju(Error($(421))),ll(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=uj.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Bt=jr(i.nextSibling),Yt=t,qe=!0,hn=null,e!==null&&(Xt[Zt++]=Wn,Xt[Zt++]=Hn,Xt[Zt++]=ii,Wn=e.id,Hn=e.overflow,ii=t),t=vf(t,r.children),t.flags|=4096,t)}function Vm(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Kc(e.return,t,n)}function ec(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function wg(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Dt(e,t,r.children,n),r=$e.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Vm(e,n,t);else if(e.tag===19)Vm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ee($e,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&to(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ec(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&to(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ec(t,!0,n,null,s);break;case"together":ec(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Cl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function nr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ai|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($(153));if(t.child!==null){for(e=t.child,n=Nr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Nr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function XS(e,t,n){switch(t.tag){case 3:gg(t),Zi();break;case 5:Hv(t);break;case 1:Lt(t.type)&&Gl(t);break;case 4:uf(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ee(Zl,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ee($e,$e.current&1),t.flags|=128,null):n&t.child.childLanes?xg(e,t,n):(Ee($e,$e.current&1),e=nr(e,t,n),e!==null?e.sibling:null);Ee($e,$e.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return wg(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ee($e,$e.current),r)break;return null;case 22:case 23:return t.lanes=0,yg(e,t,n)}return nr(e,t,n)}var bg,id,Sg,jg;bg=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};id=function(){};Sg=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Gr(Pn.current);var s=null;switch(n){case"input":i=_c(e,i),r=_c(e,r),s=[];break;case"select":i=ze({},i,{value:void 0}),r=ze({},r,{value:void 0}),s=[];break;case"textarea":i=Ec(e,i),r=Ec(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Hl)}Pc(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Zs.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(o=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==o&&(u!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&o[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Zs.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Pe("scroll",e),s||o===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};jg=function(e,t,n,r){n!==r&&(t.flags|=4)};function js(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ZS(e,t,n){var r=t.pendingProps;switch(tf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(t),null;case 1:return Lt(t.type)&&Ql(),vt(t),null;case 3:return r=t.stateNode,es(),Oe(Rt),Oe(jt),df(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(sl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,hn!==null&&(fd(hn),hn=null))),id(e,t),vt(t),null;case 5:cf(t);var i=Gr(ca.current);if(n=t.type,e!==null&&t.stateNode!=null)Sg(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error($(166));return vt(t),null}if(e=Gr(Pn.current),sl(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[_n]=t,r[oa]=s,e=(t.mode&1)!==0,n){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(i=0;i<Ts.length;i++)Pe(Ts[i],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":Xh(r,s),Pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Pe("invalid",r);break;case"textarea":Jh(r,s),Pe("invalid",r)}Pc(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&il(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&il(r.textContent,o,e),i=["children",""+o]):Zs.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Pe("scroll",r)}switch(n){case"input":Ka(r),Zh(r,s,!0);break;case"textarea":Ka(r),em(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Hl)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ky(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[_n]=t,e[oa]=r,bg(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ac(n,r),n){case"dialog":Pe("cancel",e),Pe("close",e),i=r;break;case"iframe":case"object":case"embed":Pe("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ts.length;i++)Pe(Ts[i],e);i=r;break;case"source":Pe("error",e),i=r;break;case"img":case"image":case"link":Pe("error",e),Pe("load",e),i=r;break;case"details":Pe("toggle",e),i=r;break;case"input":Xh(e,r),i=_c(e,r),Pe("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ze({},r,{value:void 0}),Pe("invalid",e);break;case"textarea":Jh(e,r),i=Ec(e,r),Pe("invalid",e);break;default:i=r}Pc(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var u=o[s];s==="style"?Jy(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Xy(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Js(e,u):typeof u=="number"&&Js(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Zs.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Pe("scroll",e):u!=null&&Ud(e,s,u,a))}switch(n){case"input":Ka(e),Zh(e,r,!1);break;case"textarea":Ka(e),em(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Pr(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Li(e,!!r.multiple,s,!1):r.defaultValue!=null&&Li(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Hl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vt(t),null;case 6:if(e&&t.stateNode!=null)jg(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error($(166));if(n=Gr(ca.current),Gr(Pn.current),sl(t)){if(r=t.stateNode,n=t.memoizedProps,r[_n]=t,(s=r.nodeValue!==n)&&(e=Yt,e!==null))switch(e.tag){case 3:il(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&il(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_n]=t,t.stateNode=r}return vt(t),null;case 13:if(Oe($e),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(qe&&Bt!==null&&t.mode&1&&!(t.flags&128))Uv(),Zi(),t.flags|=98560,s=!1;else if(s=sl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error($(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[_n]=t}else Zi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vt(t),s=!1}else hn!==null&&(fd(hn),hn=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||$e.current&1?st===0&&(st=3):jf())),t.updateQueue!==null&&(t.flags|=4),vt(t),null);case 4:return es(),id(e,t),e===null&&aa(t.stateNode.containerInfo),vt(t),null;case 10:return af(t.type._context),vt(t),null;case 17:return Lt(t.type)&&Ql(),vt(t),null;case 19:if(Oe($e),s=t.memoizedState,s===null)return vt(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)js(s,!1);else{if(st!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=to(e),a!==null){for(t.flags|=128,js(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ee($e,$e.current&1|2),t.child}e=e.sibling}s.tail!==null&&Xe()>ns&&(t.flags|=128,r=!0,js(s,!1),t.lanes=4194304)}else{if(!r)if(e=to(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),js(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!qe)return vt(t),null}else 2*Xe()-s.renderingStartTime>ns&&n!==1073741824&&(t.flags|=128,r=!0,js(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Xe(),t.sibling=null,n=$e.current,Ee($e,r?n&1|2:n&1),t):(vt(t),null);case 22:case 23:return Sf(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Vt&1073741824&&(vt(t),t.subtreeFlags&6&&(t.flags|=8192)):vt(t),null;case 24:return null;case 25:return null}throw Error($(156,t.tag))}function JS(e,t){switch(tf(t),t.tag){case 1:return Lt(t.type)&&Ql(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return es(),Oe(Rt),Oe(jt),df(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return cf(t),null;case 13:if(Oe($e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($(340));Zi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Oe($e),null;case 4:return es(),null;case 10:return af(t.type._context),null;case 22:case 23:return Sf(),null;case 24:return null;default:return null}}var ol=!1,wt=!1,ej=typeof WeakSet=="function"?WeakSet:Set,X=null;function Mi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(e,t,r)}else n.current=null}function sd(e,t,n){try{n()}catch(r){He(e,t,r)}}var zm=!1;function tj(e,t){if(Vc=Bl,e=Nv(),Jd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,u=-1,c=0,d=0,f=e,m=null;t:for(;;){for(var y;f!==n||i!==0&&f.nodeType!==3||(o=a+i),f!==s||r!==0&&f.nodeType!==3||(u=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===e)break t;if(m===n&&++c===i&&(o=a),m===s&&++d===r&&(u=a),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=o===-1||u===-1?null:{start:o,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(zc={focusedElem:e,selectionRange:n},Bl=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,j=v.memoizedState,g=t.stateNode,h=g.getSnapshotBeforeUpdate(t.elementType===t.type?w:dn(t.type,w),j);g.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(S){He(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return v=zm,zm=!1,v}function Bs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&sd(t,n,s)}i=i.next}while(i!==r)}}function Wo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ad(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function kg(e){var t=e.alternate;t!==null&&(e.alternate=null,kg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[_n],delete t[oa],delete t[Wc],delete t[RS],delete t[LS])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Cg(e){return e.tag===5||e.tag===3||e.tag===4}function Bm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Cg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ld(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Hl));else if(r!==4&&(e=e.child,e!==null))for(ld(e,t,n),e=e.sibling;e!==null;)ld(e,t,n),e=e.sibling}function od(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(od(e,t,n),e=e.sibling;e!==null;)od(e,t,n),e=e.sibling}var dt=null,fn=!1;function cr(e,t,n){for(n=n.child;n!==null;)_g(e,t,n),n=n.sibling}function _g(e,t,n){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(Lo,n)}catch{}switch(n.tag){case 5:wt||Mi(n,t);case 6:var r=dt,i=fn;dt=null,cr(e,t,n),dt=r,fn=i,dt!==null&&(fn?(e=dt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):dt.removeChild(n.stateNode));break;case 18:dt!==null&&(fn?(e=dt,n=n.stateNode,e.nodeType===8?Hu(e.parentNode,n):e.nodeType===1&&Hu(e,n),ra(e)):Hu(dt,n.stateNode));break;case 4:r=dt,i=fn,dt=n.stateNode.containerInfo,fn=!0,cr(e,t,n),dt=r,fn=i;break;case 0:case 11:case 14:case 15:if(!wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&sd(n,t,a),i=i.next}while(i!==r)}cr(e,t,n);break;case 1:if(!wt&&(Mi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){He(n,t,o)}cr(e,t,n);break;case 21:cr(e,t,n);break;case 22:n.mode&1?(wt=(r=wt)||n.memoizedState!==null,cr(e,t,n),wt=r):cr(e,t,n);break;default:cr(e,t,n)}}function Ym(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new ej),t.forEach(function(r){var i=cj.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function cn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:dt=o.stateNode,fn=!1;break e;case 3:dt=o.stateNode.containerInfo,fn=!0;break e;case 4:dt=o.stateNode.containerInfo,fn=!0;break e}o=o.return}if(dt===null)throw Error($(160));_g(s,a,i),dt=null,fn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){He(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ng(t,e),t=t.sibling}function Ng(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(cn(t,e),kn(e),r&4){try{Bs(3,e,e.return),Wo(3,e)}catch(w){He(e,e.return,w)}try{Bs(5,e,e.return)}catch(w){He(e,e.return,w)}}break;case 1:cn(t,e),kn(e),r&512&&n!==null&&Mi(n,n.return);break;case 5:if(cn(t,e),kn(e),r&512&&n!==null&&Mi(n,n.return),e.flags&32){var i=e.stateNode;try{Js(i,"")}catch(w){He(e,e.return,w)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,o=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Qy(i,s),Ac(o,a);var c=Ac(o,s);for(a=0;a<u.length;a+=2){var d=u[a],f=u[a+1];d==="style"?Jy(i,f):d==="dangerouslySetInnerHTML"?Xy(i,f):d==="children"?Js(i,f):Ud(i,d,f,c)}switch(o){case"input":Nc(i,s);break;case"textarea":Gy(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Li(i,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?Li(i,!!s.multiple,s.defaultValue,!0):Li(i,!!s.multiple,s.multiple?[]:"",!1))}i[oa]=s}catch(w){He(e,e.return,w)}}break;case 6:if(cn(t,e),kn(e),r&4){if(e.stateNode===null)throw Error($(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(w){He(e,e.return,w)}}break;case 3:if(cn(t,e),kn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ra(t.containerInfo)}catch(w){He(e,e.return,w)}break;case 4:cn(t,e),kn(e);break;case 13:cn(t,e),kn(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(wf=Xe())),r&4&&Ym(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(wt=(c=wt)||d,cn(t,e),wt=c):cn(t,e),kn(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(X=e,d=e.child;d!==null;){for(f=X=d;X!==null;){switch(m=X,y=m.child,m.tag){case 0:case 11:case 14:case 15:Bs(4,m,m.return);break;case 1:Mi(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(w){He(r,n,w)}}break;case 5:Mi(m,m.return);break;case 22:if(m.memoizedState!==null){Hm(f);continue}}y!==null?(y.return=m,X=y):Hm(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=Zy("display",a))}catch(w){He(e,e.return,w)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(w){He(e,e.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:cn(t,e),kn(e),r&4&&Ym(e);break;case 21:break;default:cn(t,e),kn(e)}}function kn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Cg(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Js(i,""),r.flags&=-33);var s=Bm(e);od(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=Bm(e);ld(e,o,a);break;default:throw Error($(161))}}catch(u){He(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function nj(e,t,n){X=e,Dg(e)}function Dg(e,t,n){for(var r=(e.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||ol;if(!a){var o=i.alternate,u=o!==null&&o.memoizedState!==null||wt;o=ol;var c=wt;if(ol=a,(wt=u)&&!c)for(X=i;X!==null;)a=X,u=a.child,a.tag===22&&a.memoizedState!==null?Qm(i):u!==null?(u.return=a,X=u):Qm(i);for(;s!==null;)X=s,Dg(s),s=s.sibling;X=i,ol=o,wt=c}Wm(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):Wm(e)}}function Wm(e){for(;X!==null;){var t=X;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:wt||Wo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!wt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:dn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Em(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Em(t,a,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&ra(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}wt||t.flags&512&&ad(t)}catch(m){He(t,t.return,m)}}if(t===e){X=null;break}if(n=t.sibling,n!==null){n.return=t.return,X=n;break}X=t.return}}function Hm(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var n=t.sibling;if(n!==null){n.return=t.return,X=n;break}X=t.return}}function Qm(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Wo(4,t)}catch(u){He(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){He(t,i,u)}}var s=t.return;try{ad(t)}catch(u){He(t,s,u)}break;case 5:var a=t.return;try{ad(t)}catch(u){He(t,a,u)}}}catch(u){He(t,t.return,u)}if(t===e){X=null;break}var o=t.sibling;if(o!==null){o.return=t.return,X=o;break}X=t.return}}var rj=Math.ceil,io=sr.ReactCurrentDispatcher,gf=sr.ReactCurrentOwner,nn=sr.ReactCurrentBatchConfig,ge=0,ut=null,tt=null,ft=0,Vt=0,Fi=Mr(0),st=0,ma=null,ai=0,Ho=0,xf=0,Ys=null,Ft=null,wf=0,ns=1/0,zn=null,so=!1,ud=null,Cr=null,ul=!1,vr=null,ao=0,Ws=0,cd=null,_l=-1,Nl=0;function It(){return ge&6?Xe():_l!==-1?_l:_l=Xe()}function _r(e){return e.mode&1?ge&2&&ft!==0?ft&-ft:US.transition!==null?(Nl===0&&(Nl=dv()),Nl):(e=_e,e!==0||(e=window.event,e=e===void 0?16:gv(e.type)),e):1}function gn(e,t,n,r){if(50<Ws)throw Ws=0,cd=null,Error($(185));Sa(e,n,r),(!(ge&2)||e!==ut)&&(e===ut&&(!(ge&2)&&(Ho|=n),st===4&&pr(e,ft)),qt(e,r),n===1&&ge===0&&!(t.mode&1)&&(ns=Xe()+500,zo&&Fr()))}function qt(e,t){var n=e.callbackNode;Ub(e,t);var r=zl(e,e===ut?ft:0);if(r===0)n!==null&&rm(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&rm(n),t===1)e.tag===0?qS(Gm.bind(null,e)):Rv(Gm.bind(null,e)),FS(function(){!(ge&6)&&Fr()}),n=null;else{switch(fv(r)){case 1:n=Yd;break;case 4:n=uv;break;case 16:n=Vl;break;case 536870912:n=cv;break;default:n=Vl}n=Tg(n,Eg.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Eg(e,t){if(_l=-1,Nl=0,ge&6)throw Error($(327));var n=e.callbackNode;if(zi()&&e.callbackNode!==n)return null;var r=zl(e,e===ut?ft:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=lo(e,r);else{t=r;var i=ge;ge|=2;var s=Pg();(ut!==e||ft!==t)&&(zn=null,ns=Xe()+500,Jr(e,t));do try{aj();break}catch(o){Ig(e,o)}while(1);sf(),io.current=s,ge=i,tt!==null?t=0:(ut=null,ft=0,t=st)}if(t!==0){if(t===2&&(i=Rc(e),i!==0&&(r=i,t=dd(e,i))),t===1)throw n=ma,Jr(e,0),pr(e,r),qt(e,Xe()),n;if(t===6)pr(e,r);else{if(i=e.current.alternate,!(r&30)&&!ij(i)&&(t=lo(e,r),t===2&&(s=Rc(e),s!==0&&(r=s,t=dd(e,s))),t===1))throw n=ma,Jr(e,0),pr(e,r),qt(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error($(345));case 2:Yr(e,Ft,zn);break;case 3:if(pr(e,r),(r&130023424)===r&&(t=wf+500-Xe(),10<t)){if(zl(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){It(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Yc(Yr.bind(null,e,Ft,zn),t);break}Yr(e,Ft,zn);break;case 4:if(pr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-vn(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=Xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rj(r/1960))-r,10<r){e.timeoutHandle=Yc(Yr.bind(null,e,Ft,zn),r);break}Yr(e,Ft,zn);break;case 5:Yr(e,Ft,zn);break;default:throw Error($(329))}}}return qt(e,Xe()),e.callbackNode===n?Eg.bind(null,e):null}function dd(e,t){var n=Ys;return e.current.memoizedState.isDehydrated&&(Jr(e,t).flags|=256),e=lo(e,t),e!==2&&(t=Ft,Ft=n,t!==null&&fd(t)),e}function fd(e){Ft===null?Ft=e:Ft.push.apply(Ft,e)}function ij(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!xn(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function pr(e,t){for(t&=~xf,t&=~Ho,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-vn(t),r=1<<n;e[n]=-1,t&=~r}}function Gm(e){if(ge&6)throw Error($(327));zi();var t=zl(e,0);if(!(t&1))return qt(e,Xe()),null;var n=lo(e,t);if(e.tag!==0&&n===2){var r=Rc(e);r!==0&&(t=r,n=dd(e,r))}if(n===1)throw n=ma,Jr(e,0),pr(e,t),qt(e,Xe()),n;if(n===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Yr(e,Ft,zn),qt(e,Xe()),null}function bf(e,t){var n=ge;ge|=1;try{return e(t)}finally{ge=n,ge===0&&(ns=Xe()+500,zo&&Fr())}}function li(e){vr!==null&&vr.tag===0&&!(ge&6)&&zi();var t=ge;ge|=1;var n=nn.transition,r=_e;try{if(nn.transition=null,_e=1,e)return e()}finally{_e=r,nn.transition=n,ge=t,!(ge&6)&&Fr()}}function Sf(){Vt=Fi.current,Oe(Fi)}function Jr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,MS(n)),tt!==null)for(n=tt.return;n!==null;){var r=n;switch(tf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ql();break;case 3:es(),Oe(Rt),Oe(jt),df();break;case 5:cf(r);break;case 4:es();break;case 13:Oe($e);break;case 19:Oe($e);break;case 10:af(r.type._context);break;case 22:case 23:Sf()}n=n.return}if(ut=e,tt=e=Nr(e.current,null),ft=Vt=t,st=0,ma=null,xf=Ho=ai=0,Ft=Ys=null,Qr!==null){for(t=0;t<Qr.length;t++)if(n=Qr[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Qr=null}return e}function Ig(e,t){do{var n=tt;try{if(sf(),jl.current=ro,no){for(var r=Ve.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}no=!1}if(si=0,ot=it=Ve=null,zs=!1,da=0,gf.current=null,n===null||n.return===null){st=1,ma=t,tt=null;break}e:{var s=e,a=n.return,o=n,u=t;if(t=ft,o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Tm(a);if(y!==null){y.flags&=-257,Rm(y,a,o,s,t),y.mode&1&&Fm(s,c,t),t=y,u=c;var v=t.updateQueue;if(v===null){var w=new Set;w.add(u),t.updateQueue=w}else v.add(u);break e}else{if(!(t&1)){Fm(s,c,t),jf();break e}u=Error($(426))}}else if(qe&&o.mode&1){var j=Tm(a);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Rm(j,a,o,s,t),nf(ts(u,o));break e}}s=u=ts(u,o),st!==4&&(st=2),Ys===null?Ys=[s]:Ys.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var g=hg(s,u,t);Dm(s,g);break e;case 1:o=u;var h=s.type,p=s.stateNode;if(!(s.flags&128)&&(typeof h.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Cr===null||!Cr.has(p)))){s.flags|=65536,t&=-t,s.lanes|=t;var S=mg(s,o,t);Dm(s,S);break e}}s=s.return}while(s!==null)}Og(n)}catch(b){t=b,tt===n&&n!==null&&(tt=n=n.return);continue}break}while(1)}function Pg(){var e=io.current;return io.current=ro,e===null?ro:e}function jf(){(st===0||st===3||st===2)&&(st=4),ut===null||!(ai&268435455)&&!(Ho&268435455)||pr(ut,ft)}function lo(e,t){var n=ge;ge|=2;var r=Pg();(ut!==e||ft!==t)&&(zn=null,Jr(e,t));do try{sj();break}catch(i){Ig(e,i)}while(1);if(sf(),ge=n,io.current=r,tt!==null)throw Error($(261));return ut=null,ft=0,st}function sj(){for(;tt!==null;)Ag(tt)}function aj(){for(;tt!==null&&!Pb();)Ag(tt)}function Ag(e){var t=Fg(e.alternate,e,Vt);e.memoizedProps=e.pendingProps,t===null?Og(e):tt=t,gf.current=null}function Og(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=JS(n,t),n!==null){n.flags&=32767,tt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{st=6,tt=null;return}}else if(n=ZS(n,t,Vt),n!==null){tt=n;return}if(t=t.sibling,t!==null){tt=t;return}tt=t=e}while(t!==null);st===0&&(st=5)}function Yr(e,t,n){var r=_e,i=nn.transition;try{nn.transition=null,_e=1,lj(e,t,n,r)}finally{nn.transition=i,_e=r}return null}function lj(e,t,n,r){do zi();while(vr!==null);if(ge&6)throw Error($(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if($b(e,s),e===ut&&(tt=ut=null,ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ul||(ul=!0,Tg(Vl,function(){return zi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=nn.transition,nn.transition=null;var a=_e;_e=1;var o=ge;ge|=4,gf.current=null,tj(e,n),Ng(n,e),NS(zc),Bl=!!Vc,zc=Vc=null,e.current=n,nj(n),Ab(),ge=o,_e=a,nn.transition=s}else e.current=n;if(ul&&(ul=!1,vr=e,ao=i),s=e.pendingLanes,s===0&&(Cr=null),Fb(n.stateNode),qt(e,Xe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(so)throw so=!1,e=ud,ud=null,e;return ao&1&&e.tag!==0&&zi(),s=e.pendingLanes,s&1?e===cd?Ws++:(Ws=0,cd=e):Ws=0,Fr(),null}function zi(){if(vr!==null){var e=fv(ao),t=nn.transition,n=_e;try{if(nn.transition=null,_e=16>e?16:e,vr===null)var r=!1;else{if(e=vr,vr=null,ao=0,ge&6)throw Error($(331));var i=ge;for(ge|=4,X=e.current;X!==null;){var s=X,a=s.child;if(X.flags&16){var o=s.deletions;if(o!==null){for(var u=0;u<o.length;u++){var c=o[u];for(X=c;X!==null;){var d=X;switch(d.tag){case 0:case 11:case 15:Bs(8,d,s)}var f=d.child;if(f!==null)f.return=d,X=f;else for(;X!==null;){d=X;var m=d.sibling,y=d.return;if(kg(d),d===c){X=null;break}if(m!==null){m.return=y,X=m;break}X=y}}}var v=s.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var j=w.sibling;w.sibling=null,w=j}while(w!==null)}}X=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,X=a;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Bs(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,X=g;break e}X=s.return}}var h=e.current;for(X=h;X!==null;){a=X;var p=a.child;if(a.subtreeFlags&2064&&p!==null)p.return=a,X=p;else e:for(a=h;X!==null;){if(o=X,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Wo(9,o)}}catch(b){He(o,o.return,b)}if(o===a){X=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,X=S;break e}X=o.return}}if(ge=i,Fr(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(Lo,e)}catch{}r=!0}return r}finally{_e=n,nn.transition=t}}return!1}function Km(e,t,n){t=ts(n,t),t=hg(e,t,1),e=kr(e,t,1),t=It(),e!==null&&(Sa(e,1,t),qt(e,t))}function He(e,t,n){if(e.tag===3)Km(e,e,n);else for(;t!==null;){if(t.tag===3){Km(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cr===null||!Cr.has(r))){e=ts(n,e),e=mg(t,e,1),t=kr(t,e,1),e=It(),t!==null&&(Sa(t,1,e),qt(t,e));break}}t=t.return}}function oj(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=It(),e.pingedLanes|=e.suspendedLanes&n,ut===e&&(ft&n)===n&&(st===4||st===3&&(ft&130023424)===ft&&500>Xe()-wf?Jr(e,0):xf|=n),qt(e,t)}function Mg(e,t){t===0&&(e.mode&1?(t=Ja,Ja<<=1,!(Ja&130023424)&&(Ja=4194304)):t=1);var n=It();e=tr(e,t),e!==null&&(Sa(e,t,n),qt(e,n))}function uj(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Mg(e,n)}function cj(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(t),Mg(e,n)}var Fg;Fg=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Rt.current)Tt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Tt=!1,XS(e,t,n);Tt=!!(e.flags&131072)}else Tt=!1,qe&&t.flags&1048576&&Lv(t,Xl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Cl(e,t),e=t.pendingProps;var i=Xi(t,jt.current);Vi(t,n),i=hf(null,t,r,e,i,n);var s=mf();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lt(r)?(s=!0,Gl(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,of(t),i.updater=Bo,t.stateNode=i,i._reactInternals=t,Zc(t,r,e,n),t=td(null,t,r,!0,s,n)):(t.tag=0,qe&&s&&ef(t),Dt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Cl(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=fj(r),e=dn(r,e),i){case 0:t=ed(null,t,r,e,n);break e;case 1:t=Um(null,t,r,e,n);break e;case 11:t=Lm(null,t,r,e,n);break e;case 14:t=qm(null,t,r,dn(r.type,e),n);break e}throw Error($(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:dn(r,i),ed(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:dn(r,i),Um(e,t,r,i,n);case 3:e:{if(gg(t),e===null)throw Error($(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Vv(e,t),eo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=ts(Error($(423)),t),t=$m(e,t,r,n,i);break e}else if(r!==i){i=ts(Error($(424)),t),t=$m(e,t,r,n,i);break e}else for(Bt=jr(t.stateNode.containerInfo.firstChild),Yt=t,qe=!0,hn=null,n=Wv(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zi(),r===i){t=nr(e,t,n);break e}Dt(e,t,r,n)}t=t.child}return t;case 5:return Hv(t),e===null&&Gc(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,Bc(r,i)?a=null:s!==null&&Bc(r,s)&&(t.flags|=32),vg(e,t),Dt(e,t,a,n),t.child;case 6:return e===null&&Gc(t),null;case 13:return xg(e,t,n);case 4:return uf(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ji(t,null,r,n):Dt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:dn(r,i),Lm(e,t,r,i,n);case 7:return Dt(e,t,t.pendingProps,n),t.child;case 8:return Dt(e,t,t.pendingProps.children,n),t.child;case 12:return Dt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ee(Zl,r._currentValue),r._currentValue=a,s!==null)if(xn(s.value,a)){if(s.children===i.children&&!Rt.current){t=nr(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var u=o.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Kn(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Kc(s.return,n,t),o.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error($(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),Kc(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Dt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Vi(t,n),i=rn(i),r=r(i),t.flags|=1,Dt(e,t,r,n),t.child;case 14:return r=t.type,i=dn(r,t.pendingProps),i=dn(r.type,i),qm(e,t,r,i,n);case 15:return pg(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:dn(r,i),Cl(e,t),t.tag=1,Lt(r)?(e=!0,Gl(t)):e=!1,Vi(t,n),Bv(t,r,i),Zc(t,r,i,n),td(null,t,r,!0,e,n);case 19:return wg(e,t,n);case 22:return yg(e,t,n)}throw Error($(156,t.tag))};function Tg(e,t){return ov(e,t)}function dj(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(e,t,n,r){return new dj(e,t,n,r)}function kf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fj(e){if(typeof e=="function")return kf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Vd)return 11;if(e===zd)return 14}return 2}function Nr(e,t){var n=e.alternate;return n===null?(n=en(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dl(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")kf(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ci:return ei(n.children,i,s,t);case $d:a=8,i|=8;break;case Sc:return e=en(12,n,t,i|2),e.elementType=Sc,e.lanes=s,e;case jc:return e=en(13,n,t,i),e.elementType=jc,e.lanes=s,e;case kc:return e=en(19,n,t,i),e.elementType=kc,e.lanes=s,e;case Yy:return Qo(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case zy:a=10;break e;case By:a=9;break e;case Vd:a=11;break e;case zd:a=14;break e;case dr:a=16,r=null;break e}throw Error($(130,e==null?e:typeof e,""))}return t=en(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function ei(e,t,n,r){return e=en(7,e,r,t),e.lanes=n,e}function Qo(e,t,n,r){return e=en(22,e,r,t),e.elementType=Yy,e.lanes=n,e.stateNode={isHidden:!1},e}function tc(e,t,n){return e=en(6,e,null,t),e.lanes=n,e}function nc(e,t,n){return t=en(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hj(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tu(0),this.expirationTimes=Tu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Cf(e,t,n,r,i,s,a,o,u){return e=new hj(e,t,n,o,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=en(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},of(s),e}function mj(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ki,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Rg(e){if(!e)return Ar;e=e._reactInternals;e:{if(ci(e)!==e||e.tag!==1)throw Error($(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($(171))}if(e.tag===1){var n=e.type;if(Lt(n))return Tv(e,n,t)}return t}function Lg(e,t,n,r,i,s,a,o,u){return e=Cf(n,r,!0,e,i,s,a,o,u),e.context=Rg(null),n=e.current,r=It(),i=_r(n),s=Kn(r,i),s.callback=t??null,kr(n,s,i),e.current.lanes=i,Sa(e,i,r),qt(e,r),e}function Go(e,t,n,r){var i=t.current,s=It(),a=_r(i);return n=Rg(n),t.context===null?t.context=n:t.pendingContext=n,t=Kn(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=kr(i,t,a),e!==null&&(gn(e,i,a,s),Sl(e,i,a)),a}function oo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Xm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function _f(e,t){Xm(e,t),(e=e.alternate)&&Xm(e,t)}function pj(){return null}var qg=typeof reportError=="function"?reportError:function(e){console.error(e)};function Nf(e){this._internalRoot=e}Ko.prototype.render=Nf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($(409));Go(e,t,null,null)};Ko.prototype.unmount=Nf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;li(function(){Go(null,e,null,null)}),t[er]=null}};function Ko(e){this._internalRoot=e}Ko.prototype.unstable_scheduleHydration=function(e){if(e){var t=pv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<mr.length&&t!==0&&t<mr[n].priority;n++);mr.splice(n,0,e),n===0&&vv(e)}};function Df(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zm(){}function yj(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=oo(a);s.call(c)}}var a=Lg(t,r,e,0,null,!1,!1,"",Zm);return e._reactRootContainer=a,e[er]=a.current,aa(e.nodeType===8?e.parentNode:e),li(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var c=oo(u);o.call(c)}}var u=Cf(e,0,!1,null,null,!1,!1,"",Zm);return e._reactRootContainer=u,e[er]=u.current,aa(e.nodeType===8?e.parentNode:e),li(function(){Go(t,u,n,r)}),u}function Zo(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var u=oo(a);o.call(u)}}Go(t,a,e,i)}else a=yj(n,t,e,i,r);return oo(a)}hv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Fs(t.pendingLanes);n!==0&&(Wd(t,n|1),qt(t,Xe()),!(ge&6)&&(ns=Xe()+500,Fr()))}break;case 13:li(function(){var r=tr(e,1);if(r!==null){var i=It();gn(r,e,1,i)}}),_f(e,1)}};Hd=function(e){if(e.tag===13){var t=tr(e,134217728);if(t!==null){var n=It();gn(t,e,134217728,n)}_f(e,134217728)}};mv=function(e){if(e.tag===13){var t=_r(e),n=tr(e,t);if(n!==null){var r=It();gn(n,e,t,r)}_f(e,t)}};pv=function(){return _e};yv=function(e,t){var n=_e;try{return _e=e,t()}finally{_e=n}};Mc=function(e,t,n){switch(t){case"input":if(Nc(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Vo(r);if(!i)throw Error($(90));Hy(r),Nc(r,i)}}}break;case"textarea":Gy(e,n);break;case"select":t=n.value,t!=null&&Li(e,!!n.multiple,t,!1)}};nv=bf;rv=li;var vj={usingClientEntryPoint:!1,Events:[ka,Ei,Vo,ev,tv,bf]},ks={findFiberByHostInstance:Hr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},gj={bundleType:ks.bundleType,version:ks.version,rendererPackageName:ks.rendererPackageName,rendererConfig:ks.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=av(e),e===null?null:e.stateNode},findFiberByHostInstance:ks.findFiberByHostInstance||pj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cl.isDisabled&&cl.supportsFiber)try{Lo=cl.inject(gj),In=cl}catch{}}Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vj;Ht.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Df(t))throw Error($(200));return mj(e,t,null,n)};Ht.createRoot=function(e,t){if(!Df(e))throw Error($(299));var n=!1,r="",i=qg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Cf(e,1,!1,null,null,n,!1,r,i),e[er]=t.current,aa(e.nodeType===8?e.parentNode:e),new Nf(t)};Ht.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=av(t),e=e===null?null:e.stateNode,e};Ht.flushSync=function(e){return li(e)};Ht.hydrate=function(e,t,n){if(!Xo(t))throw Error($(200));return Zo(null,e,t,!0,n)};Ht.hydrateRoot=function(e,t,n){if(!Df(e))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=qg;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Lg(t,null,e,1,n??null,i,!1,s,a),e[er]=t.current,aa(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ko(t)};Ht.render=function(e,t,n){if(!Xo(t))throw Error($(200));return Zo(null,e,t,!1,n)};Ht.unmountComponentAtNode=function(e){if(!Xo(e))throw Error($(40));return e._reactRootContainer?(li(function(){Zo(null,null,e,!1,function(){e._reactRootContainer=null,e[er]=null})}),!0):!1};Ht.unstable_batchedUpdates=bf;Ht.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xo(n))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return Zo(e,t,n,!1,r)};Ht.version="18.2.0-next-9e3b772b8-20220608";function Ug(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ug)}catch(e){console.error(e)}}Ug(),Ly.exports=Ht;var $g=Ly.exports;const xj=Ny($g);var Jm=$g;wc.createRoot=Jm.createRoot,wc.hydrateRoot=Jm.hydrateRoot;var Jo={};(function(e){(function(t){t([],function(){var n=-1,r=-2,i=-3,s=-4,a=-5,o=function(v,w){w=w||{};var j=w.verbose||!1;j&&console.log("Normalize the JSON Object"),v=typeof v=="string"?this.JSON.parse(v):v,j&&console.log("Creating a empty dictionary");var g={strings:[],integers:[],floats:[]};j&&console.log("Creating the AST");var h=function k(_){j&&console.log("Calling recursiveAstBuilder with "+this.JSON.stringify(_));var C=typeof _;if(_===null)return{type:"null",index:i};if(typeof _>"u")return{type:"undefined",index:a};if(_ instanceof Array){var N=["@"];for(var D in _)_.hasOwnProperty(D)&&N.push(k(_[D]));return N}if(C==="object"){var N=["$"];for(var E in _)_.hasOwnProperty(E)&&(N.push(k(E)),N.push(k(_[E])));return N}if(_==="")return{type:"empty",index:s};if(C==="string"){var A=y.call(g.strings,_);return A==-1&&(g.strings.push(c(_)),A=g.strings.length-1),{type:"strings",index:A}}if(C==="number"&&_%1===0){var A=y.call(g.integers,_);return A==-1&&(g.integers.push(f(_)),A=g.integers.length-1),{type:"integers",index:A}}if(C==="number"){var A=y.call(g.floats,_);return A==-1&&(g.floats.push(_),A=g.floats.length-1),{type:"floats",index:A}}if(C==="boolean")return{type:"boolean",index:_?n:r};throw new Error("Unexpected argument of type "+typeof _)}(v),p=g.strings.length,S=g.integers.length;g.floats.length,j&&console.log("Parsing the dictionary");var b=g.strings.join("|");return b+="^"+g.integers.join("|"),b+="^"+g.floats.join("|"),j&&console.log("Parsing the structure"),b+="^"+function k(_){if(j&&console.log("Calling a recursiveParser with "+this.JSON.stringify(_)),_ instanceof Array){var C=_.shift();for(var N in _)_.hasOwnProperty(N)&&(C+=k(_[N])+"|");return(C[C.length-1]==="|"?C.slice(0,-1):C)+"]"}var D=_.type,E=_.index;if(D==="strings")return f(E);if(D==="integers")return f(p+E);if(D==="floats")return f(p+S+E);if(D==="boolean")return _.index;if(D==="null")return i;if(D==="undefined")return a;if(D==="empty")return s;throw new TypeError("The item is alien!")}(h),j&&console.log("Ending parser"),w.debug?{dictionary:g,ast:h,packed:b}:b},u=function(v,w){w=w||{};var j=v.split("^");w.verbose&&console.log("Building dictionary");var g=[],h=j[0];if(h!==""){h=h.split("|"),w.verbose&&console.log("Parse the strings dictionary");for(var p=0,S=h.length;p<S;p++)g.push(d(h[p]))}if(h=j[1],h!==""){h=h.split("|"),w.verbose&&console.log("Parse the integers dictionary");for(var p=0,S=h.length;p<S;p++)g.push(m(h[p]))}if(h=j[2],h!==""){h=h.split("|"),w.verbose&&console.log("Parse the floats dictionary");for(var p=0,S=h.length;p<S;p++)g.push(parseFloat(h[p]))}h=null,w.verbose&&console.log("Tokenizing the structure");for(var b="",k=[],_=j[3].length,p=0;p<_;p++){var C=j[3].charAt(p);C==="|"||C==="$"||C==="@"||C==="]"?(b&&(k.push(m(b)),b=""),C!=="|"&&k.push(C)):b+=C}var N=k.length,D=0;return w.verbose&&console.log("Starting recursive parser"),function E(){var A=k[D++];if(w.verbose&&console.log("Reading collection type "+(A==="$"?"object":"Array")),A==="@"){for(var O=[];D<N;D++){var T=k[D];if(w.verbose&&console.log("Read "+T+" symbol"),T==="]")return O;if(T==="@"||T==="$")O.push(E());else switch(T){case n:O.push(!0);break;case r:O.push(!1);break;case i:O.push(null);break;case a:O.push(void 0);break;case s:O.push("");break;default:O.push(g[T])}}return w.verbose&&console.log("Parsed "+this.JSON.stringify(O)),O}if(A==="$"){for(var O={};D<N;D++){var q=k[D];if(q==="]")return O;q===s?q="":q=g[q];var T=k[++D];if(T==="@"||T==="$")O[q]=E();else switch(T){case n:O[q]=!0;break;case r:O[q]=!1;break;case i:O[q]=null;break;case a:O[q]=void 0;break;case s:O[q]="";break;default:O[q]=g[T]}}return w.verbose&&console.log("Parsed "+this.JSON.stringify(O)),O}throw new TypeError("Bad token "+A+" isn't a type")}()},c=function(v){return typeof v!="string"?v:v.replace(/[\+ \|\^\%]/g,function(w){return{" ":"+","+":"%2B","|":"%7C","^":"%5E","%":"%25"}[w]})},d=function(v){return typeof v!="string"?v:v.replace(/\+|%2B|%7C|%5E|%25/g,function(w){return{"+":" ","%2B":"+","%7C":"|","%5E":"^","%25":"%"}[w]})},f=function(v){return Number.prototype.toString.call(v,36).toUpperCase()},m=function(v){return parseInt(v,36)},y=Array.prototype.indexOf||function(v,w){for(var j=w||0,g=this.length;j<g;j++)if(this[j]===v)return j;return-1};return{JSON,pack:o,unpack:u}})})(function(t,n){var r=n();for(var i in r)e[i]=r[i]})})(Jo);let wj=0;function Ie(e,t){const n=`atom${++wj}`,r={toString:()=>n};return typeof e=="function"?r.read=e:(r.init=e,r.read=i=>i(r),r.write=(i,s,a)=>s(r,typeof a=="function"?a(i(r)):a)),t&&(r.write=t),r}const ep=e=>"init"in e,tp=e=>!!e.write,uo=new WeakMap,bj=(e,t)=>{uo.set(e,t),e.catch(()=>{}).finally(()=>uo.delete(e))},np=(e,t)=>{const n=uo.get(e);n&&(uo.delete(e),n(t))},rp=(e,t)=>{e.status="fulfilled",e.value=t},ip=(e,t)=>{e.status="rejected",e.reason=t},Sj=e=>typeof(e==null?void 0:e.then)=="function",dl=(e,t)=>"v"in e&&"v"in t&&Object.is(e.v,t.v),sp=(e,t)=>"e"in e&&"e"in t&&Object.is(e.e,t.e),Cs=e=>"v"in e&&e.v instanceof Promise,jj=(e,t)=>"v"in e&&"v"in t&&e.v.orig&&e.v.orig===t.v.orig,fl=e=>{if("e"in e)throw e.e;return e.v},kj=()=>{const e=new WeakMap,t=new WeakMap,n=new Map;let r,i;const s=C=>e.get(C),a=(C,N)=>{const D=e.get(C);if(e.set(C,N),n.has(C)||n.set(C,D),D&&Cs(D)){const E="v"in N?N.v instanceof Promise?N.v:Promise.resolve(N.v):Promise.reject(N.e);D.v!==E&&np(D.v,E)}},o=(C,N,D)=>{const E=new Map;let A=!1;D.forEach((O,T)=>{!O&&T===C&&(O=N),O&&(E.set(T,O),N.d.get(T)!==O&&(A=!0))}),(A||N.d.size!==E.size)&&(N.d=E)},u=(C,N,D)=>{const E=s(C),A={d:(E==null?void 0:E.d)||new Map,v:N};if(D&&o(C,A,D),E&&dl(E,A)&&E.d===A.d)return E;if(E&&Cs(E)&&Cs(A)&&jj(E,A)){if(E.d===A.d)return E;A.v=E.v}return a(C,A),A},c=(C,N,D,E)=>{if(Sj(N)){let A;const O=new Promise((T,q)=>{let z=!1;N.then(Y=>{if(!z){z=!0;const M=s(C),U=u(C,O,D);rp(O,Y),T(Y),t.has(C)&&(M==null?void 0:M.d)!==U.d&&b(C,U,M==null?void 0:M.d)}},Y=>{if(!z){z=!0;const M=s(C),U=u(C,O,D);ip(O,Y),q(Y),t.has(C)&&(M==null?void 0:M.d)!==U.d&&b(C,U,M==null?void 0:M.d)}}),A=Y=>{z||(z=!0,Y.then(M=>rp(O,M),M=>ip(O,M)),T(Y))}});return O.orig=N,O.status="pending",bj(O,T=>{T&&A(T),E==null||E()}),u(C,O,D)}return u(C,N,D)},d=(C,N,D)=>{const E=s(C),A={d:(E==null?void 0:E.d)||new Map,e:N};return D&&o(C,A,D),E&&sp(E,A)&&E.d===A.d?E:(a(C,A),A)},f=(C,N)=>{const D=s(C);if(!N&&D&&(t.has(C)||Array.from(D.d).every(([Y,M])=>Y===C||f(Y)===M)))return D;const E=new Map;let A=!0;const O=Y=>{if(Y===C){const U=s(Y);if(U)return E.set(Y,U),fl(U);if(ep(Y))return E.set(Y,void 0),Y.init;throw new Error("no atom init")}const M=f(Y);return E.set(Y,M),fl(M)};let T,q;const z={get signal(){return T||(T=new AbortController),T.signal},get setSelf(){return!q&&tp(C)&&(q=(...Y)=>{if(!A)return h(C,...Y)}),q}};try{const Y=C.read(O,z);return c(C,Y,E,()=>T==null?void 0:T.abort())}catch(Y){return d(C,Y,E)}finally{A=!1}},m=C=>fl(f(C)),y=C=>{let N=t.get(C);return N||(N=p(C)),N},v=(C,N)=>!N.l.size&&(!N.t.size||N.t.size===1&&N.t.has(C)),w=C=>{const N=t.get(C);N&&v(C,N)&&S(C)},j=C=>{const N=new Map,D=new WeakMap,E=T=>{var q;const z=new Set((q=t.get(T))==null?void 0:q.t);return n.forEach((Y,M)=>{var U;(U=s(M))!=null&&U.d.has(T)&&z.add(M)}),z},A=T=>{E(T).forEach(q=>{q!==T&&(N.set(q,(N.get(q)||new Set).add(T)),D.set(q,(D.get(q)||0)+1),A(q))})};A(C);const O=T=>{E(T).forEach(q=>{var z;if(q!==T){let Y=D.get(q);if(Y&&D.set(q,--Y),!Y){let M=!!((z=N.get(q))!=null&&z.size);if(M){const U=s(q),K=f(q,!0);M=!U||!dl(U,K)}M||N.forEach(U=>U.delete(q))}O(q)}})};O(C)},g=(C,...N)=>{let D=!0;const E=T=>fl(f(T)),A=(T,...q)=>{let z;if(T===C){if(!ep(T))throw new Error("atom not writable");const Y=s(T),M=c(T,q[0]);(!Y||!dl(Y,M))&&j(T)}else z=g(T,...q);if(!D){const Y=k()}return z},O=C.write(E,A,...N);return D=!1,O},h=(C,...N)=>{const D=g(C,...N),E=k();return D},p=(C,N,D)=>{var E;const A=D||[];(E=s(C))==null||E.d.forEach((T,q)=>{const z=t.get(q);z?z.t.add(C):q!==C&&p(q,C,A)}),f(C);const O={t:new Set(N&&[N]),l:new Set};if(t.set(C,O),tp(C)&&C.onMount){const{onMount:T}=C;A.push(()=>{const q=T((...z)=>h(C,...z));q&&(O.u=q)})}return D||A.forEach(T=>T()),O},S=C=>{var N;const D=(N=t.get(C))==null?void 0:N.u;D&&D(),t.delete(C);const E=s(C);E&&(Cs(E)&&np(E.v),E.d.forEach((A,O)=>{if(O!==C){const T=t.get(O);T&&(T.t.delete(C),v(O,T)&&S(O))}}))},b=(C,N,D)=>{const E=new Set(N.d.keys());D==null||D.forEach((A,O)=>{if(E.has(O)){E.delete(O);return}const T=t.get(O);T&&(T.t.delete(C),v(O,T)&&S(O))}),E.forEach(A=>{const O=t.get(A);O?O.t.add(C):t.has(C)&&p(A,C)})},k=()=>{let C;for(;n.size;){const N=Array.from(n);n.clear(),N.forEach(([D,E])=>{const A=s(D);if(A){const O=t.get(D);O&&A.d!==(E==null?void 0:E.d)&&b(D,A,E==null?void 0:E.d),O&&!(E&&!Cs(E)&&(dl(E,A)||sp(E,A)))&&O.l.forEach(T=>T())}})}};return{get:m,set:h,sub:(C,N)=>{const D=y(C),E=k(),A=D.l;return A.add(N),()=>{A.delete(N),w(C)}}}};let rc;const Vg=()=>(rc||(rc=kj()),rc),Cj=P.createContext(void 0),zg=e=>{const t=P.useContext(Cj);return(e==null?void 0:e.store)||t||Vg()},_j=e=>typeof(e==null?void 0:e.then)=="function",Nj=ne.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)});function we(e,t){const n=zg(t),[[r,i,s],a]=P.useReducer(c=>{const d=n.get(e);return Object.is(c[0],d)&&c[1]===n&&c[2]===e?c:[d,n,e]},void 0,()=>[n.get(e),n,e]);let o=r;(i!==n||s!==e)&&(a(),o=n.get(e));const u=t==null?void 0:t.delay;return P.useEffect(()=>{const c=n.sub(e,()=>{if(typeof u=="number"){setTimeout(a,u);return}a()});return a(),c},[n,e,u]),P.useDebugValue(o),_j(o)?Nj(o):o}function Dj(e,t){const n=zg(t);return P.useCallback((...i)=>n.set(e,...i),[n,e])}function Ef(e,t){return[we(e,t),Dj(e,t)]}function Ej(e){return new Promise((t,n)=>{setTimeout(()=>t(),e)})}const eu=function(){let e,t,n=navigator.languages&&navigator.languages[0]||navigator.language;if(!n)e="zh",t="CN";else{let o=n.split("-");e=o[0],o.length>1&&(t=o[1].toUpperCase())}let r=-new Date().getTimezoneOffset()/60;const s=new RegExp("Android|webOS|iPhone|iPad|BlackBerry|Windows Phone|Opera Mini|IEMobile|Mobile","i").test(navigator.userAgent),a=Ij();return{lang:e,district:t,timeZone:r,isMobile:s,browser:a}}();function Ij(){let e=navigator;if(e)return(e.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))>=0?"Opera":e.userAgent.indexOf("Chrome")>=0?"Chrome":e.userAgent.indexOf("Safari")>=0?"Safari":e.userAgent.indexOf("Firefox")>=0?"Firefox":e.userAgent.indexOf("MSIE")>=0||document.documentMode?"IE":"Unknown"}const di="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",ap=di.charCodeAt(0),Pj=di.charCodeAt(9),lp=di.charCodeAt(10),Aj=di.charCodeAt(35),op=di.charCodeAt(36),Oj=di.charCodeAt(61);function rr(e){if(e===null)return null;if(e===void 0)return;if(typeof e!="string")return Number.NaN;let t=e.length;if(t===0)return Number.NaN;let n=0;for(let r=0;r<t;r++){let i=e.charCodeAt(r),s;if(i<ap)return Number.NaN;if(i<=Pj)s=i-ap;else{if(i<lp)return Number.NaN;if(i<=Aj)s=i-lp+10;else{if(i<op)return Number.NaN;if(i<=Oj)s=i-op+36;else return Number.NaN}}n*=62,n+=s}return n}function An(e){if(e===null)return null;if(e===void 0)return;if(typeof e!="number"||e<0)return"";let t="";for(;t=di[e%62]+t,e=Math.floor(e/62),e!==0;);return t}function Pt(e){const t=P.useRef(e),n=P.useRef(),r=P.useRef(!1),i=P.useRef(!1),[,s]=P.useState(0);r.current&&(i.current=!0),P.useEffect(()=>(r.current||(n.current=t.current(),r.current=!0),s(1),()=>{i.current!==!1&&n.current&&n.current()}),[])}function up(e,...t){return e.replace(/{([0-9]+)}/g,function(n,r){let i=Number(n.substring(1,n.length-1));return t[i]??""})}const Bg=Vg();function de(e){return Bg.get(e)}function ae(e,t){Bg.set(e,t)}class Mj{constructor(t,n){x(this,"container");x(this,"errors",Ie([]));x(this,"memos");x(this,"fields");x(this,"readOnly",!1);this.container=t,this.memos=n,this.fields={},t==null||t.bands.push(this)}setError(t,n){if(this.fields[t]===!0){let r=de(this.errors);return n?(ae(this.errors,[...r,...n.map(i=>({name:t,error:i}))]),!0):r.length>0}return!1}clearError(t){this.fields[t]===!0&&ae(this.errors,[])}clearAllErrors(){ae(this.errors,[])}}const Yg=ne.createContext(void 0);function Wg(){return P.useContext(Yg)}function J(e){let{name:t,className:n,size:r,spin:i,fixWidth:s,border:a,pull:o,pulse:u,rotate:c,flip:d,inverse:f}=e,m="fa";return n&&(m+=" "+n),t&&(m+=" fa-"+t),r&&(m+=" fa-"+r),s&&(m+=" fa-fw"),a&&(m+=" fa-border"),o&&(m+=" fa-pull-"+o),i&&(m+=" fa-spin"),u&&(m+=" fa-pulse"),c&&(m+=" fa-rotate-"+c),d&&(m+=" fa-flip-"+d),f&&(m+=" fa-inverse"),l.jsx("i",{className:m})}function Ue(e){let{className:t,children:n,onClick:r}=e,i=t??"";r!==void 0&&(i+=" cursor-pointer ");let s=P.Children.toArray(n),a=s.length;return a>1&&s.splice(a-1,0,l.jsx("div",{className:"flex-fill"})),l.jsx("div",{className:"d-flex "+i,onClick:r,children:s.map((o,u)=>l.jsx(P.Fragment,{children:o},u))})}function as({size:e,className:t}){let n;if(e!==void 0){let i=`${(Number(e??2)+1)*.5}em`;n={width:i,height:i}}let r="spinner-border "+(t??"");return l.jsx("div",{className:r,role:"status",style:n,children:l.jsx("span",{className:"visually-hidden",children:"Loading..."})})}function If(){return l.jsx(as,{className:"text-info spinner-border-sm"})}function Pf({isWaiting:e}){let t={zIndex:30001,background:"rgba(0, 0, 0, 0.3)",left:0,top:0,right:0,bottom:0};return e!==!0?null:l.jsx("div",{className:"d-flex position-absolute align-items-center justify-content-center",style:t,children:l.jsx("i",{className:"fa fa-spinner fa-spin"})})}function fi(e){const[t,n]=P.useState(!1);let{children:r,onClick:i,tag:s,overtime:a}=e,o=P.useRef(!1),u;if(P.useEffect(()=>(o.current=!0,()=>{o.current=!1})),i&&(u=async c=>{a!==void 0&&setTimeout(()=>{n(!1)},a*1e3),n(!0);try{await i(c)}catch(d){throw console.error(d),d}finally{o.current===!0&&n(!1)}}),t===!0){let{className:c}=e;return c=(c??"")+" position-relative",l.jsxs("button",{...e,disabled:!0,className:c,children:[r,l.jsx(Pf,{isWaiting:!0})]})}else return s!==void 0?ne.createElement(s,{...e,onClick:u},r):l.jsx("button",{...e,onClick:u,children:r})}function Fj({className:e,isSubmiting:t,children:n,disabled:r}){return l.jsxs("button",{type:"submit",disabled:t||(r??!1),className:(e??"")+" position-relative",children:[n,t&&l.jsx(Pf,{isWaiting:!0})]})}function Af(e){let{onCheckChanged:t,children:n,labelClassName:r,inputClassName:i,gapClassName:s,name:a,defaultChecked:o}=e,[u,c]=P.useState(!1);async function d(m){if(t===void 0||u===!0)return;c(!0);let{name:y,checked:v}=m.currentTarget;await t(y,v),c(!1)}s===void 0&&(s=" me-3 ");let f;return u===!0&&(f=l.jsx(J,{name:"spinner",spin:!0,className:s+" text-info position-absolute mt-1 "})),l.jsxs("label",{className:(r??"")+" d-inline-block position-relative ",children:[f,l.jsx("input",{type:"checkbox",className:(i??" form-check-input ")+s,name:a,disabled:u,defaultChecked:o,onChange:d}),n]})}function Hg(e){let{name:t,items:n,onCheckChanged:r}=e,[i,s]=P.useState(!1);async function a(u){r!==void 0&&(s(!0),await r(u),s(!1))}let o;return i===!0&&(o=l.jsx("div",{className:"position-absolute d-flex align-items-center",style:{left:0,top:0,right:0,bottom:0},children:l.jsx(If,{})})),l.jsxs(l.Fragment,{children:[o,l.jsx(Tj,{name:t,items:n,onCheckChanged:a,disabled:i})]})}function Tj(e){let{name:t,items:n,onCheckChanged:r,disabled:i}=e,s="me-4 ";return i===!0&&(s+="text-light invisible "),l.jsx(l.Fragment,{children:n.map((a,o)=>{let[u,c,d,f]=a;async function m(){await r(u)}return l.jsxs("label",{className:s,children:[l.jsx("input",{className:"form-check-input",onChange:m,disabled:i,type:"radio",name:t,value:d,defaultChecked:f})," ",c]},o)})})}function Dr({className:e,children:t}){return l.jsx("small",{className:"text-muted "+(e??""),children:t})}function ve({sep:e,className:t,children:n}){return e===null?null:(t=t??"",typeof e=="number"?t+=" border-top border-"+e:ne.isValidElement(e)===!0&&(n=l.jsxs(l.Fragment,{children:[e,n]})),n||(t+=" border-top border-1"),l.jsx("div",{className:t,children:n}))}function Qg(e){let{className:t,inputClassName:n,onFocus:r,label:i,placeholder:s,buttonText:a,maxLength:o,size:u}=e;const[c,d]=P.useState(!1);let f=P.useRef(null),m=P.useRef(null),y=null;function v(h){y=h.target.value,y!==void 0&&(y=y.trim(),y===""&&(y=void 0)),e.allowEmptySearch===!0||(m.current.disabled=y===void 0||y.length===0)}async function w(h){if(h.preventDefault(),y===null&&(y=e.initKey||""),e.allowEmptySearch!==!0){if(!y)return;f.current&&(f.current.disabled=!0),m.current&&(m.current.disabled=!0)}d(!0),await e.onSearch(y),f.current&&(f.current.disabled=!1),m.current&&(m.current.disabled=!1),d(!1)}let j;switch(u){default:case"sm":j="input-group-sm";break;case"md":j="input-group-md";break;case"lg":j="input-group-lg";break}let g;return eu.isMobile===!0&&(g="off"),l.jsx("form",{className:t,onSubmit:w,autoComplete:g,children:l.jsxs("div",{className:"input-group "+j,children:[i&&l.jsx("div",{className:"input-group-addon align-self-center me-2",children:i}),l.jsx("input",{ref:f,onChange:v,type:"text",name:"key",onFocus:r,className:"form-control "+(n??"border-primary"),placeholder:s,defaultValue:e.initKey,maxLength:o}),l.jsx("div",{className:"input-group-append",children:l.jsxs("button",{ref:m,className:"btn btn-primary position-relative",type:"submit",disabled:e.allowEmptySearch!==!0,children:[l.jsx("i",{className:"fa fa-search"}),a,l.jsx(Pf,{isWaiting:c})]})})]})})}var je=(e=>(e[e.rule_required=0]="rule_required",e[e.rule_mustBeInteger=1]="rule_mustBeInteger",e[e.rule_mustBeDecimal=2]="rule_mustBeDecimal",e[e.rule_belowMin=3]="rule_belowMin",e[e.rule_overMax=4]="rule_overMax",e[e.placeholder_pick=5]="placeholder_pick",e[e.placeholder_select=6]="placeholder_select",e[e.string_submit=7]="string_submit",e[e.time_yesterday=8]="time_yesterday",e[e.time_today=9]="time_today",e[e.time_tomorrow=10]="time_tomorrow",e))(je||{});const Of={strings:{[je.rule_required]:"Is required",[je.rule_mustBeInteger]:"Must be integer",[je.rule_mustBeDecimal]:"Must be number",[je.rule_belowMin]:"Min is ",[je.rule_overMax]:"Max is ",[je.placeholder_pick]:"Click to pick",[je.placeholder_select]:"Click to select",[je.string_submit]:"Submit",[je.time_yesterday]:"Yday",[je.time_today]:"Today",[je.time_tomorrow]:"Tmw"},funcs:{time_md:(e,t)=>`${e}-${t}`,time_ymd:(e,t,n)=>`${e}-${t}-${n}`}},Rj={strings:{[je.rule_required]:"请填内容",[je.rule_mustBeInteger]:"必须是整数",[je.rule_mustBeDecimal]:"必须是数字",[je.rule_belowMin]:"最小值",[je.rule_overMax]:"最大值",[je.placeholder_pick]:"请点击选择",[je.placeholder_select]:"请点击选择",[je.string_submit]:"提交",[je.time_yesterday]:"昨天",[je.time_today]:"今天",[je.time_tomorrow]:"明天"},funcs:{time_md:(e,t)=>`${e}-${t}`,time_ymd:(e,t,n)=>`${e}-${t}-${n}`}};function Gg(e,t){return P.useCallback(r=>{let i=e(r);return i||((t==null?void 0:t(r))??r)},[e])}function Kg(e){let t=e[eu.lang];return function(n){return t[n]}}const Lj={en:Of,zh:Rj};let ti=Of.strings,Rs=Of.funcs;(function(){let t=Lj[eu.lang];t&&(ti=t.strings,Rs=t.funcs)})();function cp(e){return ti[e]}function qj(e,t,n=!1){if(!e)return null;let r;switch(typeof e){default:r=e;break;case"string":r=new Date(e);break;case"number":r=new Date(e*1e3);break}let i=new Date,s,a,o,u,c,d,f=r;s=i.getTime()-f.getTime();let m=f.getHours(),y=f.getMinutes();a=i.getDate(),o=f.getDate(),u=f.getMonth()+1,c=f.getFullYear(),d=i.getFullYear();let v=!1,w=function(){return s<-24*3600*1e3?c===d?(v=!0,Rs.time_md(u,o)):(v=!0,Rs.time_ymd(c,u,o)):s<24*3600*1e3?o!==a?(v=!0,cp(s<0?je.time_tomorrow:je.time_yesterday)):t===!0?(v=!0,""):cp(je.time_today):c===d?Rs.time_md(u,o):Rs.time_ymd(c,u,o)}();if(t===!0&&(v===!0||n===!0)){let j=m+((y<10?":0":":")+y);return w+" "+j}return w}function Mf(e){let{date:t,always:n}=e;return l.jsx(l.Fragment,{children:qj(t,!0,n)})}/**
 * @remix-run/router v1.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pa(){return pa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pa.apply(this,arguments)}var tn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(tn||(tn={}));const dp="popstate";function Uj(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:a,hash:o}=r.location;return hd("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:co(i)}return Vj(t,n,null,e)}function nt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ff(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $j(){return Math.random().toString(36).substr(2,8)}function fp(e,t){return{usr:e.state,key:e.key,idx:t}}function hd(e,t,n,r){return n===void 0&&(n=null),pa({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ls(t):t,{state:n,key:t&&t.key||r||$j()})}function co(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ls(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Vj(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=tn.Pop,u=null,c=d();c==null&&(c=0,a.replaceState(pa({},a.state,{idx:c}),""));function d(){return(a.state||{idx:null}).idx}function f(){o=tn.Pop;let j=d(),g=j==null?null:j-c;c=j,u&&u({action:o,location:w.location,delta:g})}function m(j,g){o=tn.Push;let h=hd(w.location,j,g);n&&n(h,j),c=d()+1;let p=fp(h,c),S=w.createHref(h);try{a.pushState(p,"",S)}catch{i.location.assign(S)}s&&u&&u({action:o,location:w.location,delta:1})}function y(j,g){o=tn.Replace;let h=hd(w.location,j,g);n&&n(h,j),c=d();let p=fp(h,c),S=w.createHref(h);a.replaceState(p,"",S),s&&u&&u({action:o,location:w.location,delta:0})}function v(j){let g=i.location.origin!=="null"?i.location.origin:i.location.href,h=typeof j=="string"?j:co(j);return nt(g,"No window.location.(origin|href) available to create URL for href: "+h),new URL(h,g)}let w={get action(){return o},get location(){return e(i,a)},listen(j){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(dp,f),u=j,()=>{i.removeEventListener(dp,f),u=null}},createHref(j){return t(i,j)},createURL:v,encodeLocation(j){let g=v(j);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:m,replace:y,go(j){return a.go(j)}};return w}var hp;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(hp||(hp={}));function zj(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?ls(t):t,i=Tf(r.pathname||"/",n);if(i==null)return null;let s=Xg(e);Bj(s);let a=null;for(let o=0;a==null&&o<s.length;++o)a=Jj(s[o],n1(i));return a}function Xg(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,o)=>{let u={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};u.relativePath.startsWith("/")&&(nt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=Er([r,u.relativePath]),d=n.concat(u);s.children&&s.children.length>0&&(nt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Xg(s.children,t,d,c)),!(s.path==null&&!s.index)&&t.push({path:c,score:Xj(c,s.index),routesMeta:d})};return e.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let u of Zg(s.path))i(s,a,u)}),t}function Zg(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=Zg(r.join("/")),o=[];return o.push(...a.map(u=>u===""?s:[s,u].join("/"))),i&&o.push(...a),o.map(u=>e.startsWith("/")&&u===""?"/":u)}function Bj(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Zj(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Yj=/^:\w+$/,Wj=3,Hj=2,Qj=1,Gj=10,Kj=-2,mp=e=>e==="*";function Xj(e,t){let n=e.split("/"),r=n.length;return n.some(mp)&&(r+=Kj),t&&(r+=Hj),n.filter(i=>!mp(i)).reduce((i,s)=>i+(Yj.test(s)?Wj:s===""?Qj:Gj),r)}function Zj(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function Jj(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let a=0;a<n.length;++a){let o=n[a],u=a===n.length-1,c=i==="/"?t:t.slice(i.length)||"/",d=e1({path:o.relativePath,caseSensitive:o.caseSensitive,end:u},c);if(!d)return null;Object.assign(r,d.params);let f=o.route;s.push({params:r,pathname:Er([i,d.pathname]),pathnameBase:a1(Er([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=Er([i,d.pathnameBase]))}return s}function e1(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=t1(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((c,d,f)=>{if(d==="*"){let m=o[f]||"";a=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}return c[d]=r1(o[f]||"",d),c},{}),pathname:s,pathnameBase:a,pattern:e}}function t1(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Ff(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(a,o)=>(r.push(o),"/([^\\/]+)"));return e.endsWith("*")?(r.push("*"),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function n1(e){try{return decodeURI(e)}catch(t){return Ff(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function r1(e,t){try{return decodeURIComponent(e)}catch(n){return Ff(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function Tf(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function i1(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?ls(e):e;return{pathname:n?n.startsWith("/")?n:s1(n,t):t,search:l1(r),hash:o1(i)}}function s1(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function ic(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Jg(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function ex(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=ls(e):(i=pa({},e),nt(!i.pathname||!i.pathname.includes("?"),ic("?","pathname","search",i)),nt(!i.pathname||!i.pathname.includes("#"),ic("#","pathname","hash",i)),nt(!i.search||!i.search.includes("#"),ic("#","search","hash",i)));let s=e===""||i.pathname==="",a=s?"/":i.pathname,o;if(r||a==null)o=n;else{let f=t.length-1;if(a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}o=f>=0?t[f]:"/"}let u=i1(i,o),c=a&&a!=="/"&&a.endsWith("/"),d=(s||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}const Er=e=>e.join("/").replace(/\/\/+/g,"/"),a1=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),l1=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,o1=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function u1(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const tx=["post","put","patch","delete"];new Set(tx);const c1=["get",...tx];new Set(c1);/**
 * React Router v6.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function d1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const f1=typeof Object.is=="function"?Object.is:d1,{useState:h1,useEffect:m1,useLayoutEffect:p1,useDebugValue:y1}=xc;function v1(e,t,n){const r=t(),[{inst:i},s]=h1({inst:{value:r,getSnapshot:t}});return p1(()=>{i.value=r,i.getSnapshot=t,sc(i)&&s({inst:i})},[e,r,t]),m1(()=>(sc(i)&&s({inst:i}),e(()=>{sc(i)&&s({inst:i})})),[e]),y1(r),r}function sc(e){const t=e.getSnapshot,n=e.value;try{const r=t();return!f1(n,r)}catch{return!0}}function g1(e,t,n){return t()}const x1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",w1=!x1,b1=w1?g1:v1;"useSyncExternalStore"in xc&&(e=>e.useSyncExternalStore)(xc);const nx=P.createContext(null),tu=P.createContext(null),os=P.createContext(null),_a=P.createContext(null),Tr=P.createContext({outlet:null,matches:[]}),rx=P.createContext(null);function md(){return md=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},md.apply(this,arguments)}function S1(e,t){let{relative:n}=t===void 0?{}:t;us()||nt(!1);let{basename:r,navigator:i}=P.useContext(os),{hash:s,pathname:a,search:o}=Rf(e,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:Er([r,a])),i.createHref({pathname:u,search:o,hash:s})}function us(){return P.useContext(_a)!=null}function Rr(){return us()||nt(!1),P.useContext(_a).location}function ix(){return P.useContext(_a).navigationType}function Sn(){us()||nt(!1);let{basename:e,navigator:t}=P.useContext(os),{matches:n}=P.useContext(Tr),{pathname:r}=Rr(),i=JSON.stringify(Jg(n).map(o=>o.pathnameBase)),s=P.useRef(!1);return P.useEffect(()=>{s.current=!0}),P.useCallback(function(o,u){if(u===void 0&&(u={}),!s.current)return;if(typeof o=="number"){t.go(o);return}let c=ex(o,JSON.parse(i),r,u.relative==="path");e!=="/"&&(c.pathname=c.pathname==="/"?e:Er([e,c.pathname])),(u.replace?t.replace:t.push)(c,u.state,u)},[e,t,i,r])}const j1=P.createContext(null);function k1(e){let t=P.useContext(Tr).outlet;return t&&P.createElement(j1.Provider,{value:e},t)}function Fn(){let{matches:e}=P.useContext(Tr),t=e[e.length-1];return t?t.params:{}}function Rf(e,t){let{relative:n}=t===void 0?{}:t,{matches:r}=P.useContext(Tr),{pathname:i}=Rr(),s=JSON.stringify(Jg(r).map(a=>a.pathnameBase));return P.useMemo(()=>ex(e,JSON.parse(s),i,n==="path"),[e,s,i,n])}function C1(e,t){us()||nt(!1);let{navigator:n}=P.useContext(os),r=P.useContext(tu),{matches:i}=P.useContext(Tr),s=i[i.length-1],a=s?s.params:{};s&&s.pathname;let o=s?s.pathnameBase:"/";s&&s.route;let u=Rr(),c;if(t){var d;let w=typeof t=="string"?ls(t):t;o==="/"||(d=w.pathname)!=null&&d.startsWith(o)||nt(!1),c=w}else c=u;let f=c.pathname||"/",m=o==="/"?f:f.slice(o.length)||"/",y=zj(e,{pathname:m}),v=E1(y&&y.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Er([o,n.encodeLocation?n.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?o:Er([o,n.encodeLocation?n.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r||void 0);return t&&v?P.createElement(_a.Provider,{value:{location:md({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:tn.Pop}},v):v}function _1(){let e=O1(),t=u1(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),n?P.createElement("pre",{style:i},n):null,s)}class N1 extends P.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location?{error:t.error,location:t.location}:{error:t.error||n.error,location:n.location}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?P.createElement(Tr.Provider,{value:this.props.routeContext},P.createElement(rx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function D1(e){let{routeContext:t,match:n,children:r}=e,i=P.useContext(nx);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(Tr.Provider,{value:t},r)}function E1(e,t,n){if(t===void 0&&(t=[]),e==null)if(n!=null&&n.errors)e=n.matches;else return null;let r=e,i=n==null?void 0:n.errors;if(i!=null){let s=r.findIndex(a=>a.route.id&&(i==null?void 0:i[a.route.id]));s>=0||nt(!1),r=r.slice(0,Math.min(r.length,s+1))}return r.reduceRight((s,a,o)=>{let u=a.route.id?i==null?void 0:i[a.route.id]:null,c=null;n&&(a.route.ErrorBoundary?c=P.createElement(a.route.ErrorBoundary,null):a.route.errorElement?c=a.route.errorElement:c=P.createElement(_1,null));let d=t.concat(r.slice(0,o+1)),f=()=>{let m=s;return u?m=c:a.route.Component?m=P.createElement(a.route.Component,null):a.route.element&&(m=a.route.element),P.createElement(D1,{match:a,routeContext:{outlet:s,matches:d},children:m})};return n&&(a.route.ErrorBoundary||a.route.errorElement||o===0)?P.createElement(N1,{location:n.location,component:c,error:u,children:f(),routeContext:{outlet:null,matches:d}}):f()},null)}var pp;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"})(pp||(pp={}));var fo;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(fo||(fo={}));function I1(e){let t=P.useContext(tu);return t||nt(!1),t}function P1(e){let t=P.useContext(Tr);return t||nt(!1),t}function A1(e){let t=P1(),n=t.matches[t.matches.length-1];return n.route.id||nt(!1),n.route.id}function O1(){var e;let t=P.useContext(rx),n=I1(fo.UseRouteError),r=A1(fo.UseRouteError);return t||((e=n.errors)==null?void 0:e[r])}function M1(e){let{to:t,replace:n,state:r,relative:i}=e;us()||nt(!1);let s=P.useContext(tu),a=Sn();return P.useEffect(()=>{s&&s.navigation.state!=="idle"||a(t,{replace:n,state:r,relative:i})}),null}function sx(e){return k1(e.context)}function ie(e){nt(!1)}function F1(e){let{basename:t="/",children:n=null,location:r,navigationType:i=tn.Pop,navigator:s,static:a=!1}=e;us()&&nt(!1);let o=t.replace(/^\/*/,"/"),u=P.useMemo(()=>({basename:o,navigator:s,static:a}),[o,s,a]);typeof r=="string"&&(r=ls(r));let{pathname:c="/",search:d="",hash:f="",state:m=null,key:y="default"}=r,v=P.useMemo(()=>{let w=Tf(c,o);return w==null?null:{location:{pathname:w,search:d,hash:f,state:m,key:y},navigationType:i}},[o,c,d,f,m,y,i]);return v==null?null:P.createElement(os.Provider,{value:u},P.createElement(_a.Provider,{children:n,value:v}))}function Hs(e){let{children:t,location:n}=e,r=P.useContext(nx),i=r&&!t?r.router.routes:pd(t);return C1(i,n)}var yp;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(yp||(yp={}));new Promise(()=>{});function pd(e,t){t===void 0&&(t=[]);let n=[];return P.Children.forEach(e,(r,i)=>{if(!P.isValidElement(r))return;if(r.type===P.Fragment){n.push.apply(n,pd(r.props.children,t));return}r.type!==ie&&nt(!1),!r.props.index||!r.props.children||nt(!1);let s=[...t,i],a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=pd(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ho(){return ho=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ho.apply(this,arguments)}function ax(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function T1(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function R1(e,t){return e.button===0&&(!t||t==="_self")&&!T1(e)}const L1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],q1=["aria-current","caseSensitive","className","end","style","to","children"];function ac(e){let{basename:t,children:n,window:r}=e,i=P.useRef();i.current==null&&(i.current=Uj({window:r,v5Compat:!0}));let s=i.current,[a,o]=P.useState({action:s.action,location:s.location});return P.useLayoutEffect(()=>s.listen(o),[s]),P.createElement(F1,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:s})}const U1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ce=P.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:u,to:c,preventScrollReset:d}=t,f=ax(t,L1),{basename:m}=P.useContext(os),y,v=!1;if(typeof c=="string"&&$1.test(c)&&(y=c,U1)){let h=new URL(window.location.href),p=c.startsWith("//")?new URL(h.protocol+c):new URL(c),S=Tf(p.pathname,m);p.origin===h.origin&&S!=null?c=S+p.search+p.hash:v=!0}let w=S1(c,{relative:i}),j=z1(c,{replace:a,state:o,target:u,preventScrollReset:d,relative:i});function g(h){r&&r(h),h.defaultPrevented||j(h)}return P.createElement("a",ho({},f,{href:y||w,onClick:v||s?r:g,ref:n,target:u}))}),V1=P.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:a=!1,style:o,to:u,children:c}=t,d=ax(t,q1),f=Rf(u,{relative:d.relative}),m=Rr(),y=P.useContext(tu),{navigator:v}=P.useContext(os),w=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,j=m.pathname,g=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;i||(j=j.toLowerCase(),g=g?g.toLowerCase():null,w=w.toLowerCase());let h=j===w||!a&&j.startsWith(w)&&j.charAt(w.length)==="/",p=g!=null&&(g===w||!a&&g.startsWith(w)&&g.charAt(w.length)==="/"),S=h?r:void 0,b;typeof s=="function"?b=s({isActive:h,isPending:p}):b=[s,h?"active":null,p?"pending":null].filter(Boolean).join(" ");let k=typeof o=="function"?o({isActive:h,isPending:p}):o;return P.createElement(Ce,ho({},d,{"aria-current":S,className:b,ref:n,style:k,to:u}),typeof c=="function"?c({isActive:h,isPending:p}):c)});var vp;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(vp||(vp={}));var gp;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(gp||(gp={}));function z1(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a}=t===void 0?{}:t,o=Sn(),u=Rr(),c=Rf(e,{relative:a});return P.useCallback(d=>{if(R1(d,n)){d.preventDefault();let f=r!==void 0?r:co(u)===co(c);o(e,{replace:f,state:i,preventScrollReset:s,relative:a})}},[u,o,c,r,i,n,e,s,a])}class kT extends ne.Component{constructor(n){super(n);x(this,"menu");x(this,"button");x(this,"handleDocumentClick",n=>{document.removeEventListener("click",this.handleDocumentClick),document.removeEventListener("touchstart",this.handleDocumentClick),this.state.dropdownOpen!==!1&&this.menu&&this.toggle()});x(this,"toggle",()=>{let{dropdownOpen:n}=this.state;n=!n,this.setState({dropdownOpen:n}),n===!0&&setTimeout(()=>{document.addEventListener("click",this.handleDocumentClick),document.addEventListener("touchstart",this.handleDocumentClick)},10)});this.state={dropdownOpen:!1}}render(){let{icon:n,content:r,actions:i,isRight:s,className:a,containerClass:o,itemIconClass:u,itemCaptionClass:c}=this.props;o=o??"",s===void 0&&(s=!0);let d=i.some(v=>v?v.icon!==void 0:!1),{dropdownOpen:f}=this.state,m=a??"cursor-pointer dropdown-toggle btn btn-sm",y="dropdown-menu";return s===!0&&(y+=" dropend dropdown-menu-end"),f===!0&&(y+=" show"),l.jsxs("div",{className:"btn-group "+o,children:[l.jsxs("button",{ref:v=>this.button=v,className:m,"data-toggle":"dropdown","aria-expanded":f,onClick:this.toggle,children:[n!==null&&l.jsx("i",{className:"fa fa-fw fa-"+(n??"ellipsis-v")}),r&&l.jsx("span",{className:"ms-1",children:r})]}),l.jsx("div",{ref:v=>this.menu=v,className:y,children:i.map((v,w)=>{if(!v)return l.jsx("div",{className:"dropdown-divider"},w);let{icon:j,caption:g,action:h,iconClass:p,captionClass:S}=v;if(j===void 0&&g===void 0)return l.jsx("div",{className:"dropdown-divider"});let b;if(d===!0&&(j!==void 0&&(j="fa-"+j),p||(p="text-info"),b=l.jsx("i",{className:"me-2  fa-fw fa "+j+" "+p,"aria-hidden":!0})),h===void 0)return l.jsxs("h6",{className:"dropdown-header",children:[b," ",g]});let k=l.jsxs(l.Fragment,{children:[b," ",l.jsx("span",{className:S||c,children:g})]});if(typeof h=="function"){let _=N=>{N.preventDefault(),h(v)},C=N=>{h(v)};return l.jsx("a",{className:"dropdown-item",href:"#/",onClick:_,onTouchStart:C,children:k},w)}else{let _=h;return l.jsx(Ce,{className:"dropdown-item",to:_,children:k},w)}})})]})}}const B1=3,Y1=" py-1 tonwa-bg-gray-1 fw-bold col-form-label border-end",W1=" ";function H1({children:e}){return l.jsx(l.Fragment,{children:e})}function Q1({children:e}){return l.jsx(l.Fragment,{children:e})}function G1({children:e}){return l.jsx(l.Fragment,{children:e})}function ya({className:e,labelSize:t,labelAlign:n,labelClassName:r,LabelContainer:i,midClassName:s,MidContainer:a,RightContainer:o,vAlign:u,to:c,children:d}){t=t??B1;let f;i?f="":f=`justify-content-sm-${n??"end"}`,r=r??Y1,s=s??W1;let m="align-items-"+(u??"center"),y=ne.Children.toArray(d),v=y.length;if(v<2)return l.jsx("div",{className:"text-danger",children:"children count must > 2"});i=i??H1,a=a??Q1,o=o??G1;let w,j;v>2?(j=l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex-fill"}),l.jsx(o,{children:y[v-1]})]}),w=v-1):w=2;let g=y.slice(1,w),h="row mx-0 "+(e??"bg-white"),p=l.jsxs("div",{className:h,children:[l.jsx("div",{className:`col-sm-${t} d-flex ${m} ${f} ${r}`,children:l.jsx(i,{children:y[0]})}),l.jsxs("div",{className:`col-sm-${12-t} gx-0 d-flex ${m} ${s}`,children:[l.jsx(a,{children:g.map((S,b)=>l.jsx(ne.Fragment,{children:S},b))}),j]})]});return c?l.jsx(Ce,{to:c,children:p}):p}const K1="form-control",X1="form-check-input",Z1="form-select",J1="form-control",ek="form-range";class lx{constructor(t){x(this,"valueAtoms");x(this,"defaultStringClassName",K1);x(this,"defaultCheckClassName",X1);x(this,"defaultSelectClassName",Z1);x(this,"defaultPickClassName",J1);x(this,"defaultRangeClassName",ek);x(this,"defaultNone","-");x(this,"fields");x(this,"fieldStates");x(this,"bands");x(this,"BandTemplate");x(this,"props");x(this,"readOnly");x(this,"onValuesChanged",async t=>{var n,r;for(let i in t){let s=t[i],a=this.getValue(i);s!==a&&(await((r=(n=this.props).onValuesChanged)==null?void 0:r.call(n,{name:i,value:s,preValue:a},this)),this.setValue(i,s))}});let{values:n,BandTemplate:r,readOnly:i}=t;if(this.bands=[],this.BandTemplate=r,this.props=t,this.readOnly=i,this.valueAtoms={},n)for(let a in n)this.valueAtoms[a]=Ie(n[a]);this.fields={},this.fieldStates={};let s=a=>{ne.Children.forEach(a,o=>{if(!o||ne.isValidElement(o)===!1)return;let u=o,{props:c}=u;if(c){let{name:d}=c;d&&(this.fieldStates[d]=Ie({readOnly:!1,disabled:!1})),s(c.children)}})};s(t.children)}getValue(t){let n=this.valueAtoms[t];if(n)return de(n)}getAtom(t){return this.valueAtoms[t]}setValue(t,n){let r=this.valueAtoms[t];r?ae(r,n):this.valueAtoms[t]=Ie(n);let i={};i[t]=n,this.onValuesChanged(i)}getValues(){let t={};for(let n in this.valueAtoms)t[n]=de(this.valueAtoms[n]);return t}setError(t,n){let r=!1;for(let i of this.bands)i.setError(t,n)!==!1&&(r=!0);return r}clearError(t){for(let n of this.bands)n.clearError(t)}clearAllErrors(){for(let t of this.bands)t.clearAllErrors()}setReadonly(t,n){let r=this.fieldStates[t],i=de(r);i&&ae(r,{...i,readOnly:n})}setDisabled(t,n){let r=this.fieldStates[t],i=de(r);i&&ae(r,{...i,disabled:n})}}const Lf=ne.createContext(void 0);function cs(){return P.useContext(Lf)}var yd=(e=>(e[e.check=0]="check",e[e.com=1]="com",e))(yd||{});function ox({error:e}){return l.jsxs("div",{className:"px-2 py-1 small",children:[l.jsx(J,{name:"exclamation-circle",className:"me-2 text-danger"}),l.jsx("span",{className:"text-info",children:e})]})}function nu({errors:e}){if(!e||e.length===0)return null;let t=[];for(let n of e){let{error:r}=n;t.findIndex(s=>s===r)<0&&t.push(r)}return l.jsx(l.Fragment,{children:t.map((n,r)=>l.jsx(ox,{error:n},r))})}function tk({memo:e}){return typeof e=="string"?l.jsxs("div",{className:"px-2 py-1 small text-muted",children:[l.jsx(J,{name:"caret-right",className:"me-2"}),e]}):e}function ru({memos:e}){return e?l.jsx(l.Fragment,{children:e.map((t,n)=>l.jsx(tk,{memo:t},n))}):null}function nk(e){let t=[];function n(r){ne.Children.forEach(r,i=>{if(!i||ne.isValidElement(i)===!1)return;let s=i,{props:a}=s;if(a){let{memo:o}=a;o&&typeof o=="string"&&t.push(o),n(a.children)}})}if(n(e),t.length!==0)return t}function rk(e){let t=!0;function n(r){let i=[];return ne.Children.forEach(r,s=>{if(s.type===ne.Fragment)debugger;if(ne.isValidElement(s)===!1){i.push(s);return}let a=s,{props:o}=a;if(o){let{key:u}=a,{name:c,options:d}=o;if(o.readOnly!==!0&&(t=!1),c){i.push(l.jsx(ik,{name:c,options:d},u));return}}r!==s&&i.push(ne.createElement(a.type,o,...n(a)))}),i}return[n(e),t]}function ik({name:e,options:t}){let n=cs(),{defaultNone:r}=n,i=we(n.getAtom(e));if(t&&i){let s=t.find(a=>a.value===i);s&&(i=s.label)}return l.jsx("div",{className:"py-2",children:i??r})}function ht(e){let{label:t,labelSize:n,children:r,BandTemplate:i,sep:s,contentType:a,pageEdit:o,toEdit:u,rightIcon:c,contentContainerClassName:d}=e,f=r,m=cs();n=m.props.labelSize;let y=nk(r),{current:v}=P.useRef(new Mj(m,y)),w=we(v.errors);if(!m)return l.jsxs("div",{children:["Error: ","<Band /> can only be in <Form />"]});switch(i=i??m.BandTemplate,a){case 1:break;default:if(m.isDetail===!0)switch(a){case 0:r=l.jsx("div",{className:"py-2",children:r});break;default:let[j,g]=rk(r);r=l.jsx(l.Fragment,{children:j}),(g===!0||m.readOnly===!0)&&(v.readOnly=!0);break}break}return l.jsx(Yg.Provider,{value:v,children:l.jsx(i,{label:t,labelSize:n,errors:w,memos:v.memos,content:f,sep:s,contentType:a,pageEdit:o,rightIcon:c,toEdit:u,contentContainerClassName:d,children:r})})}function vd(e){return l.jsx(ht,{...e,contentType:1,children:e.children})}class sk extends lx{constructor(){super(...arguments);x(this,"errorResponse",Ie({hasError:!1,errors:void 0}))}get isDetail(){return!1}setError(n,r){if(!r)return;let i,s;return Array.isArray(r)===!1&&(r=[r]),n?s=super.setError(n,r):r&&r.length>0&&(i=[...r],s=!0),ae(this.errorResponse,{hasError:s,errors:i}),s}clearError(n){super.clearError(n),ae(this.errorResponse,{hasError:!1,errors:void 0})}clearAllErrors(){super.clearAllErrors(),ae(this.errorResponse,{hasError:!1,errors:void 0})}clearValues(){for(let n in this.valueAtoms)this.setValue(n,void 0);for(let n in this.fields)this.fields[n].reset();this.clearAllErrors()}}const ux=ne.createContext(void 0);function cx(){return P.useContext(ux)}function ak(e){let{label:t,labelSize:n,children:r,errors:i,memos:s,contentContainerClassName:a}=e;n=n??2;let o,u=`col-sm-${12-n} ${a??""}`;return t?o=l.jsx("label",{className:`col-sm-${n} col-form-label text-sm-end`,children:l.jsx("b",{children:t})}):u+=" offset-sm-2",l.jsxs("div",{className:"mb-3 row bg-white",children:[o,l.jsxs("div",{className:u,children:[r,l.jsx(nu,{errors:i}),l.jsx(ru,{memos:s})]})]})}function hi(e){let{className:t,children:n,BandTemplate:r}=e;r=r??ak;let{current:i}=P.useRef(new sk({...e,BandTemplate:r}));function s(a){a.preventDefault()}return l.jsx(ux.Provider,{value:i,children:l.jsx(Lf.Provider,{value:i,children:l.jsx("form",{className:t,onSubmit:s,children:n})})})}function dx(){let e=cx(),{errors:t}=we(e.errorResponse);return t?l.jsx(l.Fragment,{children:t.map((n,r)=>l.jsx(ox,{error:n},r))}):null}function fx(e,t){if(!t)return;let n=[];function r(i){let s=i(e);s&&(Array.isArray(s)===!0?n.push(...s):n.push(s))}if(Array.isArray(t)===!0)for(let i of t)r(i);else r(t);if(n.length>0)return n}function gd(e){if(!e.trim())return ti[je.rule_required]}class lk{constructor(t,n,r){x(this,"name");x(this,"input");x(this,"initValue");this.name=t,this.input=n,this.initValue=r}reset(){this.input&&(this.input.value=this.initValue??"")}}function qf(e){var i;let t=cs(),{name:n}=e,r=(i=t==null?void 0:t.props.values)==null?void 0:i[n];return l.jsx(ok,{...e,initValue:r})}function ok({name:e,className:t,readOnly:n,placeholder:r,maxLength:i,rule:s,isValidKey:a,initValue:o,type:u,disabled:c}){let d=P.useRef(),[f,m]=P.useState(!1),y=Wg(),v=cs(),{props:w,fields:j,fieldStates:g}=v,h=we(g[e]);n=n??(h==null?void 0:h.readOnly)??w.readOnly??!1,P.useEffect(()=>{var E;if(!y)return;let{fields:C}=y;C[e]=!0;let{props:N,fieldStates:D}=v;j[e]=new lk(e,d.current,(E=N.values)==null?void 0:E[e]),Object.assign(D[e],{readOnly:n,disabled:c})},[y,v,e,j,c,n]);let p=t??w.stringClassName??v.defaultStringClassName??"";if(f===!0&&(p+=" is-invalid"),n===!0)return l.jsx("div",{className:p+" bg-light text-muted",children:o??v.defaultNone});let S=()=>{v.clearError(e),m(!1)},b=()=>{let C=fx(d.current.value,s);v.setError(e,C),m(C!==void 0)},k=C=>{v.setValue(e,C.currentTarget.value)},_=C=>{if(!a)return!0;if(a(C.data)===!1)return C.preventDefault(),!1};return l.jsx("input",{ref:d,name:e,type:u??"text",className:p,disabled:h==null?void 0:h.disabled,readOnly:n,onFocus:S,onBlur:b,onBeforeInput:_,onChange:k,placeholder:r,maxLength:i,defaultValue:o})}function uk(e){let{placeholder:t,maxLength:n}=e;return l.jsx(qf,{placeholder:t,maxLength:n,...e})}function Na(e){return l.jsx(ht,{...e,children:l.jsx(uk,{...e})})}function ck(e){let{placeholder:t,maxLength:n}=e;return l.jsx(qf,{placeholder:t,maxLength:n,...e,type:"password"})}function Bi(e){return l.jsx(ht,{...e,children:l.jsx(ck,{...e})})}function dk(e,...t){let n=[...t];return e&&n.push(...Array.isArray(e)===!0?e:[e]),n}function fk(e,t){if(e=e.trim(),e.length===0)return;let n=Number.parseFloat(e);if(isNaN(n)===!0||e.indexOf("+")>0||e.indexOf("-")>0)return!1;let r=String(n),i=t.length;for(let s=0;s<i;s++){let a=t[s];if(r.indexOf(a)>=0)return!1}return!0}function hk(e,t){if(t==null)return!1;let n=Number.parseFloat(e);return isNaN(n)===!0?!1:n<t}function mk(e,t){if(t==null)return!1;let n=Number.parseFloat(e);return isNaN(n)===!0?!1:n>t}const hx="01234567890-+",pk=hx+".";function mx(e){let{placeholder:t,maxLength:n,rule:r,min:i,max:s,chars:a,excludeChars:o}=e;function u(m){return a.indexOf(m)>=0}function c(m){if(fk(m,o)===!1)return ti[je.rule_mustBeDecimal]}function d(m){if(hk(m,i)===!0)return ti[je.rule_belowMin]+i}function f(m){if(mk(m,s)===!0)return ti[je.rule_overMax]+s}return l.jsx(qf,{placeholder:t,maxLength:n,isValidKey:u,rule:dk(r,c,d,f),...e})}function yk(e){return l.jsx(mx,{...e,chars:pk,excludeChars:"e"})}function vk(e){return l.jsx(ht,{...e,children:l.jsx(yk,{...e})})}function gk(e){return l.jsx(mx,{...e,chars:hx,excludeChars:".e"})}function xk(e){return l.jsx(ht,{...e,children:l.jsx(gk,{...e})})}class wk{constructor(t,n){x(this,"name");this.name=t}reset(){}}function mi({name:e,className:t,children:n,onSubmit:r,disabled:i}){let s=cx(),[a,o]=Ef(s.errorResponse),u=cs(),{fields:c,fieldStates:d}=u,{current:f}=P.useRef(Ie({readOnly:!1,disabled:i})),m=we(e?d[e]:f);t=t??"btn btn-primary",n=n??l.jsxs(l.Fragment,{children:[l.jsx(J,{name:"share-square-o"})," ",ti[je.string_submit]]}),P.useEffect(()=>{e&&(c[e]=new wk(e,i),Object.assign(d[e],{readOnly:void 0,disabled:i}))},[c,d,e,i]);async function y(v){v.preventDefault();let{props:w}=s,{rule:j}=w,g=s.getValues(),h=[];for(let p in g)fx(g[p],j);if(h.length>0)o({errors:h,hasError:!0});else{let p=await r(s.getValues());if(p)switch(typeof p){default:if(Array.isArray(p)===!0)for(let S of p)if(!S)s.clearAllErrors();else if(Array.isArray(S)===!0){let[b,k]=S;s.setError(b,k)}else s.setError(void 0,p);break;case"string":s.setError(void 0,p);break}else s.clearAllErrors()}}return l.jsx(fi,{onClick:y,disabled:(m.disabled??!1)||a.hasError,className:t,children:n})}function Me(e){let[t,n]=P.useState(!1),{items:r,className:i,itemKey:s,ViewItem:a,onItemClick:o,onItemSelect:u,sep:c,none:d,loading:f}=e;if(i=i??"",P.useEffect(()=>{setTimeout(()=>{n(!0)},200)},[]),r===null)return null;if(r===void 0)return t===!1?null:f||l.jsx("div",{className:"mx-3 my-2",children:l.jsx(If,{})});let m=r.length;if(m===0)return d===void 0&&(d=l.jsx("div",{className:"mx-3 my-2 text-muted",children:"-"})),d;a=a??bk;let y;function v(g,h){u(g,h.currentTarget.checked)}let w;o&&(w=async g=>{await o(g)}),u?w?y=(g,h,p)=>l.jsxs("div",{className:"d-flex",children:[l.jsx("label",{className:"ps-3 pe-2 align-self-stretch d-flex align-items-center",children:l.jsx("input",{type:"checkbox",className:"form-check-input",onChange:S=>v(g,S)})}),l.jsx("div",{className:"flex-grow-1 cursor-pointer",onClick:()=>w(g),children:l.jsx(a,{value:g,index:h})})]}):y=(g,h,p)=>l.jsxs("div",{className:"form-check mx-3",children:[l.jsx("input",{type:"checkbox",className:" mt-2 form-check-input",id:p,onChange:S=>v(g,S)}),l.jsx("label",{className:"form-check-label",htmlFor:p,children:l.jsx(a,{value:g,index:h})})]}):(w&&(i+=" tonwa-list-item"),y=(g,h)=>{let p,S;return w&&(p=()=>w(g),S="tonwa-list-item cursor-pointer"),l.jsx("div",{onClick:p,className:S,children:l.jsx(a,{value:g,index:h})})}),c=l.jsx(ve,{sep:c});let j;switch(typeof s){default:j=(g,h)=>h;break;case"string":j=g=>g[s];break;case"function":j=s;break}return l.jsxs(l.Fragment,{children:[l.jsx("ul",{className:"m-0 p-0 "+i,children:r.map((g,h)=>{let p=j(g,h);return l.jsxs(ne.Fragment,{children:[y(g,h,p),h<m-1&&c]},p)})}),c]})}function bk(e){let{value:t}=e,n="px-3 py-2";return l.jsx("div",{className:n,children:JSON.stringify(t)})}function xd(e,t){return xd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},xd(e,t)}function Da(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,xd(e,t)}var Ea=function(){function e(){this.listeners=[]}var t=e.prototype;return t.subscribe=function(r){var i=this,s=r||function(){};return this.listeners.push(s),this.onSubscribe(),function(){i.listeners=i.listeners.filter(function(a){return a!==s}),i.onUnsubscribe()}},t.hasListeners=function(){return this.listeners.length>0},t.onSubscribe=function(){},t.onUnsubscribe=function(){},e}();function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ke.apply(this,arguments)}var mo=typeof window>"u";function xt(){}function Sk(e,t){return typeof e=="function"?e(t):e}function wd(e){return typeof e=="number"&&e>=0&&e!==1/0}function po(e){return Array.isArray(e)?e:[e]}function px(e,t){return Math.max(e+(t||0)-Date.now(),0)}function El(e,t,n){return iu(e)?typeof t=="function"?ke({},n,{queryKey:e,queryFn:t}):ke({},t,{queryKey:e}):e}function hr(e,t,n){return iu(e)?[ke({},t,{queryKey:e}),n]:[e||{},t]}function jk(e,t){if(e===!0&&t===!0||e==null&&t==null)return"all";if(e===!1&&t===!1)return"none";var n=e??!t;return n?"active":"inactive"}function xp(e,t){var n=e.active,r=e.exact,i=e.fetching,s=e.inactive,a=e.predicate,o=e.queryKey,u=e.stale;if(iu(o)){if(r){if(t.queryHash!==Uf(o,t.options))return!1}else if(!yo(t.queryKey,o))return!1}var c=jk(n,s);if(c==="none")return!1;if(c!=="all"){var d=t.isActive();if(c==="active"&&!d||c==="inactive"&&d)return!1}return!(typeof u=="boolean"&&t.isStale()!==u||typeof i=="boolean"&&t.isFetching()!==i||a&&!a(t))}function wp(e,t){var n=e.exact,r=e.fetching,i=e.predicate,s=e.mutationKey;if(iu(s)){if(!t.options.mutationKey)return!1;if(n){if(Kr(t.options.mutationKey)!==Kr(s))return!1}else if(!yo(t.options.mutationKey,s))return!1}return!(typeof r=="boolean"&&t.state.status==="loading"!==r||i&&!i(t))}function Uf(e,t){var n=(t==null?void 0:t.queryKeyHashFn)||Kr;return n(e)}function Kr(e){var t=po(e);return kk(t)}function kk(e){return JSON.stringify(e,function(t,n){return bd(n)?Object.keys(n).sort().reduce(function(r,i){return r[i]=n[i],r},{}):n})}function yo(e,t){return yx(po(e),po(t))}function yx(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(function(n){return!yx(e[n],t[n])}):!1}function vo(e,t){if(e===t)return e;var n=Array.isArray(e)&&Array.isArray(t);if(n||bd(e)&&bd(t)){for(var r=n?e.length:Object.keys(e).length,i=n?t:Object.keys(t),s=i.length,a=n?[]:{},o=0,u=0;u<s;u++){var c=n?u:i[u];a[c]=vo(e[c],t[c]),a[c]===e[c]&&o++}return r===s&&o===r?e:a}return t}function Ck(e,t){if(e&&!t||t&&!e)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}function bd(e){if(!bp(e))return!1;var t=e.constructor;if(typeof t>"u")return!0;var n=t.prototype;return!(!bp(n)||!n.hasOwnProperty("isPrototypeOf"))}function bp(e){return Object.prototype.toString.call(e)==="[object Object]"}function iu(e){return typeof e=="string"||Array.isArray(e)}function _k(e){return new Promise(function(t){setTimeout(t,e)})}function Sp(e){Promise.resolve().then(e).catch(function(t){return setTimeout(function(){throw t})})}function vx(){if(typeof AbortController=="function")return new AbortController}var Nk=function(e){Da(t,e);function t(){var r;return r=e.call(this)||this,r.setup=function(i){var s;if(!mo&&((s=window)!=null&&s.addEventListener)){var a=function(){return i()};return window.addEventListener("visibilitychange",a,!1),window.addEventListener("focus",a,!1),function(){window.removeEventListener("visibilitychange",a),window.removeEventListener("focus",a)}}},r}var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){if(!this.hasListeners()){var i;(i=this.cleanup)==null||i.call(this),this.cleanup=void 0}},n.setEventListener=function(i){var s,a=this;this.setup=i,(s=this.cleanup)==null||s.call(this),this.cleanup=i(function(o){typeof o=="boolean"?a.setFocused(o):a.onFocus()})},n.setFocused=function(i){this.focused=i,i&&this.onFocus()},n.onFocus=function(){this.listeners.forEach(function(i){i()})},n.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},t}(Ea),Qs=new Nk,Dk=function(e){Da(t,e);function t(){var r;return r=e.call(this)||this,r.setup=function(i){var s;if(!mo&&((s=window)!=null&&s.addEventListener)){var a=function(){return i()};return window.addEventListener("online",a,!1),window.addEventListener("offline",a,!1),function(){window.removeEventListener("online",a),window.removeEventListener("offline",a)}}},r}var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){if(!this.hasListeners()){var i;(i=this.cleanup)==null||i.call(this),this.cleanup=void 0}},n.setEventListener=function(i){var s,a=this;this.setup=i,(s=this.cleanup)==null||s.call(this),this.cleanup=i(function(o){typeof o=="boolean"?a.setOnline(o):a.onOnline()})},n.setOnline=function(i){this.online=i,i&&this.onOnline()},n.onOnline=function(){this.listeners.forEach(function(i){i()})},n.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},t}(Ea),Il=new Dk;function Ek(e){return Math.min(1e3*Math.pow(2,e),3e4)}function go(e){return typeof(e==null?void 0:e.cancel)=="function"}var gx=function(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent};function Pl(e){return e instanceof gx}var xx=function(t){var n=this,r=!1,i,s,a,o;this.abort=t.abort,this.cancel=function(m){return i==null?void 0:i(m)},this.cancelRetry=function(){r=!0},this.continueRetry=function(){r=!1},this.continue=function(){return s==null?void 0:s()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(m,y){a=m,o=y});var u=function(y){n.isResolved||(n.isResolved=!0,t.onSuccess==null||t.onSuccess(y),s==null||s(),a(y))},c=function(y){n.isResolved||(n.isResolved=!0,t.onError==null||t.onError(y),s==null||s(),o(y))},d=function(){return new Promise(function(y){s=y,n.isPaused=!0,t.onPause==null||t.onPause()}).then(function(){s=void 0,n.isPaused=!1,t.onContinue==null||t.onContinue()})},f=function m(){if(!n.isResolved){var y;try{y=t.fn()}catch(v){y=Promise.reject(v)}i=function(w){if(!n.isResolved&&(c(new gx(w)),n.abort==null||n.abort(),go(y)))try{y.cancel()}catch{}},n.isTransportCancelable=go(y),Promise.resolve(y).then(u).catch(function(v){var w,j;if(!n.isResolved){var g=(w=t.retry)!=null?w:3,h=(j=t.retryDelay)!=null?j:Ek,p=typeof h=="function"?h(n.failureCount,v):h,S=g===!0||typeof g=="number"&&n.failureCount<g||typeof g=="function"&&g(n.failureCount,v);if(r||!S){c(v);return}n.failureCount++,t.onFail==null||t.onFail(n.failureCount,v),_k(p).then(function(){if(!Qs.isFocused()||!Il.isOnline())return d()}).then(function(){r?c(v):m()})}})}};f()},Ik=function(){function e(){this.queue=[],this.transactions=0,this.notifyFn=function(n){n()},this.batchNotifyFn=function(n){n()}}var t=e.prototype;return t.batch=function(r){var i;this.transactions++;try{i=r()}finally{this.transactions--,this.transactions||this.flush()}return i},t.schedule=function(r){var i=this;this.transactions?this.queue.push(r):Sp(function(){i.notifyFn(r)})},t.batchCalls=function(r){var i=this;return function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];i.schedule(function(){r.apply(void 0,a)})}},t.flush=function(){var r=this,i=this.queue;this.queue=[],i.length&&Sp(function(){r.batchNotifyFn(function(){i.forEach(function(s){r.notifyFn(s)})})})},t.setNotifyFunction=function(r){this.notifyFn=r},t.setBatchNotifyFunction=function(r){this.batchNotifyFn=r},e}(),Qe=new Ik,wx=console;function xo(){return wx}function Pk(e){wx=e}var Ak=function(){function e(n){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.cache=n.cache,this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.initialState=n.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=n.meta,this.scheduleGc()}var t=e.prototype;return t.setOptions=function(r){var i;this.options=ke({},this.defaultOptions,r),this.meta=r==null?void 0:r.meta,this.cacheTime=Math.max(this.cacheTime||0,(i=this.options.cacheTime)!=null?i:5*60*1e3)},t.setDefaultOptions=function(r){this.defaultOptions=r},t.scheduleGc=function(){var r=this;this.clearGcTimeout(),wd(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){r.optionalRemove()},this.cacheTime))},t.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},t.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},t.setData=function(r,i){var s,a,o=this.state.data,u=Sk(r,o);return(s=(a=this.options).isDataEqual)!=null&&s.call(a,o,u)?u=o:this.options.structuralSharing!==!1&&(u=vo(o,u)),this.dispatch({data:u,type:"success",dataUpdatedAt:i==null?void 0:i.updatedAt}),u},t.setState=function(r,i){this.dispatch({type:"setState",state:r,setStateOptions:i})},t.cancel=function(r){var i,s=this.promise;return(i=this.retryer)==null||i.cancel(r),s?s.then(xt).catch(xt):Promise.resolve()},t.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},t.reset=function(){this.destroy(),this.setState(this.initialState)},t.isActive=function(){return this.observers.some(function(r){return r.options.enabled!==!1})},t.isFetching=function(){return this.state.isFetching},t.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(r){return r.getCurrentResult().isStale})},t.isStaleByTime=function(r){return r===void 0&&(r=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!px(this.state.dataUpdatedAt,r)},t.onFocus=function(){var r,i=this.observers.find(function(s){return s.shouldFetchOnWindowFocus()});i&&i.refetch(),(r=this.retryer)==null||r.continue()},t.onOnline=function(){var r,i=this.observers.find(function(s){return s.shouldFetchOnReconnect()});i&&i.refetch(),(r=this.retryer)==null||r.continue()},t.addObserver=function(r){this.observers.indexOf(r)===-1&&(this.observers.push(r),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:r}))},t.removeObserver=function(r){this.observers.indexOf(r)!==-1&&(this.observers=this.observers.filter(function(i){return i!==r}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:r}))},t.getObserversCount=function(){return this.observers.length},t.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},t.fetch=function(r,i){var s=this,a,o,u;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(i!=null&&i.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var c;return(c=this.retryer)==null||c.continueRetry(),this.promise}}if(r&&this.setOptions(r),!this.options.queryFn){var d=this.observers.find(function(h){return h.options.queryFn});d&&this.setOptions(d.options)}var f=po(this.queryKey),m=vx(),y={queryKey:f,pageParam:void 0,meta:this.meta};Object.defineProperty(y,"signal",{enumerable:!0,get:function(){if(m)return s.abortSignalConsumed=!0,m.signal}});var v=function(){return s.options.queryFn?(s.abortSignalConsumed=!1,s.options.queryFn(y)):Promise.reject("Missing queryFn")},w={fetchOptions:i,options:this.options,queryKey:f,state:this.state,fetchFn:v,meta:this.meta};if((a=this.options.behavior)!=null&&a.onFetch){var j;(j=this.options.behavior)==null||j.onFetch(w)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((o=w.fetchOptions)==null?void 0:o.meta)){var g;this.dispatch({type:"fetch",meta:(g=w.fetchOptions)==null?void 0:g.meta})}return this.retryer=new xx({fn:w.fetchFn,abort:m==null||(u=m.abort)==null?void 0:u.bind(m),onSuccess:function(p){s.setData(p),s.cache.config.onSuccess==null||s.cache.config.onSuccess(p,s),s.cacheTime===0&&s.optionalRemove()},onError:function(p){Pl(p)&&p.silent||s.dispatch({type:"error",error:p}),Pl(p)||(s.cache.config.onError==null||s.cache.config.onError(p,s),xo().error(p)),s.cacheTime===0&&s.optionalRemove()},onFail:function(){s.dispatch({type:"failed"})},onPause:function(){s.dispatch({type:"pause"})},onContinue:function(){s.dispatch({type:"continue"})},retry:w.options.retry,retryDelay:w.options.retryDelay}),this.promise=this.retryer.promise,this.promise},t.dispatch=function(r){var i=this;this.state=this.reducer(this.state,r),Qe.batch(function(){i.observers.forEach(function(s){s.onQueryUpdate(r)}),i.cache.notify({query:i,type:"queryUpdated",action:r})})},t.getDefaultState=function(r){var i=typeof r.initialData=="function"?r.initialData():r.initialData,s=typeof r.initialData<"u",a=s?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0,o=typeof i<"u";return{data:i,dataUpdateCount:0,dataUpdatedAt:o?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:o?"success":"idle"}},t.reducer=function(r,i){var s,a;switch(i.type){case"failed":return ke({},r,{fetchFailureCount:r.fetchFailureCount+1});case"pause":return ke({},r,{isPaused:!0});case"continue":return ke({},r,{isPaused:!1});case"fetch":return ke({},r,{fetchFailureCount:0,fetchMeta:(s=i.meta)!=null?s:null,isFetching:!0,isPaused:!1},!r.dataUpdatedAt&&{error:null,status:"loading"});case"success":return ke({},r,{data:i.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(a=i.dataUpdatedAt)!=null?a:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var o=i.error;return Pl(o)&&o.revert&&this.revertState?ke({},this.revertState):ke({},r,{error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return ke({},r,{isInvalidated:!0});case"setState":return ke({},r,i.state);default:return r}},e}(),Ok=function(e){Da(t,e);function t(r){var i;return i=e.call(this)||this,i.config=r||{},i.queries=[],i.queriesMap={},i}var n=t.prototype;return n.build=function(i,s,a){var o,u=s.queryKey,c=(o=s.queryHash)!=null?o:Uf(u,s),d=this.get(c);return d||(d=new Ak({cache:this,queryKey:u,queryHash:c,options:i.defaultQueryOptions(s),state:a,defaultOptions:i.getQueryDefaults(u),meta:s.meta}),this.add(d)),d},n.add=function(i){this.queriesMap[i.queryHash]||(this.queriesMap[i.queryHash]=i,this.queries.push(i),this.notify({type:"queryAdded",query:i}))},n.remove=function(i){var s=this.queriesMap[i.queryHash];s&&(i.destroy(),this.queries=this.queries.filter(function(a){return a!==i}),s===i&&delete this.queriesMap[i.queryHash],this.notify({type:"queryRemoved",query:i}))},n.clear=function(){var i=this;Qe.batch(function(){i.queries.forEach(function(s){i.remove(s)})})},n.get=function(i){return this.queriesMap[i]},n.getAll=function(){return this.queries},n.find=function(i,s){var a=hr(i,s),o=a[0];return typeof o.exact>"u"&&(o.exact=!0),this.queries.find(function(u){return xp(o,u)})},n.findAll=function(i,s){var a=hr(i,s),o=a[0];return Object.keys(o).length>0?this.queries.filter(function(u){return xp(o,u)}):this.queries},n.notify=function(i){var s=this;Qe.batch(function(){s.listeners.forEach(function(a){a(i)})})},n.onFocus=function(){var i=this;Qe.batch(function(){i.queries.forEach(function(s){s.onFocus()})})},n.onOnline=function(){var i=this;Qe.batch(function(){i.queries.forEach(function(s){s.onOnline()})})},t}(Ea),Mk=function(){function e(n){this.options=ke({},n.defaultOptions,n.options),this.mutationId=n.mutationId,this.mutationCache=n.mutationCache,this.observers=[],this.state=n.state||Fk(),this.meta=n.meta}var t=e.prototype;return t.setState=function(r){this.dispatch({type:"setState",state:r})},t.addObserver=function(r){this.observers.indexOf(r)===-1&&this.observers.push(r)},t.removeObserver=function(r){this.observers=this.observers.filter(function(i){return i!==r})},t.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(xt).catch(xt)):Promise.resolve()},t.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},t.execute=function(){var r=this,i,s=this.state.status==="loading",a=Promise.resolve();return s||(this.dispatch({type:"loading",variables:this.options.variables}),a=a.then(function(){r.mutationCache.config.onMutate==null||r.mutationCache.config.onMutate(r.state.variables,r)}).then(function(){return r.options.onMutate==null?void 0:r.options.onMutate(r.state.variables)}).then(function(o){o!==r.state.context&&r.dispatch({type:"loading",context:o,variables:r.state.variables})})),a.then(function(){return r.executeMutation()}).then(function(o){i=o,r.mutationCache.config.onSuccess==null||r.mutationCache.config.onSuccess(i,r.state.variables,r.state.context,r)}).then(function(){return r.options.onSuccess==null?void 0:r.options.onSuccess(i,r.state.variables,r.state.context)}).then(function(){return r.options.onSettled==null?void 0:r.options.onSettled(i,null,r.state.variables,r.state.context)}).then(function(){return r.dispatch({type:"success",data:i}),i}).catch(function(o){return r.mutationCache.config.onError==null||r.mutationCache.config.onError(o,r.state.variables,r.state.context,r),xo().error(o),Promise.resolve().then(function(){return r.options.onError==null?void 0:r.options.onError(o,r.state.variables,r.state.context)}).then(function(){return r.options.onSettled==null?void 0:r.options.onSettled(void 0,o,r.state.variables,r.state.context)}).then(function(){throw r.dispatch({type:"error",error:o}),o})})},t.executeMutation=function(){var r=this,i;return this.retryer=new xx({fn:function(){return r.options.mutationFn?r.options.mutationFn(r.state.variables):Promise.reject("No mutationFn found")},onFail:function(){r.dispatch({type:"failed"})},onPause:function(){r.dispatch({type:"pause"})},onContinue:function(){r.dispatch({type:"continue"})},retry:(i=this.options.retry)!=null?i:0,retryDelay:this.options.retryDelay}),this.retryer.promise},t.dispatch=function(r){var i=this;this.state=Tk(this.state,r),Qe.batch(function(){i.observers.forEach(function(s){s.onMutationUpdate(r)}),i.mutationCache.notify(i)})},e}();function Fk(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function Tk(e,t){switch(t.type){case"failed":return ke({},e,{failureCount:e.failureCount+1});case"pause":return ke({},e,{isPaused:!0});case"continue":return ke({},e,{isPaused:!1});case"loading":return ke({},e,{context:t.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:t.variables});case"success":return ke({},e,{data:t.data,error:null,status:"success",isPaused:!1});case"error":return ke({},e,{data:void 0,error:t.error,failureCount:e.failureCount+1,isPaused:!1,status:"error"});case"setState":return ke({},e,t.state);default:return e}}var Rk=function(e){Da(t,e);function t(r){var i;return i=e.call(this)||this,i.config=r||{},i.mutations=[],i.mutationId=0,i}var n=t.prototype;return n.build=function(i,s,a){var o=new Mk({mutationCache:this,mutationId:++this.mutationId,options:i.defaultMutationOptions(s),state:a,defaultOptions:s.mutationKey?i.getMutationDefaults(s.mutationKey):void 0,meta:s.meta});return this.add(o),o},n.add=function(i){this.mutations.push(i),this.notify(i)},n.remove=function(i){this.mutations=this.mutations.filter(function(s){return s!==i}),i.cancel(),this.notify(i)},n.clear=function(){var i=this;Qe.batch(function(){i.mutations.forEach(function(s){i.remove(s)})})},n.getAll=function(){return this.mutations},n.find=function(i){return typeof i.exact>"u"&&(i.exact=!0),this.mutations.find(function(s){return wp(i,s)})},n.findAll=function(i){return this.mutations.filter(function(s){return wp(i,s)})},n.notify=function(i){var s=this;Qe.batch(function(){s.listeners.forEach(function(a){a(i)})})},n.onFocus=function(){this.resumePausedMutations()},n.onOnline=function(){this.resumePausedMutations()},n.resumePausedMutations=function(){var i=this.mutations.filter(function(s){return s.state.isPaused});return Qe.batch(function(){return i.reduce(function(s,a){return s.then(function(){return a.continue().catch(xt)})},Promise.resolve())})},t}(Ea);function Lk(){return{onFetch:function(t){t.fetchFn=function(){var n,r,i,s,a,o,u=(n=t.fetchOptions)==null||(r=n.meta)==null?void 0:r.refetchPage,c=(i=t.fetchOptions)==null||(s=i.meta)==null?void 0:s.fetchMore,d=c==null?void 0:c.pageParam,f=(c==null?void 0:c.direction)==="forward",m=(c==null?void 0:c.direction)==="backward",y=((a=t.state.data)==null?void 0:a.pages)||[],v=((o=t.state.data)==null?void 0:o.pageParams)||[],w=vx(),j=w==null?void 0:w.signal,g=v,h=!1,p=t.options.queryFn||function(){return Promise.reject("Missing queryFn")},S=function(T,q,z,Y){return g=Y?[q].concat(g):[].concat(g,[q]),Y?[z].concat(T):[].concat(T,[z])},b=function(T,q,z,Y){if(h)return Promise.reject("Cancelled");if(typeof z>"u"&&!q&&T.length)return Promise.resolve(T);var M={queryKey:t.queryKey,signal:j,pageParam:z,meta:t.meta},U=p(M),K=Promise.resolve(U).then(function(fe){return S(T,z,fe,Y)});if(go(U)){var le=K;le.cancel=U.cancel}return K},k;if(!y.length)k=b([]);else if(f){var _=typeof d<"u",C=_?d:jp(t.options,y);k=b(y,_,C)}else if(m){var N=typeof d<"u",D=N?d:qk(t.options,y);k=b(y,N,D,!0)}else(function(){g=[];var O=typeof t.options.getNextPageParam>"u",T=u&&y[0]?u(y[0],0,y):!0;k=T?b([],O,v[0]):Promise.resolve(S([],v[0],y[0]));for(var q=function(M){k=k.then(function(U){var K=u&&y[M]?u(y[M],M,y):!0;if(K){var le=O?v[M]:jp(t.options,U);return b(U,O,le)}return Promise.resolve(S(U,v[M],y[M]))})},z=1;z<y.length;z++)q(z)})();var E=k.then(function(O){return{pages:O,pageParams:g}}),A=E;return A.cancel=function(){h=!0,w==null||w.abort(),go(k)&&k.cancel()},E}}}}function jp(e,t){return e.getNextPageParam==null?void 0:e.getNextPageParam(t[t.length-1],t)}function qk(e,t){return e.getPreviousPageParam==null?void 0:e.getPreviousPageParam(t[0],t)}var Uk=function(){function e(n){n===void 0&&(n={}),this.queryCache=n.queryCache||new Ok,this.mutationCache=n.mutationCache||new Rk,this.defaultOptions=n.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var t=e.prototype;return t.mount=function(){var r=this;this.unsubscribeFocus=Qs.subscribe(function(){Qs.isFocused()&&Il.isOnline()&&(r.mutationCache.onFocus(),r.queryCache.onFocus())}),this.unsubscribeOnline=Il.subscribe(function(){Qs.isFocused()&&Il.isOnline()&&(r.mutationCache.onOnline(),r.queryCache.onOnline())})},t.unmount=function(){var r,i;(r=this.unsubscribeFocus)==null||r.call(this),(i=this.unsubscribeOnline)==null||i.call(this)},t.isFetching=function(r,i){var s=hr(r,i),a=s[0];return a.fetching=!0,this.queryCache.findAll(a).length},t.isMutating=function(r){return this.mutationCache.findAll(ke({},r,{fetching:!0})).length},t.getQueryData=function(r,i){var s;return(s=this.queryCache.find(r,i))==null?void 0:s.state.data},t.getQueriesData=function(r){return this.getQueryCache().findAll(r).map(function(i){var s=i.queryKey,a=i.state,o=a.data;return[s,o]})},t.setQueryData=function(r,i,s){var a=El(r),o=this.defaultQueryOptions(a);return this.queryCache.build(this,o).setData(i,s)},t.setQueriesData=function(r,i,s){var a=this;return Qe.batch(function(){return a.getQueryCache().findAll(r).map(function(o){var u=o.queryKey;return[u,a.setQueryData(u,i,s)]})})},t.getQueryState=function(r,i){var s;return(s=this.queryCache.find(r,i))==null?void 0:s.state},t.removeQueries=function(r,i){var s=hr(r,i),a=s[0],o=this.queryCache;Qe.batch(function(){o.findAll(a).forEach(function(u){o.remove(u)})})},t.resetQueries=function(r,i,s){var a=this,o=hr(r,i,s),u=o[0],c=o[1],d=this.queryCache,f=ke({},u,{active:!0});return Qe.batch(function(){return d.findAll(u).forEach(function(m){m.reset()}),a.refetchQueries(f,c)})},t.cancelQueries=function(r,i,s){var a=this,o=hr(r,i,s),u=o[0],c=o[1],d=c===void 0?{}:c;typeof d.revert>"u"&&(d.revert=!0);var f=Qe.batch(function(){return a.queryCache.findAll(u).map(function(m){return m.cancel(d)})});return Promise.all(f).then(xt).catch(xt)},t.invalidateQueries=function(r,i,s){var a,o,u,c=this,d=hr(r,i,s),f=d[0],m=d[1],y=ke({},f,{active:(a=(o=f.refetchActive)!=null?o:f.active)!=null?a:!0,inactive:(u=f.refetchInactive)!=null?u:!1});return Qe.batch(function(){return c.queryCache.findAll(f).forEach(function(v){v.invalidate()}),c.refetchQueries(y,m)})},t.refetchQueries=function(r,i,s){var a=this,o=hr(r,i,s),u=o[0],c=o[1],d=Qe.batch(function(){return a.queryCache.findAll(u).map(function(m){return m.fetch(void 0,ke({},c,{meta:{refetchPage:u==null?void 0:u.refetchPage}}))})}),f=Promise.all(d).then(xt);return c!=null&&c.throwOnError||(f=f.catch(xt)),f},t.fetchQuery=function(r,i,s){var a=El(r,i,s),o=this.defaultQueryOptions(a);typeof o.retry>"u"&&(o.retry=!1);var u=this.queryCache.build(this,o);return u.isStaleByTime(o.staleTime)?u.fetch(o):Promise.resolve(u.state.data)},t.prefetchQuery=function(r,i,s){return this.fetchQuery(r,i,s).then(xt).catch(xt)},t.fetchInfiniteQuery=function(r,i,s){var a=El(r,i,s);return a.behavior=Lk(),this.fetchQuery(a)},t.prefetchInfiniteQuery=function(r,i,s){return this.fetchInfiniteQuery(r,i,s).then(xt).catch(xt)},t.cancelMutations=function(){var r=this,i=Qe.batch(function(){return r.mutationCache.getAll().map(function(s){return s.cancel()})});return Promise.all(i).then(xt).catch(xt)},t.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},t.executeMutation=function(r){return this.mutationCache.build(this,r).execute()},t.getQueryCache=function(){return this.queryCache},t.getMutationCache=function(){return this.mutationCache},t.getDefaultOptions=function(){return this.defaultOptions},t.setDefaultOptions=function(r){this.defaultOptions=r},t.setQueryDefaults=function(r,i){var s=this.queryDefaults.find(function(a){return Kr(r)===Kr(a.queryKey)});s?s.defaultOptions=i:this.queryDefaults.push({queryKey:r,defaultOptions:i})},t.getQueryDefaults=function(r){var i;return r?(i=this.queryDefaults.find(function(s){return yo(r,s.queryKey)}))==null?void 0:i.defaultOptions:void 0},t.setMutationDefaults=function(r,i){var s=this.mutationDefaults.find(function(a){return Kr(r)===Kr(a.mutationKey)});s?s.defaultOptions=i:this.mutationDefaults.push({mutationKey:r,defaultOptions:i})},t.getMutationDefaults=function(r){var i;return r?(i=this.mutationDefaults.find(function(s){return yo(r,s.mutationKey)}))==null?void 0:i.defaultOptions:void 0},t.defaultQueryOptions=function(r){if(r!=null&&r._defaulted)return r;var i=ke({},this.defaultOptions.queries,this.getQueryDefaults(r==null?void 0:r.queryKey),r,{_defaulted:!0});return!i.queryHash&&i.queryKey&&(i.queryHash=Uf(i.queryKey,i)),i},t.defaultQueryObserverOptions=function(r){return this.defaultQueryOptions(r)},t.defaultMutationOptions=function(r){return r!=null&&r._defaulted?r:ke({},this.defaultOptions.mutations,this.getMutationDefaults(r==null?void 0:r.mutationKey),r,{_defaulted:!0})},t.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},e}(),$k=function(e){Da(t,e);function t(r,i){var s;return s=e.call(this)||this,s.client=r,s.options=i,s.trackedProps=[],s.selectError=null,s.bindMethods(),s.setOptions(i),s}var n=t.prototype;return n.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},n.onSubscribe=function(){this.listeners.length===1&&(this.currentQuery.addObserver(this),kp(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},n.onUnsubscribe=function(){this.listeners.length||this.destroy()},n.shouldFetchOnReconnect=function(){return Sd(this.currentQuery,this.options,this.options.refetchOnReconnect)},n.shouldFetchOnWindowFocus=function(){return Sd(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},n.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},n.setOptions=function(i,s){var a=this.options,o=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(i),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=a.queryKey),this.updateQuery();var u=this.hasListeners();u&&Cp(this.currentQuery,o,this.options,a)&&this.executeFetch(),this.updateResult(s),u&&(this.currentQuery!==o||this.options.enabled!==a.enabled||this.options.staleTime!==a.staleTime)&&this.updateStaleTimeout();var c=this.computeRefetchInterval();u&&(this.currentQuery!==o||this.options.enabled!==a.enabled||c!==this.currentRefetchInterval)&&this.updateRefetchInterval(c)},n.getOptimisticResult=function(i){var s=this.client.defaultQueryObserverOptions(i),a=this.client.getQueryCache().build(this.client,s);return this.createResult(a,s)},n.getCurrentResult=function(){return this.currentResult},n.trackResult=function(i,s){var a=this,o={},u=function(d){a.trackedProps.includes(d)||a.trackedProps.push(d)};return Object.keys(i).forEach(function(c){Object.defineProperty(o,c,{configurable:!1,enumerable:!0,get:function(){return u(c),i[c]}})}),(s.useErrorBoundary||s.suspense)&&u("error"),o},n.getNextResult=function(i){var s=this;return new Promise(function(a,o){var u=s.subscribe(function(c){c.isFetching||(u(),c.isError&&(i!=null&&i.throwOnError)?o(c.error):a(c))})})},n.getCurrentQuery=function(){return this.currentQuery},n.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},n.refetch=function(i){return this.fetch(ke({},i,{meta:{refetchPage:i==null?void 0:i.refetchPage}}))},n.fetchOptimistic=function(i){var s=this,a=this.client.defaultQueryObserverOptions(i),o=this.client.getQueryCache().build(this.client,a);return o.fetch().then(function(){return s.createResult(o,a)})},n.fetch=function(i){var s=this;return this.executeFetch(i).then(function(){return s.updateResult(),s.currentResult})},n.executeFetch=function(i){this.updateQuery();var s=this.currentQuery.fetch(this.options,i);return i!=null&&i.throwOnError||(s=s.catch(xt)),s},n.updateStaleTimeout=function(){var i=this;if(this.clearStaleTimeout(),!(mo||this.currentResult.isStale||!wd(this.options.staleTime))){var s=px(this.currentResult.dataUpdatedAt,this.options.staleTime),a=s+1;this.staleTimeoutId=setTimeout(function(){i.currentResult.isStale||i.updateResult()},a)}},n.computeRefetchInterval=function(){var i;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(i=this.options.refetchInterval)!=null?i:!1},n.updateRefetchInterval=function(i){var s=this;this.clearRefetchInterval(),this.currentRefetchInterval=i,!(mo||this.options.enabled===!1||!wd(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(function(){(s.options.refetchIntervalInBackground||Qs.isFocused())&&s.executeFetch()},this.currentRefetchInterval))},n.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},n.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},n.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},n.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},n.createResult=function(i,s){var a=this.currentQuery,o=this.options,u=this.currentResult,c=this.currentResultState,d=this.currentResultOptions,f=i!==a,m=f?i.state:this.currentQueryInitialState,y=f?this.currentResult:this.previousQueryResult,v=i.state,w=v.dataUpdatedAt,j=v.error,g=v.errorUpdatedAt,h=v.isFetching,p=v.status,S=!1,b=!1,k;if(s.optimisticResults){var _=this.hasListeners(),C=!_&&kp(i,s),N=_&&Cp(i,a,s,o);(C||N)&&(h=!0,w||(p="loading"))}if(s.keepPreviousData&&!v.dataUpdateCount&&(y!=null&&y.isSuccess)&&p!=="error")k=y.data,w=y.dataUpdatedAt,p=y.status,S=!0;else if(s.select&&typeof v.data<"u")if(u&&v.data===(c==null?void 0:c.data)&&s.select===this.selectFn)k=this.selectResult;else try{this.selectFn=s.select,k=s.select(v.data),s.structuralSharing!==!1&&(k=vo(u==null?void 0:u.data,k)),this.selectResult=k,this.selectError=null}catch(A){xo().error(A),this.selectError=A}else k=v.data;if(typeof s.placeholderData<"u"&&typeof k>"u"&&(p==="loading"||p==="idle")){var D;if(u!=null&&u.isPlaceholderData&&s.placeholderData===(d==null?void 0:d.placeholderData))D=u.data;else if(D=typeof s.placeholderData=="function"?s.placeholderData():s.placeholderData,s.select&&typeof D<"u")try{D=s.select(D),s.structuralSharing!==!1&&(D=vo(u==null?void 0:u.data,D)),this.selectError=null}catch(A){xo().error(A),this.selectError=A}typeof D<"u"&&(p="success",k=D,b=!0)}this.selectError&&(j=this.selectError,k=this.selectResult,g=Date.now(),p="error");var E={status:p,isLoading:p==="loading",isSuccess:p==="success",isError:p==="error",isIdle:p==="idle",data:k,dataUpdatedAt:w,error:j,errorUpdatedAt:g,failureCount:v.fetchFailureCount,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>m.dataUpdateCount||v.errorUpdateCount>m.errorUpdateCount,isFetching:h,isRefetching:h&&p!=="loading",isLoadingError:p==="error"&&v.dataUpdatedAt===0,isPlaceholderData:b,isPreviousData:S,isRefetchError:p==="error"&&v.dataUpdatedAt!==0,isStale:$f(i,s),refetch:this.refetch,remove:this.remove};return E},n.shouldNotifyListeners=function(i,s){if(!s)return!0;var a=this.options,o=a.notifyOnChangeProps,u=a.notifyOnChangePropsExclusions;if(!o&&!u||o==="tracked"&&!this.trackedProps.length)return!0;var c=o==="tracked"?this.trackedProps:o;return Object.keys(i).some(function(d){var f=d,m=i[f]!==s[f],y=c==null?void 0:c.some(function(w){return w===d}),v=u==null?void 0:u.some(function(w){return w===d});return m&&!v&&(!c||y)})},n.updateResult=function(i){var s=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!Ck(this.currentResult,s)){var a={cache:!0};(i==null?void 0:i.listeners)!==!1&&this.shouldNotifyListeners(this.currentResult,s)&&(a.listeners=!0),this.notify(ke({},a,i))}},n.updateQuery=function(){var i=this.client.getQueryCache().build(this.client,this.options);if(i!==this.currentQuery){var s=this.currentQuery;this.currentQuery=i,this.currentQueryInitialState=i.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(s==null||s.removeObserver(this),i.addObserver(this))}},n.onQueryUpdate=function(i){var s={};i.type==="success"?s.onSuccess=!0:i.type==="error"&&!Pl(i.error)&&(s.onError=!0),this.updateResult(s),this.hasListeners()&&this.updateTimers()},n.notify=function(i){var s=this;Qe.batch(function(){i.onSuccess?(s.options.onSuccess==null||s.options.onSuccess(s.currentResult.data),s.options.onSettled==null||s.options.onSettled(s.currentResult.data,null)):i.onError&&(s.options.onError==null||s.options.onError(s.currentResult.error),s.options.onSettled==null||s.options.onSettled(void 0,s.currentResult.error)),i.listeners&&s.listeners.forEach(function(a){a(s.currentResult)}),i.cache&&s.client.getQueryCache().notify({query:s.currentQuery,type:"observerResultsUpdated"})})},t}(Ea);function Vk(e,t){return t.enabled!==!1&&!e.state.dataUpdatedAt&&!(e.state.status==="error"&&t.retryOnMount===!1)}function kp(e,t){return Vk(e,t)||e.state.dataUpdatedAt>0&&Sd(e,t,t.refetchOnMount)}function Sd(e,t,n){if(t.enabled!==!1){var r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&$f(e,t)}return!1}function Cp(e,t,n,r){return n.enabled!==!1&&(e!==t||r.enabled===!1)&&(!n.suspense||e.state.status!=="error")&&$f(e,n)}function $f(e,t){return e.isStaleByTime(t.staleTime)}var zk=xj.unstable_batchedUpdates;Qe.setBatchNotifyFunction(zk);var Bk=console;Pk(Bk);var _p=ne.createContext(void 0),bx=ne.createContext(!1);function Sx(e){return e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=_p),window.ReactQueryClientContext):_p}var Yk=function(){var t=ne.useContext(Sx(ne.useContext(bx)));if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Wk=function(t){var n=t.client,r=t.contextSharing,i=r===void 0?!1:r,s=t.children;ne.useEffect(function(){return n.mount(),function(){n.unmount()}},[n]);var a=Sx(i);return ne.createElement(bx.Provider,{value:i},ne.createElement(a.Provider,{value:n},s))};function Hk(){var e=!1;return{clearReset:function(){e=!1},reset:function(){e=!0},isReset:function(){return e}}}var Qk=ne.createContext(Hk()),Gk=function(){return ne.useContext(Qk)};function Kk(e,t,n){return typeof t=="function"?t.apply(void 0,n):typeof t=="boolean"?t:!!e}function Xk(e,t){var n=ne.useRef(!1),r=ne.useState(0),i=r[1],s=Yk(),a=Gk(),o=s.defaultQueryObserverOptions(e);o.optimisticResults=!0,o.onError&&(o.onError=Qe.batchCalls(o.onError)),o.onSuccess&&(o.onSuccess=Qe.batchCalls(o.onSuccess)),o.onSettled&&(o.onSettled=Qe.batchCalls(o.onSettled)),o.suspense&&(typeof o.staleTime!="number"&&(o.staleTime=1e3),o.cacheTime===0&&(o.cacheTime=1)),(o.suspense||o.useErrorBoundary)&&(a.isReset()||(o.retryOnMount=!1));var u=ne.useState(function(){return new t(s,o)}),c=u[0],d=c.getOptimisticResult(o);if(ne.useEffect(function(){n.current=!0,a.clearReset();var f=c.subscribe(Qe.batchCalls(function(){n.current&&i(function(m){return m+1})}));return c.updateResult(),function(){n.current=!1,f()}},[a,c]),ne.useEffect(function(){c.setOptions(o,{listeners:!1})},[o,c]),o.suspense&&d.isLoading)throw c.fetchOptimistic(o).then(function(f){var m=f.data;o.onSuccess==null||o.onSuccess(m),o.onSettled==null||o.onSettled(m,null)}).catch(function(f){a.clearReset(),o.onError==null||o.onError(f),o.onSettled==null||o.onSettled(void 0,f)});if(d.isError&&!a.isReset()&&!d.isFetching&&Kk(o.suspense,o.useErrorBoundary,[d.error,c.getCurrentQuery()]))throw d.error;return o.notifyOnChangeProps==="tracked"&&(d=c.trackResult(d,o)),d}function Lr(e,t,n){var r=El(e,t,n);return Xk(r,$k)}function jd(e){this.message=e}jd.prototype=new Error,jd.prototype.name="InvalidCharacterError";var Np=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new jd("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,s=0,a="";r=t.charAt(s++);~r&&(n=i%4?64*n+r:r,i++%4)?a+=String.fromCharCode(255&n>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return a};function Zk(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(n){return decodeURIComponent(Np(n).replace(/(.)/g,function(r,i){var s=i.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}(t)}catch{return Np(t)}}function wo(e){this.message=e}function Vf(e,t){if(typeof e!="string")throw new wo("Invalid token specified");var n=(t=t||{}).header===!0?0:1;try{return JSON.parse(Zk(e.split(".")[n]))}catch(r){throw new wo("Invalid token specified: "+r.message)}}wo.prototype=new Error,wo.prototype.name="InvalidTokenError";function Dp(e){let t=Vf(e);return{id:t.id,name:t.name,guest:t.guest,token:e}}function Ep(e){return{id:0,guest:Vf(e).guest,token:e}}class Jk{createLocalMap(t){return new kx(this,t)}}let eC=class{constructor(t,n){x(this,"local");x(this,"key");this.local=t,this.key=n}get(){try{let t=this.local.getItem(this.key);return t===null||t===void 0?void 0:JSON.parse(t)}catch{this.local.removeItem(this.key);return}}set(t){let n=JSON.stringify(t,(r,i)=>{if(r!=="_tuid")return i});this.local.setItem(this.key,n)}remove(t){t===void 0?this.local.removeItem(this.key):this.local.removeLocal(t)}child(t){return this.local.child(t)}arr(t){return this.local.arr(t)}map(t){return this.local.map(t)}},jx=class{constructor(t,n){x(this,"caches");x(this,"locals");x(this,"localDb");x(this,"name");this.localDb=t,this.name=n,this.caches={},this.locals={}}getItem(t){let n=this.keyForGet(t);if(n!==void 0)return this.localDb.getItem(n)}setItem(t,n){let r=this.keyForSet(t);this.localDb.setItem(r,n)}removeItem(t){let n=this.keyForRemove(t);n!==void 0&&localStorage.removeItem(n)}arr(t){let n=String(t),r=this.locals[n];if(r===void 0){let i=this.keyForSet(t);this.locals[n]=r=new Ip(this.localDb,i)}return r}map(t){let n=String(t),r=this.locals[n];if(r===void 0){let i=this.keyForSet(t);this.locals[n]=r=new kx(this.localDb,i)}return r}removeLocal(t){let n=t.name,r=this.keyForRemove(n);if(r===void 0)return;let i=this.locals[n];i===void 0?i=new Ip(this.localDb,r):this.locals[n]=void 0,i.removeAll()}child(t){let n=String(t),r=this.caches[n];return r!==void 0?r:this.caches[n]=r=new eC(this,t)}};const tC=500;let Ip=class extends jx{constructor(n,r){super(n,r);x(this,"index");let i=this.localDb.getItem(this.name);i?this.index=i.split(`
`).map(s=>Number(s)):this.index=[]}saveIndex(){this.localDb.setItem(this.name,this.index.join(`
`))}keyForGet(n){if(!(this.index.indexOf(n)<0))return`${this.name}.${n}`}keyForSet(n){let r=this.index.indexOf(n);return r<0?(this.index.unshift(n),this.index.length>tC&&this.index.pop()):(this.index.splice(r,1),this.index.unshift(n)),this.saveIndex(),`${this.name}.${n}`}keyForRemove(n){let r=this.index.indexOf(n);if(!(r<0))return this.index.splice(r,1),this.saveIndex(),`${this.name}.${n}`}removeAll(){for(let n of this.index)this.localDb.removeItem(`${this.name}.${n}`);this.localDb.removeItem(this.name),this.index.splice(0)}item(n){return this.child(n)}},kx=class extends jx{constructor(n,r){super(n,r);x(this,"index");x(this,"max");this.max=0,this.index={};let i=this.localDb.getItem(this.name);i&&i.split(`
`).forEach(a=>{let o=a.indexOf("	");if(o<0)return;let u=a.substr(0,o),c=Number(a.substr(o+1));isNaN(c)!==!0&&(this.index[u]=c,c>this.max&&(this.max=c))})}saveIndex(){let n=[];for(let r in this.index){let i=this.index[r];i!==void 0&&n.push(`${r}	${i}`)}this.localDb.setItem(this.name,n.join(`
`))}keyForGet(n){let r=this.index[n];if(r!==void 0)return`${this.name}.${r}`}keyForSet(n){let r=this.index[n];return r===void 0&&(++this.max,r=this.max,this.index[n]=r,this.saveIndex()),`${this.name}.${r}`}keyForRemove(n){let r=this.index[n];if(r!==void 0)return this.index[n]=void 0,this.saveIndex(),`${this.name}.${r}`}removeAll(){for(let n in this.index)this.localDb.removeItem(`${this.name}.${this.index[n]}`),this.index[n]=void 0;this.localDb.removeItem(this.name),this.max=0}item(n){return this.child(n)}};function Pp(e){return e.split(/[-._]/).map(n=>iC(n)).join("_")}const nC="a".charCodeAt(0),rC="z".charCodeAt(0);function iC(e){if(!e)return"";let t=e.charCodeAt(0);return t>=nC&&t<=rC?String.fromCharCode(t-32)+e.substr(1):e}function sC(e,t){if(!e||!t)return;let n=Object.keys(e);t=t.toLowerCase();for(let r of n)if(r.toLowerCase()===t)return e[r]}function Cx(e){return!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function"}class aC{constructor(t,n=void 0,r){x(this,"_params");x(this,"$$user");x(this,"method","POST");x(this,"waiting");this._params=t,this.$$user=n,this.waiting=r}get params(){return this._params}buildParams(){return this.params}get headers(){}}class _x{constructor(t,n){x(this,"net");x(this,"path");this.net=t,this.path=n||""}customHeader(){}async xcall(t){return await(await this.getHttpChannel()).xcall(this.path,t)}async call(t,n,r){return await(await this.getHttpChannel()).callFetch(t,n,r)}async get(t,n=void 0){return await(await this.getHttpChannel()).get(this.path+t,n,this.customHeader())}async post(t,n){return await(await this.getHttpChannel()).post(this.path+t,n,this.customHeader())}async put(t,n){return await(await this.getHttpChannel()).put(this.path+t,n,this.customHeader())}async delete(t,n){return await(await this.getHttpChannel()).delete(this.path+t,n,this.customHeader())}}class lC extends _x{constructor(n){let{net:r,baseUrl:i}=n;super(r,i);x(this,"uq");this.uq=n}async getHttpChannel(){return await this.net.getHttpChannel(this.uq.name)}customHeader(){let{unit:n}=this.uq;if(n!==void 0)return{unit:String(n)}}async loadEntities(){return await this.get("entities")}async bizSheet(n,r){await this.post("biz",{id:n,act:r})}async bizSheetAct(n,r,i){return await this.post("biz-sheet-act",{id:n,detail:r,act:i})}async getAdmins(){return await this.get("get-admins")}async setMeAdmin(){await this.get("set-me-admin")}async setAdmin(n,r,i){await this.post("set-admin",{user:n,role:r,assigned:i})}async isAdmin(){return await this.get("is-admin")}async getRoles(){let n=await this.get("get-roles");if(!n)return null;let r=n.split("|"),i=[];for(let s of r)s=s.trim(),s&&i.push(s);return i.length===0?null:i}async getAllRoleUsers(){return await this.get("get-all-role-users")}async setUserRoles(n,r){await this.post("set-user-roles",{theUser:n,roles:r})}async deleteUserRoles(n){await this.get("delete-user-roles",{theUser:n})}async allSchemas(){return await this.get("all-schemas")}async schema(n){return await this.get("schema/"+n)}async queueModify(n,r,i){return await this.post("queue-modify",{start:n,page:r,entities:i})}async syncUser(n){return await this.post("sync-user",{user:n})}async hello(){return await this.get("hello",{})}async compileHello(){return await this.get("compile/hello",{})}async compileOverride(n){return await this.post("compile/override",{source:n})}async compileAppend(n){return await this.post("compile/append",{source:n})}async compileEntity(n,r){return await this.post("compile/entity",{id:n,code:r})}async biz(){return await this.post("compile/biz",{})}}class Nx extends _x{async getHttpChannel(){return this.net.getCenterChannel()}}const oC="uqTokens";class uC extends Nx{constructor(n,r){super(n,r);x(this,"localMap");this.localMap=n.createLocalMap(oC)}clearLocal(){this.localMap.removeAll()}async uq(n){let{uqOwner:r,uqName:i}=n,s=r+"/"+i,a=this.localMap.child(s);try{let o=a.get();if(o!==void 0){let{unit:f,user:m}=o;(f!==n.unit||m!==this.net.loginedUserId)&&(a.remove(),o=void 0)}let u=Math.floor(Date.now()/1e3);if(o!==void 0){let{tick:f,value:m}=o;if(m!==void 0&&u-f<24*3600)return Object.assign({},m)}let c=Object.assign({},n),d=await this.get("open/uq-token",c);if(d===void 0){let{unit:f,uqOwner:m,uqName:y}=n;throw`center get app-uq(unit=${f}, '${m}/${y}') - not exists or no unit-service`}return o={unit:n.unit,user:this.net.loginedUserId,tick:u,value:d},a.set(o),Object.assign({},d)}catch(o){throw a.remove(),o}}}class cC extends Nx{async login(t){let n=await this.post("user/login",t);switch(typeof n){default:return;case"string":return Dp(n);case"object":let r=n.token,i=Dp(r),{nick:s,icon:a}=n;return s&&(i.nick=s),a&&(i.icon=a),i}}async register(t){return await this.post("user/register",t)}async changePassword(t){return await this.post("tie/change-password",t)}async sendVerify(t,n,r){return await this.post("user/set-verify",{account:t,type:n,oem:r})}async checkVerify(t,n){return await this.post("user/check-verify",{account:t,verify:n})}async isExists(t){return await this.get("user/is-exists",{account:t})}async resetPassword(t,n,r,i){return await this.post("user/reset-password",{account:t,password:n,verify:r,type:i})}async userSetProp(t,n){await this.post("tie/user-set-prop",{prop:t,value:n})}async me(){return await this.get("tie/me")}async user(t){return await this.get("tie/user",{id:t})}async fromKey(t){return await this.get("tie/user-from-key",{key:t})}async guest(){let t=await this.get("guest/",{});switch(typeof t){default:return;case"string":return Ep(t);case"object":return Ep(t.token)}}async userQuit(){await this.get("tie/user-ask-quit",{})}async userAppUnits(t){return await this.get("tie/user-app-units",{app:t})}async userFromKey(t){return await this.get("tie/user-from-key",{key:t})}async userFromId(t){return await this.get("user/user-name-nick-icon-from-id",{userId:t})}async userFromName(t){return await this.get("tie/user-from-key",{key:t})}async usersFromEmail(t){return await this.get("tie/users-from-email",{email:t})}async userFromMobile(t){return await this.get("tie/users-from-mobile",{mobile:t})}}const dC=["POST","PUT"];class Ap{constructor(t,n,r){x(this,"language");x(this,"culture");x(this,"timeout");x(this,"net");x(this,"hostUrl");x(this,"authToken");this.net=t,this.hostUrl=n,this.authToken=r,this.timeout=t.fetchTimeout}used(){this.post("",{})}async xcall(t,n){let r=this.buildOptions(void 0),{headers:i,path:s,method:a}=n;if(i!==void 0){let u=r.headers;for(let c in i)u[c]=encodeURI(i[c])}r.method=a;let o=n.buildParams();return dC.indexOf(a)>=0&&o!==void 0&&(r.body=JSON.stringify(o)),await this.innerFetch(t+s,r)}async innerFetchResult(t,n){return(await this.innerFetch(t,n)).res}async get(t,n=void 0,r=void 0){if(n){let s=Object.keys(n);if(s.length>0){let a="?";for(let o of s)n[o]!==void 0&&(t+=a+o+"="+n[o],a="&")}}let i=this.buildOptions(r);return i.method="GET",await this.innerFetchResult(t,i)}async post(t,n,r=void 0){let i=this.buildOptions(r);return i.method="POST",i.body=JSON.stringify(n),await this.innerFetchResult(t,i)}async put(t,n,r=void 0){let i=this.buildOptions(r);return i.method="PUT",i.body=JSON.stringify(n),await this.innerFetchResult(t,i)}async delete(t,n,r=void 0){let i=this.buildOptions(r);return i.method="DELETE",i.body=JSON.stringify(n),await this.innerFetchResult(t,i)}async fetch(t,n,r,i){let s=t;try{console.log("%s-%s %s",n.method,s,n.body||"");let a=Date.now(),o=setTimeout(()=>{throw new Error(`webapi timeout: ${Date.now()-a}ms ${t}`)},this.timeout),u=await fetch(encodeURI(s),n);if(u.ok===!1)throw clearTimeout(o),console.log("call error %s",u.statusText),u.statusText;let c=u.headers.get("content-type");if(c&&c.indexOf("json")>=0)return u.json().then(async d=>{if(clearTimeout(o),d.ok===!0){if(typeof d!="object")debugger;else if(Array.isArray(d)===!0)debugger;return r(d)}let f=d.error;i(f===void 0?"not valid tonwa json":f)}).catch(async d=>{i(d)});{let d=await u.text();clearTimeout(o),console.log("text endWait"),r(d)}}catch(a){if(typeof a=="string"){let o=a.toLowerCase();if(o.startsWith("unauthorized")===!0||o.startsWith("$roles")===!0)return}console.error("fecth error (no nav.showError): "+t)}}async innerFetch(t,n){let r=this.hostUrl+t;return new Promise(async(i,s)=>{await this.fetch(r,n,i,s)})}async callFetch(t,n,r){let i=this.buildOptions(void 0);return i.method=n,i.body=r,new Promise(async(s,a)=>{await this.fetch(t,i,s,a)})}buildOptions(t){return{headers:this.buildHeaders(t),method:void 0,body:void 0}}buildHeaders(t){let{language:n,culture:r}=this,i={};i["Content-Type"]="application/json;charset=UTF-8";let s=n??"";return r&&(s+="-"+r),i["Accept-Language"]=s,this.authToken&&(i.Authorization=this.authToken),t!==void 0&&Object.assign(i,t),i}}const fC={center:"localhost:3000",uq:"localhost:3015",res:"localhost:3015"},hC={method:"GET",headers:{"Content-Type":"text/plain;charset=UTF-8"}};async function mC(e,t){return t===!0?await pC(e):(e.endsWith("/")===!1&&(e+="/"),{center:e,uqDebug:void 0,res:void 0,uqs:void 0})}async function pC(e){e.endsWith("/")===!1&&(e+="/");let{center:t,uq:n,res:r}=fC,i=[t,n,r].map(d=>gC(d)),[s,a,o]=await Promise.all(i);s!==null&&(e=`http://${t}/`);let u,c;return a!==null?(u=`http://${n}/`,c=JSON.parse(a).uqs):n=void 0,r=void 0,{center:e,uqDebug:u,res:r,uqs:c}}const yC=2e3;function vC(e){return new Promise(async(t,n)=>{try{setTimeout(n,yC,new Error("Connection timed out"));let r=await fetch(e,hC);if(r.ok===!1){n("resp.ok === false");return}let i=await r.text();t(i)}catch(r){n(r)}})}async function gC(e){if(!e)return null;let t=`http://${e}/hello`;try{return await vC(t)}catch{return null}}class xC{constructor(t){x(this,"centerUrl");x(this,"uqDebug");x(this,"resDebug");x(this,"debugUqs",new Set);x(this,"testing");x(this,"uqChannels",{});x(this,"centerChannel");x(this,"isDevelopment");x(this,"centerToken");x(this,"props");x(this,"_loginedUserId",0);x(this,"localDb");x(this,"userApi");x(this,"uqTokenApi");x(this,"createObservableMap");this.props=t,this.isDevelopment=t.isDevelopment,this.testing=t.testing,this.localDb=this.props.localDb,this.createObservableMap=this.props.createObservableMap,this.userApi=new cC(this,"tv/"),this.uqTokenApi=new uC(this,"tv/")}async init(){if(this.centerUrl!==void 0)return;console.log("start net.init");let{center:t}=this.props,{center:n,uqDebug:r,uqs:i,res:s}=await mC(t,this.isDevelopment);if(this.centerUrl=n,this.uqDebug=r,this.resDebug=s,console.log("centerUrl",n,"uqDebug",r,"res",s),i!==void 0)for(let a of i){let{db:o}=a;this.debugUqs.add(o.toLowerCase())}}get fetchTimeout(){return this.isDevelopment===!0?3e4:5e4}get loginedUserId(){return this._loginedUserId}createLocalMap(t){return this.localDb.createLocalMap(t)}getLocalDbItem(t){return this.localDb.getItem(t)}setLocalDbItem(t,n){this.localDb.setItem(t,n)}getResUrl(t){return this.resDebug+t}logoutApis(){this.uqTokenApi.clearLocal();for(let t in this.uqChannels)this.uqChannels[t]=void 0}setCenterToken(t,n){this._loginedUserId=t,this.centerToken=n,this.centerChannel=void 0}clearCenterToken(){this.setCenterToken(0,void 0)}getCenterChannel(){return this.centerChannel!==void 0?this.centerChannel:this.centerChannel=new Ap(this,this.centerUrl,this.centerToken)}buildUqUrl(t,n,r){let i,s=t.toLowerCase();return this.testing===!0?(n=r,s+="$test",i="test"):i="prod",this.uqDebug&&this.debugUqs.has(s)===!0&&(n=this.uqDebug),n.endsWith("/")===!1&&(n+="/"),`${n}uq/${i}/${t}/`}async getHttpChannel(t){let n=this.uqChannels[t];return n===void 0?(console.log("getHttpChannel channel=undefined first initUqToken"),this.uqChannels[t]=n=new Promise(async(r,i)=>{let s=await this.initUqToken(t),{url:a,token:o}=s;return console.log("url",a),this.uqChannels[t]=n=new Ap(this,a,o),r(n)}),await n):Cx(n)===!1?n:await n}async initUqToken(t){let[n,r]=t.split("/"),{unit:i}=this.props,s=await this.uqTokenApi.uq({unit:i,uqOwner:n,uqName:r});s.token===void 0&&(s.token=this.centerToken);let{db:a,url:o,urlTest:u}=s,c=this.buildUqUrl(a,o,u);return console.log("realUrl: %s",c),s.url=c,s}}const wC="	",_s=`
`,pi="\\ntbfvr",lc=pi.charCodeAt(0),bC=pi.charCodeAt(1),SC=pi.charCodeAt(2),jC=pi.charCodeAt(3),kC=pi.charCodeAt(4),CC=pi.charCodeAt(5),_C=pi.charCodeAt(6),ds=`
	\b\f\v\r`,NC=ds.charCodeAt(0),DC=ds.charCodeAt(1),EC=ds.charCodeAt(2),IC=ds.charCodeAt(3),PC=ds.charCodeAt(4),AC=ds.charCodeAt(5);let yi=class{constructor(t,n,r){x(this,"jName");x(this,"schema");x(this,"ver",0);x(this,"sys");x(this,"uq");x(this,"name");x(this,"typeId");x(this,"schemaLocal");x(this,"uqApi");x(this,"fields");x(this,"arrFields");x(this,"returns");x(this,"face");x(this,"fieldMaps",{});if(n===void 0)debugger;this.uq=t,this.name=n.toLowerCase(),this.typeId=r,this.sys=this.name.indexOf("$")>=0,this.schemaLocal=this.uq.localMap.item(this.name),this.uqApi=this.uq.uqApi}fieldMap(t){t===void 0&&(t="$");let n=this.fieldMaps[t];if(n===void 0){let r;if(t==="$")r=this.fields;else if(this.arrFields!==void 0){let i=this.arrFields.find(s=>s.name===t);i!==void 0&&(r=i.fields)}else if(this.returns!==void 0){let i=this.returns.find(s=>s.name===t);i!==void 0&&(r=i.fields)}if(r===void 0)return{};n={};for(let i of r)n[i.name]=i;this.fieldMaps[t]=n}return n}async loadSchema(){if(this.schema!==void 0)return;let t=this.schemaLocal.get();t||(t=await this.uq.loadEntitySchema(this.name)),this.buildSchema(t),await this.loadValues()}buildSchema(t){this.setSchema(t),this.buildFieldsTuid()}async loadValues(){}clearSchema(){this.schema=void 0}setSchema(t){if(t===void 0)return;let{name:n,version:r,permit:i}=t;this.ver=r||0,this.setJName(n),this.schemaLocal.set(t),this.schema=t,this.buildFieldsTuid(),this.setPermitRole(this.getPermitRole(i))}getPermitRole(t){if(t===void 0)return;let n=t.indexOf("+");return n<0?t:t.substring(0,n)}setPermitRole(t){}setJName(t){t!==this.name&&(this.jName=t)}setKeys(){}buildFieldsTuid(){let{fields:t,arrs:n,returns:r}=this.schema;this.fields=t,this.setKeys(),this.uq.buildFieldTuid(t),this.arrFields=n,this.uq.buildArrFieldsTuid(n,t),this.returns=r,this.uq.buildArrFieldsTuid(r,t)}schemaStringify(){return JSON.stringify(this.schema,(t,n)=>{if(t!=="_tuid")return n},4)}tuidFromName(t,n){if(this.schema===void 0)return;let{fields:r,arrs:i}=this.schema,s=this.uq;function a(d,f){if(f===void 0)return;let m=f.find(y=>y.name===d);if(m!==void 0)return s.getTuid(m.tuid)}let o=t.toLowerCase();if(n===void 0)return a(o,r);if(i===void 0)return;let u=n.toLowerCase(),c=i.find(d=>d.name===u);if(c!==void 0)return a(o,c.fields)}buildParams(t){let n={},r=this.fields;r!==void 0&&this.buildFieldsParams(n,r,t);let i=this.arrFields;if(i!==void 0)for(let s of i){let{name:a,fields:o}=s;if(t[a]===void 0)continue;let c=[];n[a]=c;for(let d of t){let f={};this.buildFieldsParams(f,o,d),c.push(f)}}return n}buildFieldsParams(t,n,r){for(let i of n){let{name:s,type:a}=i,o=r[s],u;switch(a){case"datetime":u=this.buildDateTimeParam(o);break;case"date":o instanceof Date?u=`${o.getFullYear()}-${o.getMonth()+1}-${o.getDate()}`:u=o;break;default:switch(typeof o){default:u=o;break;case"object":if(o instanceof Date){u=o;break}let c=i._tuid;c===void 0?u=o.id:u=c.getIdFromObj(o);break}break}t[s]=u}}buildDateTimeParam(t){let n;switch(typeof t){default:debugger;throw new Error("escape datetime field in pack data error: value="+t);case"undefined":return"";case"object":n=t;break;case"string":case"number":n=new Date(t);break}return Math.floor(n.getTime()/1e3)}buildDateParam(t){let n;switch(typeof t){default:debugger;throw new Error("escape datetime field in pack data error: value="+t);case"undefined":return"";case"string":return t;case"object":n=t;break;case"number":n=new Date(t);break}let r=n.toISOString(),i=r.indexOf("T");return i>0?r.substr(0,i):r}pack(t){let n=[],r=this.fields;r!==void 0&&this.packRow(n,r,t);let i=this.arrFields;if(i!==void 0)for(let s of i){let{name:a,fields:o}=s,u=sC(t,a);this.packArr(n,o,u)}return n.join("")}packJson(t){let n=[],r=this.fields;if(r!==void 0)for(let i of r)n.push(t[i.name]);return JSON.stringify(n)}escape(t,n){let r=t[n.name];if(r===null)return"";switch(n.type){case"datetime":return this.buildDateTimeParam(r);default:switch(typeof r){default:return r;case"object":let i=n._tuid;return i===void 0?r.id:i.getIdFromObj(r);case"string":let s=r.length,a="",o=0;for(let u=0;u<s;u++){let c=r.charCodeAt(u),d;switch(c){default:continue;case lc:d="\\\\";break;case DC:d="\\t";break;case NC:d="\\n";break;case IC:d="\\f";break;case PC:d="\\v";break;case EC:d="\\b";break;case AC:d="\\r";break}a+=r.substring(o,u)+d,o=u+1}return a+r.substring(o);case"undefined":return""}}}packRow(t,n,r){let i=n.length;if(i===0){t.push(_s);return}let s="";s+=this.escape(r,n[0]);for(let a=1;a<i;a++){let o=n[a];s+=wC+this.escape(r,o)}t.push(s+_s)}packArr(t,n,r){if(r!==void 0)if(r.length===0)t.push(_s);else for(let i of r)this.packRow(t,n,i);else t.push(_s);t.push(_s)}cacheFieldsInValue(t,n){for(let r of n){let{name:i,_tuid:s}=r;if(s===void 0)continue;let a=t[i];t[i]=s.boxId(a)}}unpackTuidIdsOfFields(t,n){if(n===void 0)return t;let r=[];for(let i of t){if(!i)continue;let s=i.length,a=0;for(;a<s;){if(i.charCodeAt(a)===10){++a;break}let u={};a=this.unpackRow(u,n,i,a),r.push(u)}}return r}unpackSheet(t){let n={},r=this.fields,i=0;r!==void 0&&(i=this.unpackRow(n,r,t,i));let s=this.arrFields;if(s!==void 0)for(let a of s)i=this.unpackArr(n,a,t,i);return n}unpackReturns(t,n){if(t===void 0)debugger;let r={},i=0,s=n||this.returns;if(s!==void 0)for(let a of s)i=this.unpackArr(r,a,t,i);return r}unpackRow(t,n,r,i,s=9){let a=0,o=0,u=i,c=0,d=r.length,f=n.length;const m=()=>{let y=n[c],{name:v}=y;if(a!==8){if(i>u){let w=r.substring(u,i);t[v]=this.to(t,w,y)}}else t[v]=null};for(;i<d;i++)if(a=o,o=r.charCodeAt(i),o===s){if(m(),u=i+1,++c,c>=f)return i=r.indexOf(`
`,u),i>=0?++i:i=d,i}else if(o===10){let y=n[c],{name:v}=y;if(a!==8){if(i>u){let w=r.substring(u,i);t[v]=this.to(t,w,y)}}else t[v]=null;return++i,++c,i}return m(),d}to(t,n,r){switch(r.type){default:return n;case"text":case"char":return this.reverseNT(n);case"datetime":case"timestamp":let i=Number(n);return isNaN(i)===!0?new Date(n):new Date(i*1e3);case"json":return JSON.parse(n);case"enum":case"tinyint":case"smallint":case"int":case"bigint":case"dec":case"float":case"double":return Number(n);case"id":let a=Number(n),{_tuid:o}=r;return o===void 0?a:o.boxId(a)}}reverseNT(t){if(t===void 0||t===null)return;let n=t.length,r="",i=0;for(let s=0;s<n;s++)if(t.charCodeAt(s)===lc){if(s===n-1)break;let o=t.charCodeAt(s+1),u;switch(o){default:continue;case lc:u="\\";break;case bC:u=`
`;break;case SC:u="	";break;case jC:u="\b";break;case kC:u="\f";break;case CC:u="\v";break;case _C:u="\r";break}r+=t.substring(i,s)+u,i=s+2,++s}return r+=t.substring(i,n),r}unpackArr(t,n,r,i){let s=i,a=[],o=r.length,{name:u,fields:c}=n;for(;i<o;){let d=r.charCodeAt(i);if(d===10){if(i===s){if(d=r.charCodeAt(i),d!==10)throw new Error("upackArr: arr第一个字符是10，则必须紧跟一个10，表示整个arr的结束");++i}++i;break}let f={};a.push(f),i=this.unpackRow(f,c,r,i)}return t[u]=a,i}};class fs extends aC{constructor(n,r,i=void 0,s=!0){super(r,i,s);x(this,"tries");x(this,"_entity");this.tries=0,this._entity=n}get entity(){return this._entity}async request(){return await this.entity.loadSchema(),await this.innerRequest()}async innerCall(){return await this.entity.uqApi.xcall(this)}async innerRequest(){let n=await this.innerCall(),{$uq:r,$modify:i,res:s}=n;return this.entity.uq.pullModify(i),r===void 0?this.xresult(s):await this.retry(r)}xresult(n){return n}get headers(){let{ver:n,uq:r}=this.entity,{uqVersion:i,unit:s}=r;return{uq:`${i}`,en:`${n}`,unit:s===void 0?void 0:String(s)}}async retry(n){if(++this.tries,this.tries>5)throw new Error(`${n.entity.name} can not get right uq response schema, 5 tries`);return this.rebuildSchema(n),await this.innerRequest()}rebuildSchema(n){let{uq:r,entity:i}=n;r!==void 0&&this.entity.uq.buildEntities(),i!==void 0&&this.entity.setSchema(i)}}let Dx=class extends fs{get entity(){return this._entity}};class zf extends fs{get entity(){return this._entity}get path(){return`query/${this.entity.name}`}xresult(t){return this.entity.unpackReturns(t)}buildParams(){return this.entity.buildParams(this.params)}}class Bf extends fs{get params(){return this._params}get entity(){return this._entity}get path(){return`query-page/${this.entity.name}`}buildParams(){let{pageStart:t,pageSize:n,params:r}=this.params,i;return r===void 0?i={key:""}:i=this.entity.buildParams(r),i.$pageStart=t,i.$pageSize=n,i}xresult(t){return this.entity.unpackReturns(t)}}const OC=1e4;class Ex{constructor(t){x(this,"queue",[]);x(this,"cache");x(this,"localArr");x(this,"waitingIds",[]);x(this,"tuidInner");this.cache=t.uq.net.createObservableMap(),this.tuidInner=t,this.initLocalArr()}initLocalArr(){this.localArr=this.tuidInner.schemaLocal.arr(this.tuidInner.name+".ids")}cacheSet(t,n){this.cache.set(t,n)}useId(t,n){if(t){if(typeof t!="number"){console.error("id cache "+t+" is not number");return}if(this.cache.has(t)===!0){this.moveToHead(t);return}if(this.tuidInner.cacheTuids(n===!0?70:20),this.waitingIds.findIndex(r=>r===t)>=0){this.moveToHead(t);return}if(this.queue.length>=OC){let r=this.queue.shift();if(r===t){this.queue.push(r);return}if(this.cache.has(r)===!0)this.cache.delete(r);else{let i=this.waitingIds.findIndex(s=>s===r);this.waitingIds.splice(i,1)}}this.waitingIds.push(t),this.queue.push(t)}}moveToHead(t){let n=this.queue.findIndex(r=>r===t);this.queue.splice(n,1),this.queue.push(t)}getValue(t){return this.cache.get(t)}remove(t){this.cache.delete(t);let n=this.queue.findIndex(r=>r===t);this.queue.splice(n,1),this.localArr.removeItem(t)}valueFromId(t){let n;switch(typeof t){case"object":n=t.id;break;case"number":n=t;break;default:return}return this.getValue(n)}resetCache(t){this.remove(t),this.useId(t)}cacheValue(t){if(t===void 0)return!1;let n=this.getIdFromObj(t);return n===void 0?!1:(this.cacheSet(n,t),!0)}getIdFromObj(t){return this.tuidInner.getIdFromObj(t)}async cacheIds(){let t=await this.loadIds();this.cacheIdValues(t)}cacheIdValues(t){if(t===void 0)return;let n=this.unpackTuidIds(t);for(let r of n)this.cacheValue(r)===!0&&this.cacheTuidFieldValues(r)}async modifyIds(t){let r=(await this.loadTuidIdsOrLocal(t)).filter(i=>{let s=i.indexOf("	");s<0&&(s=i.length);let a=Number(i.substring(0,s));return this.localArr.getItem(a)!==void 0});r.length!==0&&this.cacheIdValues(r)}async loadIds(){if(this.waitingIds.length===0)return;let t=[...this.waitingIds];return this.waitingIds=[],await this.loadTuidIdsOrLocal(t)}unpackTuidIds(t){return this.tuidInner.unpackTuidIds(t)}cacheTuidFieldValues(t){this.tuidInner.cacheTuidFieldValues(t)}async assureObj(t){let n=this.cache.get(t);if(n!==void 0)return n;let r=await this.loadTuidIdsOrLocal([t]);this.cacheIdValues(r)}async loadValuesFromIds(t){return await this.tuidInner.loadValuesFromIds(void 0,t)}async loadTuidIdsOrLocal(t){let n=[],r=[];for(let a of t){let o=this.localArr.getItem(a);o?n.push(o):r.push(a)}let i=r.length;if(i===0)return n;let s=await this.loadValuesFromIds(r);for(let a=0;a<i;a++){let o=s[a];if(!o)continue;let u=o.indexOf("	");u<0&&(u=o.length);let c=Number(o.substring(0,u)),d=r.findIndex(f=>f===c);d>=0&&r.splice(d,1),n.push(o),this.localArr.setItem(c,o)}i=r.length;for(let a=0;a<i;a++)this.localArr.setItem(r[a],"");return n}}class MC extends Ex{constructor(n,r){super(n);x(this,"div");x(this,"divName");this.div=r,this.divName=r.name,this.localArr=n.schemaLocal.arr(n.name+".ids."+this.divName)}initLocalArr(){}getIdFromObj(n){return this.div.getIdFromObj(n)}unpackTuidIds(n){return this.div.unpackTuidIds(n)}cacheTuidFieldValues(n){this.div.cacheTuidFieldValues(n)}async loadValuesFromIds(n){return await this.tuidInner.loadValuesFromIds(this.divName,n)}}class FC extends yi{constructor(){super(...arguments);x(this,"noCache");x(this,"typeName","tuid");x(this,"idName");x(this,"unique");x(this,"isImport",!1)}setSchema(n){super.setSchema(n);let{id:r}=n;this.idName=r}buildTuidBox(){return new Px(this)}getIdFromObj(n){return n[this.idName]}stopCache(){this.noCache=!0}static idValue(n){let r=typeof n;switch(r){default:debugger;throw new Error("unknown id type: "+r);case"undefined":return;case"object":return n.id;case"number":return n}}static equ(n,r){return n==null||r==null?!1:bo.idValue(n)===bo.idValue(r)}cacheIds(){}async modifyIds(n){}}class bo extends FC{}class Ix extends bo{constructor(n,r,i){super(n,r,i);x(this,"divs");x(this,"cacheFields");x(this,"idCache");x(this,"localArr");this.idCache=new Ex(this),this.localArr=this.schemaLocal.arr(this.name+".whole"),n.newVersion===!0&&this.localArr.removeAll()}setSchema(n){super.setSchema(n);let{arrs:r}=n;if(r!==void 0){this.divs={};for(let i of r){let{name:s}=i,a=new HC(this.uq,this,s);this.divs[s]=a,a.setSchema(i),a.buildFieldsTuid()}}}getObj(n){let r=this.valueFromId(n);return r||(this.useId(n),{id:n})}useId(n,r){this.noCache!==!0&&n&&this.idCache.useId(n,r)}boxId(n){if(n)return typeof n=="object"?n:(this.useId(n),{id:n})}valueFromId(n){return this.idCache.getValue(n)}resetCache(n){typeof n=="object"&&(n=n.id),this.idCache.resetCache(n)}async assureBox(n){if(n)return typeof n=="object"&&(n=n.id),await this.idCache.assureObj(n),this.idCache.getValue(n)}cacheIds(){if(this.idCache.cacheIds(),this.divs!==void 0)for(let n in this.divs)this.divs[n].cacheIds()}async modifyIds(n){await this.idCache.modifyIds(n)}cacheTuids(n){this.uq.cacheTuids(n)}get hasDiv(){return this.divs!==void 0}div(n){return this.divs&&this.divs[n]}async loadValuesFromIds(n,r){return await new RC(this,{divName:n,ids:r},void 0,!1).request()}async loadMain(n){return typeof n=="object"&&(n=n.id),await this.idCache.assureObj(n),this.idCache.valueFromId(n)}async load(n){if(n===void 0||n===0)return;typeof n=="object"&&(n=n.id);let r;if(r=await new TC(this,n).request(),r!==void 0){for(let i of this.schema.fields){let{tuid:s}=i;if(s===void 0)continue;let a=this.uq.getTuid(s);if(a===void 0)continue;let o=i.name;r[o]=a.boxId(r[o])}return this.idCache.cacheValue(r),this.cacheTuidFieldValues(r),r}}cacheTuidFieldValues(n){let{fields:r,arrs:i}=this.schema;if(this.cacheFieldsInValue(n,r),i!==void 0)for(let s of i){let{name:a,fields:o}=s,u=n[a];if(u===void 0)continue;let c=this.div(a);for(let d of u)c.cacheValue(d),this.cacheFieldsInValue(d,o)}}buildFieldsTuid(){super.buildFieldsTuid();let{mainFields:n,$create:r,$update:i,stampOnMain:s}=this.schema;this.cacheFields=n||this.fields,s===!0&&(r===!0&&this.cacheFields.push({name:"$create",type:"timestamp",_tuid:void 0}),i===!0&&this.cacheFields.push({name:"$update",type:"timestamp",_tuid:void 0})),this.uq.buildFieldTuid(this.cacheFields)}unpackTuidIds(n){return this.unpackTuidIdsOfFields(n,this.cacheFields)}async save(n,r){let i=await new LC(this,{id:n,props:r}).request();return n!==void 0&&(this.idCache.remove(n),this.localArr.removeItem(n)),i}async saveProp(n,r,i){await new VC(this,{id:n,prop:r,value:i}).request(),this.idCache.remove(n),await this.idCache.assureObj(n)}async all(){return await new UC(this,{}).request()}async search(n,r,i){return await this.searchArr(void 0,n,r,i)}async searchArr(n,r,i,s){let a={arr:void 0,owner:n,key:r,pageStart:i,pageSize:s},o=await new qC(this,a).request(),{fields:u}=this.schema;for(let c of o)this.cacheFieldsInValue(c,u);return o}async loadArr(n,r,i){if(!(i===void 0||i===0))return await new $C(this,{arr:n,owner:r,id:i}).request()}async saveArr(n,r,i,s){return await new zC(this,{arr:n,owner:r,id:i,props:s}).request()}async posArr(n,r,i,s){return await new BC(this,{arr:n,owner:r,id:i,order:s}).request()}async no(){return await new YC(this,void 0).request()}}class Tn extends fs{get entity(){return this._entity}}class TC extends Tn{constructor(){super(...arguments);x(this,"method","GET")}get path(){return`tuid/${this.entity.name}/${this.params}`}}class RC extends Tn{get path(){let{divName:t}=this.params;return`tuidids/${this.entity.name}/${t!==void 0?t:"$"}`}buildParams(){return this.params.ids}xresult(t){return t.split(`
`)}}let LC=class extends Tn{get path(){return`tuid/${this.entity.name}`}buildParams(){let{fields:t,arrs:n}=this.entity.schema,{id:r,props:i}=this.params,s={$id:r};if(this.transParams(s,i,t),n!==void 0)for(let a of n){let o=a.name,u=[],c=a.fields,d=i[o];if(d!==void 0)for(let f of d){let m={};this.transParams(m,f,c),u.push(m)}s[o]=u}return s}transParams(t,n,r){if(n!==void 0)for(let i of r){let{name:s,tuid:a,type:o}=i,u=n[s];if(a!==void 0)typeof u=="object"&&u!==null&&(u=u.id);else switch(o){case"date":u=this.entity.buildDateParam(u);break;case"datetime":u=this.entity.buildDateTimeParam(u);break}t[s]=u}}};class qC extends Tn{get path(){return`tuids/${this.entity.name}`}}let UC=class extends Tn{constructor(){super(...arguments);x(this,"method","GET")}get path(){return`tuid-all/${this.entity.name}`}};class $C extends Tn{constructor(){super(...arguments);x(this,"method","GET")}get path(){let{arr:n,owner:r,id:i}=this.params;return`tuid-arr/${this.entity.name}/${r}/${n}/${i}`}}class VC extends Tn{get path(){return`tuid-prop/${this.entity.name}/`}}class zC extends Tn{get path(){let{arr:t,owner:n}=this.params;return`tuid-arr/${this.entity.name}/${n}/${t}/`}buildParams(){let{id:t,props:n}=this.params,r=Object.assign({},n);return r.$id=t,r}}class BC extends Tn{get path(){let{arr:t,owner:n}=this.params;return`tuid-arr-pos/${this.entity.name}/${n}/${t}/`}buildParams(){let{id:t,order:n}=this.params;return{bid:t,$order:n}}}class YC extends Tn{get path(){return`tuid-no/${this.entity.name}/`}buildParams(){let t=new Date,n=t.getFullYear(),r=t.getMonth()+1,i=t.getDate();return{year:n,month:r,date:i}}}class WC extends bo{constructor(n,r,i,s){super(n,r,i);x(this,"tuidLocal");x(this,"from");x(this,"isImport",!0);this.from=s}setFrom(n){this.tuidLocal=n}getObj(n){var r;return(r=this.tuidLocal)==null?void 0:r.getObj(n)}useId(n){var r;(r=this.tuidLocal)==null||r.useId(n)}boxId(n){var r;if(!this.tuidLocal)debugger;return(r=this.tuidLocal)==null?void 0:r.boxId(n)}valueFromId(n){var r;return(r=this.tuidLocal)==null?void 0:r.valueFromId(n)}resetCache(n){var r;(r=this.tuidLocal)==null||r.resetCache(n)}async assureBox(n){return await this.tuidLocal.assureBox(n),this.tuidLocal.valueFromId(n)}get hasDiv(){var n;return(n=this.tuidLocal)==null?void 0:n.hasDiv}div(n){var r;return(r=this.tuidLocal)==null?void 0:r.div(n)}async loadMain(n){return await this.tuidLocal.loadMain(n)}async load(n){return await this.tuidLocal.load(n)}async save(n,r){return await this.tuidLocal.save(n,r)}async saveProp(n,r,i){await this.tuidLocal.saveProp(n,r,i)}async all(){return await this.tuidLocal.all()}async search(n,r,i){return await this.tuidLocal.search(n,r,i)}async searchArr(n,r,i,s){return await this.tuidLocal.searchArr(n,r,i,s)}async loadArr(n,r,i){return await this.tuidLocal.loadArr(n,r,i)}async saveArr(n,r,i,s){await this.tuidLocal.saveArr(n,r,i,s)}async posArr(n,r,i,s){await this.tuidLocal.posArr(n,r,i,s)}async no(){return await this.tuidLocal.no()}}class Px{constructor(t){x(this,"tuid");x(this,"ownerField");this.tuid=t}boxId(t){return this.tuid.boxId(t)}getIdFromObj(t){return this.tuid.getIdFromObj(t)}useId(t){return this.tuid.useId(t)}async showInfo(){alert("showInfo not implemented")}}class HC extends Ix{constructor(n,r,i){super(n,i,0);x(this,"typeName","div");x(this,"tuid");this.tuid=r,this.idName="id",this.idCache=new MC(r,this)}get owner(){return this.tuid}buildFieldsTuid(){super.buildFieldsTuid();let{mainFields:n}=this.schema;if(n===void 0)debugger;this.uq.buildFieldTuid(this.cacheFields=n)}buildTuidDivBox(n){return new QC(this.tuid,this,n)}getIdFromObj(n){return n[this.idName]}cacheValue(n){this.idCache.cacheValue(n)}useId(n,r){this.noCache!==!0&&this.idCache.useId(n,r)}valueFromId(n){return this.idCache.getValue(n)}async assureBox(n){return await this.idCache.assureObj(n),this.idCache.getValue(n)}async cacheIds(){await this.idCache.cacheIds()}cacheTuidFieldValues(n){let r=this.schema.fields;this.cacheFieldsInValue(n,r)}unpackTuidIds(n){return this.unpackTuidIdsOfFields(n,this.cacheFields)}}class QC extends Px{constructor(n,r,i){super(n);x(this,"div");this.div=r,this.ownerField=i}boxId(n){return this.div.boxId(n)}getIdFromObj(n){return this.div.getIdFromObj(n)}useId(n){return this.div.useId(n)}}class GC{constructor(t){x(this,"uq");x(this,"modifyMax");x(this,"cacheTimer");x(this,"loadIds",()=>{this.clearCacheTimer();let{tuids:t}=this.uq;for(let n in t)t[n].cacheIds()});this.uq=t}cacheTuids(t){this.clearCacheTimer(),this.cacheTimer=setTimeout(this.loadIds,t)}clearCacheTimer(){this.cacheTimer!==void 0&&(clearTimeout(this.cacheTimer),this.cacheTimer=void 0)}pullModify(t){if(t===void 0)return;let n=Math.floor(Date.now()/1e3);this.modifyMax===void 0&&(this.modifyMax=this.uq.localModifyMax.get(),this.modifyMax===void 0&&(this.modifyMax={max:t,seconds:n},this.uq.localModifyMax.set(this.modifyMax)));let{max:r,seconds:i}=this.modifyMax,s=3600;if(n-i<s||t<=r)return;let a=[],{tuids:o}=this.uq;for(let u in o)a.push(u);a.length!==0&&(this.modifyMax.seconds=n,this.innerPullModify(a.join("	")))}async innerPullModify(t){let{uqApi:n,tuids:r}=this.uq,{max:i}=this.modifyMax,s=await n.queueModify(i,30,t),a={},o=0;for(let c of s.queue){let{id:d,entity:f,key:m}=c;if(!m)continue;let y=r[f];if(y===void 0)continue;let v=a[f];v===void 0&&(v=a[f]={tuid:y,ids:[]}),v.ids.push(m),d>o&&(o=d)}for(let c in a){let{tuid:d,ids:f}=a[c];await d.modifyIds(f)}let u=Math.floor(Date.now()/1e3);this.modifyMax={max:o,seconds:u},this.uq.localModifyMax.set(this.modifyMax)}}class KC extends yi{get typeName(){return"action"}async submit(t,n=void 0,r=!0){return await(this.schema.jsoned===!0?new ZC(this,t,n,r):new Ia(this,t,n,r)).request()}async submitReturns(t,n=void 0){return await new JC(this,t,n).request()}async submitConvert(t,n=void 0){return await new e_(this,t,n).request()}}class XC extends KC{}class Ia extends Dx{get path(){return"action/"+this.entity.name}buildParams(){return{$$user:this.$$user,data:this.entity.pack(this.params)}}}class ZC extends Dx{get path(){return"action/"+this.entity.name}buildParams(){return{$$user:this.$$user,data:this.entity.packJson(this.params)}}}class JC extends Ia{get path(){return"action/"+this.entity.name+"/returns"}xresult(t){let{returns:n}=this.entity,r=n.length,i={};for(let s=0;s<r;s++){let a=n[s];i[a.name]=t[s]}return i}}class e_ extends Ia{get path(){return"action-convert/"+this.entity.name}buildParams(){return{$$user:this.$$user,data:this.params}}}class t_ extends yi{constructor(){super(...arguments);x(this,"states");x(this,"verify")}get typeName(){return"sheet"}setSchema(n){super.setSchema(n),this.states=n.states,this.verify=n.verify}build(n){this.states=[];for(let r of n.ops)this.states.push({name:r,actions:void 0})}createSheetState(n,r){let i={name:n,actions:[]},s=i.actions;for(let a in r){let o={name:a};s.push(o)}return i}async save(n,r){let{id:i}=this.uq,s={app:i,discription:n,data:r};return await new Ax(this,s).request()}async saveDebugDirect(n,r){let{id:i}=this.uq,s={app:i,discription:n,data:r};return await new r_(this,s).request()}async action(n,r,i,s){return await new Ox(this,{id:n,flow:r,state:i,action:s}).request()}async actionDebugDirect(n,r,i,s){return await new i_(this,{id:n,flow:r,state:i,action:s}).request()}unpack(n){let i=n[0][0],s=this.unpackSheet(i.data),a=n[1];return{brief:i,data:s,flows:a}}async getSheet(n){let r=await new s_(this,n).request();return r[0].length===0?await this.getArchive(n):this.unpack(r)}async getArchive(n){let r=await new a_(this,n).request();return this.unpack(r)}async getArchives(n,r){let i={pageStart:n,pageSize:r};return await new l_(this,i).request()}async getStateSheets(n,r,i){let s={state:n,pageStart:r,pageSize:i};return await new o_(this,s).request()}async stateSheetCount(){return await new u_(this,void 0).request()}async userSheets(n,r,i,s){let a={state:n,user:r,pageStart:i,pageSize:s};return await new c_(this,a).request()}async mySheets(n,r,i){let s={state:n,pageStart:r,pageSize:i};return await new d_(this,s).request()}}class n_ extends t_{}class ar extends fs{constructor(){super(...arguments);x(this,"suffix")}get entity(){return this._entity}get path(){return`sheet/${this.entity.name}/${this.suffix}`}}class Ax extends ar{get path(){return`sheet/${this.entity.name}`}buildParams(){let{app:t,discription:n,data:r}=this.params;return{app:t,discription:n,data:this.entity.pack(r)}}xresult(t){let{verify:n}=this.entity;if(n===void 0)return t;let r=t.verify;if(r===void 0||r.length===0)return t.verify=void 0,t;let{returns:i}=n;return t.verify=this.entity.unpackReturns(r,i),t}}class r_ extends Ax{get path(){return`sheet/${this.entity.name}/direct`}}class Ox extends ar{constructor(){super(...arguments);x(this,"method","PUT")}get path(){return`sheet/${this.entity.name}`}}class i_ extends Ox{get path(){return`sheet/${this.entity.name}/direct`}}class s_ extends ar{constructor(){super(...arguments);x(this,"method","GET")}buildParams(){}get path(){return`sheet/${this.entity.name}/get/${this.params}`}}class a_ extends ar{constructor(){super(...arguments);x(this,"method","GET")}buildParams(){}get path(){return`sheet/${this.entity.name}/archive/${this.params}`}}class l_ extends ar{constructor(){super(...arguments);x(this,"suffix","archives")}}class o_ extends ar{constructor(){super(...arguments);x(this,"suffix","states")}}class u_ extends ar{constructor(){super(...arguments);x(this,"method","GET");x(this,"suffix","statecount")}xresult(n){let{states:r}=this.entity;return r.map(i=>{let s=i.name,a=0,o=n.find(u=>u.state===s);return o!==void 0&&(a=o.count),{state:s,count:a}})}}class c_ extends ar{constructor(){super(...arguments);x(this,"suffix","user-sheets")}xresult(n){return n}}class d_ extends ar{constructor(){super(...arguments);x(this,"suffix","my-sheets")}xresult(n){return n}}class su extends yi{constructor(){super(...arguments);x(this,"isPaged");x(this,"order")}get typeName(){return"query"}setSchema(n){super.setSchema(n);let{returns:r,order:i}=n;this.returns=r,this.order=i??"asc",this.isPaged=r&&r.find(s=>s.name==="$page")!==void 0}pageCaller(n,r=void 0,i=!0){return new Bf(this,n,r,i)}async page(n,r,i,s=void 0,a=!0){let o={pageStart:r,pageSize:i,params:n};return await this.pageCaller(o,s,a).request()}queryCaller(n,r=void 0,i=!0){return new zf(this,n,r,i)}async query(n,r=void 0,i=!0){return await this.queryCaller(n,r,i).request()}async table(n,r=void 0,i=!0){let s=await this.query(n,r,i);for(let a in s)return s[a]}async obj(n,r=void 0,i=!0){let s=await this.table(n,r,i);if(s.length>0)return s[0]}async scalar(n,r=void 0,i=!0){let s=await this.obj(n,r,i);for(let a in s)return s[a]}}class f_ extends su{}class h_ extends su{constructor(){super(...arguments);x(this,"queryApiName","book")}get typeName(){return"book"}queryCaller(n){return new p_(this,n)}}class m_ extends h_{}class p_ extends zf{get path(){return`book/${this.entity.name}`}}class y_ extends su{constructor(){super(...arguments);x(this,"queryApiName","history")}get typeName(){return"history"}}class v_ extends y_{}class g_ extends yi{constructor(){super(...arguments);x(this,"keys");x(this,"actions",{});x(this,"queries",{});x(this,"schemaFrom")}get typeName(){return"map"}setSchema(n){super.setSchema(n),this.schemaFrom=this.schema.from;let{actions:r,queries:i,keys:s}=n;this.uq.buildFieldTuid(this.keys=s);for(let a in r){let o=r[a],{name:u}=o;if(u===void 0)continue;let c=this.uq.newAction(u,void 0);c.setSchema(o),c.buildFieldsTuid(),this.actions[a]=c}for(let a in i){let o=i[a],{name:u}=o;if(u===void 0)continue;let c=this.uq.newQuery(u,void 0);c.setSchema(o),c.buildFieldsTuid(),this.queries[a]=c}}async add(n){return await new w_(this,n).request()}async del(n){return await new b_(this,n).request()}async all(){return await new S_(this,void 0).request()}async page(n,r,i){return await new j_(this,{pageStart:r,pageSize:i,param:n}).request()}async query(n){return await new k_(this,n).request()}async table(n){let r=await this.query(n);for(let i in r)return r[i]}async obj(n){let r=await this.table(n);if(r.length>0)return r[0]}async scalar(n){let r=await this.obj(n);for(let i in r)return r[i]}}let x_=class extends g_{};class Pa extends fs{get entity(){return this._entity}get path(){}async innerCall(){let t=this.getCaller(this.params),n=await this.entity.uqApi.xcall(t);return{res:t.xresult(n.res)}}buildParams(){return super.buildParams()}}class w_ extends Pa{getCaller(t){return new C_(this.entity,this.entity.actions.add,t)}}class b_ extends Pa{getCaller(t){return new __(this.entity,this.entity.actions.add,t)}}class S_ extends Pa{getCaller(t){return new N_(this.entity,this.entity.queries.all,t)}}class j_ extends Pa{getCaller(t){return new D_(this.entity,this.entity.queries.page,t)}}class k_ extends Pa{getCaller(t){return new E_(this.entity,this.entity.queries.query,t)}}class C_ extends Ia{constructor(n,r,i){super(r,i);x(this,"map");this.map=n}get path(){return`map/${this.map.name}/add`}get headers(){}}class __ extends Ia{constructor(n,r,i){super(r,i);x(this,"map");this.map=n}get path(){return`map/${this.map.name}/del`}get headers(){}}class N_ extends Bf{constructor(n,r,i){super(r,i);x(this,"map");this.map=n}get path(){return`map/${this.map.name}/all`}get headers(){}}class D_ extends Bf{constructor(n,r,i){super(r,i);x(this,"map");this.map=n}get path(){return`map/${this.map.name}/page`}get headers(){}}class E_ extends zf{constructor(n,r,i){super(r,i);x(this,"map");this.map=n}get path(){return`map/${this.map.name}/query`}get headers(){}}class I_ extends su{constructor(){super(...arguments);x(this,"queryApiName","pending")}get typeName(){return"pending"}}class P_ extends I_{}class A_ extends yi{get typeName(){return"enum"}}class Yf extends yi{constructor(){super(...arguments);x(this,"permitRole")}setPermitRole(n){this.permitRole=n}}class O_ extends Yf{constructor(){super(...arguments);x(this,"create");x(this,"update");x(this,"owner");x(this,"keys")}get typeName(){return"id"}async NO(){return await this.uqApi.post("id-no",{ID:this.name})}setKeys(){this.keys=this.schema.keys}get isGlobal(){return this.schema.global}getIdFromObj(n){return n.id}valueFromString(n){if(!n)return;let r={};return this.unpackRow(r,this.fields,n,0,12),r}cacheTuids(n){}async valueFromId(n){return(await this.uq.QueryID({ID:this,id:[n]}))[0]}async loadValuesFromIds(n,r){return await this.uq.QueryID({IDX:[this],id:r})}cacheTuidFieldValues(n){}unpackTuidIds(n){}unpackJoins(n,r){let i={};i=this.unpackStr(n==null?void 0:n.value,this.fields,void 0);let s=[],a=0,o=this.schema.joins;for(let u of o){let{ID:c,field:d}=u,f=this.uq.entities[c],{fields:m}=f,y=m.find(w=>w.name===d),v=r[a];s.push([c,v.map(w=>this.unpackStr(w.value,m,y))]),++a}return[[this.name,i],s]}unpackStr(n,r,i){let s={},a=0,o=0,u=a,c=0,d=n.length,f=r.length,m=12;const y=()=>{let v=r[c];v===i&&(++c,v=r[c]);let{name:w}=v;if(a>u){let j=n.substring(u,a);s[w]=this.to(s,j,v)}};for(;a<d&&(o=n.charCodeAt(a),!(o===m&&(y(),u=a+1,++c,c>=f)));a++);return y(),s}}class M_ extends O_{}class F_ extends Yf{get typeName(){return"idx"}}class T_ extends F_{}class R_ extends Yf{get typeName(){return"ix"}}class L_ extends R_{}class q_{constructor(t,n,r){x(this,"entities",{});x(this,"entityTypes",{});x(this,"enums",{});x(this,"actions",{});x(this,"queries",{});x(this,"ids",{});x(this,"idxs",{});x(this,"ixs",{});x(this,"sheets",{});x(this,"books",{});x(this,"maps",{});x(this,"histories",{});x(this,"pendings",{});x(this,"tuidsCache");x(this,"localEntities");x(this,"localMap");x(this,"localModifyMax");x(this,"tuids",{});x(this,"newVersion");x(this,"uqOwner");x(this,"uqName");x(this,"uqSchema");x(this,"name");x(this,"id");x(this,"net");x(this,"uqApi");x(this,"baseUrl","tv/");x(this,"unit");x(this,"proxy");x(this,"$proxy");x(this,"uqVersion");x(this,"config");x(this,"roles");x(this,"Role");x(this,"tuidArr",[]);x(this,"actionArr",[]);x(this,"queryArr",[]);x(this,"idArr",[]);x(this,"idxArr",[]);x(this,"ixArr",[]);x(this,"enumArr",[]);x(this,"sheetArr",[]);x(this,"bookArr",[]);x(this,"mapArr",[]);x(this,"historyArr",[]);x(this,"pendingArr",[]);x(this,"Biz",async(t,n)=>{await this.uqApi.bizSheet(t,n)});x(this,"BizSheetAct",async(t,n,r)=>await this.uqApi.bizSheetAct(t,n,r));x(this,"Acts",async t=>{let r=(await this.apiActs(t,0))[0].ret.split(`
`),i=[];for(let a in t)i.push(a);let s={};for(let a=0;a<i.length;a++)s[i[a]]=Ns(r[a].split("	"));return s});x(this,"AdminGetList",async()=>await this.uqApi.getAdmins());x(this,"AdminSetMe",async()=>await this.uqApi.setMeAdmin());x(this,"AdminSet",async(t,n,r)=>await this.uqApi.setAdmin(t,n,r));x(this,"AdminIsMe",async()=>await this.uqApi.isAdmin());x(this,"IDValue",(t,n)=>{if(!t)return;let r=this.ids[t.toLowerCase()];if(r!==void 0)return r.valueFromString(n)});x(this,"$Acts",async t=>await this.apiActs(t,1));x(this,"ActIX",async t=>(await this.apiActIX(t,0))[0].ret.trim().split("	").map(a=>Number(a)));x(this,"$ActIX",async t=>await this.apiActIX(t,1));x(this,"ActIXSort",async t=>await this.apiActIxSort(t,0));x(this,"$ActIXSort",async t=>await this.apiActIxSort(t,1));x(this,"ActIDProp",async(t,n,r,i)=>{await this.uqApi.post("act-id-prop",{ID:t.name,id:n,name:r,value:i})});x(this,"ActID",async t=>{let r=(await this.apiActID(t,0))[0].ret.split("	").map(i=>Number(i))[0];if(isNaN(r)!==!0)return r});x(this,"$ActID",async t=>await this.apiActID(t,1));x(this,"ActDetail",async t=>{let n=await this.apiActDetail(t,0),s=n[0].ret.split(`
`).map(a=>a.split("	"));return n={main:Ns(s[0])[0],detail:Ns(s[1]),detail2:Ns(s[2]),detail3:Ns(s[3])},n});x(this,"$ActDetail",async t=>await this.apiActDetail(t,1));x(this,"QueryID",async t=>await this.apiQueryID(t,0));x(this,"$QueryID",async t=>await this.apiQueryID(t,1));x(this,"IDTv",async t=>{let n=await this.apiIDTv(t,0),r=[];for(let i of n){let{$type:s,$tv:a}=i;if(!a)continue;let o=this.ids[s];if(!o)continue;let{schema:u}=o;u||(await o.loadSchema(),u=o.schema);let{nameNoVice:c}=u;if(!c)continue;let d=a.split(`
`),f=c.length;for(let m=0;m<f;m++){let y=c[m];i[y]=d[m]}delete i.$tv,r.push(i)}return r});x(this,"$IDTv",async t=>await this.apiIDTv(t,1));x(this,"IDNO",async t=>{var r;return(r=(await this.apiIDNO(t,0))[0])==null?void 0:r.no});x(this,"IDEntity",t=>this.entityTypes[t]);x(this,"IDFromName",t=>this.ids[t]);x(this,"$IDNO",async t=>await this.apiIDNO(t,1));x(this,"IDDetailGet",async t=>await this.apiIDDetailGet(t,0));x(this,"$IDDetailGet",async t=>await this.apiIDDetailGet(t,1));x(this,"cache",{});x(this,"cachePromise",{});x(this,"idCache",t=>this.cache[t]);x(this,"idObj",async t=>{let n=this.cache[t];if(n===void 0){let r=this.cachePromise[t];r===void 0&&(r=this.apiID({id:t,IDX:void 0},0),this.cachePromise[t]=r);let i;try{i=await r}catch(s){console.error(s)}if(i!==void 0){n=i[0],this.cache[t]=n===void 0?null:n;let s=i.length;for(let a=1;a<s;a++){let o=i[a],{id:u}=o===void 0?null:o;this.cache[u]=o}}else this.cache[t]=null;delete this.cachePromise[t]}return n});x(this,"idJoins",async t=>{let n=await this.apiPost("id-joins",0,{id:t}),r=n.shift(),i=r==null?void 0:r[0];if(i===void 0)throw new Error("id-joins return no value");let{ID:s}=i,a=this.IDFromName(s),o=n,[u,c]=a.unpackJoins(i,o);return{ID:a,main:u,joins:c}});x(this,"ID",async t=>await this.apiID(t,0));x(this,"$ID",async t=>await this.apiID(t,1));x(this,"KeyID",async t=>await this.apiKeyID(t,0));x(this,"$KeyID",async t=>await this.apiKeyID(t,1));x(this,"IX",async t=>await this.apiIX(t,0));x(this,"$IX",async t=>await this.apiIX(t,1));x(this,"IXValues",async t=>await this.apiIXValues(t,0));x(this,"IXr",async t=>await this.apiIXr(t,0));x(this,"$IXr",async t=>await this.apiIXr(t,1));x(this,"KeyIX",async t=>await this.apiKeyIX(t,0));x(this,"$KeyIX",async t=>await this.apiKeyIX(t,1));x(this,"IDLog",async t=>await this.apiIDLog(t,0));x(this,"$IDLog",async t=>await this.apiIDLog(t,1));x(this,"IDSum",async t=>await this.apiIDSum(t,0));x(this,"$IDSum",async t=>await this.apiIDSum(t,1));x(this,"IDinIX",async t=>await this.apiIDinIX(t,0));x(this,"$IDinIX",async t=>await this.apiIDinIX(t,1));x(this,"IDxID",async t=>await this.apiIDxID(t,0));x(this,"$IDxID",async t=>await this.apiIDxID(t,1));x(this,"IDTree",async t=>await this.apiIDTree(t,0));x(this,"$IDTree",async t=>await this.apiIDTree(t,1));this.net=t,this.unit=0;let{id:i,uqOwner:s,uqName:a,newVersion:o}=n;this.newVersion=o,this.uqOwner=s,this.uqName=a,this.uqSchema=r,this.id=i,this.name=s+"/"+a,this.uqVersion=0,this.localMap=t.createLocalMap(this.name),this.localModifyMax=this.localMap.child("$modifyMax"),this.localEntities=this.localMap.child("$access"),this.tuidsCache=new GC(this),this.uqApi=new lC(this)}getID(t){return this.ids[t.toLowerCase()]}getIDX(t){return this.idxs[t.toLowerCase()]}getIX(t){return this.ixs[t.toLowerCase()]}clearLocalEntites(){this.localMap.removeItem(this.name)}async getRoles(){return this.roles!==void 0?this.roles:(this.roles=await this.uqApi.getRoles(),this.roles)}tuid(t){return this.tuids[t.toLowerCase()]}tuidDiv(t,n){let r=this.tuids[t.toLowerCase()];return r&&r.div(n.toLowerCase())}action(t){return this.actions[t.toLowerCase()]}sheet(t){return this.sheets[t.toLowerCase()]}query(t){return this.queries[t.toLowerCase()]}book(t){return this.books[t.toLowerCase()]}map(t){return this.maps[t.toLowerCase()]}history(t){return this.histories[t.toLowerCase()]}pending(t){return this.pendings[t.toLowerCase()]}sheetFromTypeId(t){for(let n in this.sheets){let r=this.sheets[n];if(r.typeId===t)return r}}buildEntities(){this.buildEntityFromUqSchema()}buildEntityFromUqSchema(){for(let t in this.uqSchema){let n=this.uqSchema[t],{name:r,type:i}=n;if(r===void 0||i===void 0)continue;let s=this.fromType(r,i);s!==void 0&&s.buildSchema(n)}}buildRole(t){if(t===void 0)return;let n={};for(let r in t){let i=t[r];r!=="$"&&(i=i.map(s=>`${r}.${s}`)),n[r]=i}return n}buildTuids(t){for(let n in t){let r=t[n],{typeId:i,from:s}=r,a=this.newTuid(n,i,s);a.sys=!0}for(let n in t){let r=t[n];this.getTuid(n).setSchema(r)}for(let n in this.tuids)this.tuids[n].buildFieldsTuid()}buildIds(t){for(let n in t){let r=t[n],{typeId:i}=r;this.newID(n,i).setSchema(r)}}async loadEntitySchema(t){return await this.uqApi.schema(t)}async loadAllSchemas(){let t=await this.uqApi.allSchemas();[this.actionArr,this.enumArr,this.sheetArr,this.queryArr,this.bookArr,this.mapArr,this.historyArr,this.pendingArr,this.idArr,this.idxArr,this.ixArr].forEach(r=>{r.forEach(i=>{let s=t[i.name.toLowerCase()];if(!s)return;let a=s.call;a&&i.buildSchema(a)})})}getTuid(t){return this.tuids[t]}buildAccess(t){for(let n in t){let r=t[n];switch(typeof r){case"string":this.fromType(n,r);break;case"object":this.fromObj(n,r);break}}}cacheTuids(t){this.tuidsCache.cacheTuids(t)}setEntity(t,n){this.entities[t]=n,this.entities[t.toLowerCase()]=n,this.entityTypes[n.typeId]=n}newEnum(t,n){let r=this.enums[t];return r!==void 0||(r=this.enums[t]=new A_(this,t,n),this.setEntity(t,r),this.enumArr.push(r)),r}newAction(t,n){let r=this.actions[t];return r!==void 0||(r=this.actions[t]=new XC(this,t,n),this.setEntity(t,r),this.actionArr.push(r)),r}newTuid(t,n,r){let i=this.tuids[t];return i!==void 0||(r!==void 0?i=new WC(this,t,n,r):i=new Ix(this,t,n),this.tuids[t]=i,this.setEntity(t,i),this.tuidArr.push(i)),i}newQuery(t,n){let r=this.queries[t];return r!==void 0||(r=this.queries[t]=new f_(this,t,n),this.setEntity(t,r),this.queryArr.push(r)),r}newBook(t,n){let r=this.books[t];return r!==void 0||(r=this.books[t]=new m_(this,t,n),this.setEntity(t,r),this.bookArr.push(r)),r}newMap(t,n){let r=this.maps[t];return r!==void 0||(r=this.maps[t]=new x_(this,t,n),this.setEntity(t,r),this.mapArr.push(r)),r}newHistory(t,n){let r=this.histories[t];if(r===void 0)return r=this.histories[t]=new v_(this,t,n),this.setEntity(t,r),this.historyArr.push(r),r}newPending(t,n){let r=this.pendings[t];if(r===void 0)return r=this.pendings[t]=new P_(this,t,n),this.setEntity(t,r),this.pendingArr.push(r),r}newSheet(t,n){let r=this.sheets[t];return r!==void 0||(r=this.sheets[t]=new n_(this,t,n),this.setEntity(t,r),this.sheetArr.push(r)),r}newID(t,n){let r=t.toLowerCase(),i=this.ids[r];return i!==void 0||(i=this.ids[r]=new M_(this,t,n),this.setEntity(t,i),this.idArr.push(i)),i}newIDX(t,n){let r=t.toLowerCase(),i=this.idxs[r];return i!==void 0||(i=this.idxs[r]=new T_(this,t,n),this.setEntity(t,i),this.idxArr.push(i)),i}newIX(t,n){let r=t.toLowerCase(),i=this.ixs[r];return i!==void 0||(i=this.ixs[r]=new L_(this,t,n),this.setEntity(t,i),this.ixArr.push(i)),i}fromType(t,n){let r=n.split("|");n=r[0];let i=Number(r[1]);switch(n){default:break;case"tuid":break;case"id":return this.newID(t,i);case"idx":return this.newIDX(t,i);case"ix":return this.newIX(t,i);case"action":return this.newAction(t,i);case"query":return this.newQuery(t,i);case"book":return this.newBook(t,i);case"map":return this.newMap(t,i);case"history":return this.newHistory(t,i);case"sheet":return this.newSheet(t,i);case"pending":return this.newPending(t,i);case"enum":return this.newEnum(t,i)}}fromObj(t,n){switch(n.$){case"sheet":this.buildSheet(t,n);break}}buildSheet(t,n){let r=this.sheets[t];r===void 0&&(r=this.newSheet(t,n.id)),r.build(n)}buildFieldTuid(t,n){var r;if(t!==void 0){for(let i of t){let{tuid:s}=i;if(s===void 0)continue;let a=this.getTuid(s);a!==void 0&&(i._tuid=a.buildTuidBox())}for(let i of t){let{owner:s}=i;if(s===void 0)continue;let a=t.find(f=>f.name===s);if(a===void 0&&(n!==void 0&&(a=n.find(f=>f.name===s)),a===void 0)){debugger;throw new Error(`owner field ${s} is undefined`)}let{arr:o,tuid:u}=i,c=this.getTuid((r=a._tuid)==null?void 0:r.tuid.name);if(c===void 0)continue;let d=c.div(o||u);i._tuid=d&&d.buildTuidDivBox(a)}}}buildArrFieldsTuid(t,n){if(t!==void 0)for(let r of t){let{fields:i}=r;i!==void 0&&this.buildFieldTuid(i,n)}}pullModify(t){this.tuidsCache.pullModify(t)}getUqKey(){return this.uqName.split(/[-._]/).join("").toLowerCase()}getUqKeyWithConfig(){if(!this.config)return;let t=this.uqName.split(/[-._]/).join("").toLowerCase(),{dev:n,alias:r}=this.config;return t=Pp(n.alias||n.name)+Pp(r??t),t}hasEntity(t){return this.entities[t]!==void 0||this.entities[t.toLowerCase()]!==void 0}async apiPost(t,n,r){return n===1&&(t="sql-"+t),await this.uqApi.post(t,r)}async apiActs(t,n){let r=[],i={};for(let a in t)r.push(a),i[a]=t[a].map(o=>this.buildValue(o));return i.$=r,await this.apiPost("acts",n,i)}buildValue(t){if(!t)return t;let n={};for(let r in t){let i=t[r];if(r==="ID")switch(typeof i){case"object":i=i.name;break}else if(r==="time")i&&Object.prototype.toString.call(i)==="[object Date]"&&(i=i.getTime());else if(typeof i=="object"){let s=i.id;s===void 0?i=this.buildValue(i):i=s}n[r]=i}return n}async apiActIX(t,n){let{IX:r,ID:i,values:s,IXs:a}=t,o={IX:he(r),ID:he(i),IXs:a==null?void 0:a.map(c=>({IX:he(c.IX),ix:c.ix})),values:s==null?void 0:s.map(c=>this.buildValue(c))};return await this.apiPost("act-ix",n,o)}async apiActIxSort(t,n){let{IX:r,ix:i,id:s,after:a}=t,o={IX:he(r),ix:i,id:s,after:a};return await this.apiPost("act-ix-sort",n,o)}async apiActID(t,n){let{ID:r,value:i,IX:s,ix:a}=t,o={ID:he(r),value:this.buildValue(i),IX:s==null?void 0:s.map(u=>he(u)),ix:a==null?void 0:a.map(u=>this.buildValue(u))};return await this.apiPost("act-id",n,o)}async apiActDetail(t,n){var u,c,d;let{main:r,detail:i,detail2:s,detail3:a}=t,o={main:{name:he(r.ID),value:hl(r.value)},detail:{name:he(i.ID),values:(u=i.values)==null?void 0:u.map(f=>hl(f))}};s&&(o.detail2={name:he(s.ID),values:(c=s.values)==null?void 0:c.map(f=>hl(f))}),a&&(o.detail3={name:he(a.ID),values:(d=a.values)==null?void 0:d.map(f=>hl(f))}),await this.apiPost("act-detail",n,o)}async apiQueryID(t,n){let{ID:r,IX:i,IDX:s}=t;return s||(s=[r]),await this.apiPost("query-id",n,{...t,ID:he(r),IX:i==null?void 0:i.map(o=>he(o)),IDX:this.IDXToString(s)})}async apiIDTv(t,n){return await this.apiPost("id-tv",n,t)}async syncUser(t){return await this.uqApi.syncUser(t)}async apiIDNO(t,n){let{ID:r,stamp:i}=t;return await this.apiPost("id-no",n,{ID:he(r),stamp:i})}async apiIDDetailGet(t,n){let{id:r,main:i,detail:s,detail2:a,detail3:o}=t;return await this.apiPost("id-detail-get",n,{id:r,main:he(i),detail:he(s),detail2:he(a),detail3:he(o)})}IDXToString(t){return Array.isArray(t)===!0?t.map(n=>he(n)):he(t)}async apiID(t,n){let{IDX:r}=t,i={...t,IDX:this.IDXToString(r)};return await this.apiPost("id",n,i)}idCacheDel(t){delete this.cache[t]}async apiKeyID(t,n){let{ID:r,IDX:i}=t;return await this.apiPost("key-id",n,{...t,ID:he(r),IDX:i==null?void 0:i.map(a=>he(a))})}async apiIX(t,n){let{IX:r,IX1:i,IDX:s}=t;return await this.apiPost("ix",n,{...t,IX:he(r),IX1:he(i),IDX:s==null?void 0:s.map(o=>he(o))})}async apiIXValues(t,n){let{IX:r}=t;return await this.apiPost("ix-values",n,{...t,IX:he(r)})}async apiIXr(t,n){let{IX:r,IX1:i,IDX:s}=t;return await this.apiPost("ixr",n,{...t,IX:he(r),IX1:he(i),IDX:s==null?void 0:s.map(o=>he(o))})}async apiKeyIX(t,n){let{ID:r,IX:i,IDX:s}=t;return await this.apiPost("key-ix",n,{...t,ID:he(r),IX:he(i),IDX:s==null?void 0:s.map(o=>he(o))})}async apiIDLog(t,n){let{IDX:r}=t;return await this.apiPost("id-log",n,{...t,IDX:he(r)})}async apiIDSum(t,n){let{IDX:r}=t;return await this.apiPost("id-sum",n,{...t,IDX:he(r)})}async apiIDinIX(t,n){let{ID:r,IX:i}=t;return await this.apiPost("id-in-ix",n,{...t,ID:he(r),IX:he(i)})}async apiIDxID(t,n){let{ID:r,IX:i,ID2:s}=t;return await this.apiPost("id-x-id",n,{...t,ID:he(r),IX:he(i),ID2:he(s)})}async apiIDTree(t,n){let{ID:r}=t;return await this.apiPost("id-tree",n,{...t,ID:he(r)})}}function Ns(e){if(!e)return;let t=e.length;if(t<=1)return;let n=[];for(let r=0;r<t-1;r++)n.push(Number(e[r]));return n}function he(e){if(e)return typeof e=="string"?e:e.name}function hl(e){if(!e)return e;let t={};for(let n in e){let r=e[n];typeof r=="object"&&(r=r.id),t[n]=r}return t}class U_{constructor(t,n){x(this,"net");x(this,"uqsSchema");x(this,"collection");x(this,"uqMans",[]);this.net=t,this.uqsSchema=n,this.uqMans=[],this.collection={}}buildUqs(t,n,r,i){this.init(t);let a=this.net.createLocalMap("$app").child("version"),o=a.get();if(n!==o){for(let u of this.uqMans)u.localMap.removeAll();a.set(n)}if(this.buildUqEntities(),r)for(let u of r){let{dev:c,name:d,alias:f}=u,{name:m,alias:y}=c,v=(y??m).toLowerCase()+"/"+(f??d).toLowerCase(),w=this.collection[v];w.config=u}}uq(t){return this.collection[t.toLowerCase()]}async getUqUserRoles(t){let n=this.collection[t];return n===void 0?null:await n.getRoles()}init(t){for(let n of t){let{uqOwner:r,ownerAlias:i,uqName:s,uqAlias:a}=n,o=r+"/"+s,u=this.collection[o],c;if(u)c=u;else{let f=this.uqsSchema[o];c=new q_(this.net,n,f),this.collection[o]=c}this.uqMans.push(c);let d=o.toLowerCase();this.collection[d]=c,a&&(s=a),i&&(r=i),o=r+"/"+s,d=o.toLowerCase(),this.collection[d]=c}}buildUqEntities(){for(let t of this.uqMans)t.buildEntities()}getUqMans(){return this.uqMans}setTuidImportsLocal(){let t=[];for(let n of this.uqMans)for(let r of n.tuidArr)if(r.isImport===!0){let i=this.setInner(r);i&&t.push(i)}return t}setInner(t){let{from:n}=t,r=n.owner+"/"+n.uq,i=this.collection[r];if(i===void 0)return;let s=t.name,a=i.tuid(s);if(a===void 0)return`setInner(tuidImport: TuidImport): uq ${r} has no Tuid ${s}`;if(a.isImport===!0)return`setInner(tuidImport: TuidImport): uq ${r} Tuid ${s} is import`;t.setFrom(a)}}const $_="uq-data-local-storage";class V_{constructor(t,n,r,i){x(this,"net");x(this,"uqConfigVersion");x(this,"uqConfigs");x(this,"uqsSchema");x(this,"isBuildingUQ",!1);x(this,"uqsMan");this.net=t,this.uqConfigVersion=n,this.uqConfigs=r,this.uqsSchema=i}async build(){return await this.loadUqs()}async loadUqs(){this.uqsMan=new U_(this.net,this.uqsSchema);let t=await this.loadUqData(this.uqConfigs);this.uqsMan.buildUqs(t,this.uqConfigVersion,this.uqConfigs,this.isBuildingUQ)}async loadUqData(t){return t.map(i=>{let{dev:s,name:a,version:o,alias:u}=i,{name:c,alias:d}=s;return{owner:c,ownerAlias:d,name:a,version:o,alias:u}}).map(i=>{let{name:s,alias:a,owner:o,ownerAlias:u}=i,c;return c={id:void 0,uqName:s,uqAlias:a,uqOwner:o,ownerAlias:u,access:void 0,newVersion:void 0},c})}loadLocal(t){let n=this.net.getLocalDbItem($_);if(n)try{let r=JSON.parse(n);for(let i of t){let{owner:s,name:a}=i;if(r.findIndex(u=>{let{uqOwner:c,uqName:d}=u;return s.toLowerCase()===c.toLowerCase()&&a.toLowerCase()===d.toLowerCase()})<0)return}return r}catch{return}}}async function z_(e,t,n,r){let i=new V_(e,t,n,r);return await i.build(),i.uqsMan}var Xn=(e=>(e[e.user=0]="user",e[e.admin=1]="admin",e[e.owner=2]="owner",e))(Xn||{});class B_{constructor(t){x(this,"uqMan");x(this,"mySitesColl");x(this,"userSite0");x(this,"mySites");x(this,"userSite");this.uqMan=t}async login(){await this.loadMyRoles()}loginUnit(t){this.userSite=t}logoutUnit(){this.userSite=void 0}hasRole(t){if(this.userSite===void 0)return!1;let{rolesAtom:n,isAdmin:r}=this.userSite;if(r===!0)return!0;if(n===void 0)return!1;let i=de(n);if(Array.isArray(t)===!0){let s=t;for(let a of s)if(i.indexOf(a)>=0===!0)return!0;return!1}else return i.indexOf(t)>=0}async Poked(){let r=(await this.uqMan.entities.$poked.query({})).ret;return r.length===0?!1:r[0].poke===1}async reloadMyRoles(){this.mySitesColl=void 0,await this.loadMyRoles()}async setSite(t){await this.uqMan.entities.$setsite.submit({site:t}),await this.reloadMyRoles()}async loadMyRoles(){if(this.mySitesColl!==void 0)return;this.mySites=[],this.mySitesColl={};let n=await this.uqMan.entities.$role_my.query({}),{sites:r,roles:i,permits:s}=n;const a=u=>{let c=this.mySitesColl[u];return c===void 0&&(c={site:u,rolesAtom:Ie([]),permits:{}},this.mySitesColl[u]=c,u!==0?this.mySites.push(c):this.userSite0=c),c};let o;for(let u of r){let{id:c,site:d,admin:f,entity:m,assigned:y,def:v}=u,w=a(d);w.id=c,w.siteId=d,w.isAdmin=(f&1)===1,w.isOwner=(f&2)===2,w.entity=m,w.assigned=y,o===void 0&&w!==this.userSite0&&(o=w),v===1&&(o=w)}if(this.userSite=o,o!==void 0){let u=this.mySites.findIndex(c=>c===o);u>=0&&(this.mySites.splice(u,1),this.mySites.unshift(o))}for(let u of i){let{site:c,role:d}=u,f=a(c),{rolesAtom:m}=f,y=de(m);y===void 0&&(y=[]),y.push(d),ae(m,y),f.permits[d]=!0}for(let u of s){let{site:c,permit:d}=u,f=a(c);f.permits[d]=!0}}}class Y_{constructor(t){x(this,"$_uqMan");x(this,"$_uqSql");this.$_uqMan=t,this.$_uqSql=this.$_createUqSqlProxy()}$_createProxy(){return new Proxy(this.$_uqMan.entities,{get:(n,r,i)=>{if(r==="SQL")return this.$_uqSql;let s=r.toLowerCase();if(s[0]==="$")switch(s){case"$":return this}let a=n[s];if(a!==void 0)return a;let o=this.$_uqMan[r];if(o!==void 0||(o=this[r],o!==void 0))return o;this.errUnexistEntity(String(r))}})}$_createUqSqlProxy(){return new Proxy(this.$_uqMan,{get:(n,r,i)=>{let s=n["$"+r];if(s!==void 0)return s;this.errUnexistEntity(String(r))}})}errUnexistEntity(t){let n=`entity ${this.$_uqMan.name}.${t} not defined`,r=new Error(n);throw r.name="UnexistEntity",this.$_uqMan.clearLocalEntites(),r}}function W_(e){const t={};function n(a,o){if(!a)return;let u=a.toLowerCase();t[a]=o,u!==a&&(t[u]=o)}const{uqMans:r}=e,i=r.length;console.log("uqMans",r);for(let a=0;a<i;a++){const o=r[a];let c=new Y_(o).$_createProxy();n(o.getUqKey(),c),n(o.getUqKeyWithConfig(),c),a===0&&n("uqdefault",c)}function s(a){for(let o in t)t[o].localMap.removeAll();console.error(`uq proxy ${a} error`)}return new Proxy(t,{get:(a,o,u)=>{let c=o.toLowerCase(),d=a[c];if(d!==void 0)return d;debugger;console.error(`controller.uqs.${String(o)} undefined`),s(String(o))}})}const Op=[10,3,3,3,3,3,5,5,5,5,5,5,5,5,10,10,10,10,15,15,15,30,30,60];class H_{constructor(t,n){x(this,"uqApp");x(this,"refreshAction");x(this,"timer");x(this,"refreshTime",Date.now()/1e3);x(this,"refresh",async()=>{let t=Date.now()/1e3;t-this.refreshTime<30||(await this.refreshAction(),this.refreshTime=t)});x(this,"tick",0);x(this,"gapIndex",0);x(this,"callTick",async()=>{try{if(++this.tick,this.tick<Op[this.gapIndex])return;this.tick=0,this.gapIndex<Op.length-1&&++this.gapIndex;let{uqSites:t}=this.uqApp;if(t){if(await t.Poked()===!1)return;this.gapIndex=1,await this.refresh()}}catch{}});this.uqApp=t,this.refreshAction=n}start(){this.refreshAction!==void 0&&(this.stop(),this.timer=setInterval(this.callTick,1e3),this.refreshAction())}stop(){this.timer!==void 0&&(clearInterval(this.timer),this.timer=void 0)}}class Q_{constructor(){x(this,"ls");this.ls=localStorage}getItem(t){var n;return this.ls?(n=this.ls)==null?void 0:n.getItem(t):null}setItem(t,n){var r;(r=this.ls)==null||r.setItem(t,n)}removeItem(t){var n;(n=this.ls)==null||n.removeItem(t)}}const Dn=new Q_;class G_{constructor(t,n){x(this,"local");x(this,"key");this.local=t,this.key=n}get(){try{let t=this.local.getItem(this.key);return t===null||t===void 0||t==="undefined"?void 0:JSON.parse(t)}catch{this.local.removeItem(this.key);return}}set(t){let n=JSON.stringify(t,(r,i)=>{if(r!=="_tuid")return i});this.local.setItem(this.key,n)}remove(t){t===void 0?this.local.removeItem(this.key):this.local.removeLocal(t)}child(t){return this.local.child(t)}arr(t){return this.local.arr(t)}map(t){return this.local.map(t)}}class Mx{constructor(t){x(this,"caches");x(this,"locals");x(this,"name");this.name=t,this.caches={},this.locals={}}getItem(t){let n=this.keyForGet(t);if(n!==void 0)return Dn.getItem(n)}setItem(t,n){let r=this.keyForSet(t);Dn.setItem(r,n)}removeItem(t){let n=this.keyForSet(t);n!==void 0&&localStorage.removeItem(n)}arr(t){let n=String(t),r=this.locals[n];if(r===void 0){let i=this.keyForSet(t);this.locals[n]=r=new Mp(i)}return r}map(t){let n=String(t),r=this.locals[n];if(r===void 0){let i=this.keyForSet(t);this.locals[n]=r=new Fx(i)}return r}removeLocal(t){let n=t.name,r=this.keyForRemove(n);if(r===void 0)return;let i=this.locals[n];i===void 0?i=new Mp(r):this.locals[n]=void 0,i.removeAll()}child(t){let n=String(t),r=this.caches[n];return r!==void 0?r:this.caches[n]=r=new G_(this,t)}}const K_=500;class Mp extends Mx{constructor(n){super(n);x(this,"index");let r=Dn.getItem(this.name);this.index=r===null?[]:r.split(`
`).map(i=>Number(i))}saveIndex(){Dn.setItem(this.name,this.index.join(`
`))}keyForGet(n){if(!(this.index.indexOf(n)<0))return`${this.name}.${n}`}keyForSet(n){let r=this.index.indexOf(n);return r<0?(this.index.unshift(n),this.index.length>K_&&this.index.pop()):(this.index.splice(r,1),this.index.unshift(n)),this.saveIndex(),`${this.name}.${n}`}keyForRemove(n){let r=this.index.indexOf(n);if(!(r<0))return this.index.splice(r,1),this.saveIndex(),`${this.name}.${n}`}removeAll(){for(let n of this.index)Dn.removeItem(`${this.name}.${n}`);Dn.removeItem(this.name),this.index.splice(0)}item(n){return this.child(n)}}class Fx extends Mx{constructor(n){super(n);x(this,"index");x(this,"max");this.max=0,this.index={};let r=Dn.getItem(this.name);r!==null&&r.split(`
`).forEach(s=>{let a=s.indexOf("	");if(a<0)return;let o=s.substr(0,a),u=Number(s.substr(a+1));isNaN(u)!==!0&&(this.index[o]=u,u>this.max&&(this.max=u))})}saveIndex(){let n=[];for(let r in this.index){let i=this.index[r];i!==void 0&&n.push(`${r}	${i}`)}Dn.setItem(this.name,n.join(`
`))}keyForGet(n){let r=this.index[n];if(r!==void 0)return`${this.name}.${r}`}keyForSet(n){let r=this.index[n];return r===void 0&&(++this.max,r=this.max,this.index[n]=r,this.saveIndex()),`${this.name}.${r}`}keyForRemove(n){let r=this.index[n];if(r!==void 0)return this.index[n]=void 0,this.saveIndex(),`${this.name}.${r}`}removeAll(){for(let n in this.index)Dn.removeItem(`${this.name}.${this.index[n]}`),this.index[n]=void 0;Dn.removeItem(this.name),this.max=0}item(n){return this.child(n)}}class X_{constructor(t){x(this,"localMap");x(this,"user");x(this,"guest");x(this,"unit");x(this,"_user");x(this,"_guest");x(this,"_unit");this.localMap=new Fx(t===!0?"$$":"$"),this.user=this.localMap.child("user"),this.guest=this.localMap.child("guest"),this.unit=this.localMap.child("unit")}readToMemory(){this._user=this.user.get(),this._guest=this.guest.get(),this._unit=this.unit.get()}saveToLocalStorage(){this.user.set(this._user),this.guest.set(this._guest),this.unit.set(this._unit)}logoutClear(){[this.user,this.unit].forEach(t=>t.remove())}}class Z_{constructor(){x(this,"p")}onNav(t,n){var i,s;let r;switch(t){case tn.Push:r=this.p;break;case tn.Pop:if(this.p=(i=this.p)==null?void 0:i.prev,this.p!==void 0)return;break;case tn.Replace:r=(s=this.p)==null?void 0:s.prev;break}this.p={prev:r,scrollTop:void 0,data:void 0,pathname:n}}setData(t){this.p!==void 0&&(this.p.data=t)}setScrollTop(t){this.p!==void 0&&(this.p.scrollTop=t)}getCache(){return this.p}getPrev(){var t;return(t=this.p)==null?void 0:t.prev}getData(){var t;return(t=this.p)==null?void 0:t.data}getPrevData(){var t,n;return(n=(t=this.p)==null?void 0:t.prev)==null?void 0:n.data}}class J_{constructor(t,n,r,i){x(this,"appConfig");x(this,"uqConfigs");x(this,"uqsSchema");x(this,"localData");x(this,"net");x(this,"userApi");x(this,"version");x(this,"mustLogin");x(this,"refreshTime",Ie(Date.now()/1e3));x(this,"user",Ie(void 0));x(this,"modal",{stack:Ie([])});x(this,"pageCache");x(this,"uqsMan");x(this,"guest");x(this,"uqs");x(this,"uqSites");x(this,"onCloseModal");x(this,"initErrors");window.history.scrollRestoration="manual",this.appConfig=t,this.uqConfigs=n,this.uqsSchema=r,this.version=t.version,this.mustLogin=t.mustLogin!==!1;const{unit:s,testing:a,isDevelopment:o}=i;let u={center:t.center,isDevelopment:o,unit:s,testing:a,localDb:new eN,createObservableMap:()=>new Map};this.net=new xC(u),this.localData=new X_(a),this.userApi=this.net.userApi;let c=this.localData.user.get();ae(this.user,c),this.pageCache=new Z_}get autoRefresh(){}get defaultUqRoleNames(){}setSite(t){for(let n of this.uqsMan.uqMans);}loginUnit(t){this.uqSites.loginUnit(t)}logoutUnit(){this.uqSites.logoutUnit()}closeAllModal(){ae(this.modal.stack,[])}async logined(t){this.net.logoutApis(),ae(this.user,t),t?(Vf(t.token),this.net.setCenterToken(t.id,t.token),this.localData.user.set(t),await this.loadOnLogined(),new H_(this,this.autoRefresh).start()):(this.net.clearCenterToken(),this.uqSites=void 0,this.localData.user.remove(),ae(this.user,void 0),document.cookie="",localStorage.clear())}restart(){document.location.assign("/")}async setUserProp(t,n){await this.userApi.userSetProp(t,n);let i={...de(this.user)};i[t]=n,ae(this.user,i),this.localData.user.set(i)}saveLocalData(){this.localData.saveToLocalStorage()}onLoadUQs(){}async init(){if(this.uqsMan===void 0){console.log("UqApp.load()"),await this.net.init(),console.log("await this.net.init()");try{let t=await z_(this.net,this.appConfig.version,this.uqConfigs,this.uqsSchema);console.log("createUQsMan"),this.uqsMan=t,this.uqs=W_(t),this.uqs&&this.onLoadUQs();let n=de(this.user);if(n)await this.loadWithoutLogin(),await this.logined(n);else{let r=this.localData.guest.get();if(r===void 0&&(r=await this.net.userApi.guest()),!r)throw Error("guest can not be undefined");this.net.setCenterToken(0,r.token),this.localData.guest.set(r),await this.loadWithoutLogin()}}catch(t){console.error(t)}}}loadWithoutLogin(){}loadOnLogined(){}}class eN extends Jk{getItem(t){return localStorage.getItem(t)}setItem(t,n){localStorage.setItem(t,n)}removeItem(t){localStorage.removeItem(t)}}const Wf=ne.createContext(void 0);function oe(){const e=pt();return Hf(e)}function Hf(e){const{modal:t}=e,{stack:n}=t;async function r(s,a){return new Promise(async(o,u)=>{let c=de(n);if(ne.isValidElement(s)!==!0){alert("is not valid element");return}let d=l.jsx(Wf.Provider,{value:!0,children:l.jsx(P.Suspense,{fallback:l.jsx(pn,{}),children:s})});ae(n,[...c,[d,o,a]])})}function i(s){var c;let a=de(n),[,o,u]=a.pop();ae(n,[...a]),o(s),u==null||u(s),(c=e.onCloseModal)==null||c.call(e)}return{openModal:r,closeModal:i}}const Qf=ne.createContext(void 0);function pt(){return P.useContext(Qf)}const tN=new Uk({defaultOptions:{queries:{suspense:!0}}});function nN({createUqApp:e,children:t}){let n=P.useMemo(e,[]);const[r]=Ef(n.modal.stack);let[i,s]=P.useState(!1);if(Pt(()=>{(async function(){await n.init(),s(!0)})()}),i===!1)return l.jsx("div",{className:"p-5 text-center",children:l.jsx(as,{className:"text-info"})});if(n.initErrors)return l.jsxs("div",{children:[l.jsx("div",{children:"uq app start failed. init errors: "}),l.jsx("ul",{className:"text-danger",children:n.initErrors.map((c,d)=>l.jsx("li",{children:c},d))})]});let a=r.length,o,u;return a===0?(o="",u=null):(o="d-none",u=r.map((c,d)=>{let f=d<a-1?"d-none":"",[m]=c;return l.jsx(ne.Fragment,{children:l.jsx("div",{className:f+" h-100",children:m})},d)})),l.jsx(Qf.Provider,{value:n,children:l.jsxs(Wk,{client:tN,children:[l.jsx("div",{className:o+" h-100",children:t}),u]})})}function au(e){let t=pt(),{className:n,style:r,src:i,altImage:s}=e,a;if(i){if(i.indexOf(".")!==0)return i.startsWith(":")===!0&&(i=t.net.getResUrl(i.substring(1))),l.jsx("img",{src:i,className:n,alt:"img",style:r,onError:o=>{s?o.currentTarget.src=s:o.currentTarget.src="https://tv.jkchemical.com/imgs/0001.png"}});a=i.substring(1)}else a="file-o";return l.jsx("span",{className:(n??"")+" image-none",style:r,children:l.jsx("i",{className:"fa fa-"+a})})}const Fp=20;class rN{constructor(t){x(this,"el");this.el=t}scrollToTop(){setTimeout(()=>this.el.scrollTo(0,0),Fp)}scrollToBottom(){setTimeout(()=>this.el.scrollTo(0,this.el.scrollTop+this.el.offsetHeight),Fp)}}function iN(e){let{back:t,onBack:n}=e;function r({Back:o}){switch(t){default:case"back":return l.jsx(o,{icon:"angle-left"});case"none":return l.jsx("div",{className:"py-2 ms-3",children:" "});case"close":return l.jsx(o,{icon:"close"})}}function i({icon:o,onClick:u}){return l.jsx("div",{className:"px-3 py-2 cursor-pointer",onClick:u,children:l.jsx(J,{name:o})})}function s({icon:o}){return l.jsx(i,{icon:o,onClick:n})}function a({icon:o}){const u=Sn();function c(){u(-1)}return l.jsx(i,{icon:o,onClick:c})}return n||t==="none"?l.jsx(r,{Back:s}):l.jsx(r,{Back:a})}function pn({header:e}){const t=l.jsx("div",{className:" tonwa-band-container bg-white d-flex justify-content-center",children:l.jsx(as,{className:"m-5 text-center text-info"})});return e===null?t:(e===void 0&&(e="..."),l.jsx(Gf,{header:e,back:"none",children:t}))}const Tp=100,Rp=30;function Gf(e){const t=pt();let{children:n,header:r,back:i,right:s,footer:a,onClosed:o,hideScroll:u}=e;const c=P.useRef();return Pt(()=>{let{current:d}=c;if(!d)return;let f=Tx(d);if(!f)return;u===!0?window.onscroll=void 0:window.onscroll=w;let m=0,y=0,v=f.scrollTop;function w(j){let{onScroll:g,onScrollTop:h,onScrollBottom:p}=e;g&&g(j);let S=j.target.scrollingElement;const{scrollTop:b,offsetHeight:k,scrollHeight:_}=S;b>v&&(v=b);const C=t.pageCache.getCache();C!==void 0&&b>0&&Object.assign(C,{scrollTop:b});let N=new rN(S);if(h!==void 0&&b<Rp){let D=new Date().getTime();D-y>Tp&&(y=D,h(N).then(E=>{if(E===!0){let A=_,O=200;O>A&&(O=A),S.scrollTop=O}}))}if(p!==void 0&&b+k>_-Rp&&b>=v){++v;let D=new Date().getTime();D-m>Tp&&(m=D,setTimeout(()=>p(N),50))}}return()=>{o==null||o()}}),(r||i||s)&&(r=l.jsxs("div",{className:"d-flex align-items-center",children:[l.jsx(iN,{...e}),l.jsx("div",{className:"flex-fill",children:r}),s]})),l.jsx("div",{ref:c,className:"tonwa-page",children:l.jsxs(P.Suspense,{fallback:l.jsx(pn,{}),children:[l.jsx("div",{className:"tonwa-page-header position-sticky top-0",children:l.jsx("div",{className:"container px-0",children:r})}),l.jsx("div",{className:"tonwa-page-content flex-fill d-flex",children:l.jsx("div",{className:"container px-0 d-flex flex-column",children:n})}),l.jsx("div",{className:"tonwa-page-footer position-sticky bottom-0",children:l.jsx("div",{className:"container px-0",children:a})})]})})}function sN(e){const{closeModal:t}=oe(),n={...e,back:"close",onBack:()=>t(void 0)};return l.jsx(Gf,{...n})}function aN(e){const t=pt(),n=ix(),r=Sn(),{user:i,mustLogin:s,pathLogin:a}=t,o=we(i),{pathname:u}=Rr();return P.useEffect(()=>{e.auth!==!1&&s&&!o&&a&&r(a,{state:u})},[o,s,a]),e.auth!==!1&&s&&!o?null:(Pt(()=>{if(t.pageCache.onNav(n,u),n!==tn.Pop)return;const c=t.pageCache.getCache();if(c===void 0)return;const{scrollTop:d}=c;d&&setTimeout(()=>{const f={top:d};window.scroll(f)},10)}),l.jsx(Gf,{...e}))}function H(e){return P.useContext(Wf)===!0?l.jsx(sN,{...e}):l.jsx(aN,{...e})}function lN(e){const t=e.scrollHeight>e.clientHeight,r=window.getComputedStyle(e).overflowY.indexOf("hidden")!==-1;return t&&!r}function Tx(e){return!e||e===document.body?document.body:lN(e)?e:Tx(e.parentElement)}function oN({tabs:e}){function t({isActive:r}){return"flex-fill mx-1 text-center py-1 "+(r===!0?"text-primary":"text-secondary")}let n=l.jsx("div",{className:"d-flex container",children:e.map(r=>{const{to:i,caption:s,icon:a}=r;return l.jsxs(V1,{to:i,className:t,replace:!0,children:[l.jsx(J,{name:a})," ",l.jsx("br",{}),s]},s)})});return l.jsxs("div",{className:"d-flex flex-column flex-fill h-100",children:[l.jsx("div",{className:"flex-fill d-flex",children:l.jsx(sx,{})}),l.jsx("div",{className:"invisible",children:n}),l.jsx("div",{className:"tonwa-bg-gray-3 position-fixed bottom-0 w-100 bottom-top",children:n})]})}function Rx({header:e,top:t}){let n=pt();const{closeModal:r}=oe();let[i,s]=P.useState(null),a=async d=>{let f=await n.userApi.userFromName(d);s(f)};e=e??"Select user";let o="border rounded-3 bg-white p-5 mx-auto w-min-20c";async function u(){r(i)}let c;return i===null?c=null:i?c=l.jsxs("div",{className:o,children:[l.jsx(Kf,{user:i}),l.jsx("div",{className:"text-center mt-5",children:l.jsx(fi,{className:"btn btn-primary",onClick:u,children:"OK"})})]}):c=l.jsxs("div",{className:o,children:[l.jsx(J,{name:"info-o",className:"me-3 text-info"})," No user"]}),l.jsx(H,{header:e,back:"close",children:l.jsxs("div",{className:"p-3 d-flex align-items-center flex-column",children:[l.jsx("div",{children:t}),l.jsx("div",{className:"mx-auto mb-3",children:l.jsx(Qg,{className:"w-min-20c",onFocus:()=>s(null),onSearch:a,placeholder:"user account"})}),c]})})}function Kf({user:e}){if(!e)return l.jsx("div",{children:"user is empty"});let{name:t,nick:n,icon:r}=e;return l.jsxs("div",{className:"d-flex",children:[l.jsx(au,{src:r,className:"me-4 w-2-5c h-2-5c"}),l.jsxs("div",{children:[l.jsxs("div",{children:[l.jsx(Dr,{children:"Name:"}),"   ",t]}),l.jsxs("div",{children:[l.jsx(Dr,{children:"Nick:"}),"   ",n]})]})]})}function uN({user:e,assigned:t}){if(!e)return l.jsx("div",{children:"user is empty"});let{name:n,nick:r,icon:i}=e,s;return t!==void 0?s=l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsx("b",{children:t})}),l.jsxs("div",{children:[l.jsx(Dr,{children:"Name:"}),"   ",n]}),l.jsxs("div",{children:[l.jsx(Dr,{children:"Nick:"}),"   ",r]})]}):r!==void 0?s=l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsx("b",{children:r})}),l.jsxs("div",{children:[l.jsx(Dr,{children:"Name:"}),"   ",n]})]}):s=l.jsx(l.Fragment,{children:l.jsx("div",{children:l.jsx("b",{children:n})})}),l.jsxs("div",{className:"d-flex",children:[l.jsx(au,{src:i,className:"me-4 w-2-5c h-2-5c"}),l.jsx("div",{children:s})]})}function Xf(){return l.jsx("div",{className:"small mx-3 my-3 text-muted",children:"[无]"})}function Lx(e){const t=pt();let{label:n,value:r,type:i,readonly:s,pickValue:a,options:o,onValueChanged:u,ValueTemplate:c}=e;const[d,f]=P.useState(r);async function m(){let w=await a(t,{label:n,value:r,type:i},o);w!==void 0&&(f(w),await(u==null?void 0:u(w)))}let y=l.jsx("span",{className:"p-3",children:" "});a!==null&&s!==!0&&(y=l.jsx("div",{onClick:m,className:"cursor-pointer p-3",children:l.jsx(J,{name:"pencil",className:"text-info"})}));let v=c===void 0?l.jsx(l.Fragment,{children:d}):l.jsx(c,{value:d,onValueChanged:u});return l.jsxs(ya,{...e,children:[n,l.jsx("div",{className:"ms-3 position-relative",children:v}),y]})}class cN extends lx{constructor(){super(...arguments);x(this,"label");x(this,"content")}get isDetail(){return!0}}function qx(e){let{children:t,BandTemplate:n}=e;n=n??dN;let{current:r}=P.useRef(new cN({...e,BandTemplate:n}));return l.jsx(Lf.Provider,{value:r,children:t})}function dN(e){const{openModal:t}=oe();let n=cs(),r=Wg(),{label:i,labelSize:s,children:a,errors:o,memos:u,pageEdit:c,toEdit:d,content:f,sep:m,contentType:y,rightIcon:v}=e;s=s??2;let w=y===yd.check?null:l.jsx("b",{children:i}),j=l.jsx("label",{className:`col-sm-${s} col-form-label text-sm-end tonwa-bg-gray-1 border-end align-self-center py-3`,children:w}),g=`col-sm-${12-s} d-flex pe-0 align-items-center`;function h({icon:p,pageEdit:S}){function b(){d?alert(d):t(S)}return l.jsx("div",{onClick:b,className:"px-3 align-self-stretch d-flex align-items-center cursor-pointer",children:p??l.jsx(J,{name:"pencil",className:"text-info"})})}return r.readOnly===!0?v=null:y===yd.com?c&&(v=l.jsx(h,{pageEdit:c,icon:v})):(n.label=i,n.content=f,v=l.jsx(h,{pageEdit:l.jsx(fN,{detail:n}),icon:v})),l.jsx(l.Fragment,{children:l.jsxs("div",{className:"row bg-white mx-0",children:[j,l.jsxs("div",{className:g,children:[l.jsxs("div",{className:"flex-grow-1",children:[l.jsx("div",{children:a}),l.jsx(nu,{errors:o}),l.jsx(ru,{memos:u})]}),v]})]})})}function fN({detail:e}){const{closeModal:t}=oe(),{content:n,label:r,onValuesChanged:i}=e;async function s(o){await i(o),t()}let a=e.getValues();return l.jsx(H,{header:r,back:"close",children:l.jsxs(hi,{className:"container px-3 py-3",values:a,BandTemplate:hN,children:[l.jsx(ht,{children:n}),l.jsx(mi,{onSubmit:s})]})})}function hN(e){let{children:t,errors:n,memos:r}=e;return l.jsxs("div",{className:"bg-white mb-3",children:[t,l.jsx(nu,{errors:n}),l.jsx(ru,{memos:r})]})}function an({id:e,uq:t,Template:n,spinner:r}){const i=t.idCache(e),[s,a]=P.useState(i);return P.useEffect(()=>{(async function(){if(e==null)return;let o=t.idCache(e);if(o===void 0)try{o=await t.idObj(e)}catch(u){console.error(u)}finally{o===void 0&&(o=null)}a(o)})()},[e,i]),e==null?null:s===void 0?r===void 0?l.jsx(If,{}):r:n?l.jsx(n,{value:s}):l.jsx(l.Fragment,{children:JSON.stringify(s)})}function mN({tag:e,className:t,modal:n,children:r}){const{openModal:i}=oe();e===void 0&&(e="div",t=(t??"")+" cursor-pointer");async function s(){ne.isValidElement(n)===!1&&(n=await n()),i(n)}return ne.createElement(e,{className:t,onClick:s},r)}function Aa({message:e,children:t}){return l.jsxs("div",{className:"border border-danger rounded mx-auto m-3 w-max-30c bg-white ",children:[l.jsx("div",{className:"p-4 border-bottom",children:e}),l.jsx("div",{className:"p-3 text-center",children:t})]})}function lu({auth:e,header:t,message:n,yes:r,no:i}){const{closeModal:s}=oe();return l.jsx(H,{auth:e,header:t,children:l.jsxs(Aa,{message:n,children:[l.jsx("button",{className:"btn btn-primary me-3",onClick:()=>s(!0),children:r}),i&&l.jsx("button",{className:"btn btn-outline-primary",onClick:()=>s(!1),children:i})]})})}class Zf{constructor(t,n){x(this,"keyCompareFunc");x(this,"atomItems");this.atomItems=Ie(t),this.keyCompareFunc=typeof n=="string"?(r,i)=>r[n]===i[n]:n}keyCompare(t,n){return this.keyCompareFunc(t,n)}get items(){return de(this.atomItems)}findIndex(t){return this.items.findIndex(i=>this.keyCompare(i,t))}onItemChanged(t){let n=this.findIndex(t),r=this.items;n>=0?Object.assign(r[n],t):r.unshift(t)}onItemDeleted(t){this.items;let n=this.findIndex(t);n>=0&&this.items.splice(n,1)}moveItemToFirst(t){let n=this.items,r=this.findIndex(t);r>=0&&n.splice(r,1),n.unshift(t),ae(this.atomItems,[...n])}moveItemToLast(t){let n=this.items,r=this.findIndex(t);r>=0&&n.splice(r,1),n.push(t),ae(this.atomItems,[...n])}}function Jf(e){let{context:t}=e,n=we(t.atomItems);return l.jsx(Me,{...e,items:n,itemKey:"user"})}const pN=/^[0-9]*$/,yN=/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/,vN=[{type:"mobile",caption:"手机号",regex:pN},{type:"email",caption:"邮箱",regex:yN}];function Ux(e){return vN.find(n=>n.regex.test(e)===!0)}function Oa(e){let{label:t,children:n,errors:r,memos:i,contentContainerClassName:s}=e,a,o="col-sm-9 "+(s??"");return t?a=l.jsx("label",{className:"col-sm-3 col-form-label text-sm-end",children:l.jsx("b",{children:t})}):o+=" offset-sm-3",l.jsxs("div",{className:"mb-3 row bg-white",children:[a,l.jsxs("div",{className:o,children:[n,l.jsx(nu,{errors:r}),l.jsx(ru,{memos:i})]})]})}function gN({passwordParams:e,onVerify:t,header:n}){let{type:r,account:i}=e,s=async c=>{let d=c.verify;if(await t(d)===0)return[["verify","验证码错误"]]};async function a({name:c,value:d},f){f.fields.submit&&f.setDisabled("submit",d.length>0)}let o,u;switch(r){case"mobile":o="手机号";break;case"email":o="邮箱",u=l.jsxs("small",{children:[l.jsx("span",{className:"text-danger",children:"注意"}),": 有可能误为垃圾邮件，请检查",l.jsx("br",{})]});break}return l.jsx(H,{header:n,children:l.jsxs("div",{className:"w-min-20c my-5 py-5 mx-auto",children:[l.jsxs("div",{className:"text-center mb-4",children:["验证码已经发送到",o," ",l.jsx("b",{children:i}),l.jsx("br",{}),u]}),l.jsx("div",{}),l.jsx("div",{className:"h-1c"}),l.jsxs(hi,{onValuesChanged:a,BandTemplate:Oa,children:[l.jsx(xk,{name:"verify",label:"验证码",placeholder:"请输入验证码",maxLength:6,rule:gd}),l.jsx(ht,{contentContainerClassName:"mt-3",children:l.jsxs(mi,{name:"submit",onSubmit:s,children:["下一步 ",">"]})})]})]})})}const Lp="forget",qp="register";function $x({header:e,submitCaption:t,account:n,onPasswordSubmit:r}){const{openModal:i}=oe(),s=P.useRef({});let a=async o=>{let{pwd:u,rePwd:c}=o,d;return!u||u!==c?(d="密码错误，请重新输入密码！",[["pwd",void 0],["rePwd",void 0],["pwd",d]]):(d=await r(u),s.current.error=d,d!==void 0&&i(l.jsx(H,{header:"注册不成功",children:l.jsx("div",{className:"p-5 text-danger",children:s.current.error})})),d)};return l.jsx(H,{header:e,children:l.jsxs("div",{className:"w-min-30c my-5 py-5 mx-auto",children:[l.jsx("div",{className:"h-1c"}),l.jsxs(hi,{BandTemplate:Oa,children:[l.jsx(ht,{label:"账号",contentContainerClassName:"d-flex align-items-center",children:l.jsx("b",{className:"text-primary",children:n})}),l.jsx(Bi,{name:"pwd",label:"密码",placeholder:"密码",maxLength:100}),l.jsx(Bi,{name:"rePwd",label:"重复密码",placeholder:"重复密码",maxLength:100}),l.jsx(ht,{contentContainerClassName:"mt-3",children:l.jsx(mi,{onSubmit:a,children:t})})]})]})})}function xN({passwordParams:e,header:t}){const{openModal:n}=oe();let{userApi:r}=pt(),{type:i,account:s,verify:a}=e,o=async d=>{e.password=d;let f={nick:void 0,user:s,pwd:d,country:void 0,mobile:void 0,mobileCountry:void 0,email:void 0,verify:a};switch(i){case"mobile":f.mobile=Number(s),f.mobileCountry=86;break;case"email":f.email=s;break}let m=await r.register(f);if(m===0){n(l.jsx(c,{}));return}return u(m)};function u(d){let f;switch(d){default:return"服务器发生错误";case 4:return"验证码错误";case 0:return;case 1:f="用户名 "+s;break;case 2:f="手机号 +"+s;break;case 3:f="邮箱 "+s;break}return f+" 已经被注册过了"}return l.jsx($x,{header:t,submitCaption:"注册新账号",account:s,onPasswordSubmit:o});function c(){let{account:d,toLogin:f}=e;return l.jsx("div",{className:"container w-min-30c mx-auto",children:l.jsxs("div",{className:"my-5 text-center",children:[l.jsxs("div",{className:"py-5",children:[l.jsx(J,{name:"check-circle",className:"me-2"}),"账号 ",l.jsxs("strong",{className:"text-primary",children:[d," "]})," 注册成功！"]}),l.jsx("button",{className:"btn btn-success btn-block",type:"button",onClick:f,children:"直接登录"})]})})}}function wN({header:e,passwordParams:t}){const{openModal:n,closeModal:r}=oe();let{userApi:i}=pt(),{account:s,verify:a,type:o,toLogin:u}=t,c=async f=>{if(t.password=f,(await i.resetPassword(s,f,a,o)).length===0){let y="something wrong in reseting password";throw console.log(y),y}r(),n(l.jsx(d,{}))};return l.jsx($x,{header:e,submitCaption:"改密码",account:s,onPasswordSubmit:c});function d(){return l.jsx("div",{className:"container w-min-30c mx-auto",children:l.jsxs("div",{className:"my-5 text-center",children:[l.jsxs("div",{className:"py-5 text-success",children:[l.jsx(J,{name:"check-circle",className:"me-2"}),"成功修改密码"]}),l.jsx("button",{className:"btn btn-primary btn-block",onClick:u,children:"登录账号"})]})})}}function Vx({header:e,accountLable:t,privacy:n,loginTop:r,ModalPassword:i,accountError:s,sendVerifyOem:a}){const{openModal:o}=oe(),u=Sn(),c=pt(),{userApi:d,pathLogin:f}=c;let{current:m}=P.useRef({toLogin:y});function y(){c.closeAllModal(),u(f)}async function v({name:j,value:g},h){h.fields.submit&&h.setDisabled("submit",g.length<6)}let w=async j=>{let g="user",h=j[g],p=Ux(h);if(p===void 0)return[void 0,[g,"必须是手机号或邮箱"]];let S=p.type;if(S==="mobile"&&(h.length!==11||h[0]!=="1"))return[void 0,[g,"请输入正确的手机号"]];let b=h,k=await d.isExists(b),_=s(k);if(_!==void 0)return _;k=await d.sendVerify(b,S,a),m.account=b,m.type=S;async function C(N){m.verify=N;let D=await d.checkVerify(b,N);if(D===0)return D;o(l.jsx(i,{header:e,passwordParams:m}))}o(l.jsx(gN,{header:e,onVerify:C,passwordParams:m}))};return l.jsx(H,{auth:!1,header:e,footer:n,children:l.jsx("div",{className:"d-grid",children:l.jsxs("div",{className:"d-grid w-20c my-5 py-5",style:{marginLeft:"auto",marginRight:"auto"},children:[r??l.jsx("div",{className:"text-center p-3 fs-5 text-primary",children:"注册"}),l.jsx("div",{className:"h-3c"}),l.jsxs(hi,{BandTemplate:Oa,onValuesChanged:v,children:[l.jsx(Na,{name:"user",label:t,placeholder:"手机号或邮箱"}),l.jsx(ht,{contentContainerClassName:"mt-3",children:l.jsx(mi,{name:"submit",onSubmit:w,disabled:!0,children:"发送验证码"})})]}),l.jsx("div",{className:"text-center py-3",children:l.jsx(Ce,{className:"btn btn-link text-primary",to:"/login",children:"已有账号，直接登录"})})]})})})}function zx(e){let{loginTop:t,privacy:n}=e,r=i=>{if(i>0)return"已经被注册使用了"};return l.jsx(Vx,{header:"注册账号",accountLable:"账号",ModalPassword:xN,accountError:r,sendVerifyOem:void 0,loginTop:t,privacy:n})}function bN(e){let{loginTop:t,privacy:n}=e,r=i=>{if(i===0)return"请输入正确的账号"};return l.jsx(Vx,{header:"密码找回",accountLable:"账号",ModalPassword:wN,accountError:r,sendVerifyOem:void 0,loginTop:t,privacy:n})}function SN({url:e,withBack:t,loginTop:n,privacy:r,callback:i}){let s=pt(),{userApi:a,guest:o}=s;const u=Sn();let c=async(v,w)=>{let j=await a.login({user:v,pwd:w,guest:o});return j===void 0?!1:(console.log("onLoginSubmit: user=%s pwd:%s",j.name,j.token),await s.logined(j),await(i==null?void 0:i(j)),u(e??"/",{replace:!0}),!0)},d=async v=>{let w=v.username,j=v.password;if(j===void 0)return"something wrong, pwd is undefined";if(await c(w,j)===!0)return;let h=Ux(w);return(h!==void 0?h.caption:"用户名")+"或密码错！"},f=t===!0?"登录":!1;function m(){return l.jsx(H,{auth:!1,header:f,footer:r,children:l.jsxs("div",{className:"d-flex p-5 flex-column justify-content-center align-items-center",children:[l.jsx("div",{className:"flex-fill"}),l.jsxs("div",{className:"w-30c",children:[n??l.jsx("div",{className:"text-center p-3 fs-5 text-primary",children:"登录"}),l.jsx("div",{className:"h-2c"}),l.jsxs(hi,{BandTemplate:Oa,children:[l.jsx(Na,{label:"登录账号",name:"username",placeholder:"手机/邮箱/用户名",rule:gd,maxLength:100}),l.jsx(Bi,{label:"密码",name:"password",placeholder:"密码",rule:gd,maxLength:100}),l.jsx(ht,{children:l.jsx(dx,{})}),l.jsx(ht,{contentContainerClassName:"my-3",children:l.jsx(mi,{onSubmit:d,children:l.jsx("div",{className:"mx-5",children:"登录"})})})]}),l.jsx("div",{className:"row",children:l.jsxs("div",{className:"offset-sm-3",children:[l.jsx(Ce,{className:"btn btn-link",to:Lp,children:"忘记密码"}),l.jsx(Ce,{className:"btn btn-link",to:qp,children:"注册账号"})]})})]}),l.jsx("div",{className:"flex-fill"}),l.jsx("div",{className:"flex-fill"})]})})}function y(){return l.jsx(sx,{})}return l.jsx(Hs,{children:l.jsxs(ie,{element:l.jsx(y,{}),children:[l.jsx(ie,{index:!0,element:l.jsx(m,{})}),l.jsx(ie,{path:Lp,element:l.jsx(bN,{loginTop:n,privacy:r})}),l.jsx(ie,{path:qp,element:l.jsx(zx,{loginTop:n,privacy:r})})]})})}function jN({onLogout:e,resetAll:t}){let n=pt();async function r(){await n.logined(void 0),await(e==null?void 0:e()),t==null||t(),n.restart()}const i="安全退出";return l.jsx(H,{back:"back",header:i,children:l.jsxs("div",{className:"my-5 border border-info bg-white rounded-3 p-5 text-center mx-auto w-max-40c ",children:[l.jsx("div",{children:"退出当前账号不会删除任何历史数据，下次登录依然可以使用本账号"}),l.jsx("div",{className:"mt-5 text-center",children:l.jsx("button",{className:"btn btn-danger",onClick:r,children:"安全退出"})})]})})}function kN(){const e=Sn(),{openModal:t}=oe();let n=pt(),r=async i=>{let{orgPassword:s,newPassword:a,newPassword1:o}=i;if(a!==o)return["newPassword1","新密码错误，请重新输入"];if(await n.userApi.changePassword({orgPassword:s,newPassword:a})===!1)return["orgPassword","原密码错误"];t(l.jsx(CN,{}),()=>e(-1))};return l.jsx(H,{auth:!1,header:"修改密码",children:l.jsxs(hi,{className:"m-3 w-30c mx-auto",BandTemplate:Oa,children:[l.jsx(Bi,{name:"orgPassword",label:"原密码",placeholder:"输入原来的密码",maxLength:60}),l.jsx(Bi,{name:"newPassword",label:"新密码",placeholder:"输入新设的密码",maxLength:60}),l.jsx(Bi,{name:"newPassword1",label:"确认密码",placeholder:"再次输入新设密码",maxLength:60}),l.jsx(ht,{children:l.jsx(dx,{})}),l.jsx(ht,{children:l.jsx(mi,{onSubmit:r,children:"提交"})})]})})}function CN(){return l.jsx(H,{auth:!1,header:"密码修改",children:l.jsx("div",{className:"m-3  text-success",children:"密码修改成功！"})})}const Gs="一小时";function _N(){const e=Sn(),{openModal:t}=oe();let n=l.jsxs(l.Fragment,{children:["注意：账号注销后，账号绑定手机、邮件等相关信息将被释放。账号无法将登录。",l.jsx("br",{}),"请确认！"]});const r="注销账号";function i(){e(-1)}return l.jsx(H,{auth:!1,header:r,children:l.jsxs(Aa,{message:n,children:[l.jsx("button",{className:"btn btn-primary",onClick:()=>e(-1),children:"不注销"}),l.jsx("button",{className:"btn btn-outline-info ms-3",onClick:()=>t(l.jsx(NN,{header:r}),i),children:"我已了解，仍然注销"})]})})}function NN({header:e}){let t=pt();const{openModal:n,closeModal:r}=oe();let i=l.jsxs(l.Fragment,{children:["账号注销后，如果在",Gs,"内容重新登录账号，账号自动恢复。",Gs,"之后，账号绑定手机、邮件等相关信息将被释放。账号无法将登录。",l.jsx("br",{}),"请再次确认！"]}),s=async()=>{await t.userApi.userQuit(),r(),await n(l.jsx(DN,{}),()=>t.restart())};return l.jsx(H,{header:e,children:l.jsxs(Aa,{message:i,children:[l.jsx("button",{className:"btn btn-primary",onClick:()=>r(),children:"不注销"}),l.jsx("button",{className:"btn btn-outline-info ms-3",onClick:s,children:"确认注销"})]})})}function DN(){let e=pt();const{openModal:t,closeModal:n}=oe();let r=l.jsxs(l.Fragment,{children:["账号将在",Gs,"后彻底注销。",l.jsx("br",{}),"如果在",Gs,"内容重新登录账号，注销操作自动取消。",Gs,"之后，账号绑定手机、邮件等相关信息将被释放。账号无法将登录。"]}),i=()=>{t(l.jsx(EN,{}),()=>e.restart())};return l.jsx(H,{header:"注销已账号",children:l.jsx(Aa,{message:r,children:l.jsx("button",{className:"btn btn-primary",onClick:i,children:"反悔了，不要注销"})})})}function EN(){let e=pt(),t=l.jsxs(l.Fragment,{children:["重新登录之后，账号将恢复。",l.jsx("br",{})]});async function n(){await e.logined(void 0),e.restart()}return l.jsx(H,{header:"恢复账号",children:l.jsx(Aa,{message:t,children:l.jsx("button",{className:"btn btn-primary",onClick:n,children:"重新登录"})})})}var eh=(e=>(e[e.any=0]="any",e[e.atom=11]="atom",e[e.spec=12]="spec",e[e.bud=13]="bud",e[e.sheet=101]="sheet",e[e.main=102]="main",e[e.detail=103]="detail",e[e.pend=104]="pend",e[e.detailAct=111]="detailAct",e[e.with=151]="with",e[e.pick=161]="pick",e[e.role=201]="role",e[e.permit=202]="permit",e[e.options=301]="options",e[e.tree=401]="tree",e[e.tie=501]="tie",e[e.report=601]="report",e[e.title=901]="title",e[e.key=1001]="key",e[e.prop=1011]="prop",e[e.optionsitem=1031]="optionsitem",e))(eh||{}),Si=(e=>(e[e.person=1]="person",e[e.group=2]="group",e))(Si||{});const IN={$phrase:{name:"$phrase",type:"id",private:!1,fields:[{name:"name",type:"char",size:200},{name:"caption",type:"char",size:100},{name:"base",type:"bigint"},{name:"valid",type:"tinyint"},{name:"owner",type:"bigint"},{name:"type",type:"tinyint"},{name:"index",type:"tinyint"}],keys:[],global:!1,isMinute:!1},$role_my:{name:"$role_my",type:"query",private:!1,sys:!0,fields:[],returns:[{name:"sites",fields:[{name:"id",type:"id"},{name:"site",type:"id"},{name:"admin",type:"tinyint"},{name:"entity",type:"char",size:100},{name:"assigned",type:"char",size:100},{name:"def",type:"tinyint"}]},{name:"roles",fields:[{name:"site",type:"id"},{name:"role",type:"char",size:100}]},{name:"permits",fields:[{name:"site",type:"id"},{name:"permit",type:"char",size:100}]}]},$role_site_users:{name:"$role_site_users",type:"query",private:!1,sys:!0,fields:[{name:"site",type:"bigint"}],returns:[{name:"users",fields:[{name:"id",type:"id"},{name:"user",type:"id"},{name:"admin",type:"tinyint"},{name:"assigned",type:"char",size:100},{name:"name",type:"char",size:100},{name:"nick",type:"char",size:100},{name:"icon",type:"char",size:200},{name:"addBy",type:"id"}]},{name:"roles",fields:[{name:"user",type:"id"},{name:"role",type:"char",size:100}]}]},$role_site_add_admin:{name:"$role_site_add_admin",type:"action",private:!1,sys:!0,fields:[{name:"site",type:"bigint"},{name:"user",type:"bigint"},{name:"admin",type:"tinyint"},{name:"assigned",type:"char",size:100}],returns:[]},$role_site_del_admin:{name:"$role_site_del_admin",type:"action",private:!1,sys:!0,fields:[{name:"site",type:"bigint"},{name:"user",type:"bigint"},{name:"admin",type:"tinyint"}],returns:[]},$role_site_add_user:{name:"$role_site_add_user",type:"action",private:!1,sys:!0,fields:[{name:"site",type:"bigint"},{name:"user",type:"bigint"},{name:"assigned",type:"char",size:100}],returns:[]},$role_site_user_role:{name:"$role_site_user_role",type:"action",private:!1,sys:!0,fields:[{name:"site",type:"bigint"},{name:"user",type:"bigint"},{name:"action",type:"char",size:100},{name:"role",type:"char",size:100}],returns:[]},$role_site_quit_owner:{name:"$role_site_quit_owner",type:"action",private:!1,sys:!0,fields:[{name:"site",type:"bigint"}],returns:[]},$sites:{name:"$sites",type:"query",private:!1,sys:!0,fields:[],returns:[{name:"$page",fields:[{name:"id",type:"id"},{name:"no",type:"char",size:50},{name:"ex",type:"char",size:100}],order:"desc"}]},$setsite:{name:"$setSite",type:"action",private:!1,sys:!0,fields:[{name:"site",type:"id"}],returns:[]},$poked:{name:"$poked",type:"query",private:!1,sys:!0,fields:[],returns:[{name:"ret",fields:[{name:"poke",type:"tinyint"}]}]},$setmytimezone:{name:"$setMyTimezone",type:"action",private:!1,sys:!0,fields:[{name:"_timezone",type:"tinyint"}],returns:[]},$getunittime:{name:"$getUnitTime",type:"query",private:!1,sys:!0,fields:[],returns:[{name:"ret",fields:[{name:"timezone",type:"tinyint"},{name:"unitTimeZone",type:"tinyint"},{name:"unitBizMonth",type:"tinyint"},{name:"unitBizDate",type:"tinyint"}]}]},$allphrases:{name:"$AllPhrases",type:"query",private:!1,sys:!0,fields:[],returns:[{name:"main",fields:[{name:"id",type:"id"},{name:"name",type:"char",size:200},{name:"caption",type:"char",size:100},{name:"type",type:"enum"}]},{name:"detail",fields:[{name:"id",type:"id"},{name:"name",type:"char",size:200},{name:"caption",type:"char",size:100},{name:"owner",type:"id"},{name:"type",type:"enum"}]}]},saveatom:{name:"SaveAtom",type:"action",private:!1,sys:!0,fields:[{name:"atomPhrase",type:"id"},{name:"base",type:"bigint"},{name:"no",type:"char",size:30},{name:"ex",type:"char",size:200}],returns:[{name:"ret",fields:[{name:"id",type:"id"}]}]},savebudvalue:{name:"SaveBudValue",type:"action",private:!1,sys:!0,fields:[{name:"phraseId",type:"id"},{name:"id",type:"id"},{name:"int",type:"bigint"},{name:"dec",type:"dec",scale:6,precision:18},{name:"str",type:"char",size:100}],returns:[]},savebudcheck:{name:"SaveBudCheck",type:"action",private:!1,sys:!0,fields:[{name:"budPhrase",type:"id"},{name:"id",type:"id"},{name:"optionsItemPhrase",type:"id"},{name:"checked",type:"tinyint"}],returns:[]},savebudradio:{name:"SaveBudRadio",type:"action",private:!1,sys:!0,fields:[{name:"budPhrase",type:"id"},{name:"id",type:"id"},{name:"optionsItemPhrase",type:"id"}],returns:[]},delatom:{name:"DelAtom",type:"action",private:!1,sys:!0,fields:[{name:"id",type:"id"}],returns:[]},savespec:{name:"SaveSpec",type:"action",private:!1,sys:!0,fields:[{name:"spec",type:"char",size:100},{name:"base",type:"id"},{name:"keys",type:"text"},{name:"props",type:"text"}],jsoned:!0,returns:[{name:"ret",fields:[{name:"id",type:"id"}]}]},getspec:{name:"GetSpec",type:"query",private:!1,sys:!0,fields:[{name:"id",type:"id"}],returns:[{name:"props",fields:[{name:"id",type:"id"},{name:"phrase",type:"id"},{name:"value",type:"json"}]}]},savesheet:{name:"SaveSheet",type:"action",private:!1,sys:!0,fields:[{name:"phrase",type:"id"},{name:"no",type:"char",size:30},{name:"i",type:"id"},{name:"x",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"price",type:"dec",scale:6,precision:18},{name:"amount",type:"dec",scale:6,precision:18}],returns:[{name:"ret",fields:[{name:"id",type:"id"},{name:"no",type:"char",size:30}]}]},savedetail:{name:"SaveDetail",type:"action",private:!1,sys:!0,fields:[{name:"base",type:"id"},{name:"phrase",type:"id"},{name:"id",type:"id"},{name:"i",type:"id"},{name:"x",type:"id"},{name:"origin",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"price",type:"dec",scale:6,precision:18},{name:"amount",type:"dec",scale:6,precision:18},{name:"pendFrom",type:"id"}],returns:[{name:"ret",fields:[{name:"id",type:"id"}]}]},deletebin:{name:"DeleteBin",type:"action",private:!1,sys:!0,fields:[{name:"id",type:"id"}],jsoned:!0,returns:[]},submitsheet:{name:"SubmitSheet",type:"action",private:!1,sys:!0,fields:[{name:"id",type:"id"}],jsoned:!0,returns:[]},getreport:{name:"GetReport",type:"query",private:!1,sys:!0,fields:[{name:"reportPhrase",type:"id"},{name:"atomPhrase",type:"id"},{name:"atomId",type:"id"},{name:"dateStart",type:"date"},{name:"dateEnd",type:"date"},{name:"params",type:"json"}],returns:[{name:"$page",fields:[{name:"id",type:"id"},{name:"phrase",type:"id"},{name:"no",type:"char",size:30},{name:"ex",type:"char",size:200},{name:"value",type:"dec",scale:6,precision:18}],order:"asc"},{name:"specs",fields:[{name:"id",type:"id"},{name:"phrase",type:"id"},{name:"base",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"props",type:"json"}]}]},gethistory:{name:"GetHistory",type:"query",private:!1,sys:!0,fields:[{name:"objId",type:"id"},{name:"title",type:"id"}],returns:[{name:"$page",fields:[{name:"id",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"ref",type:"id"},{name:"plusMinus",type:"tinyint"},{name:"sheetNo",type:"char",size:30},{name:"sheetPhrase",type:"id"},{name:"binPhrase",type:"id"}],order:"desc"}]},removedraft:{name:"RemoveDraft",type:"action",private:!1,sys:!0,fields:[{name:"id",type:"id"}],returns:[]},getmydrafts:{name:"GetMyDrafts",type:"query",private:!1,sys:!0,fields:[],returns:[{name:"$page",fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"no",type:"char",size:20},{name:"operator",type:"id"},{name:"phrase",type:"char",size:200}],order:"desc"}]},searchatom:{name:"SearchAtom",type:"query",private:!1,sys:!0,fields:[{name:"atom",type:"id"},{name:"key",type:"char",size:50}],returns:[{name:"$page",fields:[{name:"id",type:"id"},{name:"no",type:"char",size:50},{name:"ex",type:"char",size:50},{name:"phrase",type:"id"}],order:"desc"}]},searchatombuds:{name:"SearchAtomBuds",type:"query",private:!1,sys:!0,fields:[{name:"phrase",type:"char",size:200},{name:"key",type:"char",size:50},{name:"budNames",type:"char",size:300}],returns:[{name:"$page",fields:[{name:"id",type:"id"},{name:"no",type:"char",size:50},{name:"ex",type:"char",size:50},{name:"phrase",type:"char",size:200}],order:"desc"},{name:"meds",fields:[{name:"id",type:"id"},{name:"main",type:"id"},{name:"detail",type:"id"}]},{name:"budsInt",fields:[{name:"id",type:"id"},{name:"bud",type:"id"},{name:"phrase",type:"char",size:50},{name:"value",type:"int"}]},{name:"budsDec",fields:[{name:"id",type:"id"},{name:"bud",type:"id"},{name:"phrase",type:"char",size:50},{name:"value",type:"dec",scale:6,precision:18}]},{name:"budsStr",fields:[{name:"id",type:"id"},{name:"bud",type:"id"},{name:"phrase",type:"char",size:50},{name:"value",type:"char",size:200}]}]},searchatomuombuds:{name:"SearchAtomUomBuds",type:"query",private:!1,sys:!0,fields:[{name:"phrase",type:"char",size:200},{name:"key",type:"char",size:50},{name:"budNames",type:"char",size:300}],returns:[{name:"$page",fields:[{name:"id",type:"id"},{name:"no",type:"char",size:50},{name:"ex",type:"char",size:50},{name:"phrase",type:"char",size:200}],order:"desc"},{name:"uoms",fields:[{name:"id",type:"id"},{name:"atom",type:"id"},{name:"uom",type:"id"}]},{name:"budsInt",fields:[{name:"id",type:"id"},{name:"bud",type:"id"},{name:"phrase",type:"char",size:50},{name:"value",type:"int"}]},{name:"budsDec",fields:[{name:"id",type:"id"},{name:"bud",type:"id"},{name:"phrase",type:"char",size:50},{name:"value",type:"dec",scale:6,precision:18}]},{name:"budsStr",fields:[{name:"id",type:"id"},{name:"bud",type:"id"},{name:"phrase",type:"char",size:50},{name:"value",type:"char",size:200}]}]},getsheet:{name:"GetSheet",type:"query",private:!1,sys:!0,fields:[{name:"id",type:"id"},{name:"detail",type:"id"}],returns:[{name:"main",fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"no",type:"char",size:20},{name:"operator",type:"id"},{name:"origin",type:"id"},{name:"i",type:"id"},{name:"x",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"amount",type:"dec",scale:6,precision:18},{name:"price",type:"dec",scale:6,precision:18},{name:"phrase",type:"id"}]},{name:"details",fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"origin",type:"id"},{name:"i",type:"id"},{name:"x",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"amount",type:"dec",scale:6,precision:18},{name:"price",type:"dec",scale:6,precision:18},{name:"pendFrom",type:"id"},{name:"pendValue",type:"dec",scale:6,precision:18},{name:"phrase",type:"id"}]},{name:"origins",fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"origin",type:"id"},{name:"i",type:"id"},{name:"x",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"amount",type:"dec",scale:6,precision:18},{name:"price",type:"dec",scale:6,precision:18}]}]},getatom:{name:"GetAtom",type:"query",private:!1,sys:!0,fields:[{name:"id",type:"id"}],returns:[{name:"props",fields:[{name:"phrase",type:"id"},{name:"value",type:"json"}]}]},getspecsfrombase:{name:"GetSpecsFromBase",type:"query",private:!1,sys:!0,fields:[{name:"base",type:"id"}],returns:[{name:"ret",fields:[{name:"id",type:"id"},{name:"keys",type:"json"},{name:"props",type:"json"}]}]},reportstorage:{name:"ReportStorage",type:"query",private:!1,sys:!0,fields:[{name:"key",type:"char",size:50},{name:"subject",type:"char",size:200}],returns:[{name:"$page",fields:[{name:"atom",type:"id"},{name:"uom",type:"id"},{name:"spec",type:"id"},{name:"id",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"init",type:"dec",scale:6,precision:18}],order:"asc"}]},reportstorageatom:{name:"ReportStorageAtom",type:"query",private:!1,sys:!0,fields:[{name:"key",type:"char",size:50},{name:"subject",type:"char",size:200}],returns:[{name:"$page",fields:[{name:"obj",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"init",type:"dec",scale:6,precision:18}],order:"asc"}]},reportstoragespec:{name:"ReportStorageSpec",type:"query",private:!1,sys:!0,fields:[{name:"key",type:"char",size:50},{name:"subject",type:"char",size:200}],returns:[{name:"$page",fields:[{name:"obj",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"init",type:"dec",scale:6,precision:18}],order:"asc"}]},bizphrasetype:{name:"BizPhraseType",type:"enum",private:!1,sys:!0,values:{any:0,atom:11,spec:12,bud:13,sheet:101,main:102,detail:103,pend:104,detailAct:111,with:151,pick:161,role:201,permit:202,options:301,tree:401,tie:501,report:601,title:901,key:1001,prop:1011,optionsitem:1031}},buddatatype:{name:"BudDataType",type:"enum",private:!1,sys:!0,values:{none:0,int:11,atom:12,radio:13,check:14,ID:19,dec:21,char:31,str:32,date:41}},bizbudflag:{name:"BizBudFlag",type:"enum",private:!1,sys:!0,values:{index:1}},getbizobjects:{name:"GetBizObjects",type:"query",private:!1,sys:!0,fields:[{name:"lang",type:"char",size:10},{name:"culture",type:"char",size:10}],returns:[{name:"objs",fields:[{name:"id",type:"id"},{name:"phrase",type:"char",size:200},{name:"source",type:"text"},{name:"caption",type:"char",size:100}]},{name:"buds",fields:[{name:"id",type:"id"},{name:"base",type:"id"},{name:"phrase",type:"char",size:200},{name:"caption",type:"char",size:100}]}]},getentitycode:{name:"GetEntityCode",type:"query",private:!1,sys:!0,fields:[{name:"id",type:"id"}],returns:[{name:"ret",fields:[{name:"code",type:"text"},{name:"schema",type:"text"}]}]},getpend:{name:"GetPend",type:"query",private:!1,sys:!0,fields:[{name:"pend",type:"id"},{name:"key",type:"char",size:100}],returns:[{name:"$page",fields:[{name:"pend",type:"id"},{name:"sheet",type:"id"},{name:"id",type:"id"},{name:"i",type:"id"},{name:"x",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"price",type:"dec",scale:6,precision:18},{name:"amount",type:"dec",scale:6,precision:18},{name:"mid",type:"json"},{name:"pendValue",type:"dec",scale:6,precision:18}],order:"asc"},{name:"retSheet",fields:[{name:"id",type:"id"},{name:"no",type:"char",size:30},{name:"i",type:"id"},{name:"x",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"price",type:"dec",scale:6,precision:18},{name:"amount",type:"dec",scale:6,precision:18}]},{name:"retAtom",fields:[{name:"atom",type:"id"},{name:"value",type:"json"}]}]},getpendsnotify:{name:"GetPendsNotify",type:"query",private:!1,sys:!0,fields:[],returns:[{name:"ret",fields:[{name:"phrase",type:"id"},{name:"count",type:"int"}]}]},getpendsheetfromno:{name:"GetPendSheetFromNo",type:"query",private:!1,sys:!0,fields:[{name:"pend",type:"char",size:200},{name:"key",type:"char",size:100}],returns:[{name:"$page",fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"no",type:"char",size:20},{name:"operator",type:"id"},{name:"sheet",type:"char",size:200}],order:"asc"}]},getpendsheetfromtarget:{name:"GetPendSheetFromTarget",type:"query",private:!1,sys:!0,fields:[{name:"pend",type:"char",size:200},{name:"key",type:"char",size:100}],returns:[{name:"$page",fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"no",type:"char",size:20},{name:"operator",type:"id"},{name:"sheet",type:"char",size:200}],order:"asc"}]},getpenddetailfromitem:{name:"GetPendDetailFromItem",type:"query",private:!1,sys:!0,fields:[{name:"pend",type:"char",size:200},{name:"key",type:"char",size:100}],returns:[{name:"$page",fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"origin",type:"id"},{name:"i",type:"id"},{name:"x",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"amount",type:"dec",scale:6,precision:18},{name:"price",type:"dec",scale:6,precision:18},{name:"pend",type:"id"},{name:"pendValue",type:"dec",scale:6,precision:18},{name:"sheet",type:"char",size:200},{name:"no",type:"char",size:30}],order:"asc"}]},getpenddetailfromsheetid:{name:"GetPendDetailFromSheetId",type:"query",private:!1,sys:!0,fields:[{name:"pend",type:"char",size:200},{name:"sheetId",type:"id"}],returns:[{name:"ret",fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"origin",type:"id"},{name:"i",type:"id"},{name:"x",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"amount",type:"dec",scale:6,precision:18},{name:"price",type:"dec",scale:6,precision:18},{name:"pend",type:"id"},{name:"pendValue",type:"dec",scale:6,precision:18},{name:"sheet",type:"char",size:200},{name:"no",type:"char",size:30}]}]},atom:{name:"Atom",type:"id",private:!1,sys:!0,fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"no",type:"char",size:30},{name:"ex",type:"char",size:200}],keys:[{name:"base",type:"id"}],global:!1,idType:3,isMinute:!1},spec:{name:"Spec",type:"id",private:!1,sys:!0,fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"}],keys:[{name:"base",type:"id"}],global:!1,idType:3,isMinute:!1},sheet:{name:"Sheet",type:"id",private:!1,sys:!0,fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"no",type:"char",size:20},{name:"operator",type:"id"}],keys:[{name:"base",type:"id"},{name:"no",type:"char",size:20}],global:!1,idType:3,isMinute:!0},bin:{name:"Bin",type:"id",private:!1,sys:!0,fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"origin",type:"id"},{name:"i",type:"id"},{name:"x",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"amount",type:"dec",scale:6,precision:18},{name:"price",type:"dec",scale:6,precision:18}],keys:[{name:"base",type:"id"}],global:!1,idType:3,isMinute:!0},pend:{name:"Pend",type:"id",private:!1,sys:!0,fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"detail",type:"id"},{name:"mid",type:"json"},{name:"value",type:"dec",scale:6,precision:18}],keys:[{name:"base",type:"id"}],global:!1,idType:3,isMinute:!0},ixbud:{name:"IxBud",type:"ix",private:!1,sys:!0,fields:[{name:"i",type:"id"},{name:"x",type:"id"}],ixx:!1,hasSort:!1,xType:0},bud:{name:"Bud",type:"id",private:!1,sys:!0,fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"ext",type:"id"}],keys:[{name:"base",type:"id"},{name:"ext",type:"id"}],global:!1,idType:3,isMinute:!0},history:{name:"History",type:"id",private:!1,sys:!0,fields:[{name:"id",type:"id",null:!1},{name:"bud",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"ref",type:"id"},{name:"plusMinus",type:"tinyint"}],keys:[],global:!1,idType:3,isMinute:!0},sumformulatype:{name:"SumFormulaType",type:"enum",private:!1,sys:!0,values:{person:1,group:2}},sumformula:{name:"SumFormula",type:"id",private:!1,sys:!0,fields:[{name:"id",type:"id",null:!1},{name:"formulaType",type:"enum"},{name:"subject",type:"id"},{name:"post",type:"id"},{name:"sumSubject",type:"id"},{name:"caption",type:"char",size:100},{name:"start",type:"date"},{name:"end",type:"date"},{name:"ratio",type:"dec",scale:6,precision:18},{name:"valid",type:"tinyint"}],keys:[{name:"formulaType",type:"enum"},{name:"subject",type:"id"},{name:"post",type:"id"},{name:"sumSubject",type:"id"}],global:!1,idType:3,isMinute:!0},searchgrouppersons:{name:"SearchGroupPersons",type:"query",private:!1,sys:!0,fields:[{name:"group",type:"id"},{name:"key",type:"char",size:50}],returns:[{name:"$page",fields:[{name:"id",type:"id"},{name:"no",type:"char",size:50},{name:"ex",type:"char",size:50},{name:"phrase",type:"char",size:200},{name:"selected",type:"tinyint"}],order:"desc"}]},savesumformula:{name:"SaveSumFormula",type:"action",private:!1,sys:!0,fields:[{name:"id",type:"id"},{name:"formulaType",type:"enum"},{name:"subject",type:"id"},{name:"post",type:"id"},{name:"sumSubject",type:"id"},{name:"caption",type:"char",size:100},{name:"start",type:"date"},{name:"end",type:"date"},{name:"ratio",type:"dec",scale:6,precision:18}],returns:[{name:"ret",fields:[{name:"id",type:"id"}]}]},changesumformulacaption:{name:"ChangeSumFormulaCaption",type:"action",private:!1,sys:!0,fields:[{name:"id",type:"id"},{name:"caption",type:"char",size:100}],returns:[]},changesumformula:{name:"ChangeSumFormula",type:"action",private:!1,sys:!0,fields:[{name:"id",type:"id"},{name:"start",type:"date"},{name:"end",type:"date"},{name:"ratio",type:"dec",scale:6,precision:18}],returns:[{name:"ret",fields:[{name:"id",type:"id"}]}]},usersitefromtonwauser:{name:"UserSiteFromTonwaUser",type:"action",private:!1,sys:!0,fields:[{name:"tonwaUser",type:"id"}],returns:[{name:"ret",fields:[{name:"userSite",type:"id"}]}]},changeixmysum:{name:"ChangeIxMySum",type:"action",private:!1,sys:!0,fields:[{name:"userSite",type:"id"}],arrs:[{name:"added",fields:[{name:"id",type:"id"}]},{name:"removed",fields:[{name:"idDel",type:"id"}]}],returns:[]},getixmysum:{name:"GetIxMySum",type:"query",private:!1,sys:!0,fields:[{name:"userSite",type:"id"}],returns:[{name:"users",fields:[{name:"tonwaUser",type:"id"},{name:"userSite",type:"id"}]},{name:"atoms",fields:[{name:"userSite",type:"id"},{name:"atom",type:"id"},{name:"phrase",type:"char",size:200},{name:"no",type:"char",size:30},{name:"ex",type:"char",size:200}]}]},getallformula:{name:"GetAllFormula",type:"query",private:!1,sys:!0,fields:[],returns:[{name:"ret",fields:[{name:"id",type:"id",null:!1},{name:"formulaType",type:"enum"},{name:"subject",type:"id"},{name:"post",type:"id"},{name:"sumSubject",type:"id"},{name:"caption",type:"char",size:100},{name:"start",type:"date"},{name:"end",type:"date"},{name:"ratio",type:"dec",scale:6,precision:18},{name:"valid",type:"tinyint"}]}]},setsumgroupperson:{name:"SetSumGroupPerson",type:"action",private:!1,sys:!0,fields:[{name:"group",type:"id"},{name:"person",type:"id"},{name:"act",type:"tinyint"}],returns:[]},getmysums:{name:"GetMySums",type:"query",private:!1,sys:!0,fields:[{name:"start",type:"date"},{name:"end",type:"date"}],returns:[{name:"ret",fields:[{name:"obj",type:"id"},{name:"post",type:"id"},{name:"subject",type:"id"},{name:"value",type:"dec",scale:6,precision:18}]}]},getmybalance:{name:"GetMyBalance",type:"query",private:!1,sys:!0,fields:[],returns:[{name:"ret",fields:[{name:"obj",type:"id"},{name:"post",type:"id"},{name:"subject",type:"id"},{name:"value",type:"dec",scale:6,precision:18}]}]},getsitesetting:{name:"GetSiteSetting",type:"query",private:!1,sys:!0,fields:[],returns:[{name:"budsInt",fields:[{name:"bud",type:"id"},{name:"value",type:"bigint"}]},{name:"budsDec",fields:[{name:"bud",type:"id"},{name:"value",type:"dec",scale:6,precision:18}]},{name:"budsStr",fields:[{name:"bud",type:"id"},{name:"value",type:"char",size:200}]},{name:"budsCheck",fields:[{name:"bud",type:"id"},{name:"item",type:"id"}]}]},atomuom:{name:"AtomUom",type:"id",private:!1,sys:!0,fields:[{name:"id",type:"id",null:!1},{name:"atom",type:"id",ID:"atom",tuid:"atom"},{name:"uom",type:"id",ID:"atom",tuid:"atom"},{name:"visible",type:"tinyint"}],keys:[{name:"atom",type:"id",ID:"atom",tuid:"atom"},{name:"uom",type:"id",ID:"atom",tuid:"atom"}],global:!1,idType:3,isMinute:!1,stars:["atom","uom"]},atomspec:{name:"AtomSpec",type:"id",private:!1,sys:!0,fields:[{name:"id",type:"id",null:!1},{name:"atomUom",type:"id",ID:"atomuom",tuid:"atomuom"},{name:"spec",type:"id"}],keys:[{name:"atomUom",type:"id",ID:"atomuom",tuid:"atomuom"},{name:"spec",type:"id"}],global:!1,idType:3,isMinute:!1,stars:["atomUom","spec"]},saveuomtype:{name:"SaveUomType",type:"action",private:!1,sys:!0,fields:[{name:"id",type:"id"},{name:"type",type:"id"}],returns:[]},saveuomiuom:{name:"SaveUomIUom",type:"action",private:!1,sys:!0,fields:[{name:"id",type:"id"},{name:"type",type:"id"}],returns:[]},getuomfromtype:{name:"GetUomFromType",type:"query",private:!1,sys:!0,fields:[{name:"id",type:"id"}],returns:[{name:"uom",fields:[{name:"id",type:"id"},{name:"no",type:"char",size:30},{name:"ex",type:"char",size:200},{name:"discription",type:"char",size:100}]}]},getuomilistofuom:{name:"GetUomIListOfUom",type:"query",private:!1,sys:!0,fields:[{name:"uom",type:"id"}],returns:[{name:"$page",fields:[{name:"id",type:"id"},{name:"no",type:"char",size:50},{name:"ex",type:"char",size:50},{name:"phrase",type:"char",size:200}],order:"desc"}]},getatomuomi:{name:"GetAtomUomI",type:"query",private:!1,sys:!0,fields:[{name:"id",type:"id"}],returns:[{name:"uomI",fields:[{name:"id",type:"id"},{name:"no",type:"char",size:30},{name:"ex",type:"char",size:200}]},{name:"uomX",fields:[{name:"id",type:"id"},{name:"no",type:"char",size:30},{name:"ex",type:"char",size:200},{name:"ratio",type:"dec",scale:6,precision:18},{name:"prevEx",type:"char",size:200},{name:"prevRatio",type:"dec",scale:6,precision:18},{name:"atomUom",type:"id"}]}]},saveuomx:{name:"SaveUomX",type:"action",private:!1,sys:!0,fields:[{name:"i",type:"id"},{name:"no",type:"char",size:30},{name:"ex",type:"char",size:100},{name:"ratio",type:"dec",scale:6,precision:18}],returns:[{name:"ret",fields:[{name:"id",type:"id"}]}]},deluomx:{name:"DelUomX",type:"action",private:!1,sys:!0,fields:[{name:"uomI",type:"id"},{name:"uomX",type:"id"}],returns:[]},saveatomuom:{name:"SaveAtomUom",type:"action",private:!1,sys:!0,fields:[{name:"atom",type:"id"},{name:"uom",type:"id"}],returns:[{name:"ret",fields:[{name:"id",type:"id",ID:"atomuom",tuid:"atomuom"}]}]},hideatomuomx:{name:"HideAtomUomX",type:"action",private:!1,sys:!0,fields:[{name:"id",type:"id"}],returns:[]},deleteatomuomi:{name:"DeleteAtomUomI",type:"action",private:!1,sys:!0,fields:[{name:"atom",type:"id"},{name:"uomI",type:"id"}],returns:[]},saveatomspec:{name:"SaveAtomSpec",type:"action",private:!1,sys:!0,fields:[{name:"atomUom",type:"id"},{name:"spec",type:"id"}],returns:[{name:"ret",fields:[{name:"id",type:"id",ID:"atomspec",tuid:"atomspec"}]}]},getuomi:{name:"GetUomI",type:"query",private:!1,sys:!0,fields:[{name:"id",type:"id"}],returns:[{name:"UomI",fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"no",type:"char",size:30},{name:"ex",type:"char",size:200},{name:"discription",type:"char",size:100},{name:"ratio",type:"dec",scale:6,precision:18},{name:"uom",type:"id",ID:"atom",tuid:"atom"},{name:"uomNo",type:"char",size:30},{name:"uomEx",type:"char",size:100},{name:"uomDiscription",type:"char",size:100}]},{name:"UomX",fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"no",type:"char",size:30},{name:"ex",type:"char",size:200},{name:"ratio",type:"dec",scale:6,precision:18}]}]},$biz:{$user:{name:"$user",type:"$user"},$unit:{name:"$unit",type:"$unit"},$:{name:"$",type:"atom",props:[{name:"uom",type:"prop",dataType:"ID"}]},sum:{name:"sum",jName:"Sum",type:"moniker",caption:"Sum",assigns:[{name:"psource",type:"assign",dataType:"int"},{name:"psource1",type:"assign",dataType:"int"}]},subject:{name:"subject",jName:"Subject",type:"atom",caption:"科目",props:[{name:"balance",type:"prop",caption:"结余",dataType:"radio",items:[["none","无",0],["yes","有",1]]}],uom:!0},sumpersonpost:{name:"sumpersonpost",jName:"SumPersonPost",type:"atom",caption:"岗位"},sumgrouppost:{name:"sumgrouppost",jName:"SumGroupPost",type:"atom",caption:"职能组"},sumgroup:{name:"sumgroup",jName:"SumGroup",type:"atom",caption:"小组合计"},sitesetting:{name:"sitesetting",jName:"SiteSetting",type:"moniker",caption:"SiteSetting",assigns:[{name:"currency",type:"assign",caption:"默认货币",dataType:"ID"},{name:"startsummonth",type:"assign",caption:"汇总开始月",dataType:"int"},{name:"startfiscalmonth",type:"assign",caption:"财年开始月",dataType:"int"},{name:"startfiscalday",type:"assign",caption:"财年开始日",dataType:"int"}]},uom:{name:"uom",jName:"Uom",type:"atom",caption:"基本单位",props:[{name:"discription",type:"prop",caption:"说明",dataType:"char"},{name:"type",type:"prop",dataType:"radio",items:[["count","计数",1],["length","长度",2],["area","面积",3],["volume","体积",4],["weight","重量",5],["time","时长",6],["currency","货币",7]]}]},uomi:{name:"uomi",jName:"UomI",type:"atom",caption:"计量单位",props:[{name:"discription",type:"prop",caption:"说明",dataType:"char"},{name:"uom",type:"prop",caption:"基本单位",dataType:"atom",atom:"uom"},{name:"ratio",type:"prop",caption:"换算率",dataType:"dec"}]},uomx:{name:"uomx",jName:"UomX",type:"atom",caption:"换算单位"},a菜单:{name:"a菜单",jName:"A菜单",type:"permit",caption:"A菜单",items:[{phrase:"permit.a菜单.i1",name:"i1"},{phrase:"permit.a菜单.i2",name:"i2"},{phrase:"permit.a菜单.i4",name:"i4"}],permits:[]},销售1:{name:"销售1",type:"permit",items:[{phrase:"permit.销售1.入库",name:"入库"},{phrase:"permit.销售1.发货",name:"发货"},{phrase:"permit.销售1.检验",name:"检验"}],permits:[]},入库:{name:"入库",type:"permit",items:[{phrase:"permit.入库.上架",name:"上架"},{phrase:"permit.入库.收货",name:"收货"}],permits:[]},检验:{name:"检验",type:"permit",items:[{phrase:"permit.检验.初检",name:"初检"},{phrase:"permit.检验.复检",name:"复检"}],permits:["入库"]},经理:{name:"经理",type:"role"},销售部经理:{name:"销售部经理",type:"role"},检验员:{name:"检验员",type:"role"},storage:{name:"storage",type:"moniker",caption:"库存",assigns:[{name:"goodsinit",type:"assign",dataType:"dec"},{name:"goodsbalance",type:"assign",dataType:"dec",history:!0}]},c:{name:"c",type:"moniker",assigns:[{name:"流水",type:"assign",caption:"下一步",dataType:"char",value:"s2"}]},accountsetting:{name:"accountsetting",jName:"AccountSetting",type:"moniker",caption:"AccountSetting",assigns:[{name:"name",type:"assign",caption:"单位名称",dataType:"char"},{name:"库存上限",type:"assign",dataType:"dec"},{name:"库存下限",type:"assign",dataType:"dec"}]},personsetting:{name:"personsetting",jName:"PersonSetting",type:"moniker",caption:"PersonSetting",assigns:[{name:"name",type:"assign",caption:"名字",dataType:"char"},{name:"工时上限",type:"assign",dataType:"int"},{name:"工时下限",type:"assign",dataType:"int"}]},price:{name:"price",jName:"Price",type:"moniker",caption:"Price",assigns:[{name:"retail",type:"assign",dataType:"dec"}]},customertree:{name:"customertree",jName:"CustomerTree",type:"tree",caption:"客户分组"},vendortree:{name:"vendortree",jName:"VendorTree",type:"tree",caption:"供应商分组"}}};var rt=(e=>(e.$="$",e.Subject="subject",e.SumPersonPost="sumpersonpost",e.SumGroupPost="sumgrouppost",e.SumGroup="sumgroup",e.Uom="uom",e.UomI="uomi",e.UomX="uomx",e))(rt||{});const PN={"jksoft/jksoft-mini-jxc-trial":IN},AN={bz:{name:"bizdev",alias:"bz"},br:{name:"bruce",alias:"br"},jksoft:{name:"jksoft",alias:"js"}},ON=[{dev:"jksoft",name:"jksoft-mini-jxc-trial",alias:"Ticket"}],MN=[{dev:"jksoft",name:"ticket",alias:"Ticket"},{dev:"bz",name:"jxc",alias:"Jxc"}],FN={devs:AN,uqs:ON,uqs1:MN},TN=function(){let e,t,n=/\+/g,r=/([^&=]+)=?([^&]*)/g,i=function(c){return decodeURIComponent(c.replace(n," "))},s;window&&(s=window.location.search.substring(1));let a={};for(;s;){let c=r.exec(s);if(!c)break;a[i(c[1])]=i(c[2])}let o=a.u||a.unit;if(o){let c=o.indexOf("-");if(c>=0){let d=o.charCodeAt(c+1);const f="tT";e=d===f.charCodeAt(0)||d===f.charCodeAt(1),o=o.substring(0,c)}else e=!1;o[0]==="0"?t=Number(o):t=rr(o),isNaN(t)===!0&&(t=void 0)}else t=0;return{isDevelopment:!1,testing:e,unit:t}}();class Bx{constructor(t,n,r,i){x(this,"biz");x(this,"uq");x(this,"name");x(this,"type");x(this,"id");x(this,"phrase");x(this,"caption");x(this,"bizPhraseType");this.biz=t,this.uq=t.uq,this.id=n,this.name=r,this.type=i}fromSchema(t){for(let n in t)this.fromSwitch(n,t[n])}fromSwitch(t,n){switch(t){default:debugger;throw Error(`unknown ${t}`);case"id":break;case"name":break;case"jName":break;case"type":break;case"dataType":break;case"history":break;case"phrase":this.phrase=n;break;case"caption":this.caption=n;break}}}var Ae=(e=>(e[e.none=0]="none",e[e.int=11]="int",e[e.atom=12]="atom",e[e.radio=13]="radio",e[e.check=14]="check",e[e.intof=15]="intof",e[e.pick=18]="pick",e[e.ID=19]="ID",e[e.dec=21]="dec",e[e.char=31]="char",e[e.str=32]="str",e[e.date=41]="date",e[e.datetime=42]="datetime",e))(Ae||{});class th{fromSchema(t){}scan(t){}}class vi extends th{constructor(){super(...arguments);x(this,"dataType","number")}}class Yx extends th{constructor(){super(...arguments);x(this,"dataType","string")}}class RN extends Yx{constructor(){super(...arguments);x(this,"type",0)}}class LN extends vi{constructor(){super(...arguments);x(this,"type",11)}}class qN extends vi{constructor(){super(...arguments);x(this,"type",21)}}class UN extends Yx{constructor(){super(...arguments);x(this,"type",32)}}class $N extends vi{constructor(){super(...arguments);x(this,"type",12);x(this,"atom");x(this,"bizAtom")}fromSchema(n){this.atom=n.atom}scan(n){this.bizAtom=n.entities[this.atom]}}class VN extends vi{constructor(){super(...arguments);x(this,"type",19);x(this,"IDName");x(this,"ID")}fromSchema(n){this.IDName=n.ID}scan(n){this.IDName!==void 0&&(this.ID=n.uqApp.uq[this.IDName])}}class nh extends th{constructor(){super(...arguments);x(this,"optionsName");x(this,"options")}get dataType(){}scan(n){this.options=n.entities[this.optionsName]}fromSchema(n){this.optionsName=n.options}}class zN extends nh{constructor(){super(...arguments);x(this,"type",15)}}class BN extends nh{constructor(){super(...arguments);x(this,"type",13)}}class YN extends nh{constructor(){super(...arguments);x(this,"type",14)}}class WN extends vi{constructor(){super(...arguments);x(this,"type",41)}}class HN extends vi{constructor(){super(...arguments);x(this,"type",42)}}class QN extends vi{constructor(){super(...arguments);x(this,"type",18);x(this,"schema");x(this,"atom");x(this,"pick");x(this,"value")}fromSchema(n){this.schema=n}scan(n){const{entities:r}=n,{pick:i}=this.schema;if(i!==void 0){const s=r[i];switch(s.type){case"atom":this.atom=s;break;case"pick":this.pick=s;break}}this.schema=void 0}}class ou extends Bx{constructor(n,r,i,s,a){super(n,r,i,"bud");x(this,"entity");x(this,"budDataType");x(this,"defaultValue");this.entity=a;let o;switch(s){case 0:o=new RN;break;case 11:o=new LN;break;case 21:o=new qN;break;case 31:case 32:o=new UN;break;case 12:o=new $N;break;case 19:o=new VN;break;case 18:o=new QN;break;case 15:o=new zN;break;case 13:o=new BN;break;case 14:o=new YN;break;case 41:o=new WN;break;case 42:o=new HN;break}this.budDataType=o}scan(){this.budDataType.scan(this.biz)}fromSwitch(n,r){switch(n){default:super.fromSwitch(n,r);break;case"items":case"atom":case"options":break;case"value":this.defaultValue=r;break}}}class ln extends Bx{constructor(){super(...arguments);x(this,"selfProps",[]);x(this,"buds",{});x(this,"props",[])}fromSwitch(n,r){if(r!==void 0)switch(n){default:super.fromSwitch(n,r);break;case"props":this.fromProps(r);break}}fromProp(n){let{id:r,name:i,dataType:s}=n,a=new ou(this.biz,r,i,s,this),{budDataType:o}=a;if(o===void 0){debugger;return}return o.fromSchema(n),a.fromSchema(n),a}fromProps(n){for(let r of n){let i=this.fromProp(r);i!==void 0&&this.selfProps.push(i)}}buildBuds(){for(let n of this.selfProps){let{id:r,name:i,phrase:s}=n;this.buds[r]=n,this.buds[i]=n,this.buds[s]=n,this.props.push(n)}}scan(){for(let n of this.selfProps)n.scan();this.buildBuds()}}class Wx extends ln{constructor(){super(...arguments);x(this,"_extends");x(this,"children",[])}fromSwitch(n,r){switch(n){default:super.fromSwitch(n,r);break;case"extends":this.fromExtends(r);break}}buildBuds(){const n=[];for(let s=this;s!==void 0;s=s._extends)n.unshift(s);let{buds:r,props:i}=this;for(let s of n)for(let a of s.selfProps){let{name:o,phrase:u}=a;r[o]=a,r[u]=a,i.push(a)}}fromExtends(n){if(n===void 0)return;let r=this._extends=this.biz.entities[n];if(r===void 0)debugger;r.children.push(this)}}class GN extends Wx{constructor(){super(...arguments);x(this,"uom")}fromSwitch(n,r){switch(n){default:super.fromSwitch(n,r);break;case"uom":this.uom=r;break}}}class KN extends Wx{constructor(){super(...arguments);x(this,"base")}fromSwitch(n,r){switch(n){default:super.fromSwitch(n,r);break;case"base":this.base=r;break}}}class XN extends KN{constructor(){super(...arguments);x(this,"keyColl",{});x(this,"keys",[]);x(this,"ix")}fromSwitch(n,r){switch(n){default:super.fromSwitch(n,r);break;case"keys":this.fromKeys(r);break;case"ix":this.ix=r;break}}fromKeys(n){for(let r of n){let{id:i,name:s,dataType:a}=r,o=new ou(this.biz,i,s,a,this),{budDataType:u}=o;if(u===void 0){debugger;continue}u.fromSchema(r),o.fromSchema(r),this.keyColl[o.phrase]=o,this.keys.push(o)}}scan(){super.scan();for(let n of this.keys)n.scan()}getSpecValues(n){if(!n)return"";let r=[];for(let s of this.keys)r.push(n[s.name]??"");for(let s of this.props)r.push(n[s.name]??"");return r.join(String.fromCharCode(12))}fromSpecValues(n){let r={},i=n.split(String.fromCharCode(12)),s=0;for(let a of this.keys)r[a.name]=i[s++];for(let a of this.props)r[a.name]=i[s++];return r}}class ZN extends ln{constructor(){super(...arguments);x(this,"atoms");x(this,"specs")}fromSwitch(n,r){const{entities:i}=this.biz;function s(a){return a.map(o=>i[o])}switch(n){default:super.fromSwitch(n,r);break;case"atoms":this.atoms=s(r);break;case"specs":this.specs=s(r);break}}scan(){super.scan();let n=this.specs.length;for(let r=0;r<n;r++)if(this.specs[r].name==="specuom"){this.specs.splice(r,1);break}}}class JN extends ln{}class eD extends ln{constructor(){super(...arguments);x(this,"i");x(this,"x");x(this,"pend");x(this,"value");x(this,"price");x(this,"amount")}fromSwitch(n,r){if(r!==void 0)switch(n){default:super.fromSwitch(n,r);break;case"i":this.i=r;break;case"x":this.x=r;break;case"pend":this.fromPend(r);break;case"value":this.fromValue(r);break;case"price":this.fromPrice(r);break;case"amount":this.fromAmount(r);break}}fromPend(n){let{caption:r,entity:i,search:s}=n;this.pend={caption:r,entity:this.biz.entities[i],search:s}}fromValue(n){this.value=this.fromProp(n)}fromPrice(n){this.price=this.fromProp(n)}fromAmount(n){this.amount=this.fromProp(n)}buildBudPickable(n){const{id:r,name:i,caption:s}=n;let a=new ou(this.biz,r,i,Ae.pick,this);return a.caption=s,a.budDataType.fromSchema(n),a.scan(),a}scan(){super.scan(),this.i!==void 0&&(this.i=this.buildBudPickable(this.i)),this.x!==void 0&&(this.x=this.buildBudPickable(this.x))}}const tD=["s","si","sx","svalue","sprice","samount","i","x","value","price","amount"];class nD extends ln{constructor(){super(...arguments);x(this,"predefined")}fromSwitch(n,r){switch(n){default:if(tD.includes(n)===!0)break;super.fromSwitch(n,r);break;case"predefined":this.predefined=r;break}}}class rD extends ln{constructor(){super(...arguments);x(this,"main");x(this,"coreDetail");x(this,"details",[]);x(this,"detailActs",[])}fromSwitch(n,r){switch(n){default:super.fromSwitch(n,r);break;case"main":this.fromMain(r);break;case"details":this.fromDetails(r);break;case"acts":this.fromActs(r);break}}fromMain(n){this.main=this.biz.entities[n]}fromDetails(n){for(let{detail:r,caption:i}of n)this.details.push({detail:this.biz.entities[r],caption:i});this.coreDetail=this.details[0].detail}fromActs(n){for(const r of n){const{name:i,fromPend:s,detail:a}=r;this.detailActs.push({actName:i,detail:this.biz.entities[a],fromPend:this.biz.entities[s]})}}getAct(n,r){for(let i of this.detailActs){let{actName:s,detail:a}=i;if(s===r&&a.name===n)return i}}}class iD extends ln{}class sD extends ln{}class aD extends ln{constructor(){super(...arguments);x(this,"items");x(this,"permits");x(this,"permitNames")}fromSwitch(n,r){switch(n){default:super.fromSwitch(n,r);break;case"items":this.items=r;break;case"permits":this.permitNames=r;break}}scan(){const{entities:n}=this.biz;this.permits=this.permitNames.map(r=>n[r]),this.permitNames=void 0}}class lD extends ln{}class oD extends ln{constructor(){super(...arguments);x(this,"items",[])}fromSwitch(n,r){switch(n){default:super.fromSwitch(n,r);break;case"items":this.fromItems(r);break}}fromItems(n){this.items.push(...n.map(r=>({...r,phrase:`${this.phrase}.${r.name}`})))}}class uD extends ou{constructor(){super(...arguments);x(this,"atom")}}class cD extends ln{constructor(){super(...arguments);x(this,"title");x(this,"from");x(this,"joins");x(this,"lists")}fromSwitch(n,r){switch(n){default:super.fromSwitch(n,r);break;case"title":this.fromTitle(r);break;case"from":this.fromFrom(r);break;case"joins":this.fromJoins(r);break;case"lists":this.fromLists(r);break}}fromTitle(n){this.title=n.map(r=>{const{caption:i,title:[s,a]}=r;return{caption:i,entity:this.biz.entities[s],bud:a}})}fromFrom(n){this.from=this.biz.entities[n]}fromJoins(n){this.joins=n.map(r=>{const{type:i,entity:s}=r;return{type:i,entity:this.biz.entities[s]}})}fromLists(n){this.lists=n.map(r=>{const{id:i,name:s,caption:a,atom:o}=r;let u=new uD(this.biz,i,s,Ae.none,this);return u.caption=a,u.atom=this.biz.entities[o],u})}scan(){for(let n of this.title)n.bud=n.entity.buds[n.bud]}}class Up{constructor(t,n){x(this,"uqApp");x(this,"uq");x(this,"atoms",[]);x(this,"atomRoots",[]);x(this,"specs",[]);x(this,"sheets",[]);x(this,"bins",[]);x(this,"pends",[]);x(this,"picks",[]);x(this,"options",[]);x(this,"ties",[]);x(this,"trees",[]);x(this,"titles",[]);x(this,"reports",[]);x(this,"roles",[]);x(this,"permits",[]);x(this,"all",[]);x(this,"_refresh",Ie(!1));x(this,"entities",{});x(this,"entityIds",{});x(this,"buildSheet",(t,n,r)=>{let i=new rD(this,t,n,r);return this.sheets.push(i),i});x(this,"buildBin",(t,n,r)=>{let i=new eD(this,t,n,r);return this.bins.push(i),i});x(this,"buildPend",(t,n,r)=>{let i=new nD(this,t,n,r);return this.pends.push(i),i});x(this,"buildAtom",(t,n,r)=>{let i=new GN(this,t,n,r);return this.atoms.push(i),i});x(this,"buildSpec",(t,n,r)=>{let i=new XN(this,t,n,r);return this.specs.push(i),i});x(this,"buildPick",(t,n,r)=>{let i=new ZN(this,t,n,r);return this.picks.push(i),i});x(this,"buildOptions",(t,n,r)=>{let i=new oD(this,t,n,r);return this.options.push(i),i});x(this,"buildPermit",(t,n,r)=>{let i=new aD(this,t,n,r);return this.permits.push(i),i});x(this,"buildRole",(t,n,r)=>{let i=new lD(this,t,n,r);return this.roles.push(i),i});x(this,"buildTitle",(t,n,r)=>{let i=new iD(this,t,n,r);return this.titles.push(i),i});x(this,"buildReport",(t,n,r)=>{let i=new cD(this,t,n,r);return this.reports.push(i),i});x(this,"buildTree",(t,n,r)=>{let i=new JN(this,t,n,r);return this.trees.push(i),i});x(this,"buildTie",(t,n,r)=>{let i=new sD(this,t,n,r);return this.ties.push(i),i});this.uqApp=t,this.uq=t.uq,this.buildEntities(n)}init(){}entityFrom62(t){let n=rr(t);return this.entityIds[n]}buildEntities(t){if(t===void 0)return;const n={sheet:this.buildSheet,bin:this.buildBin,pend:this.buildPend,atom:this.buildAtom,spec:this.buildSpec,pick:this.buildPick,options:this.buildOptions,report:this.buildReport,permit:this.buildPermit,role:this.buildRole,title:this.buildTitle,tree:this.buildTree,tie:this.buildTie};for(let s of this.all)s[0].splice(0);this.all.splice(0);let r=t,i=[];this.entities={},this.entityIds={};for(let s in r){let a=r[s],{id:o,name:u,phrase:c,type:d,caption:f}=a,m=n[d];if(m===void 0){if(u==="$user"||u==="$unit")continue;throw new Error(`unknown biz type='${d}' name='${u}' caption='${f}'`)}let y=m(o,u,d);this.entityIds[o]=y,this.entities[u]=y,u!==c&&(this.entities[c]=y),i.push([y,a])}for(let[s,a]of i)s.fromSchema(a);for(let[s]of i)s.scan();this.buildRootAtoms(),this.all.push([this.atoms],[this.atomRoots,"基础编码","id-card-o"],[this.specs,"细分编码","asterisk"],[this.sheets,"业务单据","file"],[this.reports,"报表","file"],[this.bins,"单据条","file-text-o"],[this.pends,"待处理","clone"],[this.picks,"捡取器","hand-pointer-o"],[this.options,"可选项","check-square-o"],[this.ties,"对照表","list"],[this.trees,"层级结构","indent"],[this.titles,"科目","flag-o"],[this.roles,"角色","user-o"],[this.permits,"许可","user"]),ae(this._refresh,!de(this._refresh))}buildRootAtoms(){for(let t in this.entityIds){const n=this.entityIds[t];if(n.type==="atom"){const r=n,{_extends:i}=r;if(i!==void 0)continue;this.atomRoots.push(r)}}}}var ue=(e=>(e[e.home=0]="home",e[e.relation=1]="relation",e[e.discover=2]="discover",e[e.supervise=3]="supervise",e[e.ids=4]="ids",e[e.test=5]="test",e[e.debug=6]="debug",e[e.me=7]="me",e[e.find=8]="find",e[e.version=9]="version",e[e.changePassword=10]="changePassword",e[e.aboutTheApp=11]="aboutTheApp",e[e.logout=12]="logout",e[e.pleaseLogin=13]="pleaseLogin",e[e.userQuit=14]="userQuit",e[e.content=15]="content",e[e.backend=16]="backend",e[e.list=17]="list",e))(ue||{});const dD={[ue.home]:"Home",[ue.relation]:"Relation",[ue.discover]:"Discover",[ue.supervise]:"Supervise",[ue.ids]:"Items",[ue.test]:"Test",[ue.debug]:"Debug",[ue.me]:"Me",[ue.find]:"Find",[ue.version]:"Version",[ue.changePassword]:"Change password",[ue.aboutTheApp]:"About the APP",[ue.logout]:"Logout",[ue.pleaseLogin]:"Login",[ue.userQuit]:"User quit",[ue.content]:"Content",[ue.backend]:"Backend Management",[ue.list]:"List"},fD={[ue.home]:"首页",[ue.relation]:"关系",[ue.discover]:"发现",[ue.supervise]:"团队",[ue.ids]:"基础ID",[ue.test]:"测试",[ue.debug]:"Debug",[ue.me]:"我",[ue.find]:"发现",[ue.version]:"版本",[ue.changePassword]:"修改密码",[ue.aboutTheApp]:"关于本APP",[ue.logout]:"退出登录",[ue.pleaseLogin]:"登录",[ue.userQuit]:"注销用户",[ue.content]:"内容",[ue.backend]:"后台管理",[ue.list]:"列表"},Hx=Kg({en:dD,zh:fD}),hD="/jksoft-jxc/assets/logo-70aa190a.svg";function Qx(){return l.jsxs("div",{className:"d-flex align-items-center position-relative",children:[l.jsx("img",{className:"App-logo h-3c position-absolute",src:hD,alt:"img"}),l.jsxs("div",{className:"h3 flex-fill text-center",children:[l.jsx("span",{className:"text-primary me-3",children:"同"}),l.jsx("span",{className:"text-danger",children:"花"})]})]})}const Gx="/privacy",$p=l.jsx(l.Fragment,{children:l.jsx(ie,{path:Gx,element:l.jsx(mD,{})})});function Kx(){return l.jsx("div",{className:"d-flex p-3 align-items-center justify-content-center bg-light border-top",children:l.jsx(Ce,{to:Gx,className:"small d-inline-block ",children:"隐私政策"})})}function mD(){return l.jsx(H,{auth:!1,header:"隐私政策",children:l.jsx("div",{className:"d-grid p-3",children:pD.split(`
`).map((e,t)=>l.jsx("p",{children:e},t))})})}const pD=`
我们将保护您的隐私

同花
`;function Vp(){const{state:e}=Rr();return l.jsx(SN,{url:e,loginTop:l.jsx(Qx,{}),privacy:l.jsx(Kx,{}),withBack:!1})}function zp(){return l.jsx(zx,{loginTop:l.jsx(Qx,{}),privacy:l.jsx(Kx,{})})}function yD(){let e=async()=>{},t=()=>{};return l.jsx(jN,{onLogout:e,resetAll:t})}function vD(){let e=Z();return l.jsx(H,{header:"关于APP",children:l.jsxs("div",{className:"py-5 px-3 my-3 w-max-30c mx-auto bg-white",children:[l.jsxs("div",{className:"text-center mb-5 position-relative",children:[l.jsxs("small",{className:"text-muted position-absolute",style:{right:"0",top:"-2.8rem"},children:["版本: ",e.version]}),l.jsx("i",{className:"text-danger position-absolute top-0 start-0 fa fa-fire fa-2x",style:{left:"2rem",top:"0.5rem"}}),l.jsxs("b",{className:"text-danger h5 mb-0",children:[l.jsx("span",{className:"text-primary",children:"同"}),l.jsx("b",{className:"mx-1",children:"花"})]}),l.jsx("br",{}),l.jsx("small",{className:"text-info",children:"企业管理系统开发平台"})]}),l.jsxs("ul",{children:[l.jsx("li",{children:"面向企业业务的UQ数据库编程语言。"}),l.jsx("li",{children:"自适应网页编程。"}),l.jsx("li",{children:"前台代码跟服务器代码协同。"})]}),l.jsxs("div",{className:"mt-5 text-center",children:[l.jsx("small",{className:"text-muted me-2",children:"by"}),"同花"]})]})})}function gD(){let e=Z(),[t]=Ef(e.user),n=Gg(Hx),r=async o=>{let{name:u,value:c}=o;e.setUserProp(u,c)},i={labelAlign:"end",MidContainer:function({children:o}){return l.jsx("div",{className:"ms-2",children:o})}};function s({text:o,onClick:u}){let c="px-3 py-3";return u&&(c+=" cursor-pointer"),l.jsx("div",{className:c,onClick:u,children:o})}let a=n(ue.changePassword);return l.jsx(H,{header:"个人信息",children:l.jsxs("div",{children:[l.jsxs(ya,{...i,children:["ok",l.jsx("div",{children:"content"}),l.jsx(s,{text:"right"})]}),l.jsx(ve,{}),l.jsxs(ya,{...i,children:["ok1",l.jsx("div",{children:"content"}),l.jsx(s,{text:"right"})]}),l.jsx(ve,{}),l.jsx(Lx,{...i,label:"a",value:1,type:"number"}),l.jsx(ve,{}),l.jsxs(qx,{className:"container",values:t,onValuesChanged:r,labelSize:3,children:[l.jsx(Na,{label:"别名",name:"nick",placeholder:"好的别名更方便记忆"}),l.jsx(ve,{}),l.jsx(vd,{label:a,toEdit:Zx,children:l.jsx(J,{className:"text-info m-2 align-self-center",name:"key"})}),l.jsx(ve,{}),l.jsx(vd,{label:n(ue.userQuit),toEdit:e0,children:l.jsx(J,{className:"text-info m-2 align-self-center",name:"key"})})]}),l.jsx(ve,{}),l.jsx("div",{className:"mt-5 w-100 text-center",children:l.jsxs(Ce,{className:"btn btn-danger w-100 w-max-20c",to:Jx,children:[l.jsx(J,{name:"sign-out",size:"lg"})," ",n(ue.logout)]})})]})})}const kd="me",Xx="edit",Zx="changePassword",Jx="logout",e0="quit",xD="about",wD=l.jsxs(ie,{path:kd+"/*",children:[l.jsx(ie,{path:Xx+"/*",element:l.jsx(bD,{})}),l.jsx(ie,{path:xD,element:l.jsx(vD,{})})]});function bD(){return l.jsx(l.Fragment,{children:l.jsxs(Hs,{children:[l.jsx(ie,{path:"*",element:l.jsx(gD,{})}),l.jsx(ie,{path:Zx,element:l.jsx(kN,{})}),l.jsx(ie,{path:Jx,element:l.jsx(yD,{})}),l.jsx(ie,{path:e0,element:l.jsx(_N,{})})]})})}function t0({permit:e,children:t}){let n=Z();if(n0(n,e)===!0)return l.jsx(l.Fragment,{children:t})}function n0(e,t){let{uqSites:n}=e;if(n===void 0)return!1;let{userSite:r}=n;if(r===void 0)return!1;let{permits:i,isAdmin:s}=r;if(s===!0)return!0;if(t!==void 0){if(typeof t=="string"){if(i[t]===!0)return!0}else for(let a of t)if(i[a]===!0)return!0}return!1}var Ma=e=>e.type==="checkbox",Ti=e=>e instanceof Date,Et=e=>e==null;const r0=e=>typeof e=="object";var ct=e=>!Et(e)&&!Array.isArray(e)&&r0(e)&&!Ti(e),SD=e=>ct(e)&&e.target?Ma(e.target)?e.target.checked:e.target.value:e,jD=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,kD=(e,t)=>e.has(jD(t)),Fa=e=>Array.isArray(e)?e.filter(Boolean):[],Je=e=>e===void 0,ee=(e,t,n)=>{if(!t||!ct(e))return n;const r=Fa(t.split(/[,[\].]+?/)).reduce((i,s)=>Et(i)?i:i[s],e);return Je(r)||r===e?Je(e[t])?n:e[t]:r};const Bp={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},mn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},$n={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};ne.createContext(null);var CD=(e,t,n,r=!0)=>{const i={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(i,s,{get:()=>{const a=s;return t._proxyFormState[a]!==mn.all&&(t._proxyFormState[a]=!r||mn.all),n&&(n[a]=!0),e[a]}});return i},Kt=e=>ct(e)&&!Object.keys(e).length,_D=(e,t,n,r)=>{n(e);const{name:i,...s}=e;return Kt(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(a=>t[a]===(!r||mn.all))},oc=e=>Array.isArray(e)?e:[e];function ND(e){const t=ne.useRef(e);t.current=e,ne.useEffect(()=>{const n=!e.disabled&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}},[e.disabled])}var En=e=>typeof e=="string",DD=(e,t,n,r,i)=>En(e)?(r&&t.watch.add(e),ee(n,e,i)):Array.isArray(e)?e.map(s=>(r&&t.watch.add(s),ee(n,s))):(r&&(t.watchAll=!0),n),ED=e=>{const t=e.constructor&&e.constructor.prototype;return ct(t)&&t.hasOwnProperty("isPrototypeOf")},rh=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Wr(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(rh&&(e instanceof Blob||e instanceof FileList))&&(n||ct(e)))if(t=n?[]:{},!Array.isArray(e)&&!ED(e))t=e;else for(const r in e)t[r]=Wr(e[r]);else return e;return t}var ID=(e,t,n,r,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:i||!0}}:{},ih=e=>/^\w*$/.test(e),i0=e=>Fa(e.replace(/["|']|\]/g,"").split(/\.|\[/));function Re(e,t,n){let r=-1;const i=ih(t)?[t]:i0(t),s=i.length,a=s-1;for(;++r<s;){const o=i[r];let u=n;if(r!==a){const c=e[o];u=ct(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}e[o]=u,e=e[o]}return e}const Cd=(e,t,n)=>{for(const r of n||Object.keys(e)){const i=ee(e,r);if(i){const{_f:s,...a}=i;if(s&&t(s.name)){if(s.ref.focus){s.ref.focus();break}else if(s.refs&&s.refs[0].focus){s.refs[0].focus();break}}else ct(a)&&Cd(a,t)}}};var Yp=e=>({isOnSubmit:!e||e===mn.onSubmit,isOnBlur:e===mn.onBlur,isOnChange:e===mn.onChange,isOnAll:e===mn.all,isOnTouch:e===mn.onTouched}),Wp=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length)))),PD=(e,t,n)=>{const r=Fa(ee(e,n));return Re(r,"root",t[n]),Re(e,n,r),e},Yi=e=>typeof e=="boolean",sh=e=>e.type==="file",Wi=e=>typeof e=="function",So=e=>{if(!rh)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Al=e=>En(e)||ne.isValidElement(e),ah=e=>e.type==="radio",jo=e=>e instanceof RegExp;const Hp={value:!1,isValid:!1},Qp={value:!0,isValid:!0};var s0=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Je(e[0].attributes.value)?Je(e[0].value)||e[0].value===""?Qp:{value:e[0].value,isValid:!0}:Qp:Hp}return Hp};const Gp={isValid:!1,value:null};var a0=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,Gp):Gp;function Kp(e,t,n="validate"){if(Al(e)||Array.isArray(e)&&e.every(Al)||Yi(e)&&!e)return{type:n,message:Al(e)?e:"",ref:t}}var wi=e=>ct(e)&&!jo(e)?e:{value:e,message:""},Xp=async(e,t,n,r,i)=>{const{ref:s,refs:a,required:o,maxLength:u,minLength:c,min:d,max:f,pattern:m,validate:y,name:v,valueAsNumber:w,mount:j,disabled:g}=e._f,h=ee(t,v);if(!j||g)return{};const p=a?a[0]:s,S=A=>{r&&p.reportValidity&&(p.setCustomValidity(Yi(A)?"":A||""),p.reportValidity())},b={},k=ah(s),_=Ma(s),C=k||_,N=(w||sh(s))&&Je(s.value)&&Je(h)||So(s)&&s.value===""||h===""||Array.isArray(h)&&!h.length,D=ID.bind(null,v,n,b),E=(A,O,T,q=$n.maxLength,z=$n.minLength)=>{const Y=A?O:T;b[v]={type:A?q:z,message:Y,ref:s,...D(A?q:z,Y)}};if(i?!Array.isArray(h)||!h.length:o&&(!C&&(N||Et(h))||Yi(h)&&!h||_&&!s0(a).isValid||k&&!a0(a).isValid)){const{value:A,message:O}=Al(o)?{value:!!o,message:o}:wi(o);if(A&&(b[v]={type:$n.required,message:O,ref:p,...D($n.required,O)},!n))return S(O),b}if(!N&&(!Et(d)||!Et(f))){let A,O;const T=wi(f),q=wi(d);if(!Et(h)&&!isNaN(h)){const z=s.valueAsNumber||h&&+h;Et(T.value)||(A=z>T.value),Et(q.value)||(O=z<q.value)}else{const z=s.valueAsDate||new Date(h),Y=K=>new Date(new Date().toDateString()+" "+K),M=s.type=="time",U=s.type=="week";En(T.value)&&h&&(A=M?Y(h)>Y(T.value):U?h>T.value:z>new Date(T.value)),En(q.value)&&h&&(O=M?Y(h)<Y(q.value):U?h<q.value:z<new Date(q.value))}if((A||O)&&(E(!!A,T.message,q.message,$n.max,$n.min),!n))return S(b[v].message),b}if((u||c)&&!N&&(En(h)||i&&Array.isArray(h))){const A=wi(u),O=wi(c),T=!Et(A.value)&&h.length>A.value,q=!Et(O.value)&&h.length<O.value;if((T||q)&&(E(T,A.message,O.message),!n))return S(b[v].message),b}if(m&&!N&&En(h)){const{value:A,message:O}=wi(m);if(jo(A)&&!h.match(A)&&(b[v]={type:$n.pattern,message:O,ref:s,...D($n.pattern,O)},!n))return S(O),b}if(y){if(Wi(y)){const A=await y(h,t),O=Kp(A,p);if(O&&(b[v]={...O,...D($n.validate,O.message)},!n))return S(O.message),b}else if(ct(y)){let A={};for(const O in y){if(!Kt(A)&&!n)break;const T=Kp(await y[O](h,t),p,O);T&&(A={...T,...D(O,T.message)},S(T.message),n&&(b[v]=A))}if(!Kt(A)&&(b[v]={ref:p,...A},!n))return b}}return S(!0),b};function AD(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=Je(e)?r++:e[t[r++]];return e}function OD(e){for(const t in e)if(!Je(e[t]))return!1;return!0}function gt(e,t){const n=Array.isArray(t)?t:ih(t)?[t]:i0(t),r=n.length===1?e:AD(e,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(ct(r)&&Kt(r)||Array.isArray(r)&&OD(r))&&gt(e,n.slice(0,-1)),e}function uc(){let e=[];return{get observers(){return e},next:i=>{for(const s of e)s.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(s=>s!==i)}}),unsubscribe:()=>{e=[]}}}var ko=e=>Et(e)||!r0(e);function Xr(e,t){if(ko(e)||ko(t))return e===t;if(Ti(e)&&Ti(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){const s=e[i];if(!r.includes(i))return!1;if(i!=="ref"){const a=t[i];if(Ti(s)&&Ti(a)||ct(s)&&ct(a)||Array.isArray(s)&&Array.isArray(a)?!Xr(s,a):s!==a)return!1}}return!0}var l0=e=>e.type==="select-multiple",MD=e=>ah(e)||Ma(e),cc=e=>So(e)&&e.isConnected,o0=e=>{for(const t in e)if(Wi(e[t]))return!0;return!1};function Co(e,t={}){const n=Array.isArray(e);if(ct(e)||n)for(const r in e)Array.isArray(e[r])||ct(e[r])&&!o0(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Co(e[r],t[r])):Et(e[r])||(t[r]=!0);return t}function u0(e,t,n){const r=Array.isArray(e);if(ct(e)||r)for(const i in e)Array.isArray(e[i])||ct(e[i])&&!o0(e[i])?Je(t)||ko(n[i])?n[i]=Array.isArray(e[i])?Co(e[i],[]):{...Co(e[i])}:u0(e[i],Et(t)?{}:t[i],n[i]):Xr(e[i],t[i])?delete n[i]:n[i]=!0;return n}var dc=(e,t)=>u0(e,t,Co(t)),c0=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>Je(e)?e:t?e===""?NaN:e&&+e:n&&En(e)?new Date(e):r?r(e):e;function fc(e){const t=e.ref;if(!(e.refs?e.refs.every(n=>n.disabled):t.disabled))return sh(t)?t.files:ah(t)?a0(e.refs).value:l0(t)?[...t.selectedOptions].map(({value:n})=>n):Ma(t)?s0(e.refs).value:c0(Je(t.value)?e.ref.value:t.value,e)}var FD=(e,t,n,r)=>{const i={};for(const s of e){const a=ee(t,s);a&&Re(i,s,a._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}},Ds=e=>Je(e)?e:jo(e)?e.source:ct(e)?jo(e.value)?e.value.source:e.value:e,TD=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function Zp(e,t,n){const r=ee(e,n);if(r||ih(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),a=ee(t,s),o=ee(e,s);if(a&&!Array.isArray(a)&&n!==s)return{name:n};if(o&&o.type)return{name:s,error:o};i.pop()}return{name:n}}var RD=(e,t,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:(n?r.isOnChange:i.isOnChange)?e:!0,LD=(e,t)=>!Fa(ee(e,t)).length&&gt(e,t);const qD={mode:mn.onSubmit,reValidateMode:mn.onChange,shouldFocusError:!0};function UD(e={},t){let n={...qD,...e};const r=e.resetOptions&&e.resetOptions.keepDirtyValues;let i={submitCount:0,isDirty:!1,isLoading:!0,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},s={},a=ct(n.defaultValues)?Wr(n.defaultValues)||{}:{},o=n.shouldUnregister?{}:Wr(a),u={action:!1,mount:!1,watch:!1},c={mount:new Set,unMount:new Set,array:new Set,watch:new Set},d,f=0;const m={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},y={watch:uc(),array:uc(),state:uc()},v=Yp(n.mode),w=Yp(n.reValidateMode),j=n.criteriaMode===mn.all,g=I=>R=>{clearTimeout(f),f=window.setTimeout(I,R)},h=async I=>{if(m.isValid||I){const R=n.resolver?Kt((await N()).errors):await E(s,!0);R!==i.isValid&&(i.isValid=R,y.state.next({isValid:R}))}},p=I=>m.isValidating&&y.state.next({isValidating:I}),S=(I,R=[],L,Q,te=!0,B=!0)=>{if(Q&&L){if(u.action=!0,B&&Array.isArray(ee(s,I))){const se=L(ee(s,I),Q.argA,Q.argB);te&&Re(s,I,se)}if(B&&Array.isArray(ee(i.errors,I))){const se=L(ee(i.errors,I),Q.argA,Q.argB);te&&Re(i.errors,I,se),LD(i.errors,I)}if(m.touchedFields&&B&&Array.isArray(ee(i.touchedFields,I))){const se=L(ee(i.touchedFields,I),Q.argA,Q.argB);te&&Re(i.touchedFields,I,se)}m.dirtyFields&&(i.dirtyFields=dc(a,o)),y.state.next({name:I,isDirty:O(I,R),dirtyFields:i.dirtyFields,errors:i.errors,isValid:i.isValid})}else Re(o,I,R)},b=(I,R)=>{Re(i.errors,I,R),y.state.next({errors:i.errors})},k=(I,R,L,Q)=>{const te=ee(s,I);if(te){const B=ee(o,I,Je(L)?ee(a,I):L);Je(B)||Q&&Q.defaultChecked||R?Re(o,I,R?B:fc(te._f)):z(I,B),u.mount&&h()}},_=(I,R,L,Q,te)=>{let B=!1,se=!1;const Ze={name:I};if(!L||Q){m.isDirty&&(se=i.isDirty,i.isDirty=Ze.isDirty=O(),B=se!==Ze.isDirty);const We=Xr(ee(a,I),R);se=ee(i.dirtyFields,I),We?gt(i.dirtyFields,I):Re(i.dirtyFields,I,!0),Ze.dirtyFields=i.dirtyFields,B=B||m.dirtyFields&&se!==!We}if(L){const We=ee(i.touchedFields,I);We||(Re(i.touchedFields,I,L),Ze.touchedFields=i.touchedFields,B=B||m.touchedFields&&We!==L)}return B&&te&&y.state.next(Ze),B?Ze:{}},C=(I,R,L,Q)=>{const te=ee(i.errors,I),B=m.isValid&&Yi(R)&&i.isValid!==R;if(e.delayError&&L?(d=g(()=>b(I,L)),d(e.delayError)):(clearTimeout(f),d=null,L?Re(i.errors,I,L):gt(i.errors,I)),(L?!Xr(te,L):te)||!Kt(Q)||B){const se={...Q,...B&&Yi(R)?{isValid:R}:{},errors:i.errors,name:I};i={...i,...se},y.state.next(se)}p(!1)},N=async I=>await n.resolver(o,n.context,FD(I||c.mount,s,n.criteriaMode,n.shouldUseNativeValidation)),D=async I=>{const{errors:R}=await N();if(I)for(const L of I){const Q=ee(R,L);Q?Re(i.errors,L,Q):gt(i.errors,L)}else i.errors=R;return R},E=async(I,R,L={valid:!0})=>{for(const Q in I){const te=I[Q];if(te){const{_f:B,...se}=te;if(B){const Ze=c.array.has(B.name),We=await Xp(te,o,j,n.shouldUseNativeValidation,Ze);if(We[B.name]&&(L.valid=!1,R))break;!R&&(ee(We,B.name)?Ze?PD(i.errors,We,B.name):Re(i.errors,B.name,We[B.name]):gt(i.errors,B.name))}se&&await E(se,R,L)}}return L.valid},A=()=>{for(const I of c.unMount){const R=ee(s,I);R&&(R._f.refs?R._f.refs.every(L=>!cc(L)):!cc(R._f.ref))&&Ye(I)}c.unMount=new Set},O=(I,R)=>(I&&R&&Re(o,I,R),!Xr(le(),a)),T=(I,R,L)=>DD(I,c,{...u.mount?o:Je(R)?a:En(I)?{[I]:R}:R},L,R),q=I=>Fa(ee(u.mount?o:a,I,e.shouldUnregister?ee(a,I,[]):[])),z=(I,R,L={})=>{const Q=ee(s,I);let te=R;if(Q){const B=Q._f;B&&(!B.disabled&&Re(o,I,c0(R,B)),te=So(B.ref)&&Et(R)?"":R,l0(B.ref)?[...B.ref.options].forEach(se=>se.selected=te.includes(se.value)):B.refs?Ma(B.ref)?B.refs.length>1?B.refs.forEach(se=>(!se.defaultChecked||!se.disabled)&&(se.checked=Array.isArray(te)?!!te.find(Ze=>Ze===se.value):te===se.value)):B.refs[0]&&(B.refs[0].checked=!!te):B.refs.forEach(se=>se.checked=se.value===te):sh(B.ref)?B.ref.value="":(B.ref.value=te,B.ref.type||y.watch.next({name:I})))}(L.shouldDirty||L.shouldTouch)&&_(I,te,L.shouldTouch,L.shouldDirty,!0),L.shouldValidate&&K(I)},Y=(I,R,L)=>{for(const Q in R){const te=R[Q],B=`${I}.${Q}`,se=ee(s,B);(c.array.has(I)||!ko(te)||se&&!se._f)&&!Ti(te)?Y(B,te,L):z(B,te,L)}},M=(I,R,L={})=>{const Q=ee(s,I),te=c.array.has(I),B=Wr(R);Re(o,I,B),te?(y.array.next({name:I,values:o}),(m.isDirty||m.dirtyFields)&&L.shouldDirty&&(i.dirtyFields=dc(a,o),y.state.next({name:I,dirtyFields:i.dirtyFields,isDirty:O(I,B)}))):Q&&!Q._f&&!Et(B)?Y(I,B,L):z(I,B,L),Wp(I,c)&&y.state.next({}),y.watch.next({name:I}),!u.mount&&t()},U=async I=>{const R=I.target;let L=R.name;const Q=ee(s,L),te=()=>R.type?fc(Q._f):SD(I);if(Q){let B,se;const Ze=te(),We=I.type===Bp.BLUR||I.type===Bp.FOCUS_OUT,Vw=!TD(Q._f)&&!n.resolver&&!ee(i.errors,L)&&!Q._f.deps||RD(We,ee(i.touchedFields,L),i.isSubmitted,w,v),Eu=Wp(L,c,We);Re(o,L,Ze),We?(Q._f.onBlur&&Q._f.onBlur(I),d&&d(0)):Q._f.onChange&&Q._f.onChange(I);const Iu=_(L,Ze,We,!1),zw=!Kt(Iu)||Eu;if(!We&&y.watch.next({name:L,type:I.type}),Vw)return m.isValid&&h(),zw&&y.state.next({name:L,...Eu?{}:Iu});if(!We&&Eu&&y.state.next({}),p(!0),n.resolver){const{errors:zh}=await N([L]),Bw=Zp(i.errors,s,L),Bh=Zp(zh,s,Bw.name||L);B=Bh.error,L=Bh.name,se=Kt(zh)}else B=(await Xp(Q,o,j,n.shouldUseNativeValidation))[L],B?se=!1:m.isValid&&(se=await E(s,!0));Q._f.deps&&K(Q._f.deps),C(L,se,B,Iu)}},K=async(I,R={})=>{let L,Q;const te=oc(I);if(p(!0),n.resolver){const B=await D(Je(I)?I:te);L=Kt(B),Q=I?!te.some(se=>ee(B,se)):L}else I?(Q=(await Promise.all(te.map(async B=>{const se=ee(s,B);return await E(se&&se._f?{[B]:se}:se)}))).every(Boolean),!(!Q&&!i.isValid)&&h()):Q=L=await E(s);return y.state.next({...!En(I)||m.isValid&&L!==i.isValid?{}:{name:I},...n.resolver||!I?{isValid:L}:{},errors:i.errors,isValidating:!1}),R.shouldFocus&&!Q&&Cd(s,B=>B&&ee(i.errors,B),I?te:c.mount),Q},le=I=>{const R={...a,...u.mount?o:{}};return Je(I)?R:En(I)?ee(R,I):I.map(L=>ee(R,L))},fe=(I,R)=>({invalid:!!ee((R||i).errors,I),isDirty:!!ee((R||i).dirtyFields,I),isTouched:!!ee((R||i).touchedFields,I),error:ee((R||i).errors,I)}),Nt=I=>{I?oc(I).forEach(R=>gt(i.errors,R)):i.errors={},y.state.next({errors:i.errors})},xe=(I,R,L)=>{const Q=(ee(s,I,{_f:{}})._f||{}).ref;Re(i.errors,I,{...R,ref:Q}),y.state.next({name:I,errors:i.errors,isValid:!1}),L&&L.shouldFocus&&Q&&Q.focus&&Q.focus()},Be=(I,R)=>Wi(I)?y.watch.subscribe({next:L=>I(T(void 0,R),L)}):T(I,R,!0),Ye=(I,R={})=>{for(const L of I?oc(I):c.mount)c.mount.delete(L),c.array.delete(L),ee(s,L)&&(R.keepValue||(gt(s,L),gt(o,L)),!R.keepError&&gt(i.errors,L),!R.keepDirty&&gt(i.dirtyFields,L),!R.keepTouched&&gt(i.touchedFields,L),!n.shouldUnregister&&!R.keepDefaultValue&&gt(a,L));y.watch.next({}),y.state.next({...i,...R.keepDirty?{isDirty:O()}:{}}),!R.keepIsValid&&h()},De=(I,R={})=>{let L=ee(s,I);const Q=Yi(R.disabled);return Re(s,I,{...L||{},_f:{...L&&L._f?L._f:{ref:{name:I}},name:I,mount:!0,...R}}),c.mount.add(I),L?Q&&Re(o,I,R.disabled?void 0:ee(o,I,fc(L._f))):k(I,!0,R.value),{...Q?{disabled:R.disabled}:{},...n.shouldUseNativeValidation?{required:!!R.required,min:Ds(R.min),max:Ds(R.max),minLength:Ds(R.minLength),maxLength:Ds(R.maxLength),pattern:Ds(R.pattern)}:{},name:I,onChange:U,onBlur:U,ref:te=>{if(te){De(I,R),L=ee(s,I);const B=Je(te.value)&&te.querySelectorAll&&te.querySelectorAll("input,select,textarea")[0]||te,se=MD(B),Ze=L._f.refs||[];if(se?Ze.find(We=>We===B):B===L._f.ref)return;Re(s,I,{_f:{...L._f,...se?{refs:[...Ze.filter(cc),B,...Array.isArray(ee(a,I))?[{}]:[]],ref:{type:B.type,name:I}}:{ref:B}}}),k(I,!1,void 0,B)}else L=ee(s,I,{}),L._f&&(L._f.mount=!1),(n.shouldUnregister||R.shouldUnregister)&&!(kD(c.array,I)&&u.action)&&c.unMount.add(I)}}},$t=()=>n.shouldFocusError&&Cd(s,I=>I&&ee(i.errors,I),c.mount),Un=(I,R)=>async L=>{L&&(L.preventDefault&&L.preventDefault(),L.persist&&L.persist());let Q=Wr(o);if(y.state.next({isSubmitting:!0}),n.resolver){const{errors:te,values:B}=await N();i.errors=te,Q=B}else await E(s);Kt(i.errors)?(y.state.next({errors:{}}),await I(Q,L)):(R&&await R({...i.errors},L),$t()),y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Kt(i.errors),submitCount:i.submitCount+1,errors:i.errors})},$r=(I,R={})=>{ee(s,I)&&(Je(R.defaultValue)?M(I,ee(a,I)):(M(I,R.defaultValue),Re(a,I,R.defaultValue)),R.keepTouched||gt(i.touchedFields,I),R.keepDirty||(gt(i.dirtyFields,I),i.isDirty=R.defaultValue?O(I,ee(a,I)):O()),R.keepError||(gt(i.errors,I),m.isValid&&h()),y.state.next({...i}))},Vr=(I,R={})=>{const L=I||a,Q=Wr(L),te=I&&!Kt(I)?Q:a;if(R.keepDefaultValues||(a=L),!R.keepValues){if(R.keepDirtyValues||r)for(const B of c.mount)ee(i.dirtyFields,B)?Re(te,B,ee(o,B)):M(B,ee(te,B));else{if(rh&&Je(I))for(const B of c.mount){const se=ee(s,B);if(se&&se._f){const Ze=Array.isArray(se._f.refs)?se._f.refs[0]:se._f.ref;if(So(Ze)){const We=Ze.closest("form");if(We){We.reset();break}}}}s={}}o=e.shouldUnregister?R.keepDefaultValues?Wr(a):{}:Q,y.array.next({values:te}),y.watch.next({values:te})}c={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!u.mount&&t(),u.mount=!m.isValid||!!R.keepIsValid,u.watch=!!e.shouldUnregister,y.state.next({submitCount:R.keepSubmitCount?i.submitCount:0,isDirty:R.keepDirty||R.keepDirtyValues?i.isDirty:!!(R.keepDefaultValues&&!Xr(I,a)),isSubmitted:R.keepIsSubmitted?i.isSubmitted:!1,dirtyFields:R.keepDirty||R.keepDirtyValues?i.dirtyFields:R.keepDefaultValues&&I?dc(a,I):{},touchedFields:R.keepTouched?i.touchedFields:{},errors:R.keepErrors?i.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},Ha=(I,R)=>Vr(Wi(I)?I(o):I,R),ys=(I,R={})=>{const L=ee(s,I),Q=L&&L._f;if(Q){const te=Q.refs?Q.refs[0]:Q.ref;te.focus&&(te.focus(),R.shouldSelect&&te.select())}},$w=I=>{i={...i,...I}};return Wi(n.defaultValues)&&n.defaultValues().then(I=>{Ha(I,n.resetOptions),y.state.next({isLoading:!1})}),{control:{register:De,unregister:Ye,getFieldState:fe,_executeSchema:N,_focusError:$t,_getWatch:T,_getDirty:O,_updateValid:h,_removeUnmounted:A,_updateFieldArray:S,_getFieldArray:q,_reset:Vr,_updateFormState:$w,_subjects:y,_proxyFormState:m,get _fields(){return s},get _formValues(){return o},get _stateFlags(){return u},set _stateFlags(I){u=I},get _defaultValues(){return a},get _names(){return c},set _names(I){c=I},get _formState(){return i},set _formState(I){i=I},get _options(){return n},set _options(I){n={...n,...I}}},trigger:K,register:De,handleSubmit:Un,watch:Be,setValue:M,getValues:le,reset:Ha,resetField:$r,clearErrors:Nt,unregister:Ye,setError:xe,setFocus:ys,getFieldState:fe}}function lr(e={}){const t=ne.useRef(),[n,r]=ne.useState({isDirty:!1,isValidating:!1,isLoading:!0,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:Wi(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...UD(e,()=>r(s=>({...s}))),formState:n});const i=t.current.control;return i._options=e,ND({subject:i._subjects.state,next:s=>{_D(s,i._proxyFormState,i._updateFormState,!0)&&r({...i._formState})}}),ne.useEffect(()=>{i._stateFlags.mount||(i._updateValid(),i._stateFlags.mount=!0),i._stateFlags.watch&&(i._stateFlags.watch=!1,i._subjects.state.next({})),i._removeUnmounted()}),ne.useEffect(()=>{e.values&&!Xr(e.values,i._defaultValues)&&i._reset(e.values,i._options.resetOptions)},[e.values,i]),ne.useEffect(()=>{n.submitCount&&i._focusError()},[i,n.submitCount]),t.current.formState=CD(n,i),t.current}const $D={self:"Self",owner:"Owner",admin:"Admin",user:"User",adminMemo1:"Admin can set user roles",adminMemo2:"Admin has all roles permission",ownerMemo1:"Owner can add or delete an owner",ownerMemo2:"Owner can add or delete an admin",ownerReallyQuit:"Do you really want to quit owner?",ownerLost:"You will lost owner",ownerConfirmQuit:"Confirm quit",userReallyDelete:"Do you really want to delete {0} '{1}'?",deleteThe:"Delete the {0}",save:"Save",new:"New",assigned:"Assigned",searchUser:"Search user",none:"None"},VD={self:"自己",owner:"拥有者",admin:"管理员",user:"用户",adminMemo1:"管理员可以给用户赋予角色",adminMemo2:"管理员拥有全部角色权限",ownerMemo1:"拥有者可以增加其他拥有者",ownerMemo2:"拥有者可以增减管理员",ownerReallyQuit:"真的要退出拥有者吗？",ownerLost:"你将无法设置角色权限",ownerConfirmQuit:"确认退出",userReallyDelete:'真的要删除{0} "{1}" 吗?',deleteThe:"删除此{0}",save:"保存",new:"新增",assigned:"标注",searchUser:"搜索用户账户",none:"无"},Ge=Kg({en:$D,zh:VD}),zD=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),BD=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),YD=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),WD=[zD,BD,YD];function HD(e,t){let n=WD[t];return n===void 0&&(n=new Intl.NumberFormat("en-US",{minimumFractionDigits:t,maximumFractionDigits:t})),n.format(e??0).split(".")}function QD(e,t,n,r){let i;t!==void 0&&(i=l.jsx("small",{children:l.jsx("small",{className:"text-muted",children:t})})),n===void 0&&(n=2);let s=HD(e,n),a=s[0],o=r===!1?l.jsx(l.Fragment,{children:a}):l.jsx("b",{children:a}),u=s[1],c;return u!==void 0&&(c=l.jsx("span",{className:"small text-muted",children:l.jsxs("small",{children:[" .",u]})})),l.jsxs("span",{children:[o,c," ",i]})}const qr={cacheTime:100,refetchOnWindowFocus:!1};function d0(e,t){let n,r={},i=t[0];if(i!==void 0){const{phrase:o,value:[u,c]}=i;n={id:e,phrase:o,no:u,ex:c}}let s=t.length,a={};for(let o=1;o<s;o++){let{phrase:u,value:c}=t[o];switch(c.length){default:case 0:debugger;break;case 1:r[u]=c[0];break;case 2:let d=a[u];d===void 0&&(a[u]=d={}),d[c[1]]=!0;break}}for(let o in a)r[o]=a[o];return{main:n,buds:r}}function f0({phrase:e}){const t=Z();let r=we(t._notifyCounts)[e];if(r>0)return l.jsxs("span",{className:"ms-3 badge rounded-pill bg-danger",children:[r>100?"99+":r,l.jsx("span",{className:"visually-hidden",children:"unread messages"})]})}function Jp(e){switch(typeof e){default:debugger;throw new Error("wrong part in idPart(part)");case"undefined":return"";case"string":return"/:"+e;case"number":return"/"+An(e)}}function _o(e,t,n){return`${e}${Jp(t)}${Jp(n)}`}function GD({caption:e,entityAtom:t}){const{closeModal:n}=oe(),{children:r}=t;function i({value:a}){const{caption:o}=a;return l.jsx("div",{className:"px-3 py-2",children:o})}function s(a){n(a)}return l.jsx(H,{header:`选择${e}类型`,children:l.jsx(Me,{items:r,ViewItem:i,onItemClick:s})})}function Ta(e){if(typeof e=="string"){if(e!==":atom")debugger;return e}return An(e)}function lh(e){return`atom/${Ta(e)}/new`}function Ra(e){return`atom/${Ta(e)}/list`}function oh(e,t){return`atom/${Ta(e)}/${An(t)??":id"}`}function KD(e,t){return`atom/${Ta(e)}/${An(t)??":id"}`}function XD(e,t){return`atom/${Ta(e)}/${An(t)??":id"}`}async function h0(e,t){let{props:n}=await e.GetAtom.query({id:t}),{main:r,buds:i}=d0(t,n),s;return{main:r,buds:i,uoms:s}}async function ZD(e,t,n){let{main:r,buds:i}=await h0(t,n),s={...r},{phrase:a}=r,o=e.entityIds[a];function u(c,d){let f=o.buds[c];s[f.name]=d}for(let c in i)u(Number(c),i[c]);return s}function uu(e){const{atom:t}=Fn();let n=rr(t);const r=Z(),{uq:i,biz:s}=r,a=s.entityIds[n],o=a.phrase,u=a.name,c=a.name+"-list";async function d(w){let j=await h0(i,w),{main:g}=j,{phrase:h}=g,p=s.entityIds[h];return{...j,entityAtom:p}}async function f(w,j,g){await i.ActIDProp(i.Atom,w,j,g)}async function m(w,j,g){let h,p,S;const{budDataType:b,id:k}=j;switch(b.type){default:case Ae.int:h=g;break;case Ae.dec:p=g;break;case Ae.str:S=g;break}await i.SaveBudValue.submit({id:w,phraseId:k,int:h,dec:p,str:S})}async function y(w,j,g){let h={atom:o,...w},p=i.SearchAtom,{$page:S}=await p.page(h,j,g);return S}async function v(w){w===void 0&&(w=a);const{openModal:j}=Hf(r),{children:g}=w;switch(g.length){case 0:return w;case 1:return g[0];default:let h=l.jsx(GD,{entityAtom:w,caption:"选择类型"});if(!h)return w;let p=await j(h);return p===void 0?void 0:await v(p)}}return{uqApp:r,biz:s,entity:a,uom:a.uom,pathView:u,pathList:c,getAtom:d,saveField:f,saveBud:m,searchAtoms:y,selectLeafAtom:v}}function La(e){const{top:t}=e,n=uu(),{entity:r,searchAtoms:i}=n;let s=r;const{children:a}=r;switch(a.length){case 0:break;case 1:s=a[0];break;default:return{page:l.jsx(w,{})}}const o=l.jsx(Ce,{className:"btn btn-sm btn-success me-2",to:`../${lh(s.id)}`,children:l.jsx(J,{name:"plus"})}),{ViewItemAtom:u}=e;let{caption:c,name:d}=s;c=c??d;let f={atom:s.id,key:void 0};function m({value:g}){return l.jsx(Ce,{to:`../${oh(s.id,g.id)}`,children:l.jsx("div",{className:"px-3 py-2",children:l.jsx(u,{value:g})})})}const y="id",v=l.jsxs("div",{className:"m-3 small text-muted",children:["[无",c,"]"]});return{header:c,right:o,query:i,param:f,sortField:y,ViewItem:m,none:v,page:l.jsx(j,{}),top:t};function w(){let g=s.caption??s.name;const{children:h}=s;function p({value:b}){const{id:k,caption:_}=b;return l.jsx(Ce,{to:`../${Ra(k)}`,children:l.jsx("div",{className:"px-3 py-2",children:_})})}function S(b){}return l.jsx(H,{header:`${g}列表 - 大类`,children:l.jsx(Me,{items:h,ViewItem:p,onItemClick:S})})}function j(){return l.jsx(Rn,{header:c,right:o,query:i,param:f,sortField:y,ViewItem:m,none:v,children:t})}}function qa(e){const t=uu(),{uqApp:n,pathView:r}=t,{uq:i}=n,{NOLabel:s,exLabel:a}=e,[o,u]=P.useState(void 0);if(Pt(()=>{(async()=>{let g=await t.selectLeafAtom(void 0);u(g)})()}),o===void 0){let g=l.jsx("div",{className:"m-3",children:"暂时没有内容，随后处理"});return{page:l.jsx(H,{header:"新建",children:g}),view:g}}const{id:c,name:d,caption:f}=o;return{page:l.jsx(m,{}),pageContent:l.jsx(y,{}),modal:l.jsx(w,{}),modalContent:l.jsx(v,{})};function m(){return l.jsx(H,{header:`新建${f??d}`,children:l.jsx(y,{})})}function y(){const g=Sn();function h(p){g(`../${oh(c,p.id)}`,{replace:!0})}return l.jsx(j,{afterSubmit:h})}function v(){const{closeModal:g}=oe();function h(p){g(p)}return l.jsx(j,{afterSubmit:h})}function w(){return l.jsx(H,{header:`新建${f??d}`,children:l.jsx(v,{})})}function j({afterSubmit:g}){async function h(D,E,A){const{ex:O}=A;return await i.SaveAtom.submit({atomPhrase:D.id,base:void 0,no:E,ex:O})}async function p(){let D=await i.IDNO({ID:i.Atom});return{no:D,formRows:[{name:"no",label:s,type:"text",options:{maxLength:20,disabled:!0,value:D}},{name:"ex",label:a,type:"text",options:{maxLength:50}},{type:"submit",label:"下一步"}]}}const{data:{no:S,formRows:b}}=Lr("PageAtomNew",async()=>await p(),qr),{register:k,handleSubmit:_,formState:{errors:C}}=lr({mode:"onBlur"});async function N(D){let E=await h(o,S,D);g==null||g({...D,...E,no:S})}return l.jsx("form",{onSubmit:_(N),className:"container my-3 pe-5",children:l.jsx(Ur,{rows:b,register:k,errors:C})})}}function Ua(e){let{label:t,children:n,onEditClick:r,readonly:i}=e,s=l.jsx("span",{className:"p-3",children:" "});return r!==null&&i!==!0&&(s=l.jsx("div",{onClick:r,className:"cursor-pointer p-3",children:l.jsx(J,{name:"pencil",className:"text-info"})})),l.jsxs(ya,{...e,children:[t,l.jsx("div",{className:"ms-3 position-relative",children:n}),s]})}function JD(e){const{uq:t}=Z(),{id:n,readonly:r,value:i,bizBud:s,options:a}=e,[o,u]=P.useState(i),{caption:c,name:d,budDataType:f}=s,{bizAtom:m}=f,y=c??d,v=cu();async function w(){let j=await v(m.name);if(j===void 0)return;let g=j.id;await t.SaveBudValue.submit({phraseId:s.id,id:n,int:g,dec:void 0,str:void 0}),u(g)}return l.jsx(Ua,{label:y,readonly:r,onEditClick:w,children:l.jsx(yE,{id:o})})}function eE(e){const{uq:t}=Z(),{id:n,readonly:r,value:i,bizBud:s}=e,{budDataType:a,caption:o,name:u}=s;let{options:{items:c,phrase:d}}=a,f=i??{},m=[],y=!1;for(let w of c){let{id:j,name:g,caption:h,value:p}=w,S=f[j];S===!0&&(y=!0),m.push([j,h??g,p,S])}y===!1&&(m[0][3]=!0);async function v(w){const{id:j}=s,g=w;await t.SaveBudRadio.submit({budPhrase:j,id:n,optionsItemPhrase:g})}return l.jsx(Ua,{label:o??u,readonly:r,onEditClick:null,children:l.jsx(Hg,{name:u,items:m,onCheckChanged:v})})}async function tE(e,t,n){const{label:r,value:i,type:s}=t,{openModal:a,closeModal:o}=Hf(e);return await a(l.jsx(m0,{label:r,value:i,type:s,options:n}))}function m0({label:e,value:t,type:n,options:r}){const{closeModal:i}=oe(),{register:s,handleSubmit:a,setValue:o,getValues:u,formState:{errors:c}}=lr({mode:"onBlur"});async function d(m){i(m.value)}const f=[{name:"value",label:e,type:n,options:{...r,value:t}},{type:"submit",label:"提交",options:{}}];return l.jsx(H,{header:e,children:l.jsx("div",{className:"px-5 py-3",children:l.jsx("form",{className:"container",onSubmit:a(d),children:l.jsx(Ur,{rows:f,register:s,errors:c})})})})}function nE(e){const{uq:t}=Z(),{id:n,readonly:r,value:i,bizBud:s}=e,{budDataType:a,caption:o,name:u}=s;let{options:{items:c,phrase:d}}=a,f="me-4 ";r===!0&&(f+="text-light invisible ");async function m(v,w){const{id:j}=s,g=v.id;await t.SaveBudCheck.submit({budPhrase:j,id:n,optionsItemPhrase:g,checked:w===!0?1:0})}let y=i??{};return l.jsx(Ua,{label:o??u,readonly:r,onEditClick:null,children:c.map((v,w)=>{let{id:j,name:g,caption:h,value:p}=v;async function S(b,k){await m(v,k)}return l.jsx(Af,{className:"form-check-input",labelClassName:f,onCheckChanged:S,disabled:r,value:p,defaultChecked:y[j],children:h??g},w)})})}function uh(e){const{uq:t}=Z(),{openModal:n}=oe(),{id:r,readonly:i,value:s,bizBud:a,type:o,convertToBudValue:u,options:c}=e,[d,f]=P.useState(s),{caption:m,name:y}=a,v=m??y;async function w(){let j=await n(l.jsx(m0,{label:v,value:d,type:o,options:c})),g=u(j);await t.SaveBudValue.submit({phraseId:a.id,id:r,...g}),f(j)}return l.jsx(Ua,{label:v,readonly:i,onEditClick:w,children:d})}function rE(e){function t(n){return{int:void 0,dec:void 0,str:n}}return l.jsx(uh,{...e,type:"text",convertToBudValue:t})}function iE(e){function t(n){return{int:n,dec:void 0,str:void 0}}return l.jsx(uh,{...e,type:"number",convertToBudValue:t})}function sE(e){function t(n){return{int:void 0,dec:n,str:void 0}}return l.jsx(uh,{...e,type:"number",convertToBudValue:t})}function aE(e){const{uq:t}=Z(),{id:n,readonly:r,value:i,bizBud:s}=e,{budDataType:a,caption:o,name:u}=s;let{options:{items:c,phrase:d}}=a,f=i??{},m=[],y=!1;for(let w of c){let{name:j,caption:g,value:h,phrase:p}=w,S=f[p];S===!0&&(y=!0),m.push([p,g??j,h,S])}y===!1&&(m[0][3]=!0);async function v(w){const{id:j}=s,g=c.find(h=>h.phrase===w).value;await t.SaveBudValue.submit({phraseId:j,id:n,int:g,dec:void 0,str:void 0})}return l.jsx(Ua,{label:o??u,readonly:r,onEditClick:null,children:l.jsx(Hg,{name:u,items:m,onCheckChanged:v})})}function lE({label:e,name:t,readonly:n,type:r,value:i,saveBud:s,id:a,pickValue:o,ValueTemplate:u}){let c=Z(),[d,f]=P.useState(i);async function m(y,v){await s(y);let w=c.pageCache.getPrevData();if(w){let j=w.getItem(g=>g.id===a);j&&(j[t]=y)}f(y)}return l.jsx(Lx,{label:e,value:d,readonly:n,type:r,onValueChanged:m,pickValue:o===null?null:o??tE,ValueTemplate:u})}function oE(e){const{id:t,name:n,saveField:r}=e;async function i(s){await r(t,n,s)}return l.jsx(lE,{...e,saveBud:i})}function p0(e){const{bizBud:t}=e,{type:n}=t.budDataType;switch(n){default:return l.jsxs(l.Fragment,{children:["unknown bud type ",n," ",Ae[n]," "]});case Ae.int:return l.jsx(iE,{...e});case Ae.char:case Ae.str:return l.jsx(rE,{...e});case Ae.dec:return l.jsx(sE,{...e});case Ae.radio:return l.jsx(eE,{...e});case Ae.check:return l.jsx(nE,{...e});case Ae.intof:return l.jsx(aE,{...e});case Ae.atom:return l.jsx(JD,{...e})}}function uE(){const e=Z(),{uq:t}=e,{openModal:n,closeModal:r}=oe(),i=P.useRef(void 0),s=cu();async function a(c){return await n(l.jsx(f,{}));function f(){async function m(j,g,h){const{$page:p}=await t.GetUomIListOfUom.page(j,g,h);return p}const y={uom:c.id};function v({value:j}){return l.jsx("div",{className:"px-3 py-2",children:l.jsx(kt,{value:j})})}async function w(j){r(j)}return l.jsx(Rn,{header:"选择 - "+c.ex,sortField:"id",param:y,query:m,ViewItem:v,onItemClick:w})}}async function o(c){n(l.jsx(pn,{}));const{UomI:d,UomX:f}=await t.GetUomI.query({id:c});r();let m=d[0],y=m;if(f.length===0)return y=await u(void 0),y;let v;function w(g){y.id===g?v=y:v=f.find(h=>h.id===g)}return i.current!==void 0&&w(i.current),v===void 0&&w(c),await n(l.jsx(j,{}));function j(){function g(){r(v)}function h(){r(null)}function p({atom:b,children:k,className:_}){function C(){v=b}return l.jsxs("label",{className:"px-3 py-3 "+(_??""),children:[l.jsx("input",{type:"radio",className:"me-4 form-check-input",name:"uomI-id-"+y.id,value:b.id,defaultChecked:b===v,onChange:C}),k]})}function S({value:b}){const{ex:k,no:_,ratio:C}=b;return l.jsxs(p,{atom:b,children:[l.jsx("b",{className:"d-inline-block w-min-8c me-4",children:k}),l.jsxs("span",{children:[" = ",C," ",y.ex]})]})}return l.jsxs(H,{header:"选择计量单位",children:[l.jsxs(Ue,{className:"px-3 py-3 tonwa-bg-gray-2 border-bottom align-items-center",children:[l.jsxs("div",{children:[m.uomEx," ",m.uomDiscription]}),l.jsxs("button",{className:"btn btn-link",onClick:h,children:["其它计量单位",l.jsx(On,{name:"chevron-double-right"})]})]}),l.jsx(p,{atom:y,className:"border-bottom border-2",children:l.jsx("b",{className:"d-inline-block w-min-8c me-4 text-primary",children:y.ex})}),l.jsx(Me,{items:f,ViewItem:S}),l.jsx(Ue,{className:"px-3 py-3",children:l.jsx("button",{className:"btn btn-primary",onClick:g,children:"提交"})})]})}}async function u(c){let d;if(c===void 0){let f=await s(rt.Uom);return f===void 0||(d=await a(f),d===void 0)?void 0:d}return d=await o(c),d===null&&(d=await u(void 0)),d}return async function(c){return i.current=c,await u(c)}}function cE({atomId:e,uoms:t,className:n}){Z();const[r,i]=P.useState(t);uE();async function s(){}function a({value:o}){const{ex:u,prevEx:c,ratio:d}=o;let f;return c&&(f=l.jsxs("small",{className:"text-secondary",children:[d,c]})),l.jsxs("div",{className:"px-3 py-2",children:[u," ",f]})}return l.jsxs(ya,{className:(n??"")+" border-bottom",vAlign:"top",children:[l.jsx("div",{className:"mt-2",children:l.jsx(Va,{atom:rt.UomI})}),l.jsx(Me,{items:r,ViewItem:a,className:"w-100"}),l.jsx("div",{className:"p-3 text-info cursor-pointer border-start",onClick:s,children:l.jsx(J,{name:"pencil"})})]})}function $a(e){const{id:t}=Fn();return y0({...e,id:rr(t)})}function y0(e){const{NOLabel:t,exLabel:n,id:r}=e,{uom:i,getAtom:s,saveField:a,saveBud:o,entity:u}=uu(),[c,d]=P.useState(void 0);if(Pt(()=>{(async()=>{let k=await s(r);d(k)})()}),c===void 0)return{view:l.jsx(as,{}),page:l.jsx(pn,{})};const{main:f,buds:m}=c;let y=[],{name:v,caption:w,props:j}=u;const h=[{name:"id",label:l.jsxs("span",{className:"text-primary fw-normal",children:[l.jsx(J,{name:"compass",className:"text-danger me-1"})," ID"]}),readonly:!0,type:"number"},{name:"no",label:t??"编号",readonly:!0,type:"string"},{name:"ex",label:n??"名称",type:"string"}];let p;return i===!0&&(p=l.jsx(cE,{atomId:r,uoms:y})),{caption:w,view:l.jsx(S,{}),page:l.jsx(b,{}),obj:f};function S(){return l.jsxs(l.Fragment,{children:[h.map((k,_)=>l.jsxs(ne.Fragment,{children:[l.jsx(oE,{...k,id:r,value:f[k.name],saveField:a,saveBud:o},_),l.jsx(ve,{})]},_)),p,j.map(k=>{let{id:_}=k,C=m[_];return l.jsxs(ne.Fragment,{children:[l.jsx(p0,{id:r,bizBud:k,value:C}),l.jsx(ve,{})]},_)})]})}function b(){return l.jsx(H,{header:w??v,children:l.jsx(S,{})})}}function dE({entity:e,budNames:t,noMedsMessage:n}){const r=Z(),{biz:i}=r,s=i.entities[e.toLowerCase()];let a;switch(typeof t){default:a=t;break;case"undefined":a=[];break;case"string":a=[t];break}let o=a.map(d=>u(d));function u(d){const f=d.toLowerCase().split("."),{length:m}=f;if(m>3)throw new Error(`error Bud name '${d}'`);let y,v;if(m===1)y=s,v=d;else{if(m===3&&f.splice(0,1),y=i.entities[f[0]],y===void 0)throw new Error(`'${d}' is not a valid bud`);v=f[1]}return j(y,v);function j(g,h){if(g===void 0)throw new Error("no Entity in bizBudOfEntity");let p=g.buds[h];if(p!==void 0)return p;throw new Error(`unknown Bud '${h}' of Entity '${g.phrase}'`)}}async function c(d,f){let m=[];for(let v in f){let w=f[v];w!==void 0&&m.push(y(d,Number(v),w))}await Promise.all(m);async function y(v,w,j){let{id:g}=v,h,p,S;switch(v.budDataType.type){case Ae.int:h=j;break;case Ae.dec:p=j;break;case Ae.char:S=j;break}let b={phraseId:g,id:w,int:h,dec:p,str:S},{entity:k}=v;return await k.uq.SaveBudValue.submit({...b})}}return n=n??"no meds",{entity:s,noMedsMessage:n,saveBuds:c,bizBuds:o,getBizBud:u}}function fE(e,t){const{entity:n,bizBuds:r,noMedsMessage:i,saveBuds:s,getBizBud:a}=dE(e);function o(c,d,f){return t.page(c,d,f)}async function u(c,d,f){const m={phrase:n.phrase,budNames:r==null?void 0:r.map(C=>C.phrase).join("	"),key:c==null?void 0:c.key};let y=[],v=await o(m,d,f),{$page:w,meds:j,budsInt:g,budsDec:h,budsStr:p}=v,S={},b={};for(let C of w){let N={atom:C,meds:[]};S[C.id]=N,y.push(N)}for(let C of j){let N={...C,values:[]};b[C.id]=N,S[C.main].meds.push(N)}let k={};function _(C){let{id:N,phrase:D}=C,E=k[D];if(E===void 0){let O=a(D);E=r.indexOf(O),k[D]=E}let A=b[N];A.values[E]=C.value}for(let C of g)_(C);for(let C of h)_(C);for(let C of p)_(C);for(let C of y)for(let N of C.meds)N.atomValues=Ie(N.values);return y}return{search:u,saveBuds:s,noMedsMessage:i,bizBuds:r,entity:n}}function hE(e){const{uq:t}=Z();return fE(e,t.SearchAtomBuds)}function cu(){const{openModal:e}=oe();return async function(t,n,r){return await e(l.jsx(mE,{atomName:t,buds:n}))}}function mE(e){const{buds:t,loadOnOpen:n,caption:r,placeholder:i,atomName:s}=e,a=Z(),{biz:o}=a,{closeModal:u}=oe();let c=o.entities[s];if(c===void 0){debugger;let h=(s===void 0?"no atomName":`${s} not defined`)+" in PageAtomSelect";throw new Error(h)}const[d,f]=P.useState(n===!1?void 0:{key:void 0}),m=l.jsx(Qg,{className:"px-3 py-2",onSearch:y,placeholder:i??c.caption+" 编号或描述"});async function y(h){f({key:h})}async function v(h){let p=h.atom;u(p)}let w=hE({entity:s,budNames:t});async function j(h,p,S){return await w.search(h,p,S)}function g({value:h}){return l.jsx("div",{className:"px-3 py-2",children:l.jsx(pE,{value:h.atom})})}return l.jsx(Rn,{header:`选择${r??c.caption}`,query:j,param:d,sortField:"id",ViewItem:g,onItemClick:v,children:m})}function pE({value:e}){let{no:t,ex:n}=e;return l.jsxs("div",{children:[l.jsx("div",{children:l.jsx("b",{children:n})}),l.jsx("div",{className:"small text-secondary",children:t})]})}function Va({atom:e}){const{biz:t}=Z(),n=t==null?void 0:t.entities[e];return l.jsx(l.Fragment,{children:n?n.caption:e})}function kt({value:e}){let{no:t,ex:n}=e;return l.jsxs("div",{children:[l.jsx("div",{children:l.jsx("b",{children:n})}),l.jsx("div",{className:"small text-secondary",children:t})]})}function yE({id:e}){const{uq:t}=Z();return e===void 0?l.jsx(l.Fragment,{children:"/"}):l.jsx(an,{uq:t,id:e,Template:kt})}const To=class To{constructor(){x(this,"keyId");this.keyId=++To.__keyId}};x(To,"__keyId",0);let No=To;class du extends No{constructor(n){super();x(this,"sheetStore");this.sheetStore=n}}class vE extends du{constructor(n){super(n);x(this,"entityMain");x(this,"_i",Ie(0));x(this,"_id",Ie(0));x(this,"no");this.entityMain=n.entitySheet.main}get id(){return de(this._id)}async start(n){let{id:r}=this;if(r>0)return;if(await this.pickTarget(n),de(this._i)>0)return await this.createIfNotExists()}async pickTarget(n){const{i:r}=this.entityMain;if(r===void 0)return;let i=await n(r);if(i===void 0)return;let{spec:s}=i;ae(this._i,s)}async createIfNotExists(){let n=de(this._id),r=de(this._i);if(n>0)return{id:n,no:this.no,i:r};const{uq:i,entitySheet:s}=this.sheetStore;let a=await i.SaveSheet.submit({phrase:s.id,no:void 0,i:r===0?void 0:r,x:0,value:void 0,price:void 0,amount:void 0}),{id:o,no:u}=a;return ae(this._id,o),this.no=u,Object.assign(a,{i:r})}setValue(n){const{id:r,no:i,i:s}=n;this.no=i,ae(this._id,r),ae(this._i,s)}}class v0 extends du{constructor(n,r,i){super(n);x(this,"entityDetail");x(this,"caption");this.entityDetail=r,this.caption=i??r.caption}}class gE extends v0{constructor(){super(...arguments);x(this,"_sections",Ie([]));x(this,"origin");x(this,"pending")}addRowValues(n){const r=de(this._sections);for(let i of n)this.addRowValue(r,i);ae(this._sections,[...r])}addRowValue(n,r){const{i,x:s,value:a}=r;if(!i||!a)return;let o;if(s){let c=n.findIndex(d=>d.i===i);c<0?(o=new Do(this),o.i=i,n.push(o)):o=n[c]}else o=new Do(this),n.push(o);let u=new ch(o);return u.setValue(r),o.addRow(u),u}addSection(n){const r=de(this._sections);ae(this._sections,[...r,n])}async delEmptySection(n){if(n.isEmpty===!1)return;let r=de(this._sections),i=r.findIndex(s=>s===n);i>=0&&(r.splice(i,1),ae(this._sections,[...r]))}}class xE extends v0{addRowValues(t){}}class ch extends du{constructor(n){super(n.sheetStore);x(this,"section");x(this,"props",{});this.section=n}async save(){const{uq:n,main:r}=this.sheetStore;if(await r.createIfNotExists()===void 0){debugger;let a="新建单据不成功";throw console.error(a),new Error(a)}const{id:s}=await n.SaveDetail.submit({base:r.id,phrase:this.section.coreDetail.entityDetail.id,...this.props});this.props.id=s}async addToSection(){await this.save(),this.section.addRow(this)}async delFromSection(){const{uq:n}=this.sheetStore;await n.DeleteBin.submit({id:this.props.id}),this.section.delRow(this)}async changed(){await this.save(),this.section.rowChanged()}setValue(n){Object.assign(this.props,n)}}class Do extends du{constructor(n){super(n.sheetStore);x(this,"coreDetail");x(this,"_rows",Ie([]));x(this,"i");this.coreDetail=n}get isEmpty(){return de(this._rows).length===0}addRow(n){let r=de(this._rows);ae(this._rows,[...r,n])}async addRowProps(n){let r=new ch(this);r.setValue(n),await r.addToSection()}delRow(n){let r=de(this._rows),i=r.findIndex(s=>s===n);i>=0&&(r.splice(i,1),ae(this._rows,[...r])),this.coreDetail.delEmptySection(this)}rowChanged(){let n=de(this._rows);ae(this._rows,[...n])}}class ey extends No{constructor(n,r,i,s){super();x(this,"uq");x(this,"biz");x(this,"entitySheet");x(this,"main");x(this,"detail");x(this,"detailExs",[]);x(this,"caption");x(this,"idOnUrl");this.uq=n,this.biz=r,this.entitySheet=i,this.main=new vE(this),s>0&&(this.idOnUrl=s,ae(this.main._id,s));const{details:a}=this.entitySheet;let o=a.length;if(o>0){const{detail:u,caption:c}=a[0];this.detail=new gE(this,u,c)}for(let u=1;u<o;u++){const{detail:c,caption:d}=a[u];this.detailExs.push(new xE(this,c,d))}this.caption=i.caption??i.name}async load(){let{id:n}=this.main;if(n===void 0||n===0)return;let{main:r,details:i}=await this.uq.GetSheet.query({id:n,detail:void 0});this.main.setValue(r[0]),this.detail.addRowValues(i)}async discard(){let{id:n}=this.main;if(n>=0)return await this.uq.RemoveDraft.submit({id:n}),n}async start(n){let r=await this.main.start(n);if(r!==void 0)return r}}function wE(){const e=cu();async function t(n,r){let i=await e(n.name,[],r);return i===void 0?void 0:{retAtom:i,retViewTop:l.jsxs("div",{children:[r,l.jsx(kt,{value:i})]})}}return P.useCallback(t,[])}function ty(e,t=!1){const{name:n,budDataType:r,caption:i,defaultValue:s}=e,a={required:t,value:s};switch(r.type){default:case Ae.char:case Ae.str:return{name:n,label:i??n,type:"string",options:{...a,maxLength:200}};case Ae.int:return{name:n,label:i??n,type:"number",options:a};case Ae.dec:return{name:n,label:i??n,type:"number",options:a};case Ae.date:return{name:n,label:i??n,type:"date",options:a};case Ae.atom:return{name:n,label:i??n,atom:r.bizAtom.name}}}function bE(){const{uq:e}=Z(),{openModal:t,closeModal:n}=oe();async function r(i){const{base:s,entitySpec:a,viewTop:o}=i,{ix:u}=a;if(u===!0){let{ret:f}=await e.GetSpecsFromBase.query({base:s}),m;switch(f.length){default:return await t(l.jsx(d,{}));case 0:m={id:s};break;case 1:m=f[0];break}return{retSpec:m,retViewTop:o}}else return await t(l.jsx(c,{}));function c(){const{caption:f,name:m,keys:y,props:v}=a,{register:w,handleSubmit:j,setValue:g,getValues:h,formState:{errors:p}}=lr({mode:"onBlur"}),S="提交",b=void 0;let k=[...y.map(C=>ty(C,!0)),...(v??[]).map(C=>ty(C)),{type:"submit",label:S,options:{},className:b}];const _=async C=>{const N={};for(let q of y){const{name:z}=q;N[z]=C[z]}const D={};for(let q of v){const{name:z}=q;D[z]=C[z]}const E={spec:m,base:s,keys:JSON.stringify(N),props:JSON.stringify(D)};let A=await e.SaveSpec.submit(E);const{id:O}=A;let T=Object.assign({id:O},C);n({retSpec:T,retViewTop:l.jsxs("div",{children:[o,l.jsx("div",{children:JSON.stringify(T)})]})})};return l.jsxs(H,{header:f??m,children:[l.jsx("div",{className:"pt-3 tonwa-bg-gray-2",children:l.jsx(bt,{children:l.jsx("div",{className:"mx-3",children:o})})}),l.jsx("div",{className:"m-3",children:l.jsx("form",{className:"container",onSubmit:j(_),children:l.jsx(Ur,{rows:k,register:w,errors:p})})})]})}function d(){function f(){n({id:100})}return l.jsx(H,{header:"选择",children:l.jsx("button",{className:"btn btn-primary",onClick:f,children:"确定"})})}}return P.useCallback(r,[])}function dh(){const{biz:e}=Z(),t=wE(),n=bE();async function r(i){let{caption:s,budDataType:a}=i;if(a.type!==Ae.pick)debugger;const{atom:o,pick:u}=a;let c,d;if(u!==void 0?(c=u.atoms,d=[...u.specs]):(c=[o],d=[]),s===void 0){let{caption:b,name:k}=c[0];s=b??k}const f="提交",m="btn btn-primary";let y=l.jsx("div",{children:"pick atom top"}),v=await t(c[0],y);if(v===void 0)return;const{retAtom:w,retViewTop:j}=v,{phrase:g}=w;let h=w.id,p,S=e.entities[g];if((S==null?void 0:S.uom)===!0){const b=e.entities.specuom;b!==void 0&&d.push(b)}if(d.length>0){let b=w.id;y=j;async function k(_){let C=await n({base:b,entitySpec:_,viewTop:y,buttonCaption:f,buttonClassName:m});if(C===void 0)return!1;const{retSpec:N,retViewTop:D}=C;return y=D,p=b=N.id,!0}for(let _ of d)if(await k(_)===!1)break}return{atom:h,spec:p??h}}return P.useCallback(r,[])}function SE(e){const t=Z(),{uq:n,biz:r}=t;let{data:i}=Lr([e],async()=>await jE(n,r,e),qr);return i}const ny={},ry={atom:{entity:void 0,value:void 0},specs:[]};async function jE(e,t,n){if(n===void 0||n===0)return ry;let r=ny[n];if(r===null)return ry;if(r!==void 0)return r;let{props:i}=await e.GetSpec.query({id:n}),s,a=[],o=i.length,u=0;for(;u<o;){let f=i[u++];const{phrase:m}=f;let y=t.entityIds[m],{type:v}=y;if(v==="atom"){s=c(y,f);break}if(v==="spec"){let w=d(y,f);a.push(w)}}function c(f,m){const{id:y,phrase:v,value:[w,j]}=m;return{entity:f,value:{id:y,base:v,no:w,ex:j}}}function d(f,m){let{keys:y,props:v}=f,w={},j=[],g=[];const{id:h,value:p}=m;for(let[S,b]of p)w[S]=b;for(let S of y)j.push(w[S.id]);for(let S of v)g.push(w[S.id]);return{entity:f,id:h,keys:j,props:g}}return ny[n]={atom:s,specs:a}}function oi({id:e}){const{atom:{value:t},specs:n}=SE(e);function r(){if(t===void 0)return null;const{no:s,ex:a}=t;return l.jsxs("div",{children:[l.jsx("div",{className:"small text-secondary",children:s}),l.jsx("div",{children:l.jsx("b",{children:a})})]})}function i(){return n.length===0?null:l.jsx(l.Fragment,{children:n.map(s=>{const{id:a,keys:o,props:u,entity:c}=s;let d=[],f=1;function m(y,v){let w=y.length;for(let j=0;j<w;j++){let g=y[j],h=l.jsxs("div",{children:[l.jsx("span",{className:"d-inline-block me-3 small text-secondary w-min-3c",children:g.caption})," ",v[j]]},f++);d.push(h)}}return m(c.keys,o),m(c.props,u),l.jsx("div",{children:d},a)})})}return l.jsxs("div",{children:[l.jsx(r,{}),l.jsx(i,{})]})}function kE({phrase:e,props:t,className:n}){const{biz:r}=Z();let i=r.entityIds[e],{keys:s,props:a}=i,o=s.length,u=t.length,c=[];for(let f=0;f<u;f++)f<o?c.push(d(s[f],t[f])):c.push(d(a[f-o],t[f]));function d(f,m){return l.jsxs("span",{className:"d-inline-block me-3",children:[l.jsx("span",{className:"small text-secondary w-min-3c",children:f.caption}),m]},f.id)}return l.jsx("div",{className:n,children:c})}const CE=Math.pow(2,20);function g0({id:e}){return l.jsx("span",{className:"small text-secondary",children:l.jsx(Mf,{date:e/CE*60})})}function _E({main:e}){const{id:t,no:n,_i:r,entityMain:i,keyId:s}=e,{i:a}=i,o=we(r);return l.jsxs("div",{className:"tonwa-bg-gray-3 py-3 container",children:[l.jsxs(bt,{label:"单据编号",className:"mb-1",children:[l.jsx("b",{children:n}),"    ",l.jsx(g0,{id:t})]}),o>0&&l.jsx(bt,{label:a.caption,className:"mb-1",children:l.jsx("div",{className:"",children:l.jsx(oi,{id:o})})})]})}class NE{add(t,n,r){if(typeof arguments[0]!="string")for(let i in arguments[0])this.add(i,arguments[0][i],arguments[1]);else(Array.isArray(t)?t:[t]).forEach(function(i){this[i]=this[i]||[],n&&this[i][r?"unshift":"push"](n)},this)}run(t,n){this[t]=this[t]||[],this[t].forEach(function(r){r.call(n&&n.context?n.context:n,n)})}}class DE{constructor(t){this.jsep=t,this.registered={}}register(...t){t.forEach(n=>{if(typeof n!="object"||!n.name||!n.init)throw new Error("Invalid JSEP plugin format");this.registered[n.name]||(n.init(this.jsep),this.registered[n.name]=n)})}}class F{static get version(){return"1.3.8"}static toString(){return"JavaScript Expression Parser (JSEP) v"+F.version}static addUnaryOp(t){return F.max_unop_len=Math.max(t.length,F.max_unop_len),F.unary_ops[t]=1,F}static addBinaryOp(t,n,r){return F.max_binop_len=Math.max(t.length,F.max_binop_len),F.binary_ops[t]=n,r?F.right_associative.add(t):F.right_associative.delete(t),F}static addIdentifierChar(t){return F.additional_identifier_chars.add(t),F}static addLiteral(t,n){return F.literals[t]=n,F}static removeUnaryOp(t){return delete F.unary_ops[t],t.length===F.max_unop_len&&(F.max_unop_len=F.getMaxKeyLen(F.unary_ops)),F}static removeAllUnaryOps(){return F.unary_ops={},F.max_unop_len=0,F}static removeIdentifierChar(t){return F.additional_identifier_chars.delete(t),F}static removeBinaryOp(t){return delete F.binary_ops[t],t.length===F.max_binop_len&&(F.max_binop_len=F.getMaxKeyLen(F.binary_ops)),F.right_associative.delete(t),F}static removeAllBinaryOps(){return F.binary_ops={},F.max_binop_len=0,F}static removeLiteral(t){return delete F.literals[t],F}static removeAllLiterals(){return F.literals={},F}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(t){this.expr=t,this.index=0}static parse(t){return new F(t).parse()}static getMaxKeyLen(t){return Math.max(0,...Object.keys(t).map(n=>n.length))}static isDecimalDigit(t){return t>=48&&t<=57}static binaryPrecedence(t){return F.binary_ops[t]||0}static isIdentifierStart(t){return t>=65&&t<=90||t>=97&&t<=122||t>=128&&!F.binary_ops[String.fromCharCode(t)]||F.additional_identifier_chars.has(String.fromCharCode(t))}static isIdentifierPart(t){return F.isIdentifierStart(t)||F.isDecimalDigit(t)}throwError(t){const n=new Error(t+" at character "+this.index);throw n.index=this.index,n.description=t,n}runHook(t,n){if(F.hooks[t]){const r={context:this,node:n};return F.hooks.run(t,r),r.node}return n}searchHook(t){if(F.hooks[t]){const n={context:this};return F.hooks[t].find(function(r){return r.call(n.context,n),n.node}),n.node}}gobbleSpaces(){let t=this.code;for(;t===F.SPACE_CODE||t===F.TAB_CODE||t===F.LF_CODE||t===F.CR_CODE;)t=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");const t=this.gobbleExpressions(),n=t.length===1?t[0]:{type:F.COMPOUND,body:t};return this.runHook("after-all",n)}gobbleExpressions(t){let n=[],r,i;for(;this.index<this.expr.length;)if(r=this.code,r===F.SEMCOL_CODE||r===F.COMMA_CODE)this.index++;else if(i=this.gobbleExpression())n.push(i);else if(this.index<this.expr.length){if(r===t)break;this.throwError('Unexpected "'+this.char+'"')}return n}gobbleExpression(){const t=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",t)}gobbleBinaryOp(){this.gobbleSpaces();let t=this.expr.substr(this.index,F.max_binop_len),n=t.length;for(;n>0;){if(F.binary_ops.hasOwnProperty(t)&&(!F.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!F.isIdentifierPart(this.expr.charCodeAt(this.index+t.length))))return this.index+=n,t;t=t.substr(0,--n)}return!1}gobbleBinaryExpression(){let t,n,r,i,s,a,o,u,c;if(a=this.gobbleToken(),!a||(n=this.gobbleBinaryOp(),!n))return a;for(s={value:n,prec:F.binaryPrecedence(n),right_a:F.right_associative.has(n)},o=this.gobbleToken(),o||this.throwError("Expected expression after "+n),i=[a,s,o];n=this.gobbleBinaryOp();){if(r=F.binaryPrecedence(n),r===0){this.index-=n.length;break}s={value:n,prec:r,right_a:F.right_associative.has(n)},c=n;const d=f=>s.right_a&&f.right_a?r>f.prec:r<=f.prec;for(;i.length>2&&d(i[i.length-2]);)o=i.pop(),n=i.pop().value,a=i.pop(),t={type:F.BINARY_EXP,operator:n,left:a,right:o},i.push(t);t=this.gobbleToken(),t||this.throwError("Expected expression after "+c),i.push(s,t)}for(u=i.length-1,t=i[u];u>1;)t={type:F.BINARY_EXP,operator:i[u-1].value,left:i[u-2],right:t},u-=2;return t}gobbleToken(){let t,n,r,i;if(this.gobbleSpaces(),i=this.searchHook("gobble-token"),i)return this.runHook("after-token",i);if(t=this.code,F.isDecimalDigit(t)||t===F.PERIOD_CODE)return this.gobbleNumericLiteral();if(t===F.SQUOTE_CODE||t===F.DQUOTE_CODE)i=this.gobbleStringLiteral();else if(t===F.OBRACK_CODE)i=this.gobbleArray();else{for(n=this.expr.substr(this.index,F.max_unop_len),r=n.length;r>0;){if(F.unary_ops.hasOwnProperty(n)&&(!F.isIdentifierStart(this.code)||this.index+n.length<this.expr.length&&!F.isIdentifierPart(this.expr.charCodeAt(this.index+n.length)))){this.index+=r;const s=this.gobbleToken();return s||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:F.UNARY_EXP,operator:n,argument:s,prefix:!0})}n=n.substr(0,--r)}F.isIdentifierStart(t)?(i=this.gobbleIdentifier(),F.literals.hasOwnProperty(i.name)?i={type:F.LITERAL,value:F.literals[i.name],raw:i.name}:i.name===F.this_str&&(i={type:F.THIS_EXP})):t===F.OPAREN_CODE&&(i=this.gobbleGroup())}return i?(i=this.gobbleTokenProperty(i),this.runHook("after-token",i)):this.runHook("after-token",!1)}gobbleTokenProperty(t){this.gobbleSpaces();let n=this.code;for(;n===F.PERIOD_CODE||n===F.OBRACK_CODE||n===F.OPAREN_CODE||n===F.QUMARK_CODE;){let r;if(n===F.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==F.PERIOD_CODE)break;r=!0,this.index+=2,this.gobbleSpaces(),n=this.code}this.index++,n===F.OBRACK_CODE?(t={type:F.MEMBER_EXP,computed:!0,object:t,property:this.gobbleExpression()},this.gobbleSpaces(),n=this.code,n!==F.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):n===F.OPAREN_CODE?t={type:F.CALL_EXP,arguments:this.gobbleArguments(F.CPAREN_CODE),callee:t}:(n===F.PERIOD_CODE||r)&&(r&&this.index--,this.gobbleSpaces(),t={type:F.MEMBER_EXP,computed:!1,object:t,property:this.gobbleIdentifier()}),r&&(t.optional=!0),this.gobbleSpaces(),n=this.code}return t}gobbleNumericLiteral(){let t="",n,r;for(;F.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(this.code===F.PERIOD_CODE)for(t+=this.expr.charAt(this.index++);F.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(n=this.char,n==="e"||n==="E"){for(t+=this.expr.charAt(this.index++),n=this.char,(n==="+"||n==="-")&&(t+=this.expr.charAt(this.index++));F.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);F.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+t+this.char+")")}return r=this.code,F.isIdentifierStart(r)?this.throwError("Variable names cannot start with a number ("+t+this.char+")"):(r===F.PERIOD_CODE||t.length===1&&t.charCodeAt(0)===F.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:F.LITERAL,value:parseFloat(t),raw:t}}gobbleStringLiteral(){let t="";const n=this.index,r=this.expr.charAt(this.index++);let i=!1;for(;this.index<this.expr.length;){let s=this.expr.charAt(this.index++);if(s===r){i=!0;break}else if(s==="\\")switch(s=this.expr.charAt(this.index++),s){case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:t+=s}else t+=s}return i||this.throwError('Unclosed quote after "'+t+'"'),{type:F.LITERAL,value:t,raw:this.expr.substring(n,this.index)}}gobbleIdentifier(){let t=this.code,n=this.index;for(F.isIdentifierStart(t)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(t=this.code,F.isIdentifierPart(t));)this.index++;return{type:F.IDENTIFIER,name:this.expr.slice(n,this.index)}}gobbleArguments(t){const n=[];let r=!1,i=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let s=this.code;if(s===t){r=!0,this.index++,t===F.CPAREN_CODE&&i&&i>=n.length&&this.throwError("Unexpected token "+String.fromCharCode(t));break}else if(s===F.COMMA_CODE){if(this.index++,i++,i!==n.length){if(t===F.CPAREN_CODE)this.throwError("Unexpected token ,");else if(t===F.CBRACK_CODE)for(let a=n.length;a<i;a++)n.push(null)}}else if(n.length!==i&&i!==0)this.throwError("Expected comma");else{const a=this.gobbleExpression();(!a||a.type===F.COMPOUND)&&this.throwError("Expected comma"),n.push(a)}}return r||this.throwError("Expected "+String.fromCharCode(t)),n}gobbleGroup(){this.index++;let t=this.gobbleExpressions(F.CPAREN_CODE);if(this.code===F.CPAREN_CODE)return this.index++,t.length===1?t[0]:t.length?{type:F.SEQUENCE_EXP,expressions:t}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:F.ARRAY_EXP,elements:this.gobbleArguments(F.CBRACK_CODE)}}}const EE=new NE;Object.assign(F,{hooks:EE,plugins:new DE(F),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});F.max_unop_len=F.getMaxKeyLen(F.unary_ops);F.max_binop_len=F.getMaxKeyLen(F.binary_ops);const va=e=>new F(e).parse(),IE=Object.getOwnPropertyNames(F);IE.forEach(e=>{va[e]===void 0&&e!=="prototype"&&(va[e]=F[e])});va.Jsep=F;const PE="ConditionalExpression";var AE={name:"ternary",init(e){e.hooks.add("after-expression",function(n){if(n.node&&this.code===e.QUMARK_CODE){this.index++;const r=n.node,i=this.gobbleExpression();if(i||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;const s=this.gobbleExpression();if(s||this.throwError("Expected expression"),n.node={type:PE,test:r,consequent:i,alternate:s},r.operator&&e.binary_ops[r.operator]<=.9){let a=r;for(;a.right.operator&&e.binary_ops[a.right.operator]<=.9;)a=a.right;n.node.test=a.right,a.right=n.node,n.node=r}}else this.throwError("Expected :")}})}};va.plugins.register(AE);class x0{constructor(t){x(this,"name");x(this,"value");this.name=t}}class OE extends x0{constructor(n,r){super(n);x(this,"type",1);x(this,"fixed",!1);this.value=r}}class ME extends x0{constructor(n,r,i,s){super(n);x(this,"type",2);x(this,"exp");x(this,"fixed");this.value=r,this.exp=i,this.fixed=s}}class FE{constructor(t){x(this,"uqApp");x(this,"cells",{});x(this,"_hasValue",Ie(!1));this.uqApp=t}initCell(t,n,r){let i;if(r===void 0)i=new OE(t,n),this.cells[t]=i;else{let s=!0,a=r.indexOf(`
`);if(a>0){let u=r.substring(a+1);switch(r=r.substring(0,a),u){default:s=!0;break;case"init":s=!1;break;case"equ":s=!0;break}}let o=va(r);i=new ME(t,n,o,s),this.cells[t]=i}return i}getCellValue(t){var n;return(n=this.cells[t])==null?void 0:n.value}refreshHasValue(){let t=!0;for(let n in this.cells)if(this.cells[n].value===void 0){t=!1;break}ae(this._hasValue,t)}async setCellValue(t,n,r){const i=this.cells[t];if(i!==void 0&&i.type===1){i.value=n;for(let s in this.cells){const a=this.cells[s];if(a.type===2){let o=a.value=await this.runExp(a.exp);r(a.name,o)}}}}async runExp(t){switch(t.type){case"BinaryExpression":return await this.binary(t);case"Identifier":return await this.identifier(t);case"Literal":return await this.literal(t);case"UnaryExpression":return await this.unary(t)}}async binary(t){const{operator:n,left:r,right:i}=t;let s=await this.runExp(r);if(s===void 0)return;let a=await this.runExp(i);if(a!==void 0)switch(n){default:return;case"-":return s-a;case"+":return s+a;case"*":return s*a;case"/":return a===0?void 0:s/a}}async unary(t){const{operator:n,argument:r}=t;let i=await this.runExp(r);switch(n){default:return;case"-":return-i;case"+":return i}}async identifier(t){const{name:n}=t;let r=this.cells[n];if(r!==void 0)return r.value}async literal(t){return Number(t.value)}}const TE="value",RE="price",LE="amount";function w0({row:e}){const t=Z(),{closeModal:n}=oe(),{register:r,handleSubmit:i,setValue:s,formState:{errors:a}}=lr({mode:"onBlur"}),{props:o,section:u}=e,{i:c}=o,{current:d}=P.useRef([]),[f,m]=P.useState();if(Pt(()=>{const{entityDetail:v}=u.coreDetail,{value:w,price:j,amount:g}=o,{value:h,price:p,amount:S}=v;h!==void 0&&d.push([TE,w,h,k=>o.value=k,void 0]),p!==void 0&&d.push([RE,j,p,k=>o.price=k,void 0]),S!==void 0&&d.push([LE,g,S,k=>o.amount=k,void 0]);let b=new FE(t);for(let k of d){let[_,C,N]=k,D=b.initCell(_,C,N.defaultValue);k[4]=D}m(b),b.refreshHasValue()}),f===void 0)return null;return l.jsx(y,{});function y(){const v=we(f._hasValue);function w(){return d.map(k=>{const[_,C,N,,D]=k,{name:E,caption:A,defaultValue:O}=N;return{name:_,label:A??E,type:"number",options:{value:C,disabled:D.fixed}}})}async function j(k){const{value:_,name:C}=k.target;let N;if(_.trim().length===0)N=void 0;else{let D=Number(_);N=Number.isNaN(D)===!0?void 0:D}await f.setCellValue(C,N,(D,E)=>{s(D,E==null?void 0:E.toFixed(4))}),f.refreshHasValue()}const g={onChange:j,valueAsNumber:!0},h=w();h.forEach(k=>k.options={...k.options,...g}),h.push({type:"submit",label:"提交",options:{disabled:v===!1}});async function p(k){for(let _ of d){let[C,,,N]=_;N(f.getCellValue(C))}n(!0)}async function S(){await e.delFromSection(),n()}const b=l.jsx(fi,{onClick:S,className:"btn btn-sm btn-primary me-1",children:l.jsx(J,{name:"trash",fixWidth:!0})});return l.jsxs(H,{header:"输入明细",right:b,children:[l.jsx("div",{className:"pt-3 tonwa-bg-gray-2 mb-3 container",children:l.jsx(bt,{children:l.jsx(oi,{id:c})})}),l.jsx("form",{className:"container",onSubmit:i(p),children:l.jsx(Ur,{rows:h,register:r,errors:a})})]})}}function qE(e){async function t(n,r){}return P.useCallback(t,[])}function UE({detail:e,editable:t}){const n=we(e._sections),{caption:r}=e;return l.jsxs("div",{children:[l.jsx("div",{className:"py-1 px-3 tonwa-bg-gray-2",children:r??"明细"}),l.jsx("div",{children:n.map(i=>l.jsx($E,{section:i,editable:t},i.keyId))})]})}function $E({section:e,editable:t}){const{coreDetail:n}=e,{entityDetail:r}=n,{x:i}=r,s=qE(),a=we(e._rows);async function o(){await s(e,void 0)}let u;if(i===void 0){let c=a[0];c!==void 0&&(u=l.jsx(iy,{row:c,editable:t}))}else u=l.jsxs(l.Fragment,{children:[l.jsxs(Ue,{className:"tonwa-bg-gray-1 pt-1 px-3",children:[l.jsxs("div",{children:["Section ",e.keyId]}),l.jsx("button",{className:"btn btn-sm btn-link",disabled:!t,onClick:o,children:l.jsx(J,{name:"plus"})})]}),a.map(c=>l.jsxs(ne.Fragment,{children:[l.jsx(iy,{row:c,editable:t}),l.jsx(ve,{sep:2})]},c.keyId))]});return l.jsx("div",{className:"border-top",children:u})}function iy({row:e,editable:t}){const{openModal:n}=oe(),{i:r,value:i,price:s,amount:a}=e.props,o=2;async function u(){if(t===!1)return;await n(l.jsx(w0,{row:e}))===!0&&await e.changed()}function c({caption:f,value:m}){return l.jsxs("div",{className:"d-flex align-items-center",children:[l.jsx("span",{className:"me-3 small text-secondary",children:f}),l.jsx("span",{className:"w-min-4c",children:m})]})}if(i===void 0)return null;let d=t===!0?"cursor-pointer":"text-light";return l.jsxs("div",{className:"d-flex ps-3 py-2 align-items-stretch",children:[l.jsx("div",{className:"flex-grow-1",children:l.jsx(oi,{id:r})}),l.jsxs("div",{className:"text-end d-flex flex-column justify-content-end me-2",children:[l.jsx(c,{caption:"单价",value:s==null?void 0:s.toFixed(o)}),l.jsx(c,{caption:"金额",value:a==null?void 0:a.toFixed(o)}),l.jsx(c,{caption:"数量",value:l.jsx("span",{className:"fs-larger fw-bold",children:i})})]}),l.jsx("div",{className:"text-end text-info d-flex flex-column",children:l.jsx("div",{className:"ps-2 pe-3 "+d,onClick:u,children:l.jsx(J,{name:"pencil",fixWidth:!0})})})]})}function VE({propPend:e}){const t=Z(),{uq:n}=t,{closeModal:r}=oe();let{caption:i,entity:s,search:a}=e,{name:o,id:u,predefined:c}=s,{data:d}=Lr([o],async()=>{let{$page:h,retSheet:p,retAtom:S}=await n.GetPend.page({pend:u,key:""},void 0,100),b={};for(let _ of p)b[_.id]=_;let k=[];for(let _ of h){let C={pend:_.pend,sheet:b[_.sheet],detail:_,value:_.pendValue};k.push(C)}return k},qr),[f,m]=P.useState({});i===void 0&&(i=s.caption??o);function y(){let h=Object.values(f).sort((S,b)=>{let k=S.pend,_=b.pend;return k<_?-1:k===_?0:1}),p=[];for(let S of h){const{pend:b,detail:k,value:_}=S;let C={...k,origin:k.id,pendFrom:b,pendValue:_,id:void 0};k.id=void 0,p.push(C)}r(p)}function v({caption:h,value:p}){return l.jsxs("div",{className:"d-flex text-end align-items-center",children:[l.jsx("span",{className:"me-3 small text-secondary",children:h}),l.jsx("span",{className:"w-min-4c",children:p})]})}const w=2;function j({value:h}){const{detail:{i:p,price:S,amount:b,value:k}}=h;return l.jsx("div",{className:"container",children:l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col py-2",children:l.jsx(oi,{id:p})}),l.jsx("div",{className:"col py-2 text-break",children:JSON.stringify(h)}),l.jsxs("div",{className:"col py-2 d-flex flex-column align-items-end me-2",children:[l.jsx(v,{caption:"单价",value:S.toFixed(w)}),l.jsx(v,{caption:"金额",value:b.toFixed(w)}),l.jsx(v,{caption:"数量",value:l.jsx("span",{className:"fs-larger fw-bold",children:k})})]})]})})}function g(h,p){const{pend:S}=h;p===!0?f[S]=h:delete f[S],m({...f})}return l.jsxs(H,{header:i,children:[l.jsxs("div",{className:"p-3 border-bottom",children:[l.jsxs("div",{className:"d-flex",children:[l.jsxs("div",{className:"me-3",children:["pend: ",o]}),l.jsxs("div",{className:"me-3",children:["search: ",JSON.stringify(a)]}),Object.values(c).map(h=>{const{name:p,caption:S,entity:b}=h;return l.jsxs("div",{className:"me-3",children:[p,": ",S]},p)})]}),l.jsx("div",{children:Object.keys(f).map(h=>h).join(", ")})]}),l.jsx(Me,{items:d,ViewItem:j,className:"",onItemSelect:g}),l.jsx("div",{className:"p-3",children:l.jsx("button",{className:"btn btn-primary",onClick:y,children:"选入"})})]})}function zE(e){const{openModal:t}=oe(),n=dh(),{entityDetail:r}=e,{pend:i,i:s}=r;async function a(){let u=await t(l.jsx(VE,{propPend:i}));if(u===void 0)return;let c=[],d={};for(let y of u){let{i:v,x:w}=y;if(w===void 0)c.push(y);else{let j=d[v];j===void 0?(j=[y],d[v]=j):j.push(y)}}await f(),await m();async function f(){for(let y of c){let v=new Do(e);e.addSection(v),await v.addRowProps(y)}}async function m(){}}async function o(){let u=await n(s);if(u===void 0)return;let{spec:c}=u,d=new Do(e);e.addSection(d);let f=new ch(d);f.props.i=c,await t(l.jsx(w0,{row:f})),await f.addToSection()}return P.useCallback(i!==void 0?a:o,[])}let BE=1;function sy(){const e=Z(),{uq:t,biz:n}=e,{sheet:r,id:i}=Fn(),s=n.entityFrom62(r),a=rr(i),[o,u]=P.useState(),c=Rr(),d=dh();return P.useEffect(()=>{if(!c.state)return;let f=new ey(t,n,s,void 0);u(f),b0(e,f,d)},[c.state]),Pt(()=>{(async function(){let f=new ey(t,n,s,i===void 0?void 0:a);await f.load(),u(f)})()}),o===void 0?l.jsx(pn,{header:"..."}):l.jsx(YE,{store:o})}async function b0(e,t,n){let r=await t.start(n);if(r===void 0)return;let{id:i,no:s,target:a}=r;if(i>0){let o=e.pageCache.getPrevData();if(o){const{phrase:u}=t.entitySheet;o.addItem({id:i,no:s,target:a,phrase:u})}}}function YE({store:e}){const{uq:t,caption:n,main:r,detail:i}=e,s=Z(),a=dh(),{openModal:o,closeModal:u}=oe(),c=Sn(),[d,f]=P.useState(!0),m=zE(i),y=P.useCallback(async function(){b0(s,e,a)},[]);Pt(()=>{y()});async function v(){f(!1),await Ej(3e3);let C=await t.SubmitSheet.submit({id:r.id});if(w(),f(!0),await o(l.jsxs(H,{header:"提交成功",back:"none",children:[l.jsxs("div",{className:"p-3",children:[n," ",l.jsx("b",{children:r.no})," 已提交 ",JSON.stringify(C)]}),l.jsxs("div",{className:"border-top p-3",children:[l.jsx("button",{className:"btn btn-outline-primary",onClick:u,children:"返回"}),l.jsxs("button",{className:"ms-3 btn btn-outline-secondary",onClick:()=>u(!0),children:["新建",n]})]})]}))===!0){const{entitySheet:D}=e;c(`/sheet/${An(D.id)}`,{replace:!0,state:BE++})}else c(-1)}function w(){let{id:C}=r,N=s.pageCache.getPrevData();N&&N.removeItem(D=>D.id===C)}async function j(){await m()}async function g(){let C=`${n} ${r.no} 真的要作废吗？`;await o(l.jsx(lu,{header:"确认",message:C,yes:"单据作废",no:"不作废"}))===!0&&(await e.discard(),w(),c(-1))}let h=we(i._sections),p,S;h.length===0?S="btn btn-primary me-3":(p=l.jsx(fi,{className:"btn btn-primary me",onClick:v,disabled:h.length===0,children:"提交"}),S="btn btn-outline-primary me-3");let b,k=we(r._id);async function _(){await y()===void 0&&await m()}return k===0?b=l.jsx("div",{className:"p-3",children:l.jsx("button",{className:"btn btn-primary",onClick:_,children:"开始录单"})}):b=l.jsxs(l.Fragment,{children:[l.jsx(_E,{main:r}),l.jsx(UE,{detail:i,editable:d}),l.jsxs(Ue,{className:"px-3 py-3 border-top",children:[p,d===!0&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{className:S,onClick:j,children:[l.jsx(J,{name:"plus",className:"me-1"}),"明细"]}),k&&l.jsx("button",{className:"btn btn-outline-primary",onClick:g,children:"作废"})]})]})]}),l.jsx(H,{header:n,children:b})}function WE({entityReport:e}){const{uq:t}=Z(),{id:n,from:r,title:i}=e,s={reportPhrase:n,atomPhrase:r.id,atomId:void 0,dateStart:"2023-10-3",dateEnd:"2023-10-6",params:{a:1}},a=P.useCallback(async(u,c,d)=>{let{$page:f,specs:m}=await t.GetReport.page(u,c,d),y=[],v={};for(let w of f){let j={...w,specs:[]};const{id:g}=j;v[g]=j,y.push(j)}for(let w of m){let{base:j}=w,g=v[j];g!==void 0&&g.specs.push(w)}return y},[]);function o({value:u}){const{id:c,phrase:d,no:f,ex:m,value:y,specs:v}=u;return l.jsxs("div",{className:"",children:[l.jsxs("div",{className:"px-3 py-3 tonwa-bg-gray-2",children:[c," ",d," ",f," ",l.jsx("b",{children:m})," ",y]}),l.jsx("div",{className:"ms-5 border-start",children:v.map(w=>{let{id:j,phrase:g,base:h,value:p,props:S}=w;return l.jsx(Ce,{to:_o("../history",i[0].bud.id,j),children:l.jsxs("div",{className:"d-flex ps-3 pe-3 py-2 border-bottom align-items-center",children:[l.jsx(kE,{phrase:g,props:S}),l.jsxs("div",{className:"flex-grow-1",children:[j," ",g," ",h]}),l.jsx("b",{className:"me-5",children:p}),l.jsx(J,{name:"angle-right"})]})},j)})})]})}return l.jsx(Rn,{header:e.caption??e.name,query:a,param:s,sortField:"id",ViewItem:o,children:l.jsx("div",{className:"p-3 border-bottom",children:e.caption??e.name})})}function HE(e){if(typeof e=="string"){if(e!==":report")debugger;return e}return An(e)}function S0(e){return`report/${HE(e)}`}function QE(){const{report:e}=Fn();let t=rr(e);const n=Z(),{biz:r}=n,i=r.entityIds[t];return{page:l.jsx(WE,{entityReport:i})}}function GE(){const{uq:e}=Z(),{title:t,id:n}=Fn(),r=rr(n),i=rr(t),s={objId:r,title:i};function a({value:o}){let{id:u,value:c,ref:d,plusMinus:f,sheetNo:m,sheetPhrase:y,binPhrase:v}=o;return l.jsx(Ce,{to:_o("../ref",void 0,d),children:l.jsxs("div",{className:"px-3 py-2 d-flex align-items-center",children:[l.jsx("div",{className:"w-8c small text-secondary",children:l.jsx(Mf,{date:u/(1024*1024)*60})}),l.jsx("div",{className:"me-3",children:m}),l.jsxs("div",{className:"flex-grow-1",children:["ref: ",d," plusMinus: ",f," sheetPhrase: ",y," binPhrase: ",v]}),l.jsx("div",{className:"fw-bold",children:c})]})})}return l.jsx(Rn,{header:"流水",query:e.GetHistory,param:s,sortField:"id",ViewItem:a,children:l.jsx("div",{className:"p-3 tonwa-bg-gray-2",children:l.jsx(oi,{id:r})})})}function KE(){const{uq:e}=Z(),{id:t}=Fn(),n=rr(t),{data:r}=Lr([n],async()=>await e.GetSheet.query({id:void 0,detail:n}),qr),{main:[i],details:s,origins:a}=r,{id:o,no:u,i:c}=i;return l.jsxs(H,{header:"追踪单据",children:[l.jsxs("div",{className:"px-3 py-3 tonwa-bg-gray-2 border-bottom",children:[l.jsx("small",{className:"text-secondary",children:"单据编号: "}),l.jsx("b",{children:u}),l.jsx("span",{className:"ms-3 small text-secondary",children:"时间: "}),l.jsx(Mf,{date:o/(1024*1024)*60})]}),l.jsx("div",{className:"px-3 py-2 tonwa-bg-gray-1",children:l.jsx("div",{children:l.jsx(oi,{id:c})})}),l.jsx("div",{className:"border-top",children:s.map(d=>l.jsxs("div",{className:"px-3 py-2 d-flex border-bottom",children:[l.jsx("div",{className:"flex-grow-1",children:l.jsx(oi,{id:d.i})}),l.jsx("div",{className:"fw-bold",children:d.value})]},d.id))}),l.jsxs("div",{className:"px-3 py-2 d-none",children:["orgiins: ",JSON.stringify(a)]})]})}function ay(e,t,n){if(n!==void 0){let r;n.required===!0&&(r="请输入",typeof t=="string"&&(r+=t));let i;const{min:s}=n;s!==void 0&&(i={value:s,message:`最小值${s}`});let a;const{max:o}=n;return o!==void 0&&(a={value:o,message:`最大值${o}`}),{...n,required:r,min:i,max:a}}switch(e){default:return n;case"number":return Object.assign({},n,{valueAsNumber:!0})}}function XE(e){var m;const{inputProps:t,errors:n,type:r,defaultValue:i,right:s,labelClassName:a}=e;let{label:o}=e;const{name:u}=t;let c=n[u],d="form-control ";c&&(d+="is-invalid");let f=l.jsx("input",{...t,className:d,type:r,defaultValue:i});return s!==void 0&&!c&&(f=l.jsxs("div",{className:"input-group",children:[f,l.jsx("span",{className:"input-group-text",children:s})]})),r==="hidden"&&(o=null),l.jsxs(bt,{label:o,labelClassName:a,children:[f,c&&l.jsx("div",{className:"invalid-feedback mt-1",children:(m=c.message)==null?void 0:m.toString()})]})}function bt({label:e,labelClassName:t,children:n,className:r}){return t=t??"form-label col-sm-2 col-3 text-end",l.jsxs("div",{className:e===null?"d-none":"row "+(r??"mb-3"),children:[l.jsx("label",{className:t,children:e}),l.jsx("div",{className:"col",children:n})]})}function Ur(e){let{rows:t}=e;return l.jsx(l.Fragment,{children:t.map((n,r)=>l.jsx(ZE,{row:n,...e},r))})}function ZE({row:e,register:t,errors:n,labelClassName:r,clearErrors:i,setValue:s}){var j;const{label:a,inputs:o}=e;if(t&&o!==void 0)return l.jsx(bt,{label:a,labelClassName:r,children:o.map((g,h)=>{const{label:p,name:S,type:b,options:k,readOnly:_}=g;if(b==="checkbox")return l.jsxs("label",{className:"form-check-label me-3",children:[l.jsx("input",{className:"form-check-input me-1",type:"checkbox",readOnly:_,...t(S)}),p??S]},h);{let C=ay(b,p,k);({...t(S,C)})}})});const{radios:u}=e;if(u!==void 0){const{name:g,default:h,readOnly:p}=e;return l.jsx(bt,{label:a,children:u.map((S,b)=>{const{label:k,value:_}=S;return l.jsxs("label",{className:"form-check-label me-3",children:[l.jsx("input",{className:"form-check-input me-1",defaultChecked:_===h,readOnly:p,value:_,type:"radio",...t(g)}),k??g]},b)})})}const{items:c}=e;if(c!==void 0){const{name:g,multiple:h,default:p,placeHolder:S,options:b,readOnly:k}=e;let _=n[g],C="form-select ";_&&(C+="is-invalid");const N=`
`;return b!==void 0&&b.required===!0&&(b.validate=D=>{let E=D!==N;return console.error("select "+D+" ret "+E),E}),l.jsxs(bt,{label:a,labelClassName:r,children:[l.jsxs("select",{multiple:h,className:C,...t(g,b),children:[p===void 0&&l.jsx("option",{selected:!0,disabled:!0,value:N,children:S??"请选择"+a}),c.map((D,E)=>{const{label:A,value:O}=D;return l.jsx("option",{value:O,selected:p===O,children:A},E)})]}),_&&l.jsx("div",{className:"invalid-feedback mt-1",children:(j=_.message)==null?void 0:j.toString()})]})}const{atom:d}=e;if(d!==void 0){let{name:g,options:h}=e,p=n[g];return l.jsx(JE,{row:e,label:a,error:p,inputProps:t(g,h),setValue:s,clearErrors:i})}const{name:f,type:m,options:y,readOnly:v,right:w}=e;switch(m){default:const g=y.required===!0?l.jsx("b",{className:"text-primary",children:a}):a;let h=ay(m,a,y);return l.jsx(XE,{label:g,type:m,errors:n,labelClassName:r,inputProps:t(f,h),defaultValue:y==null?void 0:y.value,right:w});case"submit":return l.jsx(bt,{children:l.jsx("input",{type:"submit",disabled:y==null?void 0:y.disabled,readOnly:v,className:e.className??"btn btn-primary",value:a??"提交"})})}}function JE({row:e,label:t,error:n,inputProps:r,clearErrors:i,setValue:s}){var S;const a=Z(),{uq:o}=a,u=cu(),{name:c,atom:d,default:f,readOnly:m}=e,[y,v]=P.useState(f);async function w(){if(m===!0)return;i==null||i(c);let b=await u(d);if(b===void 0)return;const{id:k}=b;s(c,k),v(k)}function j({value:b}){const{no:k,ex:_}=b;return l.jsxs(l.Fragment,{children:[_,"   ",l.jsx("small",{className:"text-muted",children:k})]})}let g;if(y===void 0){let{placeHolder:b}=e;b||(b="点击选择"),g=l.jsxs("span",{className:"text-black-50",children:[l.jsx(J,{name:"hand"})," ",b]})}else g=l.jsx(an,{uq:o,id:y,Template:j});let h="form-control ";m!==!0&&(h+=" cursor-pointer ");let p;return n&&(h+="is-invalid",p=l.jsx("div",{className:"invalid-feedback mt-1",children:(S=n.message)==null?void 0:S.toString()})),l.jsxs(bt,{label:t,children:[l.jsxs("div",{className:h,onClick:w,children:[g,"  ",l.jsx("input",{name:c,type:"hidden",...r})]}),p]})}class eI{constructor(t,n){x(this,"start");x(this,"items");this.start=t,this.items=n}getItem(t,n){return this.items.find(t)}removeItem(t,n){let r=this.items.findIndex(t);r>=0&&this.items.splice(r,1)}addItem(t){this.items.unshift(t)}}function Rn(e){if(P.useContext(Wf)===!0)return l.jsx(ly,{...e,isPopFirst:!1,isModal:!0});return l.jsx(n,{...e});function n(r){const i=ix();return l.jsx(ly,{...r,isPopFirst:i==="POP",isModal:!1})}}function ly(e){let{query:t,param:n,sortField:r,pageStart:i,pageSize:s,pageMoreSize:a,ViewItem:o,onItemClick:u,onItemSelect:c,children:d,isPopFirst:f,isModal:m,Top:y,Bottom:v,none:w,itemKey:j}=e;const[g,h]=P.useState(void 0),[p,S]=P.useState(!1),b=P.useRef({param:{...n},pageStart:i,isPopFirst:f,querying:!1,items:void 0,allLoaded:!1}),{current:k}=b;nI(k.param,n)===!1&&(k.allLoaded=!1),s=s??20,a=a??5;const _=Z(),C=P.useCallback(async function(z=!1){var Ye;if(n===void 0){h(null),k.items=null;return}let Y=await tI(n),{pageStart:M,querying:U,isPopFirst:K,items:le,allLoaded:fe}=k;if(fe===!0)return;if(K===!0){let De=_.pageCache.getCache();if(De&&m===!1&&((Ye=De.data)==null?void 0:Ye.start)===M&&le!==void 0)return}if(U===!0||p===!0)return;S(!0),k.querying=!0;let Nt,xe;if(k.isPopFirst===!0){setTimeout(()=>{k.isPopFirst=!1},100);let De=_.pageCache.getCache(),$t=De==null?void 0:De.data;if(M===i&&$t&&m===!1){let{items:Un}=$t;xe=Un,De.data=void 0}}let Be;if(xe)Be=xe.length;else{let $t=(z===!0?a:s)+1;if(typeof t=="function")xe=await t(Y,M,$t);else{let Un=await t.page(Y,M,$t),{$page:$r}=Un;xe=$r}Be=xe.length,Be<$t?k.allLoaded=!0:(xe.splice(Be-1,1),Be--)}if(Nt=M===void 0||le===void 0?xe:[...le,...xe],h(Nt),k.items=Nt,Be>0&&(k.pageStart=xe[Be-1][r]),m===!1){let De=_.pageCache.getCache();De!==void 0&&(De.data=new eI(M,Nt))}S(!1),k.querying=!1},[n]);Pt(()=>{C()}),P.useEffect(()=>{k.isPopFirst!==!0&&(k.pageStart=void 0,C())},[n]),m===!1&&(_.onCloseModal=()=>{let q=_.pageCache.getCache();if(q===void 0)return;let{data:z}=q;if(z===void 0)return;let{items:Y}=z,M=[...Y];h(M),k.items=M});let N=!1;function D(q){setTimeout(()=>{let z=document.getElementById(q);z==null||z.scrollIntoView(),N=!1},20)}async function E(q){k.isPopFirst!==!0&&N!==!0&&(N=!0,D("$$bottom"),await C(!0))}o=o??function({value:q}){return l.jsx("div",{className:"px-3 py-2",children:JSON.stringify(q)})};let A;y&&(A=l.jsx(y,{items:g}));let O;v&&(O=l.jsx(v,{items:g}));let T;return p===!0&&g!==void 0?T=l.jsxs("div",{children:[l.jsx(as,{className:"m-3 text-info"}),l.jsx("div",{id:"$$bottom"})]}):g&&(g.length>0?T=l.jsx(l.Fragment,{children:l.jsx(Me,{items:g,ViewItem:o,onItemClick:u,onItemSelect:c,itemKey:j})}):T=w??l.jsx("div",{className:"m-3",children:"-"})),l.jsxs(H,{...e,onScrollBottom:E,children:[l.jsx("div",{id:"$$top"}),d,A,T,O]})}async function tI(e){if(!e)return e;let t={},n=[],r=[];for(let s in e){let a=e[s];Cx(a)===!0?(n.push(s),r.push(a)):t[s]=a}let i=r.length;if(i>0){let s=await Promise.all(r);for(let a=0;a<i;a++){let o=n[a];t[o]=s[a]}}return t}function nI(e,t){if(e===void 0)return t===void 0;if(t===void 0)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i of n)if(e[i]!==t[i])return!1;return!0}function On({name:e,className:t,iconClassName:n,compact:r}){let i="d-inline-block ";return r!==!0&&(i+="text-center w-1-5c "),t!==void 0&&(i+=t),l.jsx("div",{className:i,children:l.jsx("b",{children:l.jsx("i",{className:`bi-${e} `+(n??"")})})})}const oy="btn btn-sm me-2 btn-";function fh({className:e,color:t,onClick:n,children:r,tag:i}){let s;return t!==void 0?s=oy+t:e===void 0?s=oy+"primary":s=e,ne.createElement(i??(n===void 0?"div":"button"),{className:s,onClick:n},r)}function rI(e){return l.jsx(fh,{...e,children:l.jsx(On,{name:"plus-lg",compact:!0})})}function hh({onUserAdded:e}){let{openModal:t}=oe();async function n(){let r=l.jsx("div",{className:"my-3",children:Ge("searchUser")}),i=await t(l.jsx(Rx,{header:Ge("user"),top:r}));if(i===void 0)return;let s=await t(l.jsx(iI,{user:i,assigned:""}));s.trim().length===0&&(s=void 0),await e(i.id,s)}return l.jsxs("button",{className:"btn btn-sm btn-link",onClick:n,children:[l.jsx(J,{name:"plus",className:"me-1"}),Ge("new")]})}function iI({user:e,assigned:t}){const{register:n,handleSubmit:r,formState:{errors:i}}=lr({mode:"onBlur"}),{closeModal:s}=oe(),[a,o]=P.useState(t),u=[{name:"assigned",label:"备注名",type:"string",options:{value:t,onChange:c}},{type:"submit",label:"提交",options:{disabled:a===t}}];function c(f){o(f.currentTarget.value)}async function d(f){s(a)}return l.jsx(H,{header:"用户",children:l.jsx("div",{className:"p-3",children:l.jsxs("form",{className:"container",onSubmit:r(d),children:[l.jsx(bt,{label:"用户",children:l.jsx(Kf,{user:e})}),l.jsx(Ur,{rows:u,register:n,errors:i})]})})})}function j0({right:e}){let t=pt(),n=we(t.user);return l.jsxs(Ue,{className:"px-3 py-3 border-bottom align-items-center",children:[l.jsxs("span",{children:["[ ",l.jsx(J,{name:"user-circle",className:"me-2 text-danger"})," ",Ge("self")," - ",l.jsx(Dr,{children:n.name})," ]"]}),l.jsx("span",{children:e})]})}function mh({siteRole:e,userSite:t}){let n=Z(),{openModal:r,closeModal:i}=oe(),[s,a]=P.useState(t),{name:o,icon:u,nick:c,assigned:d}=s,f=Ge("user"),m=Ge("admin"),y=Ge("owner"),v;c&&(v=l.jsx("span",{className:"d-inline me-3",children:c}));let w=d?l.jsxs(l.Fragment,{children:[l.jsx("div",{children:d}),c?l.jsxs(Dr,{children:[v," ",f,": ",o]}):o]}):c?l.jsxs(l.Fragment,{children:[v," ",l.jsxs(Dr,{children:[f,": ",o]})]}):o;function j(){function g(){let h=we(n.user),{user:p,isOwner:S,isAdmin:b,addBy:k}=s,_;S===!0?_=y:b===!0?_=m:_=f;async function C(E){let{assigned:A}=E;await e.addUser(p,A),a({...s,assigned:A}),i()}function N(){let E,A;if(S===!0)if(k===h.id)E=Xn.owner,A=y;else return null;else b===!0?(E=Xn.admin,A=m):(E=Xn.user,A=f);async function O(){let q=up(Ge("userReallyDelete"),A,s.name);await r(l.jsx(lu,{header:"确认",message:q,yes:"删除",no:"不删除"}))===!0&&(await e.delAdmin(p,E),i())}let T=up(Ge("deleteThe"),A);return l.jsx("button",{onClick:O,className:"btn btn-sm btn-outline-primary",children:T})}function D(){if(S===!0||b===!0)return null;const E=" my-2 me-4 w-min-6c ",A=" form-check-input ",O=" me-2 ";let{biz:T}=n,{rolesAtom:q}=t,z=we(q);return l.jsx(ht,{label:"角色",children:T.roles.map((Y,M)=>{let{name:U,caption:K,phrase:le}=Y,fe=(z==null?void 0:z.findIndex(xe=>xe===le))>=0;async function Nt(xe,Be){if(await e.setUserRole(p,le,Be),Be===!0)z.push(le);else{let Ye=z.findIndex(De=>De===le);Ye>=0&&z.splice(Ye,1)}ae(q,[...z])}return l.jsx(Af,{onCheckChanged:Nt,labelClassName:E,inputClassName:A,gapClassName:O,defaultChecked:fe,name:U,children:K??U},M)})})}return l.jsx(H,{header:_,children:l.jsxs(hi,{values:s,className:"mx-3",children:[l.jsx(ht,{children:l.jsxs(Ue,{className:"p-3 tonwa-bg-gray-2",children:[l.jsx("div",{children:w}),l.jsx(N,{})]})}),l.jsx(Na,{name:"assigned",label:Ge("assigned")}),l.jsx(ht,{contentContainerClassName:" my-3",children:l.jsx(mi,{onSubmit:C,children:l.jsx("div",{className:"mx-5",children:Ge("save")})})}),l.jsx("div",{className:"mt-5 mb-3",children:l.jsx(D,{})})]})})}r(l.jsx(g,{}))}return l.jsxs(Ue,{className:"my-2",children:[l.jsx(au,{className:"w-2c h-2c me-3",src:u}),l.jsx("div",{children:w}),l.jsx("div",{className:"cursor-pointer text-info",onClick:j,children:l.jsx(J,{name:"pencil"})})]})}const ph={cnCard:" card mt-3 mx-2 "};function k0({siteRole:e}){let t=pt(),{openModal:n,closeModal:r}=oe(),i=we(t.user),{onOwnerAdded:s}=e,a=we(e.unitRoles),{owners:o}=a,u=new Zf(o,"site"),c=Ge("owner");function d({value:f}){function m(){function y(){async function v(){await e.quitOwner(),r(),r()}return l.jsx(H,{header:c,children:l.jsx("div",{className:"w-20c rounded border px-3 py-4 mx-auto my-3 text-center",children:l.jsxs(Ue,{children:[l.jsx(J,{name:"question-circle-o",size:"3x",className:"text-danger me-3"}),l.jsxs("div",{className:"text-start",children:[l.jsx("b",{children:Ge("ownerReallyQuit")}),l.jsx("br",{}),l.jsx("small",{className:"text-muted",children:Ge("ownerLost")}),l.jsx("br",{}),l.jsx("br",{}),l.jsx("button",{className:"btn btn-outline-primary",onClick:v,children:Ge("ownerConfirmQuit")})]}),l.jsx("span",{})]})})})}n(l.jsx(y,{}))}if(f.user===i.id){let y;return o.length>1&&(y=l.jsx("span",{className:"cursor-pointer",onClick:m,children:l.jsx(J,{name:"times",className:"text-info"})})),l.jsx(j0,{right:y})}return l.jsx("div",{className:"px-3 py-2",children:l.jsx(mh,{userSite:f,siteRole:e})})}return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:ph.cnCard,children:[l.jsx("div",{className:"card-header pe-0 py-0",children:l.jsxs(Ue,{className:"align-items-center",children:[l.jsx("span",{children:c}),l.jsx(hh,{onUserAdded:s})]})}),l.jsx(Jf,{context:u,none:l.jsx(Xf,{}),ViewItem:d})]}),l.jsxs("ul",{className:"small text-muted mt-2 mb-5 mx-3",children:[l.jsx("li",{children:Ge("ownerMemo1")}),l.jsx("li",{children:Ge("ownerMemo2")})]})]})}function sI({siteRole:e}){let t=Z();const{biz:n}=t;let r=we(e.unitRoles),{users:i}=r,s=new Zf(i,(u,c)=>u.user===c.user);function a({value:u}){let{rolesAtom:c,isAdmin:d,isOwner:f,user:m}=u,y=we(t.user),v=we(c);if(m===y.id)return null;let w=n.roles;function j({children:h}){return l.jsxs("label",{className:"me-5",children:[l.jsx("input",{type:"checkbox",className:"form-check-input",checked:!0,disabled:!0}),l.jsx("span",{children:h})]})}let g=l.jsx("div",{className:"ms-4 mt-2 form-check form-check-inline",children:f===!0?l.jsx(j,{children:"roleT('owner')"}):d===!0?l.jsx(j,{children:"roleT('admin')"}):l.jsx(l.Fragment,{children:v.map(h=>{let p=w.find(b=>b.phrase===h),S;if(p===void 0)S="role is not defined in biz";else{let{name:b,caption:k}=p;S=k??b}return l.jsxs("span",{className:"d-inline-block w-min-6c me-3",children:[l.jsx(J,{name:"user",className:"text-info me-1"})," ",S]},h)})})});return l.jsxs("div",{className:"px-3 py-2",children:[l.jsx(mh,{userSite:u,siteRole:e}),g]})}async function o(u,c){let d=await e.addUser(-u,c);d===void 0&&console.error("uqUnit.addUser error",u,c);let{items:f,atomItems:m}=s,y=f.findIndex(w=>w.user===u);y>=0&&f.splice(y,1);let v={...d,id:0,user:d.id,unit:0,admin:0,rolesAtom:Ie([])};c!==void 0&&(v.assigned=c),f=[v,...f],ae(m,f)}return l.jsx(l.Fragment,{children:l.jsxs("div",{className:ph.cnCard,children:[l.jsx("div",{className:"card-header pe-0 py-0",children:l.jsxs(Ue,{className:"align-items-center",children:[l.jsx("span",{children:Ge("user")}),l.jsx(hh,{onUserAdded:o})]})}),l.jsx(Jf,{context:s,ViewItem:a,none:l.jsx(Xf,{})})]})})}function C0(){var t;const e=Z();return _0((t=e.uqSites)==null?void 0:t.userSite)}function aI(){const e=Z();return _0(e.uqSites.userSite0)}function _0(e){const t=Z();let n=Ie({});if(P.useEffect(()=>{e!==void 0&&s()}),e===void 0)return{};let r=e.siteId,i=t.uqSites.uqMan;async function s(){try{let b=await o();if(b===void 0)return;ae(n,b)}catch(b){console.error(b)}}let a;async function o(){let b=[],k=[],_={},N=await i.entities.$role_site_users.query({site:r});if(N===void 0)return;let{users:D,roles:E}=N,A=[];for(let q of D){let z={...q,rolesAtom:Ie([]),permits:{}},{id:Y,admin:M}=q;_[Y]=z;let U=z.isAdmin=(M&1)===1;(z.isOwner=(M&2)===2)===!0?b.push(z):U===!0?k.push(z):A.push(z)}let O={},T={};for(let q of E){let{user:z,role:Y}=q,M=_[z];if(M!==void 0){let{rolesAtom:K}=M,le=de(K);le===void 0&&(le=[]),le.push(Y),ae(K,le)}let U=O[Y];U===void 0&&(O[Y]=U=[],T[Y]=U),U.push(M)}return{owners:b,admins:k,users:A,usersOfRole:T}}async function u(){await(a==null?void 0:a()),await s()}async function c(b,k){let _=Xn.admin;await f(b,_,k)}async function d(b,k){let _=Xn.owner|Xn.admin;await f(b,_,k)}async function f(b,k,_){await j(-b,k,_),u()}async function m(){await p(),await u()}async function y(b,k){await S(b,k),u()}async function v(b,k){return await i.entities.$role_site_add_user.submit({site:r,user:b,assigned:k}),await g(b)}async function w(b,k,_){await h(b,k,_)}async function j(b,k,_){return await i.entities.$role_site_add_admin.submit({site:r,user:b,admin:k,assigned:_}),await g(b)}async function g(b){let k=await i.syncUser(b);return i.idCacheDel(k.id),k}async function h(b,k,_){let C=_===!0?"add":"del";await i.entities.$role_site_user_role.submit({site:r,user:b,action:C,role:k})}async function p(){await i.entities.$role_site_quit_owner.submit({site:r})}async function S(b,k){await i.entities.$role_site_del_admin.submit({site:r,user:b,admin:k})}return{userSite:e,quitOwner:m,unitRoles:n,onAdminAdded:c,onOwnerAdded:d,addUser:v,delAdmin:y,setUserRole:w}}function N0({siteRole:e}){const t=Z();let{onAdminAdded:n}=e,r=we(t.user),i=we(e.unitRoles),{admins:s}=i,a=new Zf(s,"site"),o=Ge("admin");function u({value:c}){return c.user===r.id?l.jsx(j0,{}):l.jsx("div",{className:"px-3 py-2",children:l.jsx(mh,{userSite:c,siteRole:e})})}return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:ph.cnCard,children:[l.jsx("div",{className:"card-header pe-0 py-0",children:l.jsxs(Ue,{className:"align-items-center",children:[l.jsx("span",{children:o}),l.jsx(hh,{onUserAdded:n})]})}),l.jsx(Jf,{context:a,none:l.jsx(Xf,{}),ViewItem:u})]}),l.jsxs("ul",{className:"small text-muted mt-2 mb-5 mx-3",children:[l.jsx("li",{children:Ge("adminMemo1")}),l.jsx("li",{children:Ge("adminMemo2")})]})]})}function lI({admin:e,viewTop:t}){let n=C0(),{isOwner:r,isAdmin:i}=n.userSite;return l.jsxs(H,{header:Ge(e===Xn.admin?"admin":"owner"),children:[t,r===!0&&l.jsxs(l.Fragment,{children:[l.jsx(k0,{siteRole:n}),l.jsx(N0,{siteRole:n})]}),i===!0&&l.jsx(sI,{siteRole:n})]})}function oI({onClick:e,content:t,icon:n,iconColor:r}){return l.jsxs(Ue,{className:"p-3 cursor-pointer align-items-center",onClick:e,children:[l.jsx(J,{name:n??"cog",fixWidth:!0,className:" me-3 "+(r??" text-primary "),size:"lg"}),t,l.jsx(J,{name:"angle-right"})]})}function fu({value:e}){let{no:t,ex:n}=e;return l.jsxs(l.Fragment,{children:[n??"默认机构","   ",t]})}function uI(){const e=Z(),{openModal:t,closeModal:n}=oe(),r=l.jsx("button",{className:"btn btn-sm btn-success me-1",onClick:o,children:"新增"}),[i,s]=P.useState(void 0);if(Pt(()=>{(async function(){const{uqMan:c}=e;let f=await c.entities.$sites.page({},void 0,100);s(f.$page)})()}),i===void 0)return l.jsx(pn,{});function a({value:c}){return l.jsx("div",{className:"px-3 py-2",children:l.jsx(fu,{value:c})})}return l.jsx(H,{header:"机构管理",right:r,children:l.jsx(Me,{items:i,ViewItem:a})});function o(){t(l.jsx(u,{}))}function u(){const[c,d]=P.useState(void 0);Pt(()=>{(async function(){let j=await e.uq.IDNO({ID:"$site"});d(j)})()});const{register:f,handleSubmit:m,formState:{errors:y}}=lr({mode:"onBlur"});async function v(j){let g={id:void 0,no:c,ex:j.ex},h=await e.uq.ActID({ID:"$site",value:g});g.id=h,s([g,...i]),n()}if(c===void 0)return l.jsx(pn,{});const w=[{name:"no",label:"编号",type:"text",options:{maxLength:20,disabled:!0,value:c}},{name:"ex",label:"名称",type:"text",options:{maxLength:50}},{type:"submit",label:"提交"}];return l.jsx(H,{header:"新增机构",children:l.jsx("form",{onSubmit:m(v),className:"container my-3 pe-5",children:l.jsx(Ur,{rows:w,register:f,errors:y})})})}}function cI(){const{openModal:e}=oe(),t=aI();function n(){e(l.jsx(uI,{}))}let{isOwner:r}=t.userSite,i=r===!0?l.jsxs(l.Fragment,{children:[l.jsx(ve,{}),l.jsx(k0,{siteRole:t}),l.jsx(N0,{siteRole:t})]}):void 0;return l.jsxs(H,{header:"系统管理",children:[l.jsx(oI,{content:"机构管理",onClick:n}),i,l.jsx(ve,{})]})}const D0="初始设置",dI="currency",fI="startsummonth",hI="startfiscalmonth",mI="startfiscalday",pI={[dI]:{},[fI]:{min:1,max:12},[hI]:{min:1,max:12},[mI]:{min:1,max:28}};function yI(){const e=Z(),{uq:t,biz:n}=e,{data:r}=Lr([],i,qr);return l.jsxs(H,{header:D0,children:[l.jsx(Me,{items:r,ViewItem:s,onItemClick:void 0}),l.jsx(ve,{})]});async function i(){let a=await t.GetSiteSetting.query({});const{buds:o}=d0(void 0,a),u=n.entities.sitesetting,{buds:c,props:d}=u;return d.map(m=>{const{id:y,name:v}=m,w=`${u.name}.${v}`,j=pI[w],g=o[y];return{bud:c[y],value:g,options:j}})}function s({value:a}){const{value:o,options:u,bud:c}=a;let d;return l.jsx(p0,{id:d,bizBud:c,value:o==null?void 0:o.value,options:u})}}const E0="admin-sum-group";rt.SumGroup;function vI(){const e=uu(),{entity:t,searchAtoms:n}=e;let r=t;const i=l.jsx(Ce,{className:"btn btn-sm btn-success me-2",to:`../${lh(r.name)}`,children:l.jsx(J,{name:"plus"})});return l.jsx(s,{});function s(){let a=r.caption??r.name,o={atom:r.phrase,key:void 0};function u({value:d}){async function f(){return l.jsx(gI,{group:d})}return l.jsx(mN,{modal:f,children:l.jsx("div",{className:"px-3 py-2",children:l.jsx(kt,{value:d})})})}const c=l.jsxs("div",{className:"m-3 small text-muted",children:["[无",a,"]"]});return l.jsx(Rn,{header:`${a}列表`,right:i,query:n,param:o,sortField:"id",ViewItem:u,none:c})}}function gI({group:e}){const{uq:t}=Z(),n=l.jsx("div",{className:"m-3 small text-muted",children:"[无]"});function r({value:i}){async function s(a,o){let u=o===!0?1:-1;await t.SetSumGroupPerson.submit({group:e.id,person:i.id,act:u})}return l.jsx(Af,{labelClassName:"d-flex px-3 py-2",onCheckChanged:s,defaultChecked:i.selected===1,children:l.jsx(kt,{value:i})})}return l.jsx(Rn,{header:"成员",query:t.SearchGroupPersons,param:{group:e.id,key:void 0},sortField:"id",ViewItem:r,none:n,children:l.jsx("div",{className:"p-3 tonwa-bg-gray-2",children:l.jsx(kt,{value:e})})})}const I0="admin-sum-formula",et={caption:"标题",person:"个人",group:"小组",sourceSubject:"源科目",peronPost:"岗位",groupPost:"职能组",sumSubject:"科目",ratio:"换算率",formula:"公式",input:"请输入"},xI={postAtom:rt.SumPersonPost,postLabel:et.peronPost,header:et.person},wI=[["subject",et.sourceSubject],["post",et.peronPost],["sumSubject",et.sumSubject]],bI={postAtom:rt.SumGroupPost,postLabel:et.groupPost,header:et.group},SI=[["subject",et.sourceSubject],["post",et.groupPost],["sumSubject",et.sumSubject]];function jI(){const{uq:e}=Z(),{openModal:t,closeModal:n}=oe(),{data:[r,i]}=Lr("formulas",async()=>{let{ret:f}=await e.GetAllFormula.query({}),m=[],y=[];for(let v of f)switch(v.formulaType){case Si.person:m.push(v);break;case Si.group:y.push(v);break}return[m,y]},qr);function s(f){return f.map(([m,y],v)=>l.jsxs("div",{className:"me-5",children:[l.jsx("div",{className:"small text-secondary my-1",children:m}),l.jsx(an,{uq:e,id:y,Template:P0})]},v))}function a({value:f,arr:m}){const{caption:y,ratio:v}=f;return l.jsxs("div",{className:"px-3 py-2 d-flex",children:[l.jsxs("div",{className:"flex-grow-1",children:[l.jsx("div",{children:l.jsx("b",{children:y})}),l.jsx("div",{className:"d-flex",children:s(m)})]}),l.jsx("div",{className:"fs-4 me-5",children:v})]})}function o({items:f,arr:m,caption:y,type:v}){const[w,j]=P.useState(f);function g(_){async function C(){let{id:D}=_;await e.ChangeSumFormula.submit({id:D,start:void 0,end:void 0,ratio:void 0});let E=w.findIndex(A=>A.id===D);E>=0&&w.splice(E,1),j([...w]),n()}async function N(D,E){let{id:A}=_,O=w.findIndex(Y=>Y.id===A);if(O<0)return;let T=w[O];async function q(){await e.ChangeSumFormulaCaption.submit({id:A,caption:E}),T.caption=E}async function z(){let Y=await e.ChangeSumFormula.submit({id:A,start:void 0,end:void 0,ratio:E});T.id=Y.id,T.ratio=E}switch(D){case"caption":await q();break;case"ratio":await z();break}w.splice(O,1,T),j([...w])}t(l.jsx(CI,{value:_,onInvalid:C,onValueChanged:N,arr:m}))}function h({value:_}){const C=m.map(([N,D])=>[D,_[N]]);return l.jsx(a,{value:_,arr:C})}const p=" px-3 pt-2 pb-2 tonwa-bg-gray-2 small d-flex align-items-end";async function S(_){const C={..._,formulaType:v};let{id:N}=await e.SaveSumFormula.submit(C);C.id=N,w.unshift(C),j([...w]),n()}function b(){const _=v===Si.person?xI:bI;t(l.jsx(kI,{onSubmit:S,..._}))}function k(){return l.jsxs("div",{className:p,children:[l.jsx("div",{className:"flex-grow-1",children:y}),l.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:b,children:l.jsx(J,{name:"plus"})})]})}return l.jsxs(l.Fragment,{children:[l.jsx(k,{}),l.jsx(Me,{items:w,ViewItem:h,onItemClick:g})]})}const{formula:u,person:c,group:d}=et;return l.jsxs(H,{header:u,children:[l.jsx(o,{caption:c+u,type:Si.person,items:r,arr:wI}),l.jsx(ve,{className:"mb-3"}),l.jsx(o,{caption:d+u,type:Si.group,items:i,arr:SI})]})}function kI({postAtom:e,postLabel:t,header:n,onSubmit:r}){const{input:i,caption:s,sourceSubject:a,sumSubject:o,ratio:u}=et,c=[{name:"caption",label:et.caption,type:"text",options:{maxLength:100,required:i+s}},{name:"subject",label:et.sourceSubject,atom:rt.Subject,options:{required:i+a}},{name:"post",label:t,atom:e,options:{required:i+t}},{name:"sumSubject",label:et.sumSubject,atom:rt.Subject,options:{required:i+o}},{name:"ratio",label:et.ratio,type:"number",options:{required:i+u}},{type:"submit"}],{register:d,handleSubmit:f,formState:{errors:m},clearErrors:y,setValue:v}=lr({mode:"onBlur"});return l.jsx(H,{header:n+et.formula,children:l.jsx("form",{onSubmit:f(r),className:"container my-3 pe-5",children:l.jsx(Ur,{rows:c,setValue:v,clearErrors:y,register:d,errors:m})})})}function CI({value:e,arr:t,onInvalid:n,onValueChanged:r}){const{uq:i}=Z();async function s({name:o,value:u,preValue:c},d){await r(o,u)}const{caption:a}=e;return l.jsxs(H,{header:a??et.formula,children:[l.jsxs(qx,{className:"container",values:e,onValuesChanged:s,labelSize:3,children:[l.jsx(Na,{label:et.caption,name:"caption",placeholder:"公式标题"}),l.jsx(ve,{}),t.map((o,u)=>{const[c,d]=o,f=e[c];return l.jsxs(ne.Fragment,{children:[l.jsx(vd,{label:d,children:l.jsx(an,{uq:i,id:f,Template:P0})}),l.jsx(ve,{})]},u)}),l.jsx(vk,{label:et.ratio,name:"ratio"}),l.jsx(ve,{})]}),l.jsx("div",{className:"text-end p-3",children:l.jsx(fi,{className:"btn btn-sm btn-outline-primary",onClick:n,children:l.jsx(J,{name:"trash"})})})]})}function P0({value:e}){const{no:t,ex:n}=e;return l.jsxs(l.Fragment,{children:[n,"   ",l.jsx("small",{className:"text-muted",children:t})]})}const hu={atomName:rt.Subject,NOLabel:void 0,exLabel:void 0};function _I(){let{page:e}=qa(hu);return e}function uy(){let{page:e}=$a(hu);return e}function NI(){let e=Object.assign({},hu,{ViewItemAtom:kt,top:void 0}),{page:t}=La(e);return t}const DI={name:hu.atomName,pageNew:l.jsx(_I,{}),pageEdit:l.jsx(uy,{}),pageList:l.jsx(NI,{}),pageView:l.jsx(uy,{}),ViewItem:kt},mu={atomName:rt.SumPersonPost,NOLabel:void 0,exLabel:void 0};function EI(){let{page:e}=qa(mu);return e}function cy(){let{page:e}=$a(mu);return e}function II(){let e=Object.assign({},mu,{ViewItemAtom:kt,top:void 0}),{page:t}=La(e);return t}const PI={name:mu.atomName,pageNew:l.jsx(EI,{}),pageEdit:l.jsx(cy,{}),pageList:l.jsx(II,{}),pageView:l.jsx(cy,{}),ViewItem:kt},pu={atomName:rt.SumGroupPost,NOLabel:void 0,exLabel:void 0};function AI(){let{page:e}=qa(pu);return e}function dy(){let{page:e}=$a(pu);return e}function OI(){let e=Object.assign({},pu,{ViewItemAtom:kt,top:void 0}),{page:t}=La(e);return t}const MI={name:pu.atomName,pageNew:l.jsx(AI,{}),pageEdit:l.jsx(dy,{}),pageList:l.jsx(OI,{}),pageView:l.jsx(dy,{}),ViewItem:kt},yh="admin-achieve",vh="业绩设置";function FI(){const e=Z();let t=[{path:I0,caption:"公式"},{path:E0,caption:"销售小组"}],n=[DI,PI,MI];return l.jsxs(H,{header:vh,children:[l.jsx(ve,{sep:3}),t.map((r,i)=>{let{path:s,caption:a}=r;return l.jsxs(ne.Fragment,{children:[l.jsx(Ce,{to:`../${s}`,className:"px-3 py-2 border-bottom align-items-center",children:a}),l.jsx(ve,{})]},i)}),n.map((r,i)=>{const{name:s,caption:a}=e.biz.entities[r.name];return l.jsxs(ne.Fragment,{children:[l.jsx(Ce,{to:`../${Ra(s)}`,className:"px-3 py-2 border-bottom align-items-center",children:a}),l.jsx(ve,{})]},i)})]})}const TI=l.jsxs(l.Fragment,{children:[l.jsx(ie,{path:yh,element:l.jsx(FI,{})}),l.jsx(ie,{path:E0,element:l.jsx(vI,{})}),l.jsx(ie,{path:I0,element:l.jsx(jI,{})})]}),gh="admin-user",xh="用户管理";function RI(){const{uq:e}=Z(),{openModal:t}=oe(),[n,r]=P.useState(void 0);Pt(()=>{(async function(){let u=await i(void 0);r(u)})()});async function i(u){let{users:c,atoms:d}=await e.GetIxMySum.query({userSite:u}),f=[],m={};for(let{tonwaUser:y,userSite:v}of c){let w={tonwaUser:y,userSite:v,persons:[],groups:[]};m[v]=w,f.push(w)}for(let{userSite:y,atom:v,phrase:w,no:j,ex:g}of d){let h=m[y],p;switch(w){default:debugger;break;case"person":p=h.persons;break;case"sumgroup":p=h.groups;break}p.push({id:v,no:j,ex:g})}return f}async function s(u){let[c]=await i(u),d=n.findIndex(f=>f.userSite===u);d<0?n.unshift(c):n.splice(d,1,c),r([...n])}async function a(){let u=await t(l.jsx(Rx,{}));if(!u)return;let{userSite:c}=await e.UserSiteFromTonwaUser.submit({tonwaUser:u.id}),[d]=await i(c);await t(l.jsx(fy,{userItems:d,onChanged:s}))}function o({value:u}){const{userSite:c,persons:d,groups:f}=u;function m({caption:v,items:w}){return w.length===0?null:l.jsxs("div",{className:"bg-white",children:[l.jsx(A0,{caption:v,onEdit:void 0}),l.jsx(Me,{items:w,className:"d-flex",ViewItem:O0,itemKey:j=>j.id})]})}async function y(){let[v]=await i(c);await t(l.jsx(fy,{userItems:v,onChanged:s}))}return l.jsxs("div",{className:"pt-3 mb-3 border-bottom bg-white",children:[l.jsxs(Ue,{className:"px-3 pb-3",children:[l.jsx(M0,{uq:e,userSite:c}),l.jsx("div",{className:"text-info cursor-pointer",onClick:y,children:l.jsx(J,{name:"pencil"})})]}),l.jsx(m,{caption:"个人",items:d}),l.jsx(m,{caption:"小组",items:f})]})}return l.jsx(H,{header:xh,right:l.jsx(rI,{onClick:a}),children:l.jsx("div",{className:"tonwa-bg-gray-3",children:l.jsx(Me,{items:n,ViewItem:o,itemKey:u=>u.userSite})})})}function A0({caption:e,onEdit:t}){const n=" tonwa-bg-gray-1 small d-flex align-items-end";let r;return t!==void 0&&(r=l.jsx("div",{className:"text-primary cursor-pointer py-2 px-3",onClick:t,children:l.jsx(J,{name:"pencil"})})),l.jsxs("div",{className:n,children:[l.jsx("div",{className:"flex-grow-1 ps-3 py-2",children:e}),r]})}function O0({value:e}){return l.jsx("div",{className:"px-3 py-2 mx-3 my-2 border rounded-2 w-min-12c",children:l.jsx(kt,{value:e})})}function fy({userItems:e,onChanged:t}){const{uq:n,biz:r}=Z(),{userSite:i,persons:s,groups:a}=e;function o({caption:d,atomPhrase:f,items:m}){const{openModal:y}=oe(),v=P.useRef(void 0),w=P.useRef(!1),[j,g]=P.useState(m);Pt(()=>{(async function(){const{$page:S}=await n.SearchAtom.page({atom:f,key:void 0},void 0,1e3);v.current=S})()});function h(S){let b=v.current.filter(k=>{let{id:_}=k;return S.find(C=>C===_)>=0});g(b)}async function p(){w.current=!1;async function S(k){let{selected:_,added:C,removed:N}=k;await n.ChangeIxMySum.submit({userSite:i,added:C.map(D=>({id:D})),removed:N.map(D=>({idDel:D}))}),h(_),w.current=!0}let b=j.map(k=>k.id);await y(l.jsx(LI,{atoms:v.current,selected:b,onSelectChanged:S})),w.current===!0&&await t(i)}return l.jsxs(l.Fragment,{children:[l.jsx(A0,{caption:d,onEdit:p}),l.jsx(Me,{items:j,className:"d-flex",ViewItem:O0})]})}const u=r.entities.person,c=r.entities.sumgroup;return l.jsxs(H,{header:"用户账户",children:[l.jsx("div",{className:"p-3",children:l.jsx(M0,{uq:n,userSite:i})}),l.jsx(o,{caption:"个人",atomPhrase:u.id,items:s}),l.jsx(o,{caption:"小组",atomPhrase:c.id,items:a})]})}function LI({atoms:e,selected:t,onSelectChanged:n}){const{closeModal:r}=oe(),i=P.useRef({selected:[...t],added:[],removed:[]}),s=e.map(u=>{const{id:c}=u;return{atom:u,sel:t.find(d=>d===c)!==void 0}});function a({value:{atom:u,sel:c}}){async function d(f){let{id:m}=u;const{selected:y,added:v,removed:w}=i.current;let j=t.findIndex(S=>S===m),g=y.findIndex(S=>S===m),h=v.findIndex(S=>S===m),p=w.findIndex(S=>S===m);f.currentTarget.checked===!0?(j<0?v.push(m):p>=0&&w.splice(p,1),g<0&&y.push(m)):(j<0?h>=0&&v.splice(h,1):w.push(m),g>=0&&y.splice(g,1)),await n(i.current)}return l.jsxs("label",{className:"d-flex p-3",children:[l.jsx("input",{type:"checkbox",className:"form-check-input me-3",defaultChecked:c,onChange:d}),l.jsx(kt,{value:u})]})}function o(){r(i.current)}return l.jsxs(H,{header:"请选择",children:[l.jsx(Me,{items:s,ViewItem:a}),l.jsx("div",{className:"p-3",children:l.jsx("button",{className:"btn btn-primary",onClick:o,children:"关闭"})})]})}function M0({uq:e,userSite:t}){function n({value:r}){const{assigned:i}=r;function s({value:a}){return l.jsx(uN,{user:a,assigned:i})}return l.jsx(an,{uq:e,id:r.user,Template:s})}return l.jsx(an,{uq:e,id:t,Template:n})}const qI=l.jsx(l.Fragment,{children:l.jsx(ie,{path:gh,element:l.jsx(RI,{})})});function UI({content:e}){const t=Z(),{openModal:n,closeModal:r}=oe();async function i(){const{uqMan:s,biz:a}=t;let{uqApi:o}=s,{schemas:u,logs:c,hasError:d}=await o.compileOverride(e),f,m;function y({children:w,icon:j,color:g}){return l.jsxs("div",{className:"p-3 border-bottom tonwa-bg-gray-2",children:[l.jsx(J,{className:"me-3 "+g,name:j}),w]})}d===!1?(f=Jo.unpack(u),a.buildEntities(f),m=l.jsx(y,{icon:"check-circle",color:"text-success",children:"提交成功"})):m=l.jsx(y,{icon:"exclamation-circle",color:"text-danger",children:"发生错误"});let v;if(c.length>0){let w=[];c.forEach(j=>{j!==null&&w.push(...j.split(`
`))}),v=w.join(`
`)}else v=JSON.stringify(f,null,4);r(),n(l.jsxs(H,{header:"业务设计已提交",children:[m,l.jsx("pre",{className:"p-3 text-break",style:{whiteSpace:"pre-wrap"},children:v})]}))}return l.jsxs(H,{header:"业务设计",children:[l.jsx("div",{className:"px-3 py-1 tonwa-bg-gray-2 d-flex",children:l.jsx(fi,{className:"btn btn-primary me-3",onClick:i,children:"提交"})}),l.jsx("div",{className:"p-1",children:l.jsx("pre",{className:"p-3 text-break",style:{whiteSpace:"pre-wrap"},children:e})})]})}var F0={exports:{}};(function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var i=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,s=0,a={},o={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function h(p){return p instanceof u?new u(p.type,h(p.content),p.alias):Array.isArray(p)?p.map(h):p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(h){return Object.prototype.toString.call(h).slice(8,-1)},objId:function(h){return h.__id||Object.defineProperty(h,"__id",{value:++s}),h.__id},clone:function h(p,S){S=S||{};var b,k;switch(o.util.type(p)){case"Object":if(k=o.util.objId(p),S[k])return S[k];b={},S[k]=b;for(var _ in p)p.hasOwnProperty(_)&&(b[_]=h(p[_],S));return b;case"Array":return k=o.util.objId(p),S[k]?S[k]:(b=[],S[k]=b,p.forEach(function(C,N){b[N]=h(C,S)}),b);default:return p}},getLanguage:function(h){for(;h;){var p=i.exec(h.className);if(p)return p[1].toLowerCase();h=h.parentElement}return"none"},setLanguage:function(h,p){h.className=h.className.replace(RegExp(i,"gi"),""),h.classList.add("language-"+p)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(b){var h=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(b.stack)||[])[1];if(h){var p=document.getElementsByTagName("script");for(var S in p)if(p[S].src==h)return p[S]}return null}},isActive:function(h,p,S){for(var b="no-"+p;h;){var k=h.classList;if(k.contains(p))return!0;if(k.contains(b))return!1;h=h.parentElement}return!!S}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(h,p){var S=o.util.clone(o.languages[h]);for(var b in p)S[b]=p[b];return S},insertBefore:function(h,p,S,b){b=b||o.languages;var k=b[h],_={};for(var C in k)if(k.hasOwnProperty(C)){if(C==p)for(var N in S)S.hasOwnProperty(N)&&(_[N]=S[N]);S.hasOwnProperty(C)||(_[C]=k[C])}var D=b[h];return b[h]=_,o.languages.DFS(o.languages,function(E,A){A===D&&E!=h&&(this[E]=_)}),_},DFS:function h(p,S,b,k){k=k||{};var _=o.util.objId;for(var C in p)if(p.hasOwnProperty(C)){S.call(p,C,p[C],b||C);var N=p[C],D=o.util.type(N);D==="Object"&&!k[_(N)]?(k[_(N)]=!0,h(N,S,null,k)):D==="Array"&&!k[_(N)]&&(k[_(N)]=!0,h(N,S,C,k))}}},plugins:{},highlightAll:function(h,p){o.highlightAllUnder(document,h,p)},highlightAllUnder:function(h,p,S){var b={callback:S,container:h,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",b),b.elements=Array.prototype.slice.apply(b.container.querySelectorAll(b.selector)),o.hooks.run("before-all-elements-highlight",b);for(var k=0,_;_=b.elements[k++];)o.highlightElement(_,p===!0,b.callback)},highlightElement:function(h,p,S){var b=o.util.getLanguage(h),k=o.languages[b];o.util.setLanguage(h,b);var _=h.parentElement;_&&_.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(_,b);var C=h.textContent,N={element:h,language:b,grammar:k,code:C};function D(A){N.highlightedCode=A,o.hooks.run("before-insert",N),N.element.innerHTML=N.highlightedCode,o.hooks.run("after-highlight",N),o.hooks.run("complete",N),S&&S.call(N.element)}if(o.hooks.run("before-sanity-check",N),_=N.element.parentElement,_&&_.nodeName.toLowerCase()==="pre"&&!_.hasAttribute("tabindex")&&_.setAttribute("tabindex","0"),!N.code){o.hooks.run("complete",N),S&&S.call(N.element);return}if(o.hooks.run("before-highlight",N),!N.grammar){D(o.util.encode(N.code));return}if(p&&r.Worker){var E=new Worker(o.filename);E.onmessage=function(A){D(A.data)},E.postMessage(JSON.stringify({language:N.language,code:N.code,immediateClose:!0}))}else D(o.highlight(N.code,N.grammar,N.language))},highlight:function(h,p,S){var b={code:h,grammar:p,language:S};if(o.hooks.run("before-tokenize",b),!b.grammar)throw new Error('The language "'+b.language+'" has no grammar.');return b.tokens=o.tokenize(b.code,b.grammar),o.hooks.run("after-tokenize",b),u.stringify(o.util.encode(b.tokens),b.language)},tokenize:function(h,p){var S=p.rest;if(S){for(var b in S)p[b]=S[b];delete p.rest}var k=new f;return m(k,k.head,h),d(h,k,p,k.head,0),v(k)},hooks:{all:{},add:function(h,p){var S=o.hooks.all;S[h]=S[h]||[],S[h].push(p)},run:function(h,p){var S=o.hooks.all[h];if(!(!S||!S.length))for(var b=0,k;k=S[b++];)k(p)}},Token:u};r.Prism=o;function u(h,p,S,b){this.type=h,this.content=p,this.alias=S,this.length=(b||"").length|0}u.stringify=function h(p,S){if(typeof p=="string")return p;if(Array.isArray(p)){var b="";return p.forEach(function(D){b+=h(D,S)}),b}var k={type:p.type,content:h(p.content,S),tag:"span",classes:["token",p.type],attributes:{},language:S},_=p.alias;_&&(Array.isArray(_)?Array.prototype.push.apply(k.classes,_):k.classes.push(_)),o.hooks.run("wrap",k);var C="";for(var N in k.attributes)C+=" "+N+'="'+(k.attributes[N]||"").replace(/"/g,"&quot;")+'"';return"<"+k.tag+' class="'+k.classes.join(" ")+'"'+C+">"+k.content+"</"+k.tag+">"};function c(h,p,S,b){h.lastIndex=p;var k=h.exec(S);if(k&&b&&k[1]){var _=k[1].length;k.index+=_,k[0]=k[0].slice(_)}return k}function d(h,p,S,b,k,_){for(var C in S)if(!(!S.hasOwnProperty(C)||!S[C])){var N=S[C];N=Array.isArray(N)?N:[N];for(var D=0;D<N.length;++D){if(_&&_.cause==C+","+D)return;var E=N[D],A=E.inside,O=!!E.lookbehind,T=!!E.greedy,q=E.alias;if(T&&!E.pattern.global){var z=E.pattern.toString().match(/[imsuy]*$/)[0];E.pattern=RegExp(E.pattern.source,z+"g")}for(var Y=E.pattern||E,M=b.next,U=k;M!==p.tail&&!(_&&U>=_.reach);U+=M.value.length,M=M.next){var K=M.value;if(p.length>h.length)return;if(!(K instanceof u)){var le=1,fe;if(T){if(fe=c(Y,U,h,O),!fe||fe.index>=h.length)break;var Ye=fe.index,Nt=fe.index+fe[0].length,xe=U;for(xe+=M.value.length;Ye>=xe;)M=M.next,xe+=M.value.length;if(xe-=M.value.length,U=xe,M.value instanceof u)continue;for(var Be=M;Be!==p.tail&&(xe<Nt||typeof Be.value=="string");Be=Be.next)le++,xe+=Be.value.length;le--,K=h.slice(U,xe),fe.index-=U}else if(fe=c(Y,0,K,O),!fe)continue;var Ye=fe.index,De=fe[0],$t=K.slice(0,Ye),Un=K.slice(Ye+De.length),$r=U+K.length;_&&$r>_.reach&&(_.reach=$r);var Vr=M.prev;$t&&(Vr=m(p,Vr,$t),U+=$t.length),y(p,Vr,le);var Ha=new u(C,A?o.tokenize(De,A):De,q,De);if(M=m(p,Vr,Ha),Un&&m(p,M,Un),le>1){var ys={cause:C+","+D,reach:$r};d(h,p,S,M.prev,U,ys),_&&ys.reach>_.reach&&(_.reach=ys.reach)}}}}}}function f(){var h={value:null,prev:null,next:null},p={value:null,prev:h,next:null};h.next=p,this.head=h,this.tail=p,this.length=0}function m(h,p,S){var b=p.next,k={value:S,prev:p,next:b};return p.next=k,b.prev=k,h.length++,k}function y(h,p,S){for(var b=p.next,k=0;k<S&&b!==h.tail;k++)b=b.next;p.next=b,b.prev=p,h.length-=k}function v(h){for(var p=[],S=h.head.next;S!==h.tail;)p.push(S.value),S=S.next;return p}if(!r.document)return r.addEventListener&&(o.disableWorkerMessageHandler||r.addEventListener("message",function(h){var p=JSON.parse(h.data),S=p.language,b=p.code,k=p.immediateClose;r.postMessage(o.highlight(b,o.languages[S],S)),k&&r.close()},!1)),o;var w=o.util.currentScript();w&&(o.filename=w.src,w.hasAttribute("data-manual")&&(o.manual=!0));function j(){o.manual||o.highlightAll()}if(!o.manual){var g=document.readyState;g==="loading"||g==="interactive"&&w&&w.defer?document.addEventListener("DOMContentLoaded",j):window.requestAnimationFrame?window.requestAnimationFrame(j):window.setTimeout(j,16)}return o}(t);e.exports&&(e.exports=n),typeof Ut<"u"&&(Ut.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(i,s){var a={};a["language-"+s]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[s]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};o["language-"+s]={pattern:/[\s\S]+/,inside:n.languages[s]};var u={};u[i]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return i}),"i"),lookbehind:!0,greedy:!0,inside:o},n.languages.insertBefore("markup","cdata",u)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,i){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[i,"language-"+i],inside:n.languages[i]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var i=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+i.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+i.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+i.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+i.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:i,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var s=r.languages.markup;s&&(s.tag.addInlined("style","css"),s.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading…",i=function(w,j){return"✖ Error "+w+" while fetching file: "+j},s="✖ Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",u="loading",c="loaded",d="failed",f="pre[data-src]:not(["+o+'="'+c+'"]):not(['+o+'="'+u+'"])';function m(w,j,g){var h=new XMLHttpRequest;h.open("GET",w,!0),h.onreadystatechange=function(){h.readyState==4&&(h.status<400&&h.responseText?j(h.responseText):h.status>=400?g(i(h.status,h.statusText)):g(s))},h.send(null)}function y(w){var j=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(w||"");if(j){var g=Number(j[1]),h=j[2],p=j[3];return h?p?[g,Number(p)]:[g,void 0]:[g,g]}}n.hooks.add("before-highlightall",function(w){w.selector+=", "+f}),n.hooks.add("before-sanity-check",function(w){var j=w.element;if(j.matches(f)){w.code="",j.setAttribute(o,u);var g=j.appendChild(document.createElement("CODE"));g.textContent=r;var h=j.getAttribute("data-src"),p=w.language;if(p==="none"){var S=(/\.(\w+)$/.exec(h)||[,"none"])[1];p=a[S]||S}n.util.setLanguage(g,p),n.util.setLanguage(j,p);var b=n.plugins.autoloader;b&&b.loadLanguages(p),m(h,function(k){j.setAttribute(o,c);var _=y(j.getAttribute("data-range"));if(_){var C=k.split(/\r\n?|\n/g),N=_[0],D=_[1]==null?C.length:_[1];N<0&&(N+=C.length),N=Math.max(0,Math.min(N-1,C.length)),D<0&&(D+=C.length),D=Math.max(0,Math.min(D,C.length)),k=C.slice(N,D).join(`
`),j.hasAttribute("data-start")||j.setAttribute("data-start",String(N+1))}g.textContent=k,n.highlightElement(g)},function(k){j.setAttribute(o,d),g.textContent=k})}}),n.plugins.fileHighlight={highlight:function(j){for(var g=(j||document).querySelectorAll(f),h=0,p;p=g[h++];)n.highlightElement(p)}};var v=!1;n.fileHighlight=function(){v||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),v=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(F0);var $I=F0.exports,T0={},VI=Ut&&Ut.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),lt=Ut&&Ut.__assign||function(){return lt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},lt.apply(this,arguments)},zI=Ut&&Ut.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),BI=Ut&&Ut.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),YI=Ut&&Ut.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&zI(t,e,n);return BI(t,e),t},WI=Ut&&Ut.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};Object.defineProperty(T0,"__esModule",{value:!0});var Es=YI(P),HI=13,QI=9,GI=8,KI=89,ml=90,XI=77,hy=57,my=219,py=222,yy=192,ZI=27,vy=100,JI=3e3,eP=typeof window<"u"&&"navigator"in window&&/Win/i.test(navigator.platform),hc=typeof window<"u"&&"navigator"in window&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),Ol="npm__react-simple-code-editor__textarea",tP=`
/**
 * Reset the text fill color so that placeholder is visible
 */
.`.concat(Ol,`:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .`).concat(Ol,` {
    color: transparent !important;
  }

  .`).concat(Ol,`::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
`),nP=function(e){VI(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={capture:!0},n._recordCurrentState=function(){var r=n._input;if(r){var i=r.value,s=r.selectionStart,a=r.selectionEnd;n._recordChange({value:i,selectionStart:s,selectionEnd:a})}},n._getLines=function(r,i){return r.substring(0,i).split(`
`)},n._recordChange=function(r,i){var s,a,o;i===void 0&&(i=!1);var u=n._history,c=u.stack,d=u.offset;if(c.length&&d>-1){n._history.stack=c.slice(0,d+1);var f=n._history.stack.length;if(f>vy){var m=f-vy;n._history.stack=c.slice(m,f),n._history.offset=Math.max(n._history.offset-m,0)}}var y=Date.now();if(i){var v=n._history.stack[n._history.offset];if(v&&y-v.timestamp<JI){var w=/[^a-z0-9]([a-z0-9]+)$/i,j=(s=n._getLines(v.value,v.selectionStart).pop())===null||s===void 0?void 0:s.match(w),g=(a=n._getLines(r.value,r.selectionStart).pop())===null||a===void 0?void 0:a.match(w);if(j!=null&&j[1]&&(!((o=g==null?void 0:g[1])===null||o===void 0)&&o.startsWith(j[1]))){n._history.stack[n._history.offset]=lt(lt({},r),{timestamp:y});return}}}n._history.stack.push(lt(lt({},r),{timestamp:y})),n._history.offset++},n._updateInput=function(r){var i=n._input;i&&(i.value=r.value,i.selectionStart=r.selectionStart,i.selectionEnd=r.selectionEnd,n.props.onValueChange(r.value))},n._applyEdits=function(r){var i=n._input,s=n._history.stack[n._history.offset];s&&i&&(n._history.stack[n._history.offset]=lt(lt({},s),{selectionStart:i.selectionStart,selectionEnd:i.selectionEnd})),n._recordChange(r),n._updateInput(r)},n._undoEdit=function(){var r=n._history,i=r.stack,s=r.offset,a=i[s-1];a&&(n._updateInput(a),n._history.offset=Math.max(s-1,0))},n._redoEdit=function(){var r=n._history,i=r.stack,s=r.offset,a=i[s+1];a&&(n._updateInput(a),n._history.offset=Math.min(s+1,i.length-1))},n._handleKeyDown=function(r){var i=n.props,s=i.tabSize,a=i.insertSpaces,o=i.ignoreTabKey,u=i.onKeyDown;if(!(u&&(u(r),r.defaultPrevented))){r.keyCode===ZI&&r.currentTarget.blur();var c=r.currentTarget,d=c.value,f=c.selectionStart,m=c.selectionEnd,y=(a?" ":"	").repeat(s);if(r.keyCode===QI&&!o&&n.state.capture)if(r.preventDefault(),r.shiftKey){var v=n._getLines(d,f),w=v.length-1,j=n._getLines(d,m).length-1,g=d.split(`
`).map(function(A,O){return O>=w&&O<=j&&A.startsWith(y)?A.substring(y.length):A}).join(`
`);if(d!==g){var h=v[w];n._applyEdits({value:g,selectionStart:h!=null&&h.startsWith(y)?f-y.length:f,selectionEnd:m-(d.length-g.length)})}}else if(f!==m){var v=n._getLines(d,f),p=v.length-1,S=n._getLines(d,m).length-1,h=v[p];n._applyEdits({value:d.split(`
`).map(function(T,q){return q>=p&&q<=S?y+T:T}).join(`
`),selectionStart:h&&/\S/.test(h)?f+y.length:f,selectionEnd:m+y.length*(S-p+1)})}else{var b=f+y.length;n._applyEdits({value:d.substring(0,f)+y+d.substring(m),selectionStart:b,selectionEnd:b})}else if(r.keyCode===GI){var k=f!==m,_=d.substring(0,f);if(_.endsWith(y)&&!k){r.preventDefault();var b=f-y.length;n._applyEdits({value:d.substring(0,f-y.length)+d.substring(m),selectionStart:b,selectionEnd:b})}}else if(r.keyCode===HI){if(f===m){var C=n._getLines(d,f).pop(),N=C==null?void 0:C.match(/^\s+/);if(N!=null&&N[0]){r.preventDefault();var D=`
`+N[0],b=f+D.length;n._applyEdits({value:d.substring(0,f)+D+d.substring(m),selectionStart:b,selectionEnd:b})}}}else if(r.keyCode===hy||r.keyCode===my||r.keyCode===py||r.keyCode===yy){var E=void 0;r.keyCode===hy&&r.shiftKey?E=["(",")"]:r.keyCode===my?r.shiftKey?E=["{","}"]:E=["[","]"]:r.keyCode===py?r.shiftKey?E=['"','"']:E=["'","'"]:r.keyCode===yy&&!r.shiftKey&&(E=["`","`"]),f!==m&&E&&(r.preventDefault(),n._applyEdits({value:d.substring(0,f)+E[0]+d.substring(f,m)+E[1]+d.substring(m),selectionStart:f,selectionEnd:m+2}))}else(hc?r.metaKey&&r.keyCode===ml:r.ctrlKey&&r.keyCode===ml)&&!r.shiftKey&&!r.altKey?(r.preventDefault(),n._undoEdit()):(hc?r.metaKey&&r.keyCode===ml&&r.shiftKey:eP?r.ctrlKey&&r.keyCode===KI:r.ctrlKey&&r.keyCode===ml&&r.shiftKey)&&!r.altKey?(r.preventDefault(),n._redoEdit()):r.keyCode===XI&&r.ctrlKey&&(!hc||r.shiftKey)&&(r.preventDefault(),n.setState(function(A){return{capture:!A.capture}}))}},n._handleChange=function(r){var i=r.currentTarget,s=i.value,a=i.selectionStart,o=i.selectionEnd;n._recordChange({value:s,selectionStart:a,selectionEnd:o},!0),n.props.onValueChange(s)},n._history={stack:[],offset:-1},n._input=null,n}return t.prototype.componentDidMount=function(){this._recordCurrentState()},Object.defineProperty(t.prototype,"session",{get:function(){return{history:this._history}},set:function(n){this._history=n.history},enumerable:!1,configurable:!0}),t.prototype.render=function(){var n=this,r=this.props,i=r.value,s=r.style,a=r.padding,o=r.highlight,u=r.textareaId,c=r.textareaClassName,d=r.autoFocus,f=r.disabled,m=r.form,y=r.maxLength,v=r.minLength,w=r.name,j=r.placeholder,g=r.readOnly,h=r.required,p=r.onClick,S=r.onFocus,b=r.onBlur,k=r.onKeyUp;r.onKeyDown,r.onValueChange,r.tabSize,r.insertSpaces,r.ignoreTabKey;var _=r.preClassName,C=WI(r,["value","style","padding","highlight","textareaId","textareaClassName","autoFocus","disabled","form","maxLength","minLength","name","placeholder","readOnly","required","onClick","onFocus","onBlur","onKeyUp","onKeyDown","onValueChange","tabSize","insertSpaces","ignoreTabKey","preClassName"]),N={paddingTop:typeof a=="object"?a.top:a,paddingRight:typeof a=="object"?a.right:a,paddingBottom:typeof a=="object"?a.bottom:a,paddingLeft:typeof a=="object"?a.left:a},D=o(i);return Es.createElement("div",lt({},C,{style:lt(lt({},Is.container),s)}),Es.createElement("pre",lt({className:_,"aria-hidden":"true",style:lt(lt(lt({},Is.editor),Is.highlight),N)},typeof D=="string"?{dangerouslySetInnerHTML:{__html:D+"<br />"}}:{children:D})),Es.createElement("textarea",{ref:function(E){return n._input=E},style:lt(lt(lt({},Is.editor),Is.textarea),N),className:Ol+(c?" ".concat(c):""),id:u,value:i,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onClick:p,onKeyUp:k,onFocus:S,onBlur:b,disabled:f,form:m,maxLength:y,minLength:v,name:w,placeholder:j,readOnly:g,required:h,autoFocus:d,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),Es.createElement("style",{dangerouslySetInnerHTML:{__html:tP}}))},t.defaultProps={tabSize:2,insertSpaces:!0,ignoreTabKey:!1,padding:0},t}(Es.Component),rP=T0.default=nP,Is={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}};const iP={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\-\-.*/,lookbehind:!0,greedy:!0}],keyword:/\b(?:ATOM|SHEET|prop)\b/,string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/};function sP({entity:e}){const t=Z(),{uq:n}=t,{id:r,caption:i,name:s}=e,{data:a}=Lr([r],async()=>{let{ret:b}=await n.GetEntityCode.query({id:r});return b[0]},qr),o=P.useRef(),u=P.useRef(),c=P.useRef(),[d,f]=P.useState(i??s);P.useEffect(()=>{let{current:b}=u;b.style.maxHeight=b.parentElement.clientHeight+"px"});const{code:m,schema:y}=a,[v,w]=P.useState(m),[j,g]=P.useState(!1);async function h(){const{uqMan:b,biz:k}=t;let{uqApi:_}=b;const{current:C}=o;let N=0;c.current=setInterval(()=>{C.value+=".",N+=1,N>5&&(C.value="Overtime! 5 seconds",g(!1),clearInterval(c.current),c.current=void 0)},1e3),g(!0),C.value="......";let{schemas:D,logs:E,hasError:A}=await _.compileEntity(r,v),O;if(A===!0){let q=[];E.forEach(z=>{z!==null&&q.push(...z.split(`
`))}),O=q.join(`
`)}else{let q=Jo.unpack(D);k.buildEntities(q),O=`提交成功!
`+JSON.stringify(q,null,4)}C.value=O,g(!1),clearInterval(c.current),c.current=void 0;let T=k.entityIds[e.id];f(T.caption??T.name)}function p(){c.current!==void 0&&clearInterval(c.current)}function S(b,k,_){return $I.highlight(b,k,_)}return l.jsx(H,{header:d,onClosed:p,hideScroll:!0,children:l.jsxs("div",{className:"d-flex flex-column",style:{height:"calc(100% - 1em)"},children:[l.jsxs("div",{className:"text-secondary tonwa-bg-gray-2 d-flex align-items-center px-1 border-bottom",children:[l.jsx("div",{className:"m-1",children:"设计界面实现中..."}),l.jsx("div",{className:"flex-grow-1"}),l.jsx(fi,{overtime:5,className:"btn btn-sm btn-outline-primary m-1",onClick:h,children:"提交"})]}),l.jsx("div",{className:"border-info rounded flex-grow-1",children:l.jsx("div",{ref:u,className:"container_editor_area w-100",children:l.jsx(rP,{className:"container__editor",autoFocus:!0,spellCheck:!1,readOnly:j,placeholder:"Type some code…",value:v,onValueChange:b=>w(b),highlight:b=>S(b,iP,"uq"),padding:10,tabSize:4,style:{fontSize:18,border:"none",outline:"none",overflowY:"visible",fontFamily:"ui-monospace,SFMono-Regular,SF Mono,Consolas,Liberation Mono,Menlo,monospace"}})})}),l.jsx("div",{className:"border-top border-dark h-16c",children:l.jsx("textarea",{ref:o,spellCheck:!1,readOnly:!0,className:"p-2 h-100 w-100 border-0",style:{border:"none",outline:"none",fontFamily:"monospace",resize:"none"}})})]})})}function aP(){const{right:e,view:t}=R0();return l.jsx(H,{header:wh,right:e,children:t})}function R0(){const e=Z(),{biz:t}=e,{openModal:n}=oe();we(t._refresh);const r=P.useRef();function i(d){n(l.jsx(UI,{content:d}))}function s(){r.current.click()}async function a(d){let{files:f}=d.target;await o(f[0]),r.current.value=""}async function o(d){return new Promise(f=>{let m=new FileReader;m.readAsText(d),m.onloadend=async function(y){f(),i(y.target.result)}})}function u({value:d,icon:f}){const{id:m,caption:y,name:v}=d;function w(){n(l.jsx(sP,{entity:d}))}let j;return y===void 0||y===v?j=l.jsx("div",{children:v}):j=l.jsxs("div",{children:[l.jsx("div",{className:"small text-secondary",children:v}),l.jsx("div",{children:y})]}),l.jsxs("div",{className:"px-2 py-2 border border-secondary shadow-sm mx-2 my-2 rounded h-min-5c w-16c w-max-16c cursor-pointer link-primary bg-white d-flex",onClick:w,children:[l.jsx(J,{name:f,className:"mt-1 me-2 text-success"}),j]},m)}function c({entitys:d,icon:f}){let m;return d.length===0?m=l.jsx("div",{className:"m-1 text-secondary small",children:"无"}):m=d.map((y,v)=>l.jsx(u,{value:y,icon:f},y.id)),l.jsx("div",{className:"d-flex flex-wrap p-2",children:m})}return{right:l.jsx("button",{className:"btn btn-primary btn-sm me-1",onClick:s,children:"上传业务"}),view:l.jsxs("div",{className:"",children:[l.jsx("div",{className:"tonwa-bg-gray-1",children:t.all.map((d,f)=>{const[m,y,v]=d;return y===void 0?null:l.jsxs("div",{className:"mx-2 my-3 border border-dark-subtle",children:[l.jsx("div",{className:"px-3 pt-1 pb-1 border-bottom tonwa-bg-gray-2 text-secondary",children:y}),l.jsx(c,{entitys:m,icon:v})]},f)})}),l.jsx("div",{children:l.jsx("input",{ref:r,type:"file",className:"w-100 form-control-file d-none",name:"files",multiple:!1,onChange:a})})]})}}const L0="compile",wh="业务设计",lP=l.jsx(ie,{path:`${L0}`,element:l.jsx(aP,{})});function oP(){const{uq:e,uqSites:t}=Z(),{openModal:n}=oe(),{site:r}=Fn();function i({onClick:u,content:c,icon:d,iconColor:f}){return l.jsxs(Ue,{className:"px-3 py-2 align-items-center",onClick:u,children:[l.jsx(On,{name:d??"cog",className:" fs-x-large me-3 my-1 "+(f??" text-primary ")}),c,l.jsx(On,{name:"chevron-right"})]})}function s(){let{userSite0:u}=t;if(u===void 0)return null;async function c(){n(l.jsx(yI,{}))}return l.jsxs(l.Fragment,{children:[l.jsx(i,{onClick:c,content:D0,icon:"laptop",iconColor:"text-warning"}),l.jsx(ve,{})]})}function a(){async function u(){n(l.jsx(lI,{admin:Xn.owner,viewTop:l.jsx(l.Fragment,{})}))}return l.jsxs(l.Fragment,{children:[l.jsx(i,{onClick:u,content:"机构角色",icon:"person-fill-gear"}),l.jsx(ve,{})]})}const o=[{label:vh,path:yh},{label:xh,path:gh},{label:wh,path:L0}];return l.jsxs(H,{header:l.jsx(an,{uq:e,id:Number(r),Template:fu}),children:[l.jsx(a,{}),o.map((u,c)=>{const{label:d,path:f}=u;return l.jsx(Ce,{to:`../${f}`,className:"border-bottom",children:l.jsx(i,{icon:"caret-right-fill",content:d,iconColor:"text-info"})},c)}),l.jsx(s,{})]})}const q0="site-admin",uP=l.jsx(ie,{path:`${q0}/:site`,element:l.jsx(oP,{})}),cP="about";function dP(){const e=Gg(Hx),t=Z(),{openModal:n}=oe(),{uq:r,user:i,uqSites:s}=t,a=we(i);function o(){if(!a)return null;let{id:y,name:v,nick:w,icon:j}=a;return l.jsx(Ce,{to:Xx,children:l.jsxs(Ue,{className:"py-3 px-3 w-100",children:[l.jsx(au,{className:"w-3c h-3c me-3",src:j||".user-o"}),l.jsxs("div",{children:[l.jsx("div",{children:fP(v,w)}),l.jsxs("div",{className:"small",children:[l.jsx("span",{className:"text-muted",children:"ID:"})," ",y>1e4?y:String(y+1e4).substring(1)]})]}),l.jsx(J,{className:"align-self-end",name:"angle-right"})]})})}function u({onClick:y,content:v,icon:w,iconColor:j}){return l.jsxs(Ue,{className:"p-3 cursor-pointer align-items-center",onClick:y,children:[l.jsx(J,{name:w??"cog",fixWidth:!0,className:" me-3 "+(j??" text-primary "),size:"lg"}),v,l.jsx(J,{name:"angle-right"})]})}function c(){let{userSite0:y}=s;if(y===void 0)return null;async function v(){n(l.jsx(cI,{}))}return l.jsxs(l.Fragment,{children:[l.jsx(u,{onClick:v,content:"系统管理",icon:"database",iconColor:"text-warning"}),l.jsx(ve,{})]})}function d(){let{mySites:y,userSite:v}=s;return l.jsx(l.Fragment,{children:y.map((w,j)=>{let{siteId:g}=w,h=(v==null?void 0:v.siteId)===g,p,S,b,k;h===!0?(p="check-circle-o",b="",S=" text-success "):(p="angle-right",b=" text-primary ",S="",k=C);let _=l.jsxs(Ue,{className:"p-3 align-items-center "+b,onClick:k,children:[l.jsx(J,{name:p,fixWidth:!0,className:" me-3 "+S,size:"lg"}),l.jsx(an,{uq:r,id:g,Template:fu}),l.jsx(t0,{permit:[],children:l.jsxs("div",{children:["管理 ",l.jsx("i",{className:"bi-chevron-right"})]})})]});async function C(){h!==!0&&(await t.uqSites.setSite(g),document.location.reload())}return n0(t,[])===!0&&(_=l.jsx(Ce,{to:`/${q0}/${g}`,children:_})),l.jsxs(ne.Fragment,{children:[_,l.jsx(ve,{})]},j)})})}function f(){return l.jsx(Ce,{to:cP,children:l.jsxs(Ue,{className:"w-100 py-3 px-3 align-items-center",children:[l.jsx(J,{className:"text-info me-3",name:"smile-o",fixWidth:!0,size:"lg"}),l.jsxs("b",{className:"",children:[e(ue.aboutTheApp)," ",l.jsxs("small",{children:[e(ue.version)," ",t.version]})]}),l.jsx(J,{className:"align-self-center",name:"angle-right"})]})})}return l.jsx(H,{header:e(ue.me),back:"none",children:l.jsxs("div",{children:[l.jsx(o,{}),l.jsx(ve,{}),l.jsx(c,{}),l.jsx(d,{}),l.jsx(f,{}),l.jsx(ve,{})]})})}function fP(e,t){return t?l.jsx(l.Fragment,{children:l.jsxs("b",{children:[t,"   ",l.jsx("small",{className:"muted",children:e})]})}):l.jsx("b",{children:e})}const U0="atom-center";function hP(){const{biz:e}=Z(),t=e.atomRoots;function n({value:r}){const{id:i,name:s,caption:a}=r;return l.jsx(Ce,{to:`../${Ra(i)}`,children:l.jsxs("div",{className:"px-3 py-2 align-items-center d-flex",children:[l.jsx(On,{name:"credit-card-2-front",className:"fs-larger me-3 text-info"}),l.jsx("span",{className:"text-body",children:a??s})]})})}return l.jsxs(H,{header:"档案中心",children:[l.jsx(ve,{}),l.jsx(Me,{items:t,ViewItem:n})]})}const bh={atomName:"atom",NOLabel:void 0,exLabel:void 0};function mP(){let{page:e}=qa(bh);return e}function mc(){let{page:e}=$a(bh);return e}function pP(){let e=Object.assign({},bh,{ViewItemAtom:kt,top:void 0}),{page:t}=La(e);return t}function yP(){const e=":atom";return l.jsxs(l.Fragment,{children:[l.jsx(ie,{path:U0,element:l.jsx(hP,{})}),l.jsx(ie,{path:lh(e),element:l.jsx(mP,{})}),l.jsx(ie,{path:Ra(e),element:l.jsx(pP,{})}),l.jsx(ie,{path:KD(e),element:l.jsx(mc,{})}),l.jsx(ie,{path:oh(e),element:l.jsx(mc,{})}),l.jsx(ie,{path:XD(e),element:l.jsx(mc,{})})]})}const $0="report";function vP(){const{biz:e}=Z(),{reports:t}=e;function n({value:r}){const{id:i,caption:s,name:a}=r;return l.jsx(Ce,{to:`../${S0(i)}`,children:l.jsx("div",{className:"px-3 py-3",children:s??a})})}return l.jsx(H,{header:"报表中心",children:l.jsx("div",{className:"mb-3",children:t.map(r=>l.jsxs(ne.Fragment,{children:[l.jsx(n,{value:r}),l.jsx(ve,{})]},r.id))})})}function gP(){let{page:e}=QE();return e}function xP(){const e=":report";return l.jsxs(l.Fragment,{children:[l.jsx(ie,{path:$0,element:l.jsx(vP,{})}),l.jsx(ie,{path:S0(e),element:l.jsx(gP,{})}),l.jsx(ie,{path:_o("history","title","id"),element:l.jsx(GE,{})}),l.jsx(ie,{path:_o("ref",void 0,"id"),element:l.jsx(KE,{})})]})}const wP="price";//! moment.js
//! version : 2.29.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var V0;function W(){return V0.apply(null,arguments)}function bP(e){V0=e}function wn(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function ni(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function be(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Sh(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(be(e,t))return!1;return!0}function Mt(e){return e===void 0}function ir(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function za(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function z0(e,t){var n=[],r,i=e.length;for(r=0;r<i;++r)n.push(t(e[r],r));return n}function gr(e,t){for(var n in t)be(t,n)&&(e[n]=t[n]);return be(t,"toString")&&(e.toString=t.toString),be(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Ln(e,t,n,r){return hw(e,t,n,r,!0).utc()}function SP(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function ce(e){return e._pf==null&&(e._pf=SP()),e._pf}var _d;Array.prototype.some?_d=Array.prototype.some:_d=function(e){var t=Object(this),n=t.length>>>0,r;for(r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};function jh(e){if(e._isValid==null){var t=ce(e),n=_d.call(t.parsedDateParts,function(i){return i!=null}),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=r;else return r}return e._isValid}function yu(e){var t=Ln(NaN);return e!=null?gr(ce(t),e):ce(t).userInvalidated=!0,t}var gy=W.momentProperties=[],pc=!1;function kh(e,t){var n,r,i,s=gy.length;if(Mt(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),Mt(t._i)||(e._i=t._i),Mt(t._f)||(e._f=t._f),Mt(t._l)||(e._l=t._l),Mt(t._strict)||(e._strict=t._strict),Mt(t._tzm)||(e._tzm=t._tzm),Mt(t._isUTC)||(e._isUTC=t._isUTC),Mt(t._offset)||(e._offset=t._offset),Mt(t._pf)||(e._pf=ce(t)),Mt(t._locale)||(e._locale=t._locale),s>0)for(n=0;n<s;n++)r=gy[n],i=t[r],Mt(i)||(e[r]=i);return e}function Ba(e){kh(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),pc===!1&&(pc=!0,W.updateOffset(this),pc=!1)}function bn(e){return e instanceof Ba||e!=null&&e._isAMomentObject!=null}function B0(e){W.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function on(e,t){var n=!0;return gr(function(){if(W.deprecationHandler!=null&&W.deprecationHandler(null,e),n){var r=[],i,s,a,o=arguments.length;for(s=0;s<o;s++){if(i="",typeof arguments[s]=="object"){i+=`
[`+s+"] ";for(a in arguments[0])be(arguments[0],a)&&(i+=a+": "+arguments[0][a]+", ");i=i.slice(0,-2)}else i=arguments[s];r.push(i)}B0(e+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),n=!1}return t.apply(this,arguments)},t)}var xy={};function Y0(e,t){W.deprecationHandler!=null&&W.deprecationHandler(e,t),xy[e]||(B0(t),xy[e]=!0)}W.suppressDeprecationWarnings=!1;W.deprecationHandler=null;function qn(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function jP(e){var t,n;for(n in e)be(e,n)&&(t=e[n],qn(t)?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Nd(e,t){var n=gr({},e),r;for(r in t)be(t,r)&&(ni(e[r])&&ni(t[r])?(n[r]={},gr(n[r],e[r]),gr(n[r],t[r])):t[r]!=null?n[r]=t[r]:delete n[r]);for(r in e)be(e,r)&&!be(t,r)&&ni(e[r])&&(n[r]=gr({},n[r]));return n}function Ch(e){e!=null&&this.set(e)}var Dd;Object.keys?Dd=Object.keys:Dd=function(e){var t,n=[];for(t in e)be(e,t)&&n.push(t);return n};var kP={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function CP(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return qn(r)?r.call(t,n):r}function Mn(e,t,n){var r=""+Math.abs(e),i=t-r.length,s=e>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var _h=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,pl=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,yc={},Hi={};function re(e,t,n,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),e&&(Hi[e]=i),t&&(Hi[t[0]]=function(){return Mn(i.apply(this,arguments),t[1],t[2])}),n&&(Hi[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function _P(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function NP(e){var t=e.match(_h),n,r;for(n=0,r=t.length;n<r;n++)Hi[t[n]]?t[n]=Hi[t[n]]:t[n]=_P(t[n]);return function(i){var s="",a;for(a=0;a<r;a++)s+=qn(t[a])?t[a].call(i,e):t[a];return s}}function Ml(e,t){return e.isValid()?(t=W0(t,e.localeData()),yc[t]=yc[t]||NP(t),yc[t](e)):e.localeData().invalidDate()}function W0(e,t){var n=5;function r(i){return t.longDateFormat(i)||i}for(pl.lastIndex=0;n>=0&&pl.test(e);)e=e.replace(pl,r),pl.lastIndex=0,n-=1;return e}var DP={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function EP(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(_h).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[e])}var IP="Invalid date";function PP(){return this._invalidDate}var AP="%d",OP=/\d{1,2}/;function MP(e){return this._ordinal.replace("%d",e)}var FP={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function TP(e,t,n,r){var i=this._relativeTime[n];return qn(i)?i(e,t,n,r):i.replace(/%d/i,e)}function RP(e,t){var n=this._relativeTime[e>0?"future":"past"];return qn(n)?n(t):n.replace(/%s/i,t)}var Ks={};function Ct(e,t){var n=e.toLowerCase();Ks[n]=Ks[n+"s"]=Ks[t]=e}function un(e){return typeof e=="string"?Ks[e]||Ks[e.toLowerCase()]:void 0}function Nh(e){var t={},n,r;for(r in e)be(e,r)&&(n=un(r),n&&(t[n]=e[r]));return t}var H0={};function _t(e,t){H0[e]=t}function LP(e){var t=[],n;for(n in e)be(e,n)&&t.push({unit:n,priority:H0[n]});return t.sort(function(r,i){return r.priority-i.priority}),t}function vu(e){return e%4===0&&e%100!==0||e%400===0}function Jt(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function me(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=Jt(t)),n}function hs(e,t){return function(n){return n!=null?(Q0(this,e,n),W.updateOffset(this,t),this):Eo(this,e)}}function Eo(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Q0(e,t,n){e.isValid()&&!isNaN(n)&&(t==="FullYear"&&vu(e.year())&&e.month()===1&&e.date()===29?(n=me(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),ju(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function qP(e){return e=un(e),qn(this[e])?this[e]():this}function UP(e,t){if(typeof e=="object"){e=Nh(e);var n=LP(e),r,i=n.length;for(r=0;r<i;r++)this[n[r].unit](e[n[r].unit])}else if(e=un(e),qn(this[e]))return this[e](t);return this}var G0=/\d/,Gt=/\d\d/,K0=/\d{3}/,Dh=/\d{4}/,gu=/[+-]?\d{6}/,Te=/\d\d?/,X0=/\d\d\d\d?/,Z0=/\d\d\d\d\d\d?/,xu=/\d{1,3}/,Eh=/\d{1,4}/,wu=/[+-]?\d{1,6}/,ms=/\d+/,bu=/[+-]?\d+/,$P=/Z|[+-]\d\d:?\d\d/gi,Su=/Z|[+-]\d\d(?::?\d\d)?/gi,VP=/[+-]?\d+(\.\d{1,3})?/,Ya=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Io;Io={};function G(e,t,n){Io[e]=qn(t)?t:function(r,i){return r&&n?n:t}}function zP(e,t){return be(Io,e)?Io[e](t._strict,t._locale):new RegExp(BP(e))}function BP(e){return zt(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,n,r,i,s){return n||r||i||s}))}function zt(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Ed={};function Ne(e,t){var n,r=t,i;for(typeof e=="string"&&(e=[e]),ir(t)&&(r=function(s,a){a[t]=me(s)}),i=e.length,n=0;n<i;n++)Ed[e[n]]=r}function Wa(e,t){Ne(e,function(n,r,i,s){i._w=i._w||{},t(n,i._w,i,s)})}function YP(e,t,n){t!=null&&be(Ed,e)&&Ed[e](t,n._a,n,e)}var St=0,Qn=1,Nn=2,at=3,yn=4,Gn=5,Zr=6,WP=7,HP=8;function QP(e,t){return(e%t+t)%t}var Ke;Array.prototype.indexOf?Ke=Array.prototype.indexOf:Ke=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function ju(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=QP(t,12);return e+=(t-n)/12,n===1?vu(e)?29:28:31-n%7%2}re("M",["MM",2],"Mo",function(){return this.month()+1});re("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});re("MMMM",0,0,function(e){return this.localeData().months(this,e)});Ct("month","M");_t("month",8);G("M",Te);G("MM",Te,Gt);G("MMM",function(e,t){return t.monthsShortRegex(e)});G("MMMM",function(e,t){return t.monthsRegex(e)});Ne(["M","MM"],function(e,t){t[Qn]=me(e)-1});Ne(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);i!=null?t[Qn]=i:ce(n).invalidMonth=e});var GP="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),J0="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ew=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,KP=Ya,XP=Ya;function ZP(e,t){return e?wn(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||ew).test(t)?"format":"standalone"][e.month()]:wn(this._months)?this._months:this._months.standalone}function JP(e,t){return e?wn(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[ew.test(t)?"format":"standalone"][e.month()]:wn(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function eA(e,t,n){var r,i,s,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)s=Ln([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(s,"").toLocaleLowerCase();return n?t==="MMM"?(i=Ke.call(this._shortMonthsParse,a),i!==-1?i:null):(i=Ke.call(this._longMonthsParse,a),i!==-1?i:null):t==="MMM"?(i=Ke.call(this._shortMonthsParse,a),i!==-1?i:(i=Ke.call(this._longMonthsParse,a),i!==-1?i:null)):(i=Ke.call(this._longMonthsParse,a),i!==-1?i:(i=Ke.call(this._shortMonthsParse,a),i!==-1?i:null))}function tA(e,t,n){var r,i,s;if(this._monthsParseExact)return eA.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=Ln([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i")),n&&t==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function tw(e,t){var n;if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=me(t);else if(t=e.localeData().monthsParse(t),!ir(t))return e}return n=Math.min(e.date(),ju(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function nw(e){return e!=null?(tw(this,e),W.updateOffset(this,!0),this):Eo(this,"Month")}function nA(){return ju(this.year(),this.month())}function rA(e){return this._monthsParseExact?(be(this,"_monthsRegex")||rw.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(be(this,"_monthsShortRegex")||(this._monthsShortRegex=KP),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function iA(e){return this._monthsParseExact?(be(this,"_monthsRegex")||rw.call(this),e?this._monthsStrictRegex:this._monthsRegex):(be(this,"_monthsRegex")||(this._monthsRegex=XP),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function rw(){function e(a,o){return o.length-a.length}var t=[],n=[],r=[],i,s;for(i=0;i<12;i++)s=Ln([2e3,i]),t.push(this.monthsShort(s,"")),n.push(this.months(s,"")),r.push(this.months(s,"")),r.push(this.monthsShort(s,""));for(t.sort(e),n.sort(e),r.sort(e),i=0;i<12;i++)t[i]=zt(t[i]),n[i]=zt(n[i]);for(i=0;i<24;i++)r[i]=zt(r[i]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}re("Y",0,0,function(){var e=this.year();return e<=9999?Mn(e,4):"+"+e});re(0,["YY",2],0,function(){return this.year()%100});re(0,["YYYY",4],0,"year");re(0,["YYYYY",5],0,"year");re(0,["YYYYYY",6,!0],0,"year");Ct("year","y");_t("year",1);G("Y",bu);G("YY",Te,Gt);G("YYYY",Eh,Dh);G("YYYYY",wu,gu);G("YYYYYY",wu,gu);Ne(["YYYYY","YYYYYY"],St);Ne("YYYY",function(e,t){t[St]=e.length===2?W.parseTwoDigitYear(e):me(e)});Ne("YY",function(e,t){t[St]=W.parseTwoDigitYear(e)});Ne("Y",function(e,t){t[St]=parseInt(e,10)});function Xs(e){return vu(e)?366:365}W.parseTwoDigitYear=function(e){return me(e)+(me(e)>68?1900:2e3)};var iw=hs("FullYear",!0);function sA(){return vu(this.year())}function aA(e,t,n,r,i,s,a){var o;return e<100&&e>=0?(o=new Date(e+400,t,n,r,i,s,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,r,i,s,a),o}function ga(e){var t,n;return e<100&&e>=0?(n=Array.prototype.slice.call(arguments),n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Po(e,t,n){var r=7+t-n,i=(7+ga(e,0,r).getUTCDay()-t)%7;return-i+r-1}function sw(e,t,n,r,i){var s=(7+n-r)%7,a=Po(e,r,i),o=1+7*(t-1)+s+a,u,c;return o<=0?(u=e-1,c=Xs(u)+o):o>Xs(e)?(u=e+1,c=o-Xs(e)):(u=e,c=o),{year:u,dayOfYear:c}}function xa(e,t,n){var r=Po(e.year(),t,n),i=Math.floor((e.dayOfYear()-r-1)/7)+1,s,a;return i<1?(a=e.year()-1,s=i+Zn(a,t,n)):i>Zn(e.year(),t,n)?(s=i-Zn(e.year(),t,n),a=e.year()+1):(a=e.year(),s=i),{week:s,year:a}}function Zn(e,t,n){var r=Po(e,t,n),i=Po(e+1,t,n);return(Xs(e)-r+i)/7}re("w",["ww",2],"wo","week");re("W",["WW",2],"Wo","isoWeek");Ct("week","w");Ct("isoWeek","W");_t("week",5);_t("isoWeek",5);G("w",Te);G("ww",Te,Gt);G("W",Te);G("WW",Te,Gt);Wa(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=me(e)});function lA(e){return xa(e,this._week.dow,this._week.doy).week}var oA={dow:0,doy:6};function uA(){return this._week.dow}function cA(){return this._week.doy}function dA(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function fA(e){var t=xa(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}re("d",0,"do","day");re("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});re("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});re("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});re("e",0,0,"weekday");re("E",0,0,"isoWeekday");Ct("day","d");Ct("weekday","e");Ct("isoWeekday","E");_t("day",11);_t("weekday",11);_t("isoWeekday",11);G("d",Te);G("e",Te);G("E",Te);G("dd",function(e,t){return t.weekdaysMinRegex(e)});G("ddd",function(e,t){return t.weekdaysShortRegex(e)});G("dddd",function(e,t){return t.weekdaysRegex(e)});Wa(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);i!=null?t.d=i:ce(n).invalidWeekday=e});Wa(["d","e","E"],function(e,t,n,r){t[r]=me(e)});function hA(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function mA(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Ih(e,t){return e.slice(t,7).concat(e.slice(0,t))}var pA="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),aw="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),yA="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),vA=Ya,gA=Ya,xA=Ya;function wA(e,t){var n=wn(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?Ih(n,this._week.dow):e?n[e.day()]:n}function bA(e){return e===!0?Ih(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function SA(e){return e===!0?Ih(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function jA(e,t,n){var r,i,s,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)s=Ln([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(s,"").toLocaleLowerCase();return n?t==="dddd"?(i=Ke.call(this._weekdaysParse,a),i!==-1?i:null):t==="ddd"?(i=Ke.call(this._shortWeekdaysParse,a),i!==-1?i:null):(i=Ke.call(this._minWeekdaysParse,a),i!==-1?i:null):t==="dddd"?(i=Ke.call(this._weekdaysParse,a),i!==-1||(i=Ke.call(this._shortWeekdaysParse,a),i!==-1)?i:(i=Ke.call(this._minWeekdaysParse,a),i!==-1?i:null)):t==="ddd"?(i=Ke.call(this._shortWeekdaysParse,a),i!==-1||(i=Ke.call(this._weekdaysParse,a),i!==-1)?i:(i=Ke.call(this._minWeekdaysParse,a),i!==-1?i:null)):(i=Ke.call(this._minWeekdaysParse,a),i!==-1||(i=Ke.call(this._weekdaysParse,a),i!==-1)?i:(i=Ke.call(this._shortWeekdaysParse,a),i!==-1?i:null))}function kA(e,t,n){var r,i,s;if(this._weekdaysParseExact)return jA.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=Ln([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(s.replace(".",""),"i")),n&&t==="dddd"&&this._fullWeekdaysParse[r].test(e))return r;if(n&&t==="ddd"&&this._shortWeekdaysParse[r].test(e))return r;if(n&&t==="dd"&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function CA(e){if(!this.isValid())return e!=null?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=hA(e,this.localeData()),this.add(e-t,"d")):t}function _A(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function NA(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=mA(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function DA(e){return this._weekdaysParseExact?(be(this,"_weekdaysRegex")||Ph.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(be(this,"_weekdaysRegex")||(this._weekdaysRegex=vA),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function EA(e){return this._weekdaysParseExact?(be(this,"_weekdaysRegex")||Ph.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(be(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=gA),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function IA(e){return this._weekdaysParseExact?(be(this,"_weekdaysRegex")||Ph.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(be(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=xA),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ph(){function e(d,f){return f.length-d.length}var t=[],n=[],r=[],i=[],s,a,o,u,c;for(s=0;s<7;s++)a=Ln([2e3,1]).day(s),o=zt(this.weekdaysMin(a,"")),u=zt(this.weekdaysShort(a,"")),c=zt(this.weekdays(a,"")),t.push(o),n.push(u),r.push(c),i.push(o),i.push(u),i.push(c);t.sort(e),n.sort(e),r.sort(e),i.sort(e),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Ah(){return this.hours()%12||12}function PA(){return this.hours()||24}re("H",["HH",2],0,"hour");re("h",["hh",2],0,Ah);re("k",["kk",2],0,PA);re("hmm",0,0,function(){return""+Ah.apply(this)+Mn(this.minutes(),2)});re("hmmss",0,0,function(){return""+Ah.apply(this)+Mn(this.minutes(),2)+Mn(this.seconds(),2)});re("Hmm",0,0,function(){return""+this.hours()+Mn(this.minutes(),2)});re("Hmmss",0,0,function(){return""+this.hours()+Mn(this.minutes(),2)+Mn(this.seconds(),2)});function lw(e,t){re(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}lw("a",!0);lw("A",!1);Ct("hour","h");_t("hour",13);function ow(e,t){return t._meridiemParse}G("a",ow);G("A",ow);G("H",Te);G("h",Te);G("k",Te);G("HH",Te,Gt);G("hh",Te,Gt);G("kk",Te,Gt);G("hmm",X0);G("hmmss",Z0);G("Hmm",X0);G("Hmmss",Z0);Ne(["H","HH"],at);Ne(["k","kk"],function(e,t,n){var r=me(e);t[at]=r===24?0:r});Ne(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e});Ne(["h","hh"],function(e,t,n){t[at]=me(e),ce(n).bigHour=!0});Ne("hmm",function(e,t,n){var r=e.length-2;t[at]=me(e.substr(0,r)),t[yn]=me(e.substr(r)),ce(n).bigHour=!0});Ne("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[at]=me(e.substr(0,r)),t[yn]=me(e.substr(r,2)),t[Gn]=me(e.substr(i)),ce(n).bigHour=!0});Ne("Hmm",function(e,t,n){var r=e.length-2;t[at]=me(e.substr(0,r)),t[yn]=me(e.substr(r))});Ne("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[at]=me(e.substr(0,r)),t[yn]=me(e.substr(r,2)),t[Gn]=me(e.substr(i))});function AA(e){return(e+"").toLowerCase().charAt(0)==="p"}var OA=/[ap]\.?m?\.?/i,MA=hs("Hours",!0);function FA(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var uw={calendar:kP,longDateFormat:DP,invalidDate:IP,ordinal:AP,dayOfMonthOrdinalParse:OP,relativeTime:FP,months:GP,monthsShort:J0,week:oA,weekdays:pA,weekdaysMin:yA,weekdaysShort:aw,meridiemParse:OA},Le={},Ps={},wa;function TA(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function wy(e){return e&&e.toLowerCase().replace("_","-")}function RA(e){for(var t=0,n,r,i,s;t<e.length;){for(s=wy(e[t]).split("-"),n=s.length,r=wy(e[t+1]),r=r?r.split("-"):null;n>0;){if(i=ku(s.slice(0,n).join("-")),i)return i;if(r&&r.length>=n&&TA(s,r)>=n-1)break;n--}t++}return wa}function LA(e){return e.match("^[^/\\\\]*$")!=null}function ku(e){var t=null,n;if(Le[e]===void 0&&typeof Ll<"u"&&Ll&&Ll.exports&&LA(e))try{t=wa._abbr,n=require,n("./locale/"+e),Ir(t)}catch{Le[e]=null}return Le[e]}function Ir(e,t){var n;return e&&(Mt(t)?n=or(e):n=Oh(e,t),n?wa=n:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),wa._abbr}function Oh(e,t){if(t!==null){var n,r=uw;if(t.abbr=e,Le[e]!=null)Y0("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=Le[e]._config;else if(t.parentLocale!=null)if(Le[t.parentLocale]!=null)r=Le[t.parentLocale]._config;else if(n=ku(t.parentLocale),n!=null)r=n._config;else return Ps[t.parentLocale]||(Ps[t.parentLocale]=[]),Ps[t.parentLocale].push({name:e,config:t}),null;return Le[e]=new Ch(Nd(r,t)),Ps[e]&&Ps[e].forEach(function(i){Oh(i.name,i.config)}),Ir(e),Le[e]}else return delete Le[e],null}function qA(e,t){if(t!=null){var n,r,i=uw;Le[e]!=null&&Le[e].parentLocale!=null?Le[e].set(Nd(Le[e]._config,t)):(r=ku(e),r!=null&&(i=r._config),t=Nd(i,t),r==null&&(t.abbr=e),n=new Ch(t),n.parentLocale=Le[e],Le[e]=n),Ir(e)}else Le[e]!=null&&(Le[e].parentLocale!=null?(Le[e]=Le[e].parentLocale,e===Ir()&&Ir(e)):Le[e]!=null&&delete Le[e]);return Le[e]}function or(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return wa;if(!wn(e)){if(t=ku(e),t)return t;e=[e]}return RA(e)}function UA(){return Dd(Le)}function Mh(e){var t,n=e._a;return n&&ce(e).overflow===-2&&(t=n[Qn]<0||n[Qn]>11?Qn:n[Nn]<1||n[Nn]>ju(n[St],n[Qn])?Nn:n[at]<0||n[at]>24||n[at]===24&&(n[yn]!==0||n[Gn]!==0||n[Zr]!==0)?at:n[yn]<0||n[yn]>59?yn:n[Gn]<0||n[Gn]>59?Gn:n[Zr]<0||n[Zr]>999?Zr:-1,ce(e)._overflowDayOfYear&&(t<St||t>Nn)&&(t=Nn),ce(e)._overflowWeeks&&t===-1&&(t=WP),ce(e)._overflowWeekday&&t===-1&&(t=HP),ce(e).overflow=t),e}var $A=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,VA=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,zA=/Z|[+-]\d\d(?::?\d\d)?/,yl=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],vc=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],BA=/^\/?Date\((-?\d+)/i,YA=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,WA={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function cw(e){var t,n,r=e._i,i=$A.exec(r)||VA.exec(r),s,a,o,u,c=yl.length,d=vc.length;if(i){for(ce(e).iso=!0,t=0,n=c;t<n;t++)if(yl[t][1].exec(i[1])){a=yl[t][0],s=yl[t][2]!==!1;break}if(a==null){e._isValid=!1;return}if(i[3]){for(t=0,n=d;t<n;t++)if(vc[t][1].exec(i[3])){o=(i[2]||" ")+vc[t][0];break}if(o==null){e._isValid=!1;return}}if(!s&&o!=null){e._isValid=!1;return}if(i[4])if(zA.exec(i[4]))u="Z";else{e._isValid=!1;return}e._f=a+(o||"")+(u||""),Th(e)}else e._isValid=!1}function HA(e,t,n,r,i,s){var a=[QA(e),J0.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return s&&a.push(parseInt(s,10)),a}function QA(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function GA(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function KA(e,t,n){if(e){var r=aw.indexOf(e),i=new Date(t[0],t[1],t[2]).getDay();if(r!==i)return ce(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function XA(e,t,n){if(e)return WA[e];if(t)return 0;var r=parseInt(n,10),i=r%100,s=(r-i)/100;return s*60+i}function dw(e){var t=YA.exec(GA(e._i)),n;if(t){if(n=HA(t[4],t[3],t[2],t[5],t[6],t[7]),!KA(t[1],n,e))return;e._a=n,e._tzm=XA(t[8],t[9],t[10]),e._d=ga.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),ce(e).rfc2822=!0}else e._isValid=!1}function ZA(e){var t=BA.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(cw(e),e._isValid===!1)delete e._isValid;else return;if(dw(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:W.createFromInputFallback(e)}W.createFromInputFallback=on("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function ji(e,t,n){return e??t??n}function JA(e){var t=new Date(W.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Fh(e){var t,n,r=[],i,s,a;if(!e._d){for(i=JA(e),e._w&&e._a[Nn]==null&&e._a[Qn]==null&&eO(e),e._dayOfYear!=null&&(a=ji(e._a[St],i[St]),(e._dayOfYear>Xs(a)||e._dayOfYear===0)&&(ce(e)._overflowDayOfYear=!0),n=ga(a,0,e._dayOfYear),e._a[Qn]=n.getUTCMonth(),e._a[Nn]=n.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[at]===24&&e._a[yn]===0&&e._a[Gn]===0&&e._a[Zr]===0&&(e._nextDay=!0,e._a[at]=0),e._d=(e._useUTC?ga:aA).apply(null,r),s=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[at]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==s&&(ce(e).weekdayMismatch=!0)}}function eO(e){var t,n,r,i,s,a,o,u,c;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(s=1,a=4,n=ji(t.GG,e._a[St],xa(Fe(),1,4).year),r=ji(t.W,1),i=ji(t.E,1),(i<1||i>7)&&(u=!0)):(s=e._locale._week.dow,a=e._locale._week.doy,c=xa(Fe(),s,a),n=ji(t.gg,e._a[St],c.year),r=ji(t.w,c.week),t.d!=null?(i=t.d,(i<0||i>6)&&(u=!0)):t.e!=null?(i=t.e+s,(t.e<0||t.e>6)&&(u=!0)):i=s),r<1||r>Zn(n,s,a)?ce(e)._overflowWeeks=!0:u!=null?ce(e)._overflowWeekday=!0:(o=sw(n,r,i,s,a),e._a[St]=o.year,e._dayOfYear=o.dayOfYear)}W.ISO_8601=function(){};W.RFC_2822=function(){};function Th(e){if(e._f===W.ISO_8601){cw(e);return}if(e._f===W.RFC_2822){dw(e);return}e._a=[],ce(e).empty=!0;var t=""+e._i,n,r,i,s,a,o=t.length,u=0,c,d;for(i=W0(e._f,e._locale).match(_h)||[],d=i.length,n=0;n<d;n++)s=i[n],r=(t.match(zP(s,e))||[])[0],r&&(a=t.substr(0,t.indexOf(r)),a.length>0&&ce(e).unusedInput.push(a),t=t.slice(t.indexOf(r)+r.length),u+=r.length),Hi[s]?(r?ce(e).empty=!1:ce(e).unusedTokens.push(s),YP(s,r,e)):e._strict&&!r&&ce(e).unusedTokens.push(s);ce(e).charsLeftOver=o-u,t.length>0&&ce(e).unusedInput.push(t),e._a[at]<=12&&ce(e).bigHour===!0&&e._a[at]>0&&(ce(e).bigHour=void 0),ce(e).parsedDateParts=e._a.slice(0),ce(e).meridiem=e._meridiem,e._a[at]=tO(e._locale,e._a[at],e._meridiem),c=ce(e).era,c!==null&&(e._a[St]=e._locale.erasConvertYear(c,e._a[St])),Fh(e),Mh(e)}function tO(e,t,n){var r;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):(e.isPM!=null&&(r=e.isPM(n),r&&t<12&&(t+=12),!r&&t===12&&(t=0)),t)}function nO(e){var t,n,r,i,s,a,o=!1,u=e._f.length;if(u===0){ce(e).invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<u;i++)s=0,a=!1,t=kh({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[i],Th(t),jh(t)&&(a=!0),s+=ce(t).charsLeftOver,s+=ce(t).unusedTokens.length*10,ce(t).score=s,o?s<r&&(r=s,n=t):(r==null||s<r||a)&&(r=s,n=t,a&&(o=!0));gr(e,n||t)}function rO(e){if(!e._d){var t=Nh(e._i),n=t.day===void 0?t.date:t.day;e._a=z0([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(r){return r&&parseInt(r,10)}),Fh(e)}}function iO(e){var t=new Ba(Mh(fw(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function fw(e){var t=e._i,n=e._f;return e._locale=e._locale||or(e._l),t===null||n===void 0&&t===""?yu({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),bn(t)?new Ba(Mh(t)):(za(t)?e._d=t:wn(n)?nO(e):n?Th(e):sO(e),jh(e)||(e._d=null),e))}function sO(e){var t=e._i;Mt(t)?e._d=new Date(W.now()):za(t)?e._d=new Date(t.valueOf()):typeof t=="string"?ZA(e):wn(t)?(e._a=z0(t.slice(0),function(n){return parseInt(n,10)}),Fh(e)):ni(t)?rO(e):ir(t)?e._d=new Date(t):W.createFromInputFallback(e)}function hw(e,t,n,r,i){var s={};return(t===!0||t===!1)&&(r=t,t=void 0),(n===!0||n===!1)&&(r=n,n=void 0),(ni(e)&&Sh(e)||wn(e)&&e.length===0)&&(e=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=i,s._l=n,s._i=e,s._f=t,s._strict=r,iO(s)}function Fe(e,t,n,r){return hw(e,t,n,r,!1)}var aO=on("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Fe.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:yu()}),lO=on("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Fe.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:yu()});function mw(e,t){var n,r;if(t.length===1&&wn(t[0])&&(t=t[0]),!t.length)return Fe();for(n=t[0],r=1;r<t.length;++r)(!t[r].isValid()||t[r][e](n))&&(n=t[r]);return n}function oO(){var e=[].slice.call(arguments,0);return mw("isBefore",e)}function uO(){var e=[].slice.call(arguments,0);return mw("isAfter",e)}var cO=function(){return Date.now?Date.now():+new Date},As=["year","quarter","month","week","day","hour","minute","second","millisecond"];function dO(e){var t,n=!1,r,i=As.length;for(t in e)if(be(e,t)&&!(Ke.call(As,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(r=0;r<i;++r)if(e[As[r]]){if(n)return!1;parseFloat(e[As[r]])!==me(e[As[r]])&&(n=!0)}return!0}function fO(){return this._isValid}function hO(){return jn(NaN)}function Cu(e){var t=Nh(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||t.isoWeek||0,a=t.day||0,o=t.hour||0,u=t.minute||0,c=t.second||0,d=t.millisecond||0;this._isValid=dO(t),this._milliseconds=+d+c*1e3+u*6e4+o*1e3*60*60,this._days=+a+s*7,this._months=+i+r*3+n*12,this._data={},this._locale=or(),this._bubble()}function Fl(e){return e instanceof Cu}function Id(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function mO(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,a;for(a=0;a<r;a++)(n&&e[a]!==t[a]||!n&&me(e[a])!==me(t[a]))&&s++;return s+i}function pw(e,t){re(e,0,0,function(){var n=this.utcOffset(),r="+";return n<0&&(n=-n,r="-"),r+Mn(~~(n/60),2)+t+Mn(~~n%60,2)})}pw("Z",":");pw("ZZ","");G("Z",Su);G("ZZ",Su);Ne(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Rh(Su,e)});var pO=/([\+\-]|\d\d)/gi;function Rh(e,t){var n=(t||"").match(e),r,i,s;return n===null?null:(r=n[n.length-1]||[],i=(r+"").match(pO)||["-",0,0],s=+(i[1]*60)+me(i[2]),s===0?0:i[0]==="+"?s:-s)}function Lh(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(bn(e)||za(e)?e.valueOf():Fe(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),W.updateOffset(n,!1),n):Fe(e).local()}function Pd(e){return-Math.round(e._d.getTimezoneOffset())}W.updateOffset=function(){};function yO(e,t,n){var r=this._offset||0,i;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Rh(Su,e),e===null)return this}else Math.abs(e)<16&&!n&&(e=e*60);return!this._isUTC&&t&&(i=Pd(this)),this._offset=e,this._isUTC=!0,i!=null&&this.add(i,"m"),r!==e&&(!t||this._changeInProgress?gw(this,jn(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,W.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:Pd(this)}function vO(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function gO(e){return this.utcOffset(0,e)}function xO(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Pd(this),"m")),this}function wO(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Rh($P,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function bO(e){return this.isValid()?(e=e?Fe(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function SO(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function jO(){if(!Mt(this._isDSTShifted))return this._isDSTShifted;var e={},t;return kh(e,this),e=fw(e),e._a?(t=e._isUTC?Ln(e._a):Fe(e._a),this._isDSTShifted=this.isValid()&&mO(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function kO(){return this.isValid()?!this._isUTC:!1}function CO(){return this.isValid()?this._isUTC:!1}function yw(){return this.isValid()?this._isUTC&&this._offset===0:!1}var _O=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,NO=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function jn(e,t){var n=e,r=null,i,s,a;return Fl(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:ir(e)||!isNaN(+e)?(n={},t?n[t]=+e:n.milliseconds=+e):(r=_O.exec(e))?(i=r[1]==="-"?-1:1,n={y:0,d:me(r[Nn])*i,h:me(r[at])*i,m:me(r[yn])*i,s:me(r[Gn])*i,ms:me(Id(r[Zr]*1e3))*i}):(r=NO.exec(e))?(i=r[1]==="-"?-1:1,n={y:zr(r[2],i),M:zr(r[3],i),w:zr(r[4],i),d:zr(r[5],i),h:zr(r[6],i),m:zr(r[7],i),s:zr(r[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(a=DO(Fe(n.from),Fe(n.to)),n={},n.ms=a.milliseconds,n.M=a.months),s=new Cu(n),Fl(e)&&be(e,"_locale")&&(s._locale=e._locale),Fl(e)&&be(e,"_isValid")&&(s._isValid=e._isValid),s}jn.fn=Cu.prototype;jn.invalid=hO;function zr(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function by(e,t){var n={};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function DO(e,t){var n;return e.isValid()&&t.isValid()?(t=Lh(t,e),e.isBefore(t)?n=by(e,t):(n=by(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function vw(e,t){return function(n,r){var i,s;return r!==null&&!isNaN(+r)&&(Y0(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=n,n=r,r=s),i=jn(n,r),gw(this,i,e),this}}function gw(e,t,n,r){var i=t._milliseconds,s=Id(t._days),a=Id(t._months);e.isValid()&&(r=r??!0,a&&tw(e,Eo(e,"Month")+a*n),s&&Q0(e,"Date",Eo(e,"Date")+s*n),i&&e._d.setTime(e._d.valueOf()+i*n),r&&W.updateOffset(e,s||a))}var EO=vw(1,"add"),IO=vw(-1,"subtract");function xw(e){return typeof e=="string"||e instanceof String}function PO(e){return bn(e)||za(e)||xw(e)||ir(e)||OO(e)||AO(e)||e===null||e===void 0}function AO(e){var t=ni(e)&&!Sh(e),n=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,s,a=r.length;for(i=0;i<a;i+=1)s=r[i],n=n||be(e,s);return t&&n}function OO(e){var t=wn(e),n=!1;return t&&(n=e.filter(function(r){return!ir(r)&&xw(e)}).length===0),t&&n}function MO(e){var t=ni(e)&&!Sh(e),n=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,s;for(i=0;i<r.length;i+=1)s=r[i],n=n||be(e,s);return t&&n}function FO(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function TO(e,t){arguments.length===1&&(arguments[0]?PO(arguments[0])?(e=arguments[0],t=void 0):MO(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Fe(),r=Lh(n,this).startOf("day"),i=W.calendarFormat(this,r)||"sameElse",s=t&&(qn(t[i])?t[i].call(this,n):t[i]);return this.format(s||this.localeData().calendar(i,this,Fe(n)))}function RO(){return new Ba(this)}function LO(e,t){var n=bn(e)?e:Fe(e);return this.isValid()&&n.isValid()?(t=un(t)||"millisecond",t==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf()):!1}function qO(e,t){var n=bn(e)?e:Fe(e);return this.isValid()&&n.isValid()?(t=un(t)||"millisecond",t==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf()):!1}function UO(e,t,n,r){var i=bn(e)?e:Fe(e),s=bn(t)?t:Fe(t);return this.isValid()&&i.isValid()&&s.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(i,n):!this.isBefore(i,n))&&(r[1]===")"?this.isBefore(s,n):!this.isAfter(s,n))):!1}function $O(e,t){var n=bn(e)?e:Fe(e),r;return this.isValid()&&n.isValid()?(t=un(t)||"millisecond",t==="millisecond"?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf())):!1}function VO(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function zO(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function BO(e,t,n){var r,i,s;if(!this.isValid())return NaN;if(r=Lh(e,this),!r.isValid())return NaN;switch(i=(r.utcOffset()-this.utcOffset())*6e4,t=un(t),t){case"year":s=Tl(this,r)/12;break;case"month":s=Tl(this,r);break;case"quarter":s=Tl(this,r)/3;break;case"second":s=(this-r)/1e3;break;case"minute":s=(this-r)/6e4;break;case"hour":s=(this-r)/36e5;break;case"day":s=(this-r-i)/864e5;break;case"week":s=(this-r-i)/6048e5;break;default:s=this-r}return n?s:Jt(s)}function Tl(e,t){if(e.date()<t.date())return-Tl(t,e);var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),i,s;return t-r<0?(i=e.clone().add(n-1,"months"),s=(t-r)/(r-i)):(i=e.clone().add(n+1,"months"),s=(t-r)/(i-r)),-(n+s)||0}W.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";W.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function YO(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function WO(e){if(!this.isValid())return null;var t=e!==!0,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?Ml(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):qn(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Ml(n,"Z")):Ml(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function HO(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",n,r,i,s;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",s=t+'[")]',this.format(n+r+i+s)}function QO(e){e||(e=this.isUtc()?W.defaultFormatUtc:W.defaultFormat);var t=Ml(this,e);return this.localeData().postformat(t)}function GO(e,t){return this.isValid()&&(bn(e)&&e.isValid()||Fe(e).isValid())?jn({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function KO(e){return this.from(Fe(),e)}function XO(e,t){return this.isValid()&&(bn(e)&&e.isValid()||Fe(e).isValid())?jn({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ZO(e){return this.to(Fe(),e)}function ww(e){var t;return e===void 0?this._locale._abbr:(t=or(e),t!=null&&(this._locale=t),this)}var bw=on("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function Sw(){return this._locale}var Ao=1e3,Qi=60*Ao,Oo=60*Qi,jw=(365*400+97)*24*Oo;function Gi(e,t){return(e%t+t)%t}function kw(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-jw:new Date(e,t,n).valueOf()}function Cw(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-jw:Date.UTC(e,t,n)}function JO(e){var t,n;if(e=un(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Cw:kw,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Gi(t+(this._isUTC?0:this.utcOffset()*Qi),Oo);break;case"minute":t=this._d.valueOf(),t-=Gi(t,Qi);break;case"second":t=this._d.valueOf(),t-=Gi(t,Ao);break}return this._d.setTime(t),W.updateOffset(this,!0),this}function eM(e){var t,n;if(e=un(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Cw:kw,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Oo-Gi(t+(this._isUTC?0:this.utcOffset()*Qi),Oo)-1;break;case"minute":t=this._d.valueOf(),t+=Qi-Gi(t,Qi)-1;break;case"second":t=this._d.valueOf(),t+=Ao-Gi(t,Ao)-1;break}return this._d.setTime(t),W.updateOffset(this,!0),this}function tM(){return this._d.valueOf()-(this._offset||0)*6e4}function nM(){return Math.floor(this.valueOf()/1e3)}function rM(){return new Date(this.valueOf())}function iM(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function sM(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function aM(){return this.isValid()?this.toISOString():null}function lM(){return jh(this)}function oM(){return gr({},ce(this))}function uM(){return ce(this).overflow}function cM(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}re("N",0,0,"eraAbbr");re("NN",0,0,"eraAbbr");re("NNN",0,0,"eraAbbr");re("NNNN",0,0,"eraName");re("NNNNN",0,0,"eraNarrow");re("y",["y",1],"yo","eraYear");re("y",["yy",2],0,"eraYear");re("y",["yyy",3],0,"eraYear");re("y",["yyyy",4],0,"eraYear");G("N",qh);G("NN",qh);G("NNN",qh);G("NNNN",bM);G("NNNNN",SM);Ne(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,r){var i=n._locale.erasParse(e,r,n._strict);i?ce(n).era=i:ce(n).invalidEra=e});G("y",ms);G("yy",ms);G("yyy",ms);G("yyyy",ms);G("yo",jM);Ne(["y","yy","yyy","yyyy"],St);Ne(["yo"],function(e,t,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[St]=n._locale.eraYearOrdinalParse(e,i):t[St]=parseInt(e,10)});function dM(e,t){var n,r,i,s=this._eras||or("en")._eras;for(n=0,r=s.length;n<r;++n){switch(typeof s[n].since){case"string":i=W(s[n].since).startOf("day"),s[n].since=i.valueOf();break}switch(typeof s[n].until){case"undefined":s[n].until=1/0;break;case"string":i=W(s[n].until).startOf("day").valueOf(),s[n].until=i.valueOf();break}}return s}function fM(e,t,n){var r,i,s=this.eras(),a,o,u;for(e=e.toUpperCase(),r=0,i=s.length;r<i;++r)if(a=s[r].name.toUpperCase(),o=s[r].abbr.toUpperCase(),u=s[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(o===e)return s[r];break;case"NNNN":if(a===e)return s[r];break;case"NNNNN":if(u===e)return s[r];break}else if([a,o,u].indexOf(e)>=0)return s[r]}function hM(e,t){var n=e.since<=e.until?1:-1;return t===void 0?W(e.since).year():W(e.since).year()+(t-e.offset)*n}function mM(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].name;return""}function pM(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].narrow;return""}function yM(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].abbr;return""}function vM(){var e,t,n,r,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(n=i[e].since<=i[e].until?1:-1,r=this.clone().startOf("day").valueOf(),i[e].since<=r&&r<=i[e].until||i[e].until<=r&&r<=i[e].since)return(this.year()-W(i[e].since).year())*n+i[e].offset;return this.year()}function gM(e){return be(this,"_erasNameRegex")||Uh.call(this),e?this._erasNameRegex:this._erasRegex}function xM(e){return be(this,"_erasAbbrRegex")||Uh.call(this),e?this._erasAbbrRegex:this._erasRegex}function wM(e){return be(this,"_erasNarrowRegex")||Uh.call(this),e?this._erasNarrowRegex:this._erasRegex}function qh(e,t){return t.erasAbbrRegex(e)}function bM(e,t){return t.erasNameRegex(e)}function SM(e,t){return t.erasNarrowRegex(e)}function jM(e,t){return t._eraYearOrdinalRegex||ms}function Uh(){var e=[],t=[],n=[],r=[],i,s,a=this.eras();for(i=0,s=a.length;i<s;++i)t.push(zt(a[i].name)),e.push(zt(a[i].abbr)),n.push(zt(a[i].narrow)),r.push(zt(a[i].name)),r.push(zt(a[i].abbr)),r.push(zt(a[i].narrow));this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}re(0,["gg",2],0,function(){return this.weekYear()%100});re(0,["GG",2],0,function(){return this.isoWeekYear()%100});function _u(e,t){re(0,[e,e.length],0,t)}_u("gggg","weekYear");_u("ggggg","weekYear");_u("GGGG","isoWeekYear");_u("GGGGG","isoWeekYear");Ct("weekYear","gg");Ct("isoWeekYear","GG");_t("weekYear",1);_t("isoWeekYear",1);G("G",bu);G("g",bu);G("GG",Te,Gt);G("gg",Te,Gt);G("GGGG",Eh,Dh);G("gggg",Eh,Dh);G("GGGGG",wu,gu);G("ggggg",wu,gu);Wa(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=me(e)});Wa(["gg","GG"],function(e,t,n,r){t[r]=W.parseTwoDigitYear(e)});function kM(e){return _w.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function CM(e){return _w.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function _M(){return Zn(this.year(),1,4)}function NM(){return Zn(this.isoWeekYear(),1,4)}function DM(){var e=this.localeData()._week;return Zn(this.year(),e.dow,e.doy)}function EM(){var e=this.localeData()._week;return Zn(this.weekYear(),e.dow,e.doy)}function _w(e,t,n,r,i){var s;return e==null?xa(this,r,i).year:(s=Zn(e,r,i),t>s&&(t=s),IM.call(this,e,t,n,r,i))}function IM(e,t,n,r,i){var s=sw(e,t,n,r,i),a=ga(s.year,0,s.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}re("Q",0,"Qo","quarter");Ct("quarter","Q");_t("quarter",7);G("Q",G0);Ne("Q",function(e,t){t[Qn]=(me(e)-1)*3});function PM(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}re("D",["DD",2],"Do","date");Ct("date","D");_t("date",9);G("D",Te);G("DD",Te,Gt);G("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});Ne(["D","DD"],Nn);Ne("Do",function(e,t){t[Nn]=me(e.match(Te)[0])});var Nw=hs("Date",!0);re("DDD",["DDDD",3],"DDDo","dayOfYear");Ct("dayOfYear","DDD");_t("dayOfYear",4);G("DDD",xu);G("DDDD",K0);Ne(["DDD","DDDD"],function(e,t,n){n._dayOfYear=me(e)});function AM(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}re("m",["mm",2],0,"minute");Ct("minute","m");_t("minute",14);G("m",Te);G("mm",Te,Gt);Ne(["m","mm"],yn);var OM=hs("Minutes",!1);re("s",["ss",2],0,"second");Ct("second","s");_t("second",15);G("s",Te);G("ss",Te,Gt);Ne(["s","ss"],Gn);var MM=hs("Seconds",!1);re("S",0,0,function(){return~~(this.millisecond()/100)});re(0,["SS",2],0,function(){return~~(this.millisecond()/10)});re(0,["SSS",3],0,"millisecond");re(0,["SSSS",4],0,function(){return this.millisecond()*10});re(0,["SSSSS",5],0,function(){return this.millisecond()*100});re(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});re(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});re(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});re(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Ct("millisecond","ms");_t("millisecond",16);G("S",xu,G0);G("SS",xu,Gt);G("SSS",xu,K0);var xr,Dw;for(xr="SSSS";xr.length<=9;xr+="S")G(xr,ms);function FM(e,t){t[Zr]=me(("0."+e)*1e3)}for(xr="S";xr.length<=9;xr+="S")Ne(xr,FM);Dw=hs("Milliseconds",!1);re("z",0,0,"zoneAbbr");re("zz",0,0,"zoneName");function TM(){return this._isUTC?"UTC":""}function RM(){return this._isUTC?"Coordinated Universal Time":""}var V=Ba.prototype;V.add=EO;V.calendar=TO;V.clone=RO;V.diff=BO;V.endOf=eM;V.format=QO;V.from=GO;V.fromNow=KO;V.to=XO;V.toNow=ZO;V.get=qP;V.invalidAt=uM;V.isAfter=LO;V.isBefore=qO;V.isBetween=UO;V.isSame=$O;V.isSameOrAfter=VO;V.isSameOrBefore=zO;V.isValid=lM;V.lang=bw;V.locale=ww;V.localeData=Sw;V.max=lO;V.min=aO;V.parsingFlags=oM;V.set=UP;V.startOf=JO;V.subtract=IO;V.toArray=iM;V.toObject=sM;V.toDate=rM;V.toISOString=WO;V.inspect=HO;typeof Symbol<"u"&&Symbol.for!=null&&(V[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});V.toJSON=aM;V.toString=YO;V.unix=nM;V.valueOf=tM;V.creationData=cM;V.eraName=mM;V.eraNarrow=pM;V.eraAbbr=yM;V.eraYear=vM;V.year=iw;V.isLeapYear=sA;V.weekYear=kM;V.isoWeekYear=CM;V.quarter=V.quarters=PM;V.month=nw;V.daysInMonth=nA;V.week=V.weeks=dA;V.isoWeek=V.isoWeeks=fA;V.weeksInYear=DM;V.weeksInWeekYear=EM;V.isoWeeksInYear=_M;V.isoWeeksInISOWeekYear=NM;V.date=Nw;V.day=V.days=CA;V.weekday=_A;V.isoWeekday=NA;V.dayOfYear=AM;V.hour=V.hours=MA;V.minute=V.minutes=OM;V.second=V.seconds=MM;V.millisecond=V.milliseconds=Dw;V.utcOffset=yO;V.utc=gO;V.local=xO;V.parseZone=wO;V.hasAlignedHourOffset=bO;V.isDST=SO;V.isLocal=kO;V.isUtcOffset=CO;V.isUtc=yw;V.isUTC=yw;V.zoneAbbr=TM;V.zoneName=RM;V.dates=on("dates accessor is deprecated. Use date instead.",Nw);V.months=on("months accessor is deprecated. Use month instead",nw);V.years=on("years accessor is deprecated. Use year instead",iw);V.zone=on("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",vO);V.isDSTShifted=on("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",jO);function LM(e){return Fe(e*1e3)}function qM(){return Fe.apply(null,arguments).parseZone()}function Ew(e){return e}var Se=Ch.prototype;Se.calendar=CP;Se.longDateFormat=EP;Se.invalidDate=PP;Se.ordinal=MP;Se.preparse=Ew;Se.postformat=Ew;Se.relativeTime=TP;Se.pastFuture=RP;Se.set=jP;Se.eras=dM;Se.erasParse=fM;Se.erasConvertYear=hM;Se.erasAbbrRegex=xM;Se.erasNameRegex=gM;Se.erasNarrowRegex=wM;Se.months=ZP;Se.monthsShort=JP;Se.monthsParse=tA;Se.monthsRegex=iA;Se.monthsShortRegex=rA;Se.week=lA;Se.firstDayOfYear=cA;Se.firstDayOfWeek=uA;Se.weekdays=wA;Se.weekdaysMin=SA;Se.weekdaysShort=bA;Se.weekdaysParse=kA;Se.weekdaysRegex=DA;Se.weekdaysShortRegex=EA;Se.weekdaysMinRegex=IA;Se.isPM=AA;Se.meridiem=FA;function Mo(e,t,n,r){var i=or(),s=Ln().set(r,t);return i[n](s,e)}function Iw(e,t,n){if(ir(e)&&(t=e,e=void 0),e=e||"",t!=null)return Mo(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=Mo(e,r,n,"month");return i}function $h(e,t,n,r){typeof e=="boolean"?(ir(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,ir(t)&&(n=t,t=void 0),t=t||"");var i=or(),s=e?i._week.dow:0,a,o=[];if(n!=null)return Mo(t,(n+s)%7,r,"day");for(a=0;a<7;a++)o[a]=Mo(t,(a+s)%7,r,"day");return o}function UM(e,t){return Iw(e,t,"months")}function $M(e,t){return Iw(e,t,"monthsShort")}function VM(e,t,n){return $h(e,t,n,"weekdays")}function zM(e,t,n){return $h(e,t,n,"weekdaysShort")}function BM(e,t,n){return $h(e,t,n,"weekdaysMin")}Ir("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=me(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});W.lang=on("moment.lang is deprecated. Use moment.locale instead.",Ir);W.langData=on("moment.langData is deprecated. Use moment.localeData instead.",or);var Vn=Math.abs;function YM(){var e=this._data;return this._milliseconds=Vn(this._milliseconds),this._days=Vn(this._days),this._months=Vn(this._months),e.milliseconds=Vn(e.milliseconds),e.seconds=Vn(e.seconds),e.minutes=Vn(e.minutes),e.hours=Vn(e.hours),e.months=Vn(e.months),e.years=Vn(e.years),this}function Pw(e,t,n,r){var i=jn(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function WM(e,t){return Pw(this,e,t,1)}function HM(e,t){return Pw(this,e,t,-1)}function Sy(e){return e<0?Math.floor(e):Math.ceil(e)}function QM(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,a,o,u;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=Sy(Ad(n)+t)*864e5,t=0,n=0),r.milliseconds=e%1e3,i=Jt(e/1e3),r.seconds=i%60,s=Jt(i/60),r.minutes=s%60,a=Jt(s/60),r.hours=a%24,t+=Jt(a/24),u=Jt(Aw(t)),n+=u,t-=Sy(Ad(u)),o=Jt(n/12),n%=12,r.days=t,r.months=n,r.years=o,this}function Aw(e){return e*4800/146097}function Ad(e){return e*146097/4800}function GM(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if(e=un(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+r/864e5,n=this._months+Aw(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Ad(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}function KM(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+me(this._months/12)*31536e6:NaN}function ur(e){return function(){return this.as(e)}}var XM=ur("ms"),ZM=ur("s"),JM=ur("m"),eF=ur("h"),tF=ur("d"),nF=ur("w"),rF=ur("M"),iF=ur("Q"),sF=ur("y");function aF(){return jn(this)}function lF(e){return e=un(e),this.isValid()?this[e+"s"]():NaN}function gi(e){return function(){return this.isValid()?this._data[e]:NaN}}var oF=gi("milliseconds"),uF=gi("seconds"),cF=gi("minutes"),dF=gi("hours"),fF=gi("days"),hF=gi("months"),mF=gi("years");function pF(){return Jt(this.days()/7)}var Bn=Math.round,Ri={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function yF(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function vF(e,t,n,r){var i=jn(e).abs(),s=Bn(i.as("s")),a=Bn(i.as("m")),o=Bn(i.as("h")),u=Bn(i.as("d")),c=Bn(i.as("M")),d=Bn(i.as("w")),f=Bn(i.as("y")),m=s<=n.ss&&["s",s]||s<n.s&&["ss",s]||a<=1&&["m"]||a<n.m&&["mm",a]||o<=1&&["h"]||o<n.h&&["hh",o]||u<=1&&["d"]||u<n.d&&["dd",u];return n.w!=null&&(m=m||d<=1&&["w"]||d<n.w&&["ww",d]),m=m||c<=1&&["M"]||c<n.M&&["MM",c]||f<=1&&["y"]||["yy",f],m[2]=t,m[3]=+e>0,m[4]=r,yF.apply(null,m)}function gF(e){return e===void 0?Bn:typeof e=="function"?(Bn=e,!0):!1}function xF(e,t){return Ri[e]===void 0?!1:t===void 0?Ri[e]:(Ri[e]=t,e==="s"&&(Ri.ss=t-1),!0)}function wF(e,t){if(!this.isValid())return this.localeData().invalidDate();var n=!1,r=Ri,i,s;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(n=e),typeof t=="object"&&(r=Object.assign({},Ri,t),t.s!=null&&t.ss==null&&(r.ss=t.s-1)),i=this.localeData(),s=vF(this,!n,r,i),n&&(s=i.pastFuture(+this,s)),i.postformat(s)}var gc=Math.abs;function bi(e){return(e>0)-(e<0)||+e}function Nu(){if(!this.isValid())return this.localeData().invalidDate();var e=gc(this._milliseconds)/1e3,t=gc(this._days),n=gc(this._months),r,i,s,a,o=this.asSeconds(),u,c,d,f;return o?(r=Jt(e/60),i=Jt(r/60),e%=60,r%=60,s=Jt(n/12),n%=12,a=e?e.toFixed(3).replace(/\.?0+$/,""):"",u=o<0?"-":"",c=bi(this._months)!==bi(o)?"-":"",d=bi(this._days)!==bi(o)?"-":"",f=bi(this._milliseconds)!==bi(o)?"-":"",u+"P"+(s?c+s+"Y":"")+(n?c+n+"M":"")+(t?d+t+"D":"")+(i||r||e?"T":"")+(i?f+i+"H":"")+(r?f+r+"M":"")+(e?f+a+"S":"")):"P0D"}var ye=Cu.prototype;ye.isValid=fO;ye.abs=YM;ye.add=WM;ye.subtract=HM;ye.as=GM;ye.asMilliseconds=XM;ye.asSeconds=ZM;ye.asMinutes=JM;ye.asHours=eF;ye.asDays=tF;ye.asWeeks=nF;ye.asMonths=rF;ye.asQuarters=iF;ye.asYears=sF;ye.valueOf=KM;ye._bubble=QM;ye.clone=aF;ye.get=lF;ye.milliseconds=oF;ye.seconds=uF;ye.minutes=cF;ye.hours=dF;ye.days=fF;ye.weeks=pF;ye.months=hF;ye.years=mF;ye.humanize=wF;ye.toISOString=Nu;ye.toString=Nu;ye.toJSON=Nu;ye.locale=ww;ye.localeData=Sw;ye.toIsoString=on("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Nu);ye.lang=bw;re("X",0,0,"unix");re("x",0,0,"valueOf");G("x",bu);G("X",VP);Ne("X",function(e,t,n){n._d=new Date(parseFloat(e)*1e3)});Ne("x",function(e,t,n){n._d=new Date(me(e))});//! moment.js
W.version="2.29.4";bP(Fe);W.fn=V;W.min=oO;W.max=uO;W.now=cO;W.utc=Ln;W.unix=LM;W.months=UM;W.isDate=za;W.locale=Ir;W.invalid=yu;W.duration=jn;W.isMoment=bn;W.weekdays=VM;W.parseZone=qM;W.localeData=or;W.isDuration=Fl;W.monthsShort=$M;W.weekdaysMin=BM;W.defineLocale=Oh;W.updateLocale=qA;W.locales=UA;W.weekdaysShort=zM;W.normalizeUnits=un;W.relativeTimeRounding=gF;W.relativeTimeThreshold=xF;W.calendarFormat=FO;W.prototype=V;W.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};var Rl=(e=>(e[e.day=0]="day",e[e.month=1]="month",e[e.week=2]="week",e[e.year=3]="year",e))(Rl||{});const Ow="periodType",jy=0;function bF(){let e=localStorage.getItem(Ow);if(e===null)return 0;let t=Number(e);return Number.isNaN(t)===!0||t<0||t>3?jy:t}function SF(e){localStorage.setItem(Ow,String(e))}class Du{constructor(t,n,r,i){x(this,"timezone");x(this,"siteBizMonth");x(this,"siteBizDate");x(this,"onChanged");x(this,"type");x(this,"state");x(this,"hasNext");x(this,"caption");this.timezone=t,this.siteBizMonth=n,this.siteBizDate=r,this.onChanged=i;let s=this.newDate();this.state=Ie({to:s,from:new Date(s),caption:null}),this.hasNext=Ie(a=>{let o=this.newDate();return a(this.state).to<=o}),this.caption=Ie(a=>this.getCaption(a)),this.init()}newDate(){let t=new Date;return t.setHours(t.getHours()-eu.timeZone+this.timezone),t.setHours(0,0,0,0),t}getGrainSize(t){return""}prev(){var t;this.prevInternal(),(t=this.onChanged)==null||t.call(this,this)}next(){var t;this.nextInternal(),(t=this.onChanged)==null||t.call(this,this)}}const jF="日一二三四五六";class kF extends Du{init(){this.type=0;let{from:t,to:n}=de(this.state),r=new Date(t),i=new Date(n);i.setDate(t.getDate()+1),ae(this.state,{from:r,to:i})}prevInternal(){let{from:t,to:n}=de(this.state);ae(this.state,{to:new Date(n.setDate(n.getDate()-1)),from:new Date(t.setDate(t.getDate()-1))})}nextInternal(){let{from:t,to:n}=de(this.state);ae(this.state,{to:new Date(n.setDate(n.getDate()+1)),from:new Date(t.setDate(t.getDate()+1))})}getCaption(t){let{from:n}=t(this.state),r=new Date().getFullYear(),i=n.getFullYear(),s=n.getMonth(),a=n.getDate(),o=n.getDay();return(i===r?"":`${i}年`)+`${s+1}月${a}日 星期${jF[o]}`}}class CF extends Du{init(){let{to:t}=de(this.state);this.type=2;let n=t.getDay(),i=t.getDate()-n+(n===0?-6:1),s=new Date(t),a=new Date(t.setDate(i));s.setDate(t.getDate()+7),ae(this.state,{from:a,to:s})}prevInternal(){let{from:t,to:n}=de(this.state);ae(this.state,{from:new Date(t.setDate(t.getDate()-7)),to:new Date(n.setDate(n.getDate()-7))})}nextInternal(){let{from:t,to:n}=de(this.state);ae(this.state,{from:new Date(t.setDate(t.getDate()+7)),to:new Date(n.setDate(n.getDate()+7))})}getCaption(t){let{from:n,to:r}=t(this.state),i=new Date().getFullYear(),s=n.getFullYear(),a=n.getMonth(),o=n.getDate(),u=new Date(r);u.setDate(r.getDate()-1);let c=u.getMonth(),d=u.getDate();return(s===i?"":`${s}年`)+`${a+1}月${o}日 - `+(c===a?"":`${c+1}月`)+`${d}日`}getGrainSize(t){return W(t).format("MM-DD")}}class _F extends Du{init(){let{from:t,to:n}=de(this.state);this.type=1;let r=n.getFullYear(),i=n.getMonth();n.getDate()<this.siteBizDate&&(i--,i<0&&(i=11,r--));let a=new Date(r,i,this.siteBizDate),o=new Date(a);o.setMonth(i+1),ae(this.state,{from:a,to:o})}prevInternal(){let{from:t,to:n}=de(this.state),r=new Date(t.setMonth(t.getMonth()-1)),i=new Date(n.setMonth(n.getMonth()-1));ae(this.state,{from:r,to:i})}nextInternal(){let{from:t,to:n}=de(this.state);ae(this.state,{from:new Date(t.setMonth(t.getMonth()+1)),to:new Date(n.setMonth(n.getMonth()+1))})}getCaption(t){let{from:n,to:r}=t(this.state),i=new Date().getFullYear(),s=n.getFullYear(),a=n.getMonth(),o=r.getMonth(),u=`${i===s?"":s+"年"}${a+1}月`;return this.siteBizDate>1&&(u+=`${this.siteBizDate}日-${o+1}月${this.siteBizDate-1}日`),u}getGrainSize(t){return W(t).format("MM-DD")}}class NF extends Du{init(){let{from:t,to:n}=de(this.state);this.type=3;let r=n.getFullYear(),i=n.getMonth(),s=n.getDate();i<this.siteBizMonth?r--:s<this.siteBizDate&&(i++,i>11&&r++),i=this.siteBizMonth;let a=new Date(t);a.setFullYear(n.getFullYear()+1),ae(this.state,{from:new Date(r,i,this.siteBizDate),to:a})}prevInternal(){let{from:t,to:n}=de(this.state);ae(this.state,{from:new Date(t.setFullYear(t.getFullYear()-1)),to:new Date(n.setFullYear(n.getFullYear()-1))})}nextInternal(){let{from:t,to:n}=de(this.state);ae(this.state,{from:new Date(t.setFullYear(t.getFullYear()+1)),to:new Date(n.setFullYear(n.getFullYear()+1))})}getCaption(t){let{from:n,to:r}=t(this.state),i=n.getFullYear(),s=r.getFullYear(),a;switch(this.siteBizMonth){case 0:a=`${i}年`;break;case 11:a=`${s}年`;break;default:a=`${i}-${s.toString().substring(2)}年`;break}return a}getGrainSize(t){return W(t).add(1,"M").format("MM")}}function ky(e,t,n,r,i){let s;switch(e){case 0:s=new kF(t,n,r,i);break;case 2:s=new CF(t,n,r,i);break;case 1:s=new _F(t,n,r,i);break;case 3:s=new NF(t,n,r,i);break}return s}function DF(e,t,n,r){let i=bF();const[s,a]=P.useState(ky(i,e,n,t,r));function o(u){let c=ky(u,e,n,t,r);a(c),SF(u),r(c)}return[s,o]}const EF="col text-center border-start border-end",IF=" py-2 px-3 ",PF=" border-3 border-bottom border-primary fw-bold bg-light text-primary",AF=" border-1 border-bottom cursor-pointer text-secondary ",OF=[[Rl.day,"日"],[Rl.week,"周"],[Rl.month,"月"]];function MF({period:e,setEnumPeriod:t}){let n=we(e.hasNext),r=we(e.caption);function i(){e.prev()}function s(){n&&e.next()}return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"row g-0 tonwa-bg-gray-2 border-top",children:OF.map(a=>{let[o,u]=a,c=IF+(o===e.type?PF:AF);return l.jsx("div",{className:EF,onClick:()=>t(o),children:l.jsx("div",{className:c,children:u})},u)})}),l.jsxs("div",{className:"d-flex justify-content-center",children:[l.jsx("div",{className:"cursor-pointer p-3",onClick:i,children:l.jsx(J,{name:"angle-left"})}),l.jsx("div",{className:"text-center px-1 py-3 w-min-10c",children:r}),l.jsx("div",{className:" p-3 "+(n?" cursor-pointer ":" text-light "),onClick:s,children:l.jsx(J,{name:"angle-right"})})]})]})}function FF({balances:e}){async function t(n){}return l.jsx(l.Fragment,{children:e.map((n,r)=>l.jsx(Ce,{to:"PageObjectAccountHistory/accountId",onClick:()=>t(),children:l.jsx(TF,{balance:n})},r))})}function TF({balance:e}){const{obj:t,post:n,subject:r,value:i}=e;let s="元",a=2;return l.jsxs("div",{className:"m-2 p-3 border border-3 border-info-subtle rounded rounded-3 bg-white text-center cursor-pointer w-min-12c",children:[l.jsxs("div",{className:"mb-1",children:[l.jsxs("span",{className:"text-secondary small",children:[t," ",n,"  "]}),l.jsx("span",{className:"text-primary",children:r})]}),l.jsx("div",{className:"fs-larger",children:QD(i,s,a)})]})}const Mw="my";function RF(){const{uq:e}=Z();let t=8,n=6,r=1;const[i,s]=DF(t,n,r,m),[a,o]=P.useState(void 0),[u,c]=P.useState(void 0);async function d(v){let{from:w,to:j}=de(v.state),g={start:w,end:j},{ret:h}=await e.GetMySums.query(g);c(h)}async function f(){let{ret:v}=await e.GetMyBalance.query({});o(v)}Pt(()=>{(async()=>await Promise.all([d(i),f()]))()});async function m(v){await d(v)}let y;return a!==void 0&&(y=l.jsx(FF,{balances:a})),l.jsxs(H,{header:"我的",children:[l.jsx("div",{className:"d-flex flex-wrap p-2 justify-content-center",children:y}),l.jsx(MF,{period:i,setEnumPeriod:s}),l.jsx(Me,{items:u})]})}const LF=l.jsx(ie,{path:Mw,element:l.jsx(RF,{})});function qF(){const e=Z(),{uq:t,biz:n}=e,r=n.sheets,i=P.useCallback(async(o,u,c)=>{let{$page:d}=await t.GetMyDrafts.page({},u,c);return d},[]);function s({value:o}){var y,v;let{caption:u,name:c,id:d,coreDetail:f}=o,m;return f!==void 0&&(m=(v=(y=f.pend)==null?void 0:y.entity)==null?void 0:v.id),l.jsx(Ce,{to:`/sheet/${An(d)}`,children:l.jsxs("div",{className:"px-3 py-2 align-items-center d-flex",children:[l.jsx(On,{name:"card-list",className:"fs-larger me-3 text-primary"}),l.jsx("span",{className:"text-body",children:u??c}),l.jsx(f0,{phrase:m})]})})}function a({value:o}){const{id:u,no:c,phrase:d,i:f}=o;let m=n.entities[d],y;if(m===void 0)y=d;else{const{caption:w,name:j}=m;y=w??j}function v({value:w}){return l.jsx("span",{children:w.ex})}return l.jsx(Ce,{to:`/sheet/${An(m.id)}/${An(u)}`,children:l.jsxs("div",{className:"d-flex px-3 py-3",children:[l.jsx(J,{name:"file",className:"me-3 text-danger"}),l.jsx("span",{className:"d-inline-block w-min-8c",children:y}),l.jsx("span",{className:"d-inline-block w-min-10c",children:c}),l.jsx("span",{className:"d-inline-block w-min-8c",children:l.jsx(an,{uq:t,id:f,Template:v})}),l.jsx("div",{className:"flex-grow-1"}),l.jsx(g0,{id:u})]})})}return l.jsxs(Rn,{header:"单据中心",query:i,param:{},sortField:"id",ViewItem:a,none:l.jsx("div",{className:"small text-secondary p-3",children:"[无]"}),children:[l.jsx(Me,{items:r,ViewItem:s}),l.jsx("div",{className:"tonwa-bg-gray-2 small text-secondary mt-4 px-3 pt-2 pb-1",children:"单据草稿"})]})}const Fw="sheet-center";function UF(){return l.jsxs(l.Fragment,{children:[l.jsx(ie,{path:Fw,element:l.jsx(qF,{})}),l.jsx(ie,{path:"sheet/:sheet/:id",element:l.jsx(sy,{})}),l.jsx(ie,{path:"sheet/:sheet",element:l.jsx(sy,{})})]})}function $F(){const e=Z(),t=we(e.user),{biz:n}=e,{roles:r,permits:i}=n,{uqSites:{userSite:s}}=e,a=s.permits;function o({phrase:f}){let m,y;return a[f]===!0?(m="text-success",y="check"):(m="text-danger",y="times"),l.jsx(J,{name:y,className:"me-3 "+m})}function u({permit:f,caption:m}){function y(){alert(`${m}: ${f}`)}return l.jsx(t0,{permit:f,children:l.jsxs("button",{className:"btn btn-outline-primary",onClick:y,children:[m,": ",f]})})}function c({value:f}){let{phrase:m,name:y,caption:v}=f;return l.jsxs("div",{className:"px-3 py-2 text-primary",children:[l.jsxs("div",{children:[l.jsx(o,{phrase:m}),"角色 ",m," ",y,"  ",v]}),l.jsx("div",{className:"ps-4 py-1",children:l.jsx(u,{permit:m,caption:v??y})})]})}function d({value:f}){let{phrase:m,name:y,caption:v,items:w,permits:j}=f;function g({phrase:S,caption:b}){return l.jsxs("div",{className:"ps-5 py-2",children:[l.jsxs("div",{children:[l.jsx(o,{phrase:S}),b," ",S]}),l.jsx("div",{className:"ps-4 py-1",children:l.jsx(u,{permit:S,caption:b})})]})}function h({value:{phrase:S,caption:b,name:k}}){return l.jsx(g,{phrase:S,caption:b??k})}function p({value:{phrase:S,caption:b,name:k}}){return l.jsx(g,{phrase:S,caption:"许可: "+(b??k)})}return l.jsxs("div",{className:"px-3 py-2 text-success",children:["许可 ",m," ",y,"  ",v,l.jsx(Me,{items:w,ViewItem:h}),j.length>0&&l.jsx(Me,{items:j,ViewItem:p})]})}return l.jsx(H,{header:"权限演示",children:l.jsxs("div",{children:[l.jsx("div",{className:"p-3",children:l.jsx(Kf,{user:t})}),l.jsx(Me,{items:r,ViewItem:c}),l.jsx(ve,{}),l.jsx(Me,{items:i,ViewItem:d})]})})}const Tw="act-setting",Rw="permits";function VF(){const{biz:e}=Z();function t({value:r}){const{name:i,type:s}=r;return l.jsxs("div",{className:"px-3 py-2 d-flex",children:[l.jsx("div",{className:"me-3 w-8c",children:s}),l.jsx("div",{children:i})]})}function n({value:r}){const{name:i,type:s,permits:a,items:o}=r;function u({className:f,value:m,icon:y}){let{caption:v,name:w,type:j}=m;return j===void 0&&(j="item"),l.jsxs("div",{className:"px-3 py-2 border rounded mx-2 my-2 w-min-10c "+f,children:[y," ",v??w]})}function c({value:f}){const m=l.jsx(J,{name:"id-card-o",className:"me-2 text-success"});return l.jsx(u,{value:f,className:"",icon:m})}function d({value:f}){const m=l.jsx(J,{name:"calendar-check-o",className:"me-2 text-info"});return l.jsx(u,{value:f,className:"text-primary",icon:m})}return l.jsxs("div",{className:"mx-2 border",children:[l.jsxs("div",{className:"d-flex tonwa-bg-gray-2 px-3 py-2",children:[l.jsx("div",{className:"me-3 w-8c",children:s}),l.jsx("div",{children:i})]}),l.jsx("div",{className:"d-flex flex-wrap px-1",children:o.map(f=>l.jsx(d,{value:f},f.name))}),l.jsx("div",{className:"d-flex flex-wrap px-1",children:a.map(f=>l.jsx(c,{value:f},f.name))})]})}return l.jsxs(H,{header:"操作设置",children:[l.jsx(Ce,{to:"../"+Rw,children:l.jsx("div",{className:"p-3",children:"权限演示"})}),l.jsx(ve,{}),l.jsxs("div",{className:"",children:[l.jsx(Me,{items:e.roles,ViewItem:t}),l.jsx("div",{className:"py-2"}),l.jsx(Me,{items:e.permits,ViewItem:n,sep:l.jsx("div",{className:"py-2"})})]})]})}const zF=l.jsxs(l.Fragment,{children:[l.jsx(ie,{path:Tw,element:l.jsx(VF,{})}),l.jsx(ie,{path:Rw,element:l.jsx($F,{})})]}),BF=[{label:"单据中心",icon:"file-o",path:Fw,phrase:eh.sheet},{label:"档案中心",path:U0},{label:"报表中心",path:$0},{label:"设置价格",path:wP},{label:"我的",icon:"user-o",path:Mw},{label:"操作设置",icon:"cog",iconColor:"text-info",path:Tw}];function Cy(){const e=Z(),{uq:t,uqSites:n}=e;let{mySites:r,userSite:i}=n;const s=" px-4 py-3 border-bottom align-items-center";return l.jsxs(H,{header:"同花",back:"none",children:[l.jsx("div",{className:"px-3 py-2 border-bottom small tonwa-bg-gray-1 text-center",children:l.jsx(an,{uq:t,id:i.id,Template:fu})}),BF.map((a,o)=>{const{label:u,icon:c,iconColor:d,path:f,phrase:m}=a;function y(){e.clearNotifyCount(m)}return l.jsxs(Ce,{to:f,className:s,onClick:y,children:[l.jsx(J,{name:c??"file",className:(d??"text-primary")+" me-4",fixWidth:!0,size:"lg"}),u,l.jsx(f0,{phrase:m})]},o)})]})}rt.SumGroup;const Od="jxc";function YF(e){const t=l.jsxs(l.Fragment,{children:[yP(),UF(),xP(),LF,zF]});return l.jsxs(l.Fragment,{children:[l.jsx(ie,{path:`${Od}/*`,children:t}),l.jsx(ie,{path:"/*",children:t})]})}const Lw=[],Fo={};(function(){for(let e of Lw)Fo[e].type=e})();function WF(){const e=Z(),{uq:t}=e;let n={};async function r(a){let o=n[a];if(o!==void 0)return o}async function i(a){let{IxBud:o}=t,u=await r(a),[c,d]=await Promise.all([t.IX({IX:o,ix:u}),t.IX({IX:o,IX1:o,ix:u})]),f=[];for(let{ix:m,xi:y}of c){let v=[];for(let{ix:w,xi:j}of d)w===y&&v.push({id:j});v.length===0&&(v=void 0),f.push({id:y,items:v})}return f}async function s(a,o){}return{loadIDPropId:r,loadIDProps:i,setRadioItem:s}}function HF(){return l.jsx(H,{header:"属性",children:l.jsx(ve,{})})}function QF(){const{uq:e}=Z(),t=WF(),{openModal:n}=oe(),{prop:r}=Fn(),[i,s]=P.useState(void 0);Pt(()=>{(async function(){let d=await t.loadIDProps(r);s(d)})()});function a({value:d}){let{id:f,items:m}=d;function y({value:v}){const{id:w,name:j,ex:g,type:h,$removed:p}=v,{caption:S,PageNext:b,memo:k}=Fo[h];function _(){b!==void 0?n(l.jsx(b,{id:w,name:j,caption:g,type:h,items:m})):(v.$removed=p!==!0,s([...i]))}let C,N,D="",E=" fw-bold";return p===!0?(C="undo",N="text-muted",D=" text-decoration-line-through text-muted",E=""):b!==void 0?(C="angle-right",N="text-secondary"):(C="trash",N="text-info"),l.jsx("div",{className:"ps-3 py-2",children:l.jsxs("div",{className:"d-flex",children:[l.jsxs("div",{className:"flex-fill me-3 "+D,children:[l.jsxs("div",{className:"mb-1 d-flex",children:[l.jsx("span",{className:"w-min-8c me-3"+E,children:j}),l.jsx("small",{className:"text-muted",children:g})]}),l.jsxs(Ue,{children:[l.jsx("span",{children:S}),l.jsx("small",{className:"text-muted",children:k})]})]}),l.jsx("div",{className:"d-flex align-items-center ps-3 pe-3 cursor-pointer",onClick:_,children:l.jsx(J,{name:C,fixWidth:!0,className:N})})]})})}return l.jsx(an,{uq:e,id:f,Template:y})}async function o(){let d=await n(l.jsx(GF,{IDName:r}));if(!d)return;let f=await t.loadIDPropId(r),m=d;s([...i,{ix:f,xi:m}])}const u=l.jsx("button",{className:"btn btn-sm btn-success me-2",onClick:o,children:l.jsx(J,{name:"plus"})}),c="collIDCustom[prop as EnumID].caption";return l.jsx(H,{header:c+"属性编辑",right:u,children:i&&i.length>0&&l.jsxs(l.Fragment,{children:[l.jsx(Me,{items:i,ViewItem:a}),l.jsx(ve,{})]})})}function GF({IDName:e}){const{register:t,handleSubmit:n,getValues:r}=lr(),[i,s]=P.useState(void 0),[a,o]=P.useState(!1),[u]=P.useState(!1);async function c(v){}function d(v){let w=Number(v.target.value),j=Fo[w];s(j);let g=r("name");o(g.trim().length>0&&j!==void 0)}function f(v){o(v.target.value.trim().length>0&&i!==void 0)}let m,y="提交";if(i!==void 0){const{PageNext:v,memo:w}=i;w!==void 0&&(m=l.jsxs("div",{className:"mt-1 mb-2 py-2 px-2 text-muted small",children:["说明：",w]})),v!==void 0&&(y="下一步")}return l.jsx(H,{header:"新增属性",children:l.jsxs("form",{className:"container my-3",onSubmit:n(c),children:[l.jsx(bt,{label:"名称",labelClassName:"text-end",children:l.jsx("input",{className:"form-control",...t("name",{maxLength:50,onChange:f})})}),l.jsx(bt,{label:"标识",labelClassName:"text-end",children:l.jsx("input",{className:"form-control",...t("caption",{maxLength:100})})}),l.jsxs(bt,{label:"类型",labelClassName:"text-end",children:[l.jsxs("select",{className:"form-select",...t("type",{onChange:d}),defaultValue:"$",children:[l.jsx("option",{disabled:!0,value:"$",children:"请选择数据类型"}),Lw.map(v=>{const{caption:w}=Fo[v];return l.jsx("option",{className:"me-3 w-min-8c mb-2 py-3",value:v,children:w},v)})]}),m]}),l.jsx(bt,{children:l.jsx(Fj,{isSubmiting:u,className:"btn btn-primary",disabled:!a,children:y})})]})})}const _y="prop",KF=l.jsxs(l.Fragment,{children:[l.jsx(ie,{path:_y,element:l.jsx(HF,{})}),l.jsx(ie,{path:`${_y}/:prop`,element:l.jsx(QF,{})})]});function XF({caption:e,right:t,onAdd:n}){return t===void 0&&n&&(t=l.jsx("button",{className:"mt-1 btn btn-sm btn-outline-primary",onClick:n,children:l.jsx(J,{name:"plus"})})),l.jsxs(Ue,{className:"px-3 py-1 tonwa-bg-gray-2 small text-black-50 align-items-end",children:[l.jsx("div",{className:"pt-2",children:e}),t]})}function ZF(){const{biz:e}=Z();return e.entities[rt.Uom].buds.type.budDataType,l.jsx("div",{})}const qw="/uom";function JF(){return l.jsx(H,{header:l.jsx(Va,{atom:rt.Uom}),children:l.jsx(ZF,{})})}const ps={atomName:rt.UomI,NOLabel:"编号",exLabel:"名称"};function eT(){let{header:e,right:t,query:n,param:r,sortField:i,ViewItem:s,none:a}=La({...ps,ViewItemAtom:Vh});const o=l.jsx(Ce,{to:qw,children:l.jsxs(Ue,{className:"px-3 py-2 border-bottom border-3 align-items-center cursor-pointer",children:[l.jsx(On,{name:"archive-fill",className:"w-2c me-4 text-primary",iconClassName:"fs-4"}),l.jsx("span",{className:"text-black",children:l.jsx(Va,{atom:rt.Uom})}),Uw]})});return l.jsx(Rn,{header:e,query:n,param:r,sortField:i,ViewItem:s,none:a,right:t,children:o})}const Uw=l.jsx(On,{name:"chevron-right",className:"text-secondary"});function Vh({value:e}){const{no:t,ex:n}=e;return l.jsxs(Ue,{className:"align-items-center",children:[l.jsx(On,{name:"basket3",className:"w-2c me-4 text-info",iconClassName:"fs-4"}),l.jsxs("span",{children:[l.jsx("b",{className:"me-3 text-black",children:n}),l.jsx("small",{className:"text-secondary",children:t})]}),Uw]})}function tT(){let{page:e}=qa(ps);return e}function nT(){let{view:e,caption:t}=$a(ps);return l.jsxs(H,{header:t,children:[l.jsx("div",{children:"EDIT"}),e,l.jsx("div",{children:"UomXList"})]})}const rT={name:ps.atomName,pageNew:l.jsx(tT,{}),pageEdit:l.jsx(nT,{}),pageList:l.jsx(eT,{}),pageView:l.jsx(iT,{}),ViewItem:Vh};function iT(){const e=Sn(),t=Z(),{uq:n,biz:r}=t,{openModal:i}=oe(),{id:s}=Fn(),a=Number(s),{caption:o}=r.entities[ps.atomName],{data:{uomI:u,uomxList:c}}=Lr(["GetUomI",s],async()=>{let{UomI:m,UomX:y}=await n.GetUomI.query({id:a}),v;if(m.length>0){let{id:j,no:g,ex:h,discription:p,ratio:S,uom:b,uomNo:k,uomEx:_,uomDiscription:C}=m[0];v={id:j,no:g,ex:h,discription:p,ratio:S,uom:{id:b,no:k,ex:_,discription:C,type:0}}}const w=y.map(j=>({...j}));return{uomI:v,uomxList:w}},qr);async function d(){let m="真的要删除这个计量单位吗？";if(await i(l.jsx(lu,{header:"确认",message:m,yes:"删除",no:"不删除"}))===!0){await n.DelAtom.submit({id:a});let v=t.pageCache.getPrevData();v&&v.removeItem(w=>w.id===a),e(-1)}}const f=l.jsx(fh,{color:"outline-info",onClick:d,children:l.jsx(J,{name:"trash"})});return l.jsxs(H,{header:o,right:f,children:[u===void 0?l.jsx("div",{className:"p-3",children:"unknown UomI"}):l.jsx(sT,{uomI:u}),l.jsx(lT,{uomI:u,uomxList:c})]})}function sT({uomI:e}){const{uq:t,biz:n}=Z(),{openModal:r}=oe(),[i,s]=P.useState(e);async function a(){const{id:f}=i;await r(l.jsx(aT,{id:f})),s(null);let m=await ZD(n,t,f);s(m)}if(i===null)return l.jsx(as,{className:"m-3 text-info"});const{ex:o,discription:u,uom:c,ratio:d}=i;return l.jsxs(Ue,{className:"ps-3",children:[l.jsxs("div",{className:"py-3",children:[l.jsx("div",{children:u}),l.jsxs("div",{children:[l.jsx("b",{className:"fs-larger me-3",children:o}),l.jsxs("span",{children:[d,c==null?void 0:c.ex]})]})]}),l.jsx("div",{className:"p-3 cursor-pointer",onClick:a,children:l.jsx(J,{name:"pencil-square-o",className:"text-info"})})]})}function aT({id:e}){const{page:t}=y0({...ps,id:e});return t}function lT({uomI:e,uomxList:t}){const{uq:n,biz:r}=Z(),{openModal:i,closeModal:s}=oe(),[a,o]=P.useState(t),{caption:u}=r.entities[rt.UomX];async function c(){const w={no:await n.IDNO({ID:n.Atom})},j=await i(l.jsx(f,{uomX:w}));await d(j)}async function d(v){if(v===void 0)return;const{no:w,ex:j,ratio:g}=v;let h=await n.SaveUomX.submit({i:e.id,no:w,ex:j,ratio:g});if(v.id!==h.id)v.id=h.id,a.push(v);else{let p=a.findIndex(S=>S.id===v.id);Object.assign(a[p],v)}a.sort((p,S)=>{const{ratio:b}=p,{ratio:k}=S;return b<k?-1:b>k?1:0}),o([...a])}function f({uomX:v}){const{register:w,handleSubmit:j,formState:{errors:g},setError:h}=lr({mode:"onBlur"}),{id:p}=v;function S(C){const{ex:N}=C;let D=a.findIndex(A=>A.ex===N);if(D>=0&&a[D].id!==p){h("ex",{message:"重复了"});return}const E={...v,...C};s(E)}const b=[{name:"ex",label:"简称",type:"text",options:{maxLength:30,value:v.ex}},{name:"ratio",label:"换算率",type:"number",options:{required:!0,valueAsNumber:!0,value:v.ratio}},{type:"submit"}];async function k(){let C=`真的要删除这个${u}吗？`;if(await i(l.jsx(lu,{header:"确认",message:C,yes:"删除",no:"不删除"}))===!0){await n.DelUomX.submit({uomI:e.id,uomX:p});let D=a.findIndex(E=>E.id===p);if(D>=0){let E=a.splice(D,1);o(E)}s()}}let _;return p>0&&(_=l.jsx(fh,{color:"outline-info",onClick:k,children:l.jsx(J,{name:"trash"})})),l.jsxs(H,{header:"换算率",right:_,children:[l.jsx(bt,{children:l.jsxs("div",{className:"mt-3 small text-secondary",children:[l.jsx(J,{name:"exclamation-circle",className:"text-info me-3"}),"相对",e.ex,"的换算率"]})}),l.jsx("form",{onSubmit:j(S),className:"container my-3 pe-5",children:l.jsx(Ur,{rows:b,register:w,errors:g})})]})}function m(v){const{value:w,index:j}=v;let g,h;if(j===0)g=e.ex,h=1;else{let{ex:N,ratio:D}=a[j-1];g=N,h=D}const{no:p,ratio:S,ex:b}=w,k=S/h,_=Number.isInteger(k)===!0?k:k.toFixed(2);async function C(){let N=await i(l.jsx(f,{uomX:w}));N!==void 0&&await d(N)}return l.jsxs(Ue,{className:"ps-3",children:[l.jsxs("div",{className:"py-2 w-min-12c",children:["1 ",l.jsx("b",{className:"fs-larger",children:b})]}),l.jsxs("div",{className:"py-2",children:[" = ",_," ",g]}),l.jsx("div",{className:"px-3 py-2 cursor-pointer",onClick:C,children:l.jsx(J,{name:"angle-right"})})]})}const y=l.jsxs("div",{className:"p-3 text-secondary small",children:[l.jsx(On,{name:"info-circle",className:"me-1 text-info"}),"无",u]});return l.jsxs("div",{children:[l.jsx(XF,{caption:u,onAdd:c}),l.jsx(Me,{items:a,ViewItem:m,itemKey:v=>v.ex,none:y})]})}rt.Uom;function oT(e){return"/uomi-list-of-uom/"+e}function uT(){const{uq:e}=Z(),{id:t}=Fn(),n=Number(t);async function r(u,c,d){let m=await e.GetUomIListOfUom.page(u,c,d),{$page:y}=m;return y}let i={uom:n};function s({value:u}){return l.jsx(Ce,{to:`/uomi/${u.id}`,children:l.jsx("div",{className:"px-3 py-2",children:l.jsx(Vh,{value:u})})})}const a=l.jsx(l.Fragment,{children:"R"}),o=l.jsxs("div",{children:[l.jsx("div",{className:"m-3",children:l.jsx(an,{uq:e,id:n,Template:kt})}),l.jsx(ve,{})]});return l.jsx(Rn,{header:l.jsx(Va,{atom:rt.Uom}),query:r,param:i,sortField:"id",ViewItem:s,right:a,children:o})}const cT="admin";function dT(){const e=[{label:vh,path:yh},{label:xh,path:gh},{label:l.jsx(Va,{atom:rt.UomI}),path:Ra(rT.name)}];return l.jsx(H,{header:"管理员",children:e.map((t,n)=>{const{label:r,path:i}=t;return l.jsx(Ce,{to:`../${i}`,className:"px-3 py-2 border-bottom align-items-center",children:r},n)})})}const fT=l.jsx(l.Fragment,{children:l.jsx(ie,{path:cT,element:l.jsx(dT,{})})});function hT(e){return l.jsxs(l.Fragment,{children:[KF,fT,TI,lP,qI,l.jsx(ie,{path:qw,element:l.jsx(JF,{})}),l.jsx(ie,{path:oT(":id"),element:l.jsx(uT,{})})]})}function mT(){return l.jsx(H,{header:null,children:l.jsxs("div",{className:"m-3",children:[l.jsx("i",{className:"bi-dash-circle-fill text-danger fs-larger me-3"}),"没有授权。请联系管理员"]})})}function pT(){const{right:e,view:t}=R0();return l.jsx(H,{header:wh,back:"none",right:e,children:t})}function yT(){let e=Z(),{user:t,atomSiteLogined:n}=e,r=we(t),i=we(n),{userSite:s}=C0();if(s===void 0)return l.jsx(P.Suspense,{fallback:l.jsx(pn,{header:"..."}),children:l.jsx(ac,{basename:"jksoft-jxc",children:l.jsxs(Hs,{children:[l.jsx(ie,{path:"/",element:l.jsx(M1,{replace:!0,to:"/login"})}),l.jsx(ie,{path:"/login/*",element:l.jsx(Vp,{})}),l.jsx(ie,{path:"/register",element:l.jsx(zp,{})}),$p]})})});let a;if(i!==!0)return a=l.jsx(pn,{}),l.jsx(P.Suspense,{fallback:l.jsx(pn,{}),children:l.jsx(ac,{basename:"jksoft-jxc",children:l.jsx(Hs,{children:l.jsx(ie,{path:"/",element:a})})})});if(r===void 0)a=l.jsx(mT,{});else{const o={to:"/"+Od,caption:"首页",icon:"home"},u={to:"/"+kd,caption:"我的",icon:"user"},c={to:"/biz",caption:"业务",icon:"user"},{isAdmin:d}=s;let f=d===!0?[o,c,u]:[o,u];a=l.jsx(oN,{tabs:f})}return l.jsx(P.Suspense,{fallback:l.jsx(pn,{header:"..."}),children:l.jsx(ac,{basename:"jksoft-jxc",children:l.jsxs(Hs,{children:[l.jsxs(ie,{path:"/",element:a,children:[l.jsx(ie,{index:!0,element:l.jsx(Cy,{})}),l.jsx(ie,{path:Od+"/*",element:l.jsx(Cy,{})}),l.jsx(ie,{path:"biz/*",element:l.jsx(pT,{})}),l.jsx(ie,{path:kd+"/*",element:l.jsx(dP,{})})]}),wD,YF(),hT(),uP,l.jsx(ie,{path:"/test",element:l.jsx(H,{header:"Test",children:"test"})}),l.jsx(ie,{path:"/login/*",element:l.jsx(Vp,{})}),l.jsx(ie,{path:"/register",element:l.jsx(zp,{})}),$p]})})})}const vT={version:"0.1.0",center:"https://tv.jkchemical.com",noUnit:!0,oem:void 0};function gT(e){let t=[],{devs:n,uqs:r}=e;for(let i of r){let{dev:s,name:a,alias:o}=i;t.push({dev:n[s],name:a,alias:o})}return t}function Z(){return P.useContext(Qf)}class xT extends J_{constructor(){super(...arguments);x(this,"timezone");x(this,"unitTimezone");x(this,"unitBizDate");x(this,"unitBizMonth");x(this,"biz");x(this,"uq");x(this,"refresh",async()=>{let n=Date.now()/1e3,r=de(this.refreshTime);n-r<30||ae(this.refreshTime,n)});x(this,"_notifyCounts",Ie({}));x(this,"atomSiteLogined",Ie(!1));x(this,"loginSite",async()=>{if(console.error("loginSite"),this.uqSites!==void 0)return this.biz;console.error("loginSite start loading"),this.uqSites=new B_(this.uqMan),await this.uqSites.login();let{userSite:n}=this.uqSites,r;if(n!==void 0){this.uqMan.unit=n.siteId,r=!0;let{uqApi:i}=this.uqMan,{schemas:s,logs:a}=await i.biz();if(s===void 0){debugger;console.error("uq-api compile saved bizobject error",a),this.biz=new Up(this,void 0)}else{let o=Jo.unpack(s);this.biz=new Up(this,o)}}else r=!1;return ae(this.atomSiteLogined,r),this.biz});x(this,"gSpecs",{})}get pathLogin(){return"/login"}get uqMan(){return this.uq.$.$_uqMan}async loadUnitTime(n){let i=(await n.query({})).ret[0];this.timezone=i.timezone??8,this.unitTimezone=i.unitTimeZone??8,this.unitBizMonth=(i.unitBizMonth??1)-1,this.unitBizDate=i.unitBizDate??1}loadWithoutLogin(){}onLoadUQs(){this.uq=this.uqs.UqDefault}async loadOnLogined(){await this.loginSite(),console.log("site logined")}get autoRefresh(){return async()=>{let{ret:n}=await this.uq.GetPendsNotify.query({}),r=de(this._notifyCounts),i=0;for(let s of this.biz.sheets)r[s.id]=0;for(let s of n){let{phrase:a,count:o}=s;r[a]=o,i+=o}r[eh.sheet]=i,ae(this._notifyCounts,{...r})}}clearNotifyCount(n){let r=de(this._notifyCounts);r[n]=0,ae(this._notifyCounts,{...r})}specFromAtom(n){if(this.biz.entities[n]!==void 0)debugger}}const wT=gT(FN);function bT(){const e=()=>new xT(vT,wT,PN,TN);return l.jsx(nN,{createUqApp:e,children:l.jsx(yT,{})})}wc.createRoot(document.getElementById("root")).render(l.jsx(ne.StrictMode,{children:l.jsx(bT,{})}))});export default ST();
