var Ww=Object.defineProperty;var Hw=(e,t,n)=>t in e?Ww(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Qw=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var x=(e,t,n)=>(Hw(e,typeof t!="symbol"?t+"":t,n),n);var ET=Qw(($T,Rl)=>{function Gw(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Ut=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _y={exports:{}},To={},Ny={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wa=Symbol.for("react.element"),Kw=Symbol.for("react.portal"),Xw=Symbol.for("react.fragment"),Zw=Symbol.for("react.strict_mode"),Jw=Symbol.for("react.profiler"),eb=Symbol.for("react.provider"),tb=Symbol.for("react.context"),nb=Symbol.for("react.forward_ref"),rb=Symbol.for("react.suspense"),ib=Symbol.for("react.memo"),sb=Symbol.for("react.lazy"),Wh=Symbol.iterator;function ab(e){return e===null||typeof e!="object"?null:(e=Wh&&e[Wh]||e["@@iterator"],typeof e=="function"?e:null)}var Dy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ey=Object.assign,Iy={};function rs(e,t,n){this.props=e,this.context=t,this.refs=Iy,this.updater=n||Dy}rs.prototype.isReactComponent={};rs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};rs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Py(){}Py.prototype=rs.prototype;function Md(e,t,n){this.props=e,this.context=t,this.refs=Iy,this.updater=n||Dy}var Fd=Md.prototype=new Py;Fd.constructor=Md;Ey(Fd,rs.prototype);Fd.isPureReactComponent=!0;var Hh=Array.isArray,Ay=Object.prototype.hasOwnProperty,Td={current:null},Oy={key:!0,ref:!0,__self:!0,__source:!0};function My(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)Ay.call(t,r)&&!Oy.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var u=Array(o),c=0;c<o;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:wa,type:e,key:s,ref:a,props:i,_owner:Td.current}}function lb(e,t){return{$$typeof:wa,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Rd(e){return typeof e=="object"&&e!==null&&e.$$typeof===wa}function ob(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Qh=/\/+/g;function Pu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ob(""+e.key):t.toString(36)}function yl(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case wa:case Kw:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+Pu(a,0):r,Hh(i)?(n="",e!=null&&(n=e.replace(Qh,"$&/")+"/"),yl(i,t,n,"",function(c){return c})):i!=null&&(Rd(i)&&(i=lb(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Qh,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",Hh(e))for(var o=0;o<e.length;o++){s=e[o];var u=r+Pu(s,o);a+=yl(s,t,n,u,i)}else if(u=ab(e),typeof u=="function")for(e=u.call(e),o=0;!(s=e.next()).done;)s=s.value,u=r+Pu(s,o++),a+=yl(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Ha(e,t,n){if(e==null)return e;var r=[],i=0;return yl(e,r,"","",function(s){return t.call(n,s,i++)}),r}function ub(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var At={current:null},vl={transition:null},cb={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:vl,ReactCurrentOwner:Td};ye.Children={map:Ha,forEach:function(e,t,n){Ha(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ha(e,function(){t++}),t},toArray:function(e){return Ha(e,function(t){return t})||[]},only:function(e){if(!Rd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ye.Component=rs;ye.Fragment=Xw;ye.Profiler=Jw;ye.PureComponent=Md;ye.StrictMode=Zw;ye.Suspense=rb;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cb;ye.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ey({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=Td.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(u in t)Ay.call(t,u)&&!Oy.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&o!==void 0?o[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){o=Array(u);for(var c=0;c<u;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:wa,type:e.type,key:i,ref:s,props:r,_owner:a}};ye.createContext=function(e){return e={$$typeof:tb,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:eb,_context:e},e.Consumer=e};ye.createElement=My;ye.createFactory=function(e){var t=My.bind(null,e);return t.type=e,t};ye.createRef=function(){return{current:null}};ye.forwardRef=function(e){return{$$typeof:nb,render:e}};ye.isValidElement=Rd;ye.lazy=function(e){return{$$typeof:sb,_payload:{_status:-1,_result:e},_init:ub}};ye.memo=function(e,t){return{$$typeof:ib,type:e,compare:t===void 0?null:t}};ye.startTransition=function(e){var t=vl.transition;vl.transition={};try{e()}finally{vl.transition=t}};ye.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ye.useCallback=function(e,t){return At.current.useCallback(e,t)};ye.useContext=function(e){return At.current.useContext(e)};ye.useDebugValue=function(){};ye.useDeferredValue=function(e){return At.current.useDeferredValue(e)};ye.useEffect=function(e,t){return At.current.useEffect(e,t)};ye.useId=function(){return At.current.useId()};ye.useImperativeHandle=function(e,t,n){return At.current.useImperativeHandle(e,t,n)};ye.useInsertionEffect=function(e,t){return At.current.useInsertionEffect(e,t)};ye.useLayoutEffect=function(e,t){return At.current.useLayoutEffect(e,t)};ye.useMemo=function(e,t){return At.current.useMemo(e,t)};ye.useReducer=function(e,t,n){return At.current.useReducer(e,t,n)};ye.useRef=function(e){return At.current.useRef(e)};ye.useState=function(e){return At.current.useState(e)};ye.useSyncExternalStore=function(e,t,n){return At.current.useSyncExternalStore(e,t,n)};ye.useTransition=function(){return At.current.useTransition()};ye.version="18.2.0";Ny.exports=ye;var P=Ny.exports;const re=Cy(P),xc=Gw({__proto__:null,default:re},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var db=P,fb=Symbol.for("react.element"),hb=Symbol.for("react.fragment"),mb=Object.prototype.hasOwnProperty,pb=db.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yb={key:!0,ref:!0,__self:!0,__source:!0};function Fy(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)mb.call(t,r)&&!yb.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:fb,type:e,key:s,ref:a,props:i,_owner:pb.current}}To.Fragment=hb;To.jsx=Fy;To.jsxs=Fy;_y.exports=To;var l=_y.exports,wc={},Ty={exports:{}},Ht={},Ry={exports:{}},Ly={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,L){var W=M.length;M.push(L);e:for(;0<W;){var te=W-1>>>1,oe=M[te];if(0<i(oe,L))M[te]=L,M[W]=oe,W=te;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var L=M[0],W=M.pop();if(W!==L){M[0]=W;e:for(var te=0,oe=M.length,He=oe>>>1;te<He;){var pe=2*(te+1)-1,Ee=M[pe],Le=pe+1,Ne=M[Le];if(0>i(Ee,W))Le<oe&&0>i(Ne,Ee)?(M[te]=Ne,M[Le]=W,te=Le):(M[te]=Ee,M[pe]=W,te=pe);else if(Le<oe&&0>i(Ne,W))M[te]=Ne,M[Le]=W,te=Le;else break e}}return L}function i(M,L){var W=M.sortIndex-L.sortIndex;return W!==0?W:M.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var u=[],c=[],d=1,f=null,m=3,v=!1,y=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(M){for(var L=n(c);L!==null;){if(L.callback===null)r(c);else if(L.startTime<=M)r(c),L.sortIndex=L.expirationTime,t(u,L);else break;L=n(c)}}function b(M){if(w=!1,p(M),!y)if(n(u)!==null)y=!0,z(S);else{var L=n(c);L!==null&&Y(b,L.startTime-M)}}function S(M,L){y=!1,w&&(w=!1,g(C),C=-1),v=!0;var W=m;try{for(p(L),f=n(u);f!==null&&(!(f.expirationTime>L)||M&&!E());){var te=f.callback;if(typeof te=="function"){f.callback=null,m=f.priorityLevel;var oe=te(f.expirationTime<=L);L=e.unstable_now(),typeof oe=="function"?f.callback=oe:f===n(u)&&r(u),p(L)}else r(u);f=n(u)}if(f!==null)var He=!0;else{var pe=n(c);pe!==null&&Y(b,pe.startTime-L),He=!1}return He}finally{f=null,m=W,v=!1}}var k=!1,_=null,C=-1,N=5,D=-1;function E(){return!(e.unstable_now()-D<N)}function A(){if(_!==null){var M=e.unstable_now();D=M;var L=!0;try{L=_(!0,M)}finally{L?O():(k=!1,_=null)}}else k=!1}var O;if(typeof h=="function")O=function(){h(A)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,q=F.port2;F.port1.onmessage=A,O=function(){q.postMessage(null)}}else O=function(){j(A,0)};function z(M){_=M,k||(k=!0,O())}function Y(M,L){C=j(function(){M(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){y||v||(y=!0,z(S))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(M){switch(m){case 1:case 2:case 3:var L=3;break;default:L=m}var W=m;m=L;try{return M()}finally{m=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,L){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var W=m;m=M;try{return L()}finally{m=W}},e.unstable_scheduleCallback=function(M,L,W){var te=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?te+W:te):W=te,M){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=W+oe,M={id:d++,callback:L,priorityLevel:M,startTime:W,expirationTime:oe,sortIndex:-1},W>te?(M.sortIndex=W,t(c,M),n(u)===null&&M===n(c)&&(w?(g(C),C=-1):w=!0,Y(b,W-te))):(M.sortIndex=oe,t(u,M),y||v||(y=!0,z(S))),M},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(M){var L=m;return function(){var W=m;m=L;try{return M.apply(this,arguments)}finally{m=W}}}})(Ly);Ry.exports=Ly;var vb=Ry.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qy=P,Wt=vb;function $(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Uy=new Set,Xs={};function ui(e,t){Ki(e,t),Ki(e+"Capture",t)}function Ki(e,t){for(Xs[e]=t,e=0;e<t.length;e++)Uy.add(t[e])}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bc=Object.prototype.hasOwnProperty,gb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gh={},Kh={};function xb(e){return bc.call(Kh,e)?!0:bc.call(Gh,e)?!1:gb.test(e)?Kh[e]=!0:(Gh[e]=!0,!1)}function wb(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function bb(e,t,n,r){if(t===null||typeof t>"u"||wb(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ot(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){yt[e]=new Ot(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];yt[t]=new Ot(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){yt[e]=new Ot(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){yt[e]=new Ot(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){yt[e]=new Ot(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){yt[e]=new Ot(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){yt[e]=new Ot(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){yt[e]=new Ot(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){yt[e]=new Ot(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ld=/[\-:]([a-z])/g;function qd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ld,qd);yt[t]=new Ot(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ld,qd);yt[t]=new Ot(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ld,qd);yt[t]=new Ot(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){yt[e]=new Ot(e,1,!1,e.toLowerCase(),null,!1,!1)});yt.xlinkHref=new Ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){yt[e]=new Ot(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ud(e,t,n,r){var i=yt.hasOwnProperty(t)?yt[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(bb(t,n,i,r)&&(n=null),r||i===null?xb(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ar=qy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qa=Symbol.for("react.element"),ki=Symbol.for("react.portal"),Ci=Symbol.for("react.fragment"),$d=Symbol.for("react.strict_mode"),Sc=Symbol.for("react.profiler"),$y=Symbol.for("react.provider"),Vy=Symbol.for("react.context"),Vd=Symbol.for("react.forward_ref"),jc=Symbol.for("react.suspense"),kc=Symbol.for("react.suspense_list"),zd=Symbol.for("react.memo"),mr=Symbol.for("react.lazy"),zy=Symbol.for("react.offscreen"),Xh=Symbol.iterator;function vs(e){return e===null||typeof e!="object"?null:(e=Xh&&e[Xh]||e["@@iterator"],typeof e=="function"?e:null)}var We=Object.assign,Au;function Os(e){if(Au===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Au=t&&t[1]||""}return`
`+Au+e}var Ou=!1;function Mu(e,t){if(!e||Ou)return"";Ou=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var u=`
`+i[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=o);break}}}finally{Ou=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Os(e):""}function Sb(e){switch(e.tag){case 5:return Os(e.type);case 16:return Os("Lazy");case 13:return Os("Suspense");case 19:return Os("SuspenseList");case 0:case 2:case 15:return e=Mu(e.type,!1),e;case 11:return e=Mu(e.type.render,!1),e;case 1:return e=Mu(e.type,!0),e;default:return""}}function Cc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ci:return"Fragment";case ki:return"Portal";case Sc:return"Profiler";case $d:return"StrictMode";case jc:return"Suspense";case kc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Vy:return(e.displayName||"Context")+".Consumer";case $y:return(e._context.displayName||"Context")+".Provider";case Vd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case zd:return t=e.displayName||null,t!==null?t:Cc(e.type)||"Memo";case mr:t=e._payload,e=e._init;try{return Cc(e(t))}catch{}}return null}function jb(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cc(t);case 8:return t===$d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Mr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function By(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function kb(e){var t=By(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ga(e){e._valueTracker||(e._valueTracker=kb(e))}function Yy(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=By(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ll(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _c(e,t){var n=t.checked;return We({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Zh(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Mr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Wy(e,t){t=t.checked,t!=null&&Ud(e,"checked",t,!1)}function Nc(e,t){Wy(e,t);var n=Mr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Dc(e,t.type,n):t.hasOwnProperty("defaultValue")&&Dc(e,t.type,Mr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Jh(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Dc(e,t,n){(t!=="number"||Ll(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ms=Array.isArray;function Li(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Mr(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Ec(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($(91));return We({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function em(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error($(92));if(Ms(n)){if(1<n.length)throw Error($(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Mr(n)}}function Hy(e,t){var n=Mr(t.value),r=Mr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function tm(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Qy(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ic(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Qy(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ka,Gy=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ka=Ka||document.createElement("div"),Ka.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ka.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Zs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ls={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cb=["Webkit","ms","Moz","O"];Object.keys(Ls).forEach(function(e){Cb.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ls[t]=Ls[e]})});function Ky(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ls.hasOwnProperty(e)&&Ls[e]?(""+t).trim():t+"px"}function Xy(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Ky(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var _b=We({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pc(e,t){if(t){if(_b[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($(61))}if(t.style!=null&&typeof t.style!="object")throw Error($(62))}}function Ac(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oc=null;function Bd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mc=null,qi=null,Ui=null;function nm(e){if(e=ja(e)){if(typeof Mc!="function")throw Error($(280));var t=e.stateNode;t&&(t=$o(t),Mc(e.stateNode,e.type,t))}}function Zy(e){qi?Ui?Ui.push(e):Ui=[e]:qi=e}function Jy(){if(qi){var e=qi,t=Ui;if(Ui=qi=null,nm(e),t)for(e=0;e<t.length;e++)nm(t[e])}}function ev(e,t){return e(t)}function tv(){}var Fu=!1;function nv(e,t,n){if(Fu)return e(t,n);Fu=!0;try{return ev(e,t,n)}finally{Fu=!1,(qi!==null||Ui!==null)&&(tv(),Jy())}}function Js(e,t){var n=e.stateNode;if(n===null)return null;var r=$o(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error($(231,t,typeof n));return n}var Fc=!1;if(Jn)try{var gs={};Object.defineProperty(gs,"passive",{get:function(){Fc=!0}}),window.addEventListener("test",gs,gs),window.removeEventListener("test",gs,gs)}catch{Fc=!1}function Nb(e,t,n,r,i,s,a,o,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var qs=!1,ql=null,Ul=!1,Tc=null,Db={onError:function(e){qs=!0,ql=e}};function Eb(e,t,n,r,i,s,a,o,u){qs=!1,ql=null,Nb.apply(Db,arguments)}function Ib(e,t,n,r,i,s,a,o,u){if(Eb.apply(this,arguments),qs){if(qs){var c=ql;qs=!1,ql=null}else throw Error($(198));Ul||(Ul=!0,Tc=c)}}function ci(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function rv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rm(e){if(ci(e)!==e)throw Error($(188))}function Pb(e){var t=e.alternate;if(!t){if(t=ci(e),t===null)throw Error($(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return rm(i),e;if(s===r)return rm(i),t;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?e:t}function iv(e){return e=Pb(e),e!==null?sv(e):null}function sv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=sv(e);if(t!==null)return t;e=e.sibling}return null}var av=Wt.unstable_scheduleCallback,im=Wt.unstable_cancelCallback,Ab=Wt.unstable_shouldYield,Ob=Wt.unstable_requestPaint,Ze=Wt.unstable_now,Mb=Wt.unstable_getCurrentPriorityLevel,Yd=Wt.unstable_ImmediatePriority,lv=Wt.unstable_UserBlockingPriority,$l=Wt.unstable_NormalPriority,Fb=Wt.unstable_LowPriority,ov=Wt.unstable_IdlePriority,Ro=null,En=null;function Tb(e){if(En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(Ro,e,void 0,(e.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:qb,Rb=Math.log,Lb=Math.LN2;function qb(e){return e>>>=0,e===0?32:31-(Rb(e)/Lb|0)|0}var Xa=64,Za=4194304;function Fs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Vl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=Fs(o):(s&=a,s!==0&&(r=Fs(s)))}else a=n&~i,a!==0?r=Fs(a):s!==0&&(r=Fs(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-yn(t),i=1<<n,r|=e[n],t&=~i;return r}function Ub(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $b(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-yn(s),o=1<<a,u=i[a];u===-1?(!(o&n)||o&r)&&(i[a]=Ub(o,t)):u<=t&&(e.expiredLanes|=o),s&=~o}}function Rc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function uv(){var e=Xa;return Xa<<=1,!(Xa&4194240)&&(Xa=64),e}function Tu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ba(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-yn(t),e[t]=n}function Vb(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-yn(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Wd(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-yn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _e=0;function cv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var dv,Hd,fv,hv,mv,Lc=!1,Ja=[],jr=null,kr=null,Cr=null,ea=new Map,ta=new Map,vr=[],zb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sm(e,t){switch(e){case"focusin":case"focusout":jr=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":ea.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ta.delete(t.pointerId)}}function xs(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=ja(t),t!==null&&Hd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Bb(e,t,n,r,i){switch(t){case"focusin":return jr=xs(jr,e,t,n,r,i),!0;case"dragenter":return kr=xs(kr,e,t,n,r,i),!0;case"mouseover":return Cr=xs(Cr,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return ea.set(s,xs(ea.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ta.set(s,xs(ta.get(s)||null,e,t,n,r,i)),!0}return!1}function pv(e){var t=Hr(e.target);if(t!==null){var n=ci(t);if(n!==null){if(t=n.tag,t===13){if(t=rv(n),t!==null){e.blockedOn=t,mv(e.priority,function(){fv(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=qc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Oc=r,n.target.dispatchEvent(r),Oc=null}else return t=ja(n),t!==null&&Hd(t),e.blockedOn=n,!1;t.shift()}return!0}function am(e,t,n){gl(e)&&n.delete(t)}function Yb(){Lc=!1,jr!==null&&gl(jr)&&(jr=null),kr!==null&&gl(kr)&&(kr=null),Cr!==null&&gl(Cr)&&(Cr=null),ea.forEach(am),ta.forEach(am)}function ws(e,t){e.blockedOn===t&&(e.blockedOn=null,Lc||(Lc=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,Yb)))}function na(e){function t(i){return ws(i,e)}if(0<Ja.length){ws(Ja[0],e);for(var n=1;n<Ja.length;n++){var r=Ja[n];r.blockedOn===e&&(r.blockedOn=null)}}for(jr!==null&&ws(jr,e),kr!==null&&ws(kr,e),Cr!==null&&ws(Cr,e),ea.forEach(t),ta.forEach(t),n=0;n<vr.length;n++)r=vr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<vr.length&&(n=vr[0],n.blockedOn===null);)pv(n),n.blockedOn===null&&vr.shift()}var $i=ar.ReactCurrentBatchConfig,zl=!0;function Wb(e,t,n,r){var i=_e,s=$i.transition;$i.transition=null;try{_e=1,Qd(e,t,n,r)}finally{_e=i,$i.transition=s}}function Hb(e,t,n,r){var i=_e,s=$i.transition;$i.transition=null;try{_e=4,Qd(e,t,n,r)}finally{_e=i,$i.transition=s}}function Qd(e,t,n,r){if(zl){var i=qc(e,t,n,r);if(i===null)Wu(e,t,r,Bl,n),sm(e,r);else if(Bb(i,e,t,n,r))r.stopPropagation();else if(sm(e,r),t&4&&-1<zb.indexOf(e)){for(;i!==null;){var s=ja(i);if(s!==null&&dv(s),s=qc(e,t,n,r),s===null&&Wu(e,t,r,Bl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Wu(e,t,r,null,n)}}var Bl=null;function qc(e,t,n,r){if(Bl=null,e=Bd(r),e=Hr(e),e!==null)if(t=ci(e),t===null)e=null;else if(n=t.tag,n===13){if(e=rv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Bl=e,null}function yv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mb()){case Yd:return 1;case lv:return 4;case $l:case Fb:return 16;case ov:return 536870912;default:return 16}default:return 16}}var xr=null,Gd=null,xl=null;function vv(){if(xl)return xl;var e,t=Gd,n=t.length,r,i="value"in xr?xr.value:xr.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return xl=i.slice(e,1<r?1-r:void 0)}function wl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function el(){return!0}function lm(){return!1}function Qt(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?el:lm,this.isPropagationStopped=lm,this}return We(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=el)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=el)},persist:function(){},isPersistent:el}),t}var is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kd=Qt(is),Sa=We({},is,{view:0,detail:0}),Qb=Qt(Sa),Ru,Lu,bs,Lo=We({},Sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bs&&(bs&&e.type==="mousemove"?(Ru=e.screenX-bs.screenX,Lu=e.screenY-bs.screenY):Lu=Ru=0,bs=e),Ru)},movementY:function(e){return"movementY"in e?e.movementY:Lu}}),om=Qt(Lo),Gb=We({},Lo,{dataTransfer:0}),Kb=Qt(Gb),Xb=We({},Sa,{relatedTarget:0}),qu=Qt(Xb),Zb=We({},is,{animationName:0,elapsedTime:0,pseudoElement:0}),Jb=Qt(Zb),eS=We({},is,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tS=Qt(eS),nS=We({},is,{data:0}),um=Qt(nS),rS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sS[e])?!!t[e]:!1}function Xd(){return aS}var lS=We({},Sa,{key:function(e){if(e.key){var t=rS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=wl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?iS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xd,charCode:function(e){return e.type==="keypress"?wl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oS=Qt(lS),uS=We({},Lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cm=Qt(uS),cS=We({},Sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xd}),dS=Qt(cS),fS=We({},is,{propertyName:0,elapsedTime:0,pseudoElement:0}),hS=Qt(fS),mS=We({},Lo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),pS=Qt(mS),yS=[9,13,27,32],Zd=Jn&&"CompositionEvent"in window,Us=null;Jn&&"documentMode"in document&&(Us=document.documentMode);var vS=Jn&&"TextEvent"in window&&!Us,gv=Jn&&(!Zd||Us&&8<Us&&11>=Us),dm=String.fromCharCode(32),fm=!1;function xv(e,t){switch(e){case"keyup":return yS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _i=!1;function gS(e,t){switch(e){case"compositionend":return wv(t);case"keypress":return t.which!==32?null:(fm=!0,dm);case"textInput":return e=t.data,e===dm&&fm?null:e;default:return null}}function xS(e,t){if(_i)return e==="compositionend"||!Zd&&xv(e,t)?(e=vv(),xl=Gd=xr=null,_i=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gv&&t.locale!=="ko"?null:t.data;default:return null}}var wS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wS[e.type]:t==="textarea"}function bv(e,t,n,r){Zy(r),t=Yl(t,"onChange"),0<t.length&&(n=new Kd("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $s=null,ra=null;function bS(e){Av(e,0)}function qo(e){var t=Ei(e);if(Yy(t))return e}function SS(e,t){if(e==="change")return t}var Sv=!1;if(Jn){var Uu;if(Jn){var $u="oninput"in document;if(!$u){var mm=document.createElement("div");mm.setAttribute("oninput","return;"),$u=typeof mm.oninput=="function"}Uu=$u}else Uu=!1;Sv=Uu&&(!document.documentMode||9<document.documentMode)}function pm(){$s&&($s.detachEvent("onpropertychange",jv),ra=$s=null)}function jv(e){if(e.propertyName==="value"&&qo(ra)){var t=[];bv(t,ra,e,Bd(e)),nv(bS,t)}}function jS(e,t,n){e==="focusin"?(pm(),$s=t,ra=n,$s.attachEvent("onpropertychange",jv)):e==="focusout"&&pm()}function kS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return qo(ra)}function CS(e,t){if(e==="click")return qo(t)}function _S(e,t){if(e==="input"||e==="change")return qo(t)}function NS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gn=typeof Object.is=="function"?Object.is:NS;function ia(e,t){if(gn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!bc.call(t,i)||!gn(e[i],t[i]))return!1}return!0}function ym(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vm(e,t){var n=ym(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ym(n)}}function kv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Cv(){for(var e=window,t=Ll();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ll(e.document)}return t}function Jd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function DS(e){var t=Cv(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&kv(n.ownerDocument.documentElement,n)){if(r!==null&&Jd(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=vm(n,s);var a=vm(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ES=Jn&&"documentMode"in document&&11>=document.documentMode,Ni=null,Uc=null,Vs=null,$c=!1;function gm(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$c||Ni==null||Ni!==Ll(r)||(r=Ni,"selectionStart"in r&&Jd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vs&&ia(Vs,r)||(Vs=r,r=Yl(Uc,"onSelect"),0<r.length&&(t=new Kd("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ni)))}function tl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Di={animationend:tl("Animation","AnimationEnd"),animationiteration:tl("Animation","AnimationIteration"),animationstart:tl("Animation","AnimationStart"),transitionend:tl("Transition","TransitionEnd")},Vu={},_v={};Jn&&(_v=document.createElement("div").style,"AnimationEvent"in window||(delete Di.animationend.animation,delete Di.animationiteration.animation,delete Di.animationstart.animation),"TransitionEvent"in window||delete Di.transitionend.transition);function Uo(e){if(Vu[e])return Vu[e];if(!Di[e])return e;var t=Di[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in _v)return Vu[e]=t[n];return e}var Nv=Uo("animationend"),Dv=Uo("animationiteration"),Ev=Uo("animationstart"),Iv=Uo("transitionend"),Pv=new Map,xm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(e,t){Pv.set(e,t),ui(t,[e])}for(var zu=0;zu<xm.length;zu++){var Bu=xm[zu],IS=Bu.toLowerCase(),PS=Bu[0].toUpperCase()+Bu.slice(1);Tr(IS,"on"+PS)}Tr(Nv,"onAnimationEnd");Tr(Dv,"onAnimationIteration");Tr(Ev,"onAnimationStart");Tr("dblclick","onDoubleClick");Tr("focusin","onFocus");Tr("focusout","onBlur");Tr(Iv,"onTransitionEnd");Ki("onMouseEnter",["mouseout","mouseover"]);Ki("onMouseLeave",["mouseout","mouseover"]);Ki("onPointerEnter",["pointerout","pointerover"]);Ki("onPointerLeave",["pointerout","pointerover"]);ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ui("onBeforeInput",["compositionend","keypress","textInput","paste"]);ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ts="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ts));function wm(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Ib(r,t,void 0,e),e.currentTarget=null}function Av(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],u=o.instance,c=o.currentTarget;if(o=o.listener,u!==s&&i.isPropagationStopped())break e;wm(i,o,c),s=u}else for(a=0;a<r.length;a++){if(o=r[a],u=o.instance,c=o.currentTarget,o=o.listener,u!==s&&i.isPropagationStopped())break e;wm(i,o,c),s=u}}}if(Ul)throw e=Tc,Ul=!1,Tc=null,e}function Oe(e,t){var n=t[Wc];n===void 0&&(n=t[Wc]=new Set);var r=e+"__bubble";n.has(r)||(Ov(t,e,2,!1),n.add(r))}function Yu(e,t,n){var r=0;t&&(r|=4),Ov(n,e,r,t)}var nl="_reactListening"+Math.random().toString(36).slice(2);function sa(e){if(!e[nl]){e[nl]=!0,Uy.forEach(function(n){n!=="selectionchange"&&(AS.has(n)||Yu(n,!1,e),Yu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[nl]||(t[nl]=!0,Yu("selectionchange",!1,t))}}function Ov(e,t,n,r){switch(yv(t)){case 1:var i=Wb;break;case 4:i=Hb;break;default:i=Qd}n=i.bind(null,t,n,e),i=void 0,!Fc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wu(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Hr(o),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}o=o.parentNode}}r=r.return}nv(function(){var c=s,d=Bd(n),f=[];e:{var m=Pv.get(e);if(m!==void 0){var v=Kd,y=e;switch(e){case"keypress":if(wl(n)===0)break e;case"keydown":case"keyup":v=oS;break;case"focusin":y="focus",v=qu;break;case"focusout":y="blur",v=qu;break;case"beforeblur":case"afterblur":v=qu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=om;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Kb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=dS;break;case Nv:case Dv:case Ev:v=Jb;break;case Iv:v=hS;break;case"scroll":v=Qb;break;case"wheel":v=pS;break;case"copy":case"cut":case"paste":v=tS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=cm}var w=(t&4)!==0,j=!w&&e==="scroll",g=w?m!==null?m+"Capture":null:m;w=[];for(var h=c,p;h!==null;){p=h;var b=p.stateNode;if(p.tag===5&&b!==null&&(p=b,g!==null&&(b=Js(h,g),b!=null&&w.push(aa(h,b,p)))),j)break;h=h.return}0<w.length&&(m=new v(m,y,null,n,d),f.push({event:m,listeners:w}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",m&&n!==Oc&&(y=n.relatedTarget||n.fromElement)&&(Hr(y)||y[er]))break e;if((v||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,v?(y=n.relatedTarget||n.toElement,v=c,y=y?Hr(y):null,y!==null&&(j=ci(y),y!==j||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=c),v!==y)){if(w=om,b="onMouseLeave",g="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(w=cm,b="onPointerLeave",g="onPointerEnter",h="pointer"),j=v==null?m:Ei(v),p=y==null?m:Ei(y),m=new w(b,h+"leave",v,n,d),m.target=j,m.relatedTarget=p,b=null,Hr(d)===c&&(w=new w(g,h+"enter",y,n,d),w.target=p,w.relatedTarget=j,b=w),j=b,v&&y)t:{for(w=v,g=y,h=0,p=w;p;p=xi(p))h++;for(p=0,b=g;b;b=xi(b))p++;for(;0<h-p;)w=xi(w),h--;for(;0<p-h;)g=xi(g),p--;for(;h--;){if(w===g||g!==null&&w===g.alternate)break t;w=xi(w),g=xi(g)}w=null}else w=null;v!==null&&bm(f,m,v,w,!1),y!==null&&j!==null&&bm(f,j,y,w,!0)}}e:{if(m=c?Ei(c):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var S=SS;else if(hm(m))if(Sv)S=_S;else{S=kS;var k=jS}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=CS);if(S&&(S=S(e,c))){bv(f,S,n,d);break e}k&&k(e,m,c),e==="focusout"&&(k=m._wrapperState)&&k.controlled&&m.type==="number"&&Dc(m,"number",m.value)}switch(k=c?Ei(c):window,e){case"focusin":(hm(k)||k.contentEditable==="true")&&(Ni=k,Uc=c,Vs=null);break;case"focusout":Vs=Uc=Ni=null;break;case"mousedown":$c=!0;break;case"contextmenu":case"mouseup":case"dragend":$c=!1,gm(f,n,d);break;case"selectionchange":if(ES)break;case"keydown":case"keyup":gm(f,n,d)}var _;if(Zd)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else _i?xv(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(gv&&n.locale!=="ko"&&(_i||C!=="onCompositionStart"?C==="onCompositionEnd"&&_i&&(_=vv()):(xr=d,Gd="value"in xr?xr.value:xr.textContent,_i=!0)),k=Yl(c,C),0<k.length&&(C=new um(C,e,null,n,d),f.push({event:C,listeners:k}),_?C.data=_:(_=wv(n),_!==null&&(C.data=_)))),(_=vS?gS(e,n):xS(e,n))&&(c=Yl(c,"onBeforeInput"),0<c.length&&(d=new um("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=_))}Av(f,t)})}function aa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yl(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Js(e,n),s!=null&&r.unshift(aa(e,s,i)),s=Js(e,t),s!=null&&r.push(aa(e,s,i))),e=e.return}return r}function xi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bm(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var o=n,u=o.alternate,c=o.stateNode;if(u!==null&&u===r)break;o.tag===5&&c!==null&&(o=c,i?(u=Js(n,s),u!=null&&a.unshift(aa(n,u,o))):i||(u=Js(n,s),u!=null&&a.push(aa(n,u,o)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var OS=/\r\n?/g,MS=/\u0000|\uFFFD/g;function Sm(e){return(typeof e=="string"?e:""+e).replace(OS,`
`).replace(MS,"")}function rl(e,t,n){if(t=Sm(t),Sm(e)!==t&&n)throw Error($(425))}function Wl(){}var Vc=null,zc=null;function Bc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yc=typeof setTimeout=="function"?setTimeout:void 0,FS=typeof clearTimeout=="function"?clearTimeout:void 0,jm=typeof Promise=="function"?Promise:void 0,TS=typeof queueMicrotask=="function"?queueMicrotask:typeof jm<"u"?function(e){return jm.resolve(null).then(e).catch(RS)}:Yc;function RS(e){setTimeout(function(){throw e})}function Hu(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),na(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);na(t)}function _r(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function km(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ss=Math.random().toString(36).slice(2),Cn="__reactFiber$"+ss,la="__reactProps$"+ss,er="__reactContainer$"+ss,Wc="__reactEvents$"+ss,LS="__reactListeners$"+ss,qS="__reactHandles$"+ss;function Hr(e){var t=e[Cn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[er]||n[Cn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=km(e);e!==null;){if(n=e[Cn])return n;e=km(e)}return t}e=n,n=e.parentNode}return null}function ja(e){return e=e[Cn]||e[er],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ei(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function $o(e){return e[la]||null}var Hc=[],Ii=-1;function Rr(e){return{current:e}}function Me(e){0>Ii||(e.current=Hc[Ii],Hc[Ii]=null,Ii--)}function Pe(e,t){Ii++,Hc[Ii]=e.current,e.current=t}var Fr={},kt=Rr(Fr),Rt=Rr(!1),ri=Fr;function Xi(e,t){var n=e.type.contextTypes;if(!n)return Fr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Lt(e){return e=e.childContextTypes,e!=null}function Hl(){Me(Rt),Me(kt)}function Cm(e,t,n){if(kt.current!==Fr)throw Error($(168));Pe(kt,t),Pe(Rt,n)}function Mv(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error($(108,jb(e)||"Unknown",i));return We({},n,r)}function Ql(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fr,ri=kt.current,Pe(kt,e),Pe(Rt,Rt.current),!0}function _m(e,t,n){var r=e.stateNode;if(!r)throw Error($(169));n?(e=Mv(e,t,ri),r.__reactInternalMemoizedMergedChildContext=e,Me(Rt),Me(kt),Pe(kt,e)):Me(Rt),Pe(Rt,n)}var Yn=null,Vo=!1,Qu=!1;function Fv(e){Yn===null?Yn=[e]:Yn.push(e)}function US(e){Vo=!0,Fv(e)}function Lr(){if(!Qu&&Yn!==null){Qu=!0;var e=0,t=_e;try{var n=Yn;for(_e=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Yn=null,Vo=!1}catch(i){throw Yn!==null&&(Yn=Yn.slice(e+1)),av(Yd,Lr),i}finally{_e=t,Qu=!1}}return null}var Pi=[],Ai=0,Gl=null,Kl=0,Xt=[],Zt=0,ii=null,Wn=1,Hn="";function Br(e,t){Pi[Ai++]=Kl,Pi[Ai++]=Gl,Gl=e,Kl=t}function Tv(e,t,n){Xt[Zt++]=Wn,Xt[Zt++]=Hn,Xt[Zt++]=ii,ii=e;var r=Wn;e=Hn;var i=32-yn(r)-1;r&=~(1<<i),n+=1;var s=32-yn(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Wn=1<<32-yn(t)+i|n<<i|r,Hn=s+e}else Wn=1<<s|n<<i|r,Hn=e}function ef(e){e.return!==null&&(Br(e,1),Tv(e,1,0))}function tf(e){for(;e===Gl;)Gl=Pi[--Ai],Pi[Ai]=null,Kl=Pi[--Ai],Pi[Ai]=null;for(;e===ii;)ii=Xt[--Zt],Xt[Zt]=null,Hn=Xt[--Zt],Xt[Zt]=null,Wn=Xt[--Zt],Xt[Zt]=null}var Yt=null,Bt=null,Ve=!1,hn=null;function Rv(e,t){var n=en(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Nm(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Yt=e,Bt=_r(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Yt=e,Bt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ii!==null?{id:Wn,overflow:Hn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=en(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Yt=e,Bt=null,!0):!1;default:return!1}}function Qc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Gc(e){if(Ve){var t=Bt;if(t){var n=t;if(!Nm(e,t)){if(Qc(e))throw Error($(418));t=_r(n.nextSibling);var r=Yt;t&&Nm(e,t)?Rv(r,n):(e.flags=e.flags&-4097|2,Ve=!1,Yt=e)}}else{if(Qc(e))throw Error($(418));e.flags=e.flags&-4097|2,Ve=!1,Yt=e}}}function Dm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Yt=e}function il(e){if(e!==Yt)return!1;if(!Ve)return Dm(e),Ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Bc(e.type,e.memoizedProps)),t&&(t=Bt)){if(Qc(e))throw Lv(),Error($(418));for(;t;)Rv(e,t),t=_r(t.nextSibling)}if(Dm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Bt=_r(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Bt=null}}else Bt=Yt?_r(e.stateNode.nextSibling):null;return!0}function Lv(){for(var e=Bt;e;)e=_r(e.nextSibling)}function Zi(){Bt=Yt=null,Ve=!1}function nf(e){hn===null?hn=[e]:hn.push(e)}var $S=ar.ReactCurrentBatchConfig;function dn(e,t){if(e&&e.defaultProps){t=We({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Xl=Rr(null),Zl=null,Oi=null,rf=null;function sf(){rf=Oi=Zl=null}function af(e){var t=Xl.current;Me(Xl),e._currentValue=t}function Kc(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Vi(e,t){Zl=e,rf=Oi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Tt=!0),e.firstContext=null)}function rn(e){var t=e._currentValue;if(rf!==e)if(e={context:e,memoizedValue:t,next:null},Oi===null){if(Zl===null)throw Error($(308));Oi=e,Zl.dependencies={lanes:0,firstContext:e}}else Oi=Oi.next=e;return t}var Qr=null;function lf(e){Qr===null?Qr=[e]:Qr.push(e)}function qv(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,lf(t)):(n.next=i.next,i.next=n),t.interleaved=n,tr(e,r)}function tr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var pr=!1;function of(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Kn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Nr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,tr(e,n)}return i=r.interleaved,i===null?(t.next=t,lf(r)):(t.next=i.next,i.next=t),r.interleaved=t,tr(e,n)}function bl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Wd(e,n)}}function Em(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Jl(e,t,n,r){var i=e.updateQueue;pr=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var u=o,c=u.next;u.next=null,a===null?s=c:a.next=c,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;a=0,d=c=u=null,o=s;do{var m=o.lane,v=o.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:v,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=e,w=o;switch(m=t,v=n,w.tag){case 1:if(y=w.payload,typeof y=="function"){f=y.call(v,f,m);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,m=typeof y=="function"?y.call(v,f,m):y,m==null)break e;f=We({},f,m);break e;case 2:pr=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,m=i.effects,m===null?i.effects=[o]:m.push(o))}else v={eventTime:v,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=v,u=f):d=d.next=v,a|=m;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;m=o,o=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(d===null&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);ai|=a,e.lanes=a,e.memoizedState=f}}function Im(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var $v=new qy.Component().refs;function Xc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:We({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var zo={isMounted:function(e){return(e=e._reactInternals)?ci(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=It(),i=Er(e),s=Kn(r,i);s.payload=t,n!=null&&(s.callback=n),t=Nr(e,s,i),t!==null&&(vn(t,e,i,r),bl(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=It(),i=Er(e),s=Kn(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Nr(e,s,i),t!==null&&(vn(t,e,i,r),bl(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=It(),r=Er(e),i=Kn(n,r);i.tag=2,t!=null&&(i.callback=t),t=Nr(e,i,r),t!==null&&(vn(t,e,r,n),bl(t,e,r))}};function Pm(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!ia(n,r)||!ia(i,s):!0}function Vv(e,t,n){var r=!1,i=Fr,s=t.contextType;return typeof s=="object"&&s!==null?s=rn(s):(i=Lt(t)?ri:kt.current,r=t.contextTypes,s=(r=r!=null)?Xi(e,i):Fr),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=zo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Am(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zo.enqueueReplaceState(t,t.state,null)}function Zc(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=$v,of(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=rn(s):(s=Lt(t)?ri:kt.current,i.context=Xi(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Xc(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&zo.enqueueReplaceState(i,i.state,null),Jl(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Ss(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=i.refs;o===$v&&(o=i.refs={}),a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error($(284));if(!n._owner)throw Error($(290,e))}return e}function sl(e,t){throw e=Object.prototype.toString.call(t),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Om(e){var t=e._init;return t(e._payload)}function zv(e){function t(g,h){if(e){var p=g.deletions;p===null?(g.deletions=[h],g.flags|=16):p.push(h)}}function n(g,h){if(!e)return null;for(;h!==null;)t(g,h),h=h.sibling;return null}function r(g,h){for(g=new Map;h!==null;)h.key!==null?g.set(h.key,h):g.set(h.index,h),h=h.sibling;return g}function i(g,h){return g=Ir(g,h),g.index=0,g.sibling=null,g}function s(g,h,p){return g.index=p,e?(p=g.alternate,p!==null?(p=p.index,p<h?(g.flags|=2,h):p):(g.flags|=2,h)):(g.flags|=1048576,h)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function o(g,h,p,b){return h===null||h.tag!==6?(h=tc(p,g.mode,b),h.return=g,h):(h=i(h,p),h.return=g,h)}function u(g,h,p,b){var S=p.type;return S===Ci?d(g,h,p.props.children,b,p.key):h!==null&&(h.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===mr&&Om(S)===h.type)?(b=i(h,p.props),b.ref=Ss(g,h,p),b.return=g,b):(b=Nl(p.type,p.key,p.props,null,g.mode,b),b.ref=Ss(g,h,p),b.return=g,b)}function c(g,h,p,b){return h===null||h.tag!==4||h.stateNode.containerInfo!==p.containerInfo||h.stateNode.implementation!==p.implementation?(h=nc(p,g.mode,b),h.return=g,h):(h=i(h,p.children||[]),h.return=g,h)}function d(g,h,p,b,S){return h===null||h.tag!==7?(h=ei(p,g.mode,b,S),h.return=g,h):(h=i(h,p),h.return=g,h)}function f(g,h,p){if(typeof h=="string"&&h!==""||typeof h=="number")return h=tc(""+h,g.mode,p),h.return=g,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Qa:return p=Nl(h.type,h.key,h.props,null,g.mode,p),p.ref=Ss(g,null,h),p.return=g,p;case ki:return h=nc(h,g.mode,p),h.return=g,h;case mr:var b=h._init;return f(g,b(h._payload),p)}if(Ms(h)||vs(h))return h=ei(h,g.mode,p,null),h.return=g,h;sl(g,h)}return null}function m(g,h,p,b){var S=h!==null?h.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return S!==null?null:o(g,h,""+p,b);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Qa:return p.key===S?u(g,h,p,b):null;case ki:return p.key===S?c(g,h,p,b):null;case mr:return S=p._init,m(g,h,S(p._payload),b)}if(Ms(p)||vs(p))return S!==null?null:d(g,h,p,b,null);sl(g,p)}return null}function v(g,h,p,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(p)||null,o(h,g,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Qa:return g=g.get(b.key===null?p:b.key)||null,u(h,g,b,S);case ki:return g=g.get(b.key===null?p:b.key)||null,c(h,g,b,S);case mr:var k=b._init;return v(g,h,p,k(b._payload),S)}if(Ms(b)||vs(b))return g=g.get(p)||null,d(h,g,b,S,null);sl(h,b)}return null}function y(g,h,p,b){for(var S=null,k=null,_=h,C=h=0,N=null;_!==null&&C<p.length;C++){_.index>C?(N=_,_=null):N=_.sibling;var D=m(g,_,p[C],b);if(D===null){_===null&&(_=N);break}e&&_&&D.alternate===null&&t(g,_),h=s(D,h,C),k===null?S=D:k.sibling=D,k=D,_=N}if(C===p.length)return n(g,_),Ve&&Br(g,C),S;if(_===null){for(;C<p.length;C++)_=f(g,p[C],b),_!==null&&(h=s(_,h,C),k===null?S=_:k.sibling=_,k=_);return Ve&&Br(g,C),S}for(_=r(g,_);C<p.length;C++)N=v(_,g,C,p[C],b),N!==null&&(e&&N.alternate!==null&&_.delete(N.key===null?C:N.key),h=s(N,h,C),k===null?S=N:k.sibling=N,k=N);return e&&_.forEach(function(E){return t(g,E)}),Ve&&Br(g,C),S}function w(g,h,p,b){var S=vs(p);if(typeof S!="function")throw Error($(150));if(p=S.call(p),p==null)throw Error($(151));for(var k=S=null,_=h,C=h=0,N=null,D=p.next();_!==null&&!D.done;C++,D=p.next()){_.index>C?(N=_,_=null):N=_.sibling;var E=m(g,_,D.value,b);if(E===null){_===null&&(_=N);break}e&&_&&E.alternate===null&&t(g,_),h=s(E,h,C),k===null?S=E:k.sibling=E,k=E,_=N}if(D.done)return n(g,_),Ve&&Br(g,C),S;if(_===null){for(;!D.done;C++,D=p.next())D=f(g,D.value,b),D!==null&&(h=s(D,h,C),k===null?S=D:k.sibling=D,k=D);return Ve&&Br(g,C),S}for(_=r(g,_);!D.done;C++,D=p.next())D=v(_,g,C,D.value,b),D!==null&&(e&&D.alternate!==null&&_.delete(D.key===null?C:D.key),h=s(D,h,C),k===null?S=D:k.sibling=D,k=D);return e&&_.forEach(function(A){return t(g,A)}),Ve&&Br(g,C),S}function j(g,h,p,b){if(typeof p=="object"&&p!==null&&p.type===Ci&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Qa:e:{for(var S=p.key,k=h;k!==null;){if(k.key===S){if(S=p.type,S===Ci){if(k.tag===7){n(g,k.sibling),h=i(k,p.props.children),h.return=g,g=h;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===mr&&Om(S)===k.type){n(g,k.sibling),h=i(k,p.props),h.ref=Ss(g,k,p),h.return=g,g=h;break e}n(g,k);break}else t(g,k);k=k.sibling}p.type===Ci?(h=ei(p.props.children,g.mode,b,p.key),h.return=g,g=h):(b=Nl(p.type,p.key,p.props,null,g.mode,b),b.ref=Ss(g,h,p),b.return=g,g=b)}return a(g);case ki:e:{for(k=p.key;h!==null;){if(h.key===k)if(h.tag===4&&h.stateNode.containerInfo===p.containerInfo&&h.stateNode.implementation===p.implementation){n(g,h.sibling),h=i(h,p.children||[]),h.return=g,g=h;break e}else{n(g,h);break}else t(g,h);h=h.sibling}h=nc(p,g.mode,b),h.return=g,g=h}return a(g);case mr:return k=p._init,j(g,h,k(p._payload),b)}if(Ms(p))return y(g,h,p,b);if(vs(p))return w(g,h,p,b);sl(g,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,h!==null&&h.tag===6?(n(g,h.sibling),h=i(h,p),h.return=g,g=h):(n(g,h),h=tc(p,g.mode,b),h.return=g,g=h),a(g)):n(g,h)}return j}var Ji=zv(!0),Bv=zv(!1),ka={},In=Rr(ka),oa=Rr(ka),ua=Rr(ka);function Gr(e){if(e===ka)throw Error($(174));return e}function uf(e,t){switch(Pe(ua,t),Pe(oa,e),Pe(In,ka),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ic(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ic(t,e)}Me(In),Pe(In,t)}function es(){Me(In),Me(oa),Me(ua)}function Yv(e){Gr(ua.current);var t=Gr(In.current),n=Ic(t,e.type);t!==n&&(Pe(oa,e),Pe(In,n))}function cf(e){oa.current===e&&(Me(In),Me(oa))}var Be=Rr(0);function eo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Gu=[];function df(){for(var e=0;e<Gu.length;e++)Gu[e]._workInProgressVersionPrimary=null;Gu.length=0}var Sl=ar.ReactCurrentDispatcher,Ku=ar.ReactCurrentBatchConfig,si=0,Ye=null,st=null,ut=null,to=!1,zs=!1,ca=0,VS=0;function gt(){throw Error($(321))}function ff(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!gn(e[n],t[n]))return!1;return!0}function hf(e,t,n,r,i,s){if(si=s,Ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Sl.current=e===null||e.memoizedState===null?WS:HS,e=n(r,i),zs){s=0;do{if(zs=!1,ca=0,25<=s)throw Error($(301));s+=1,ut=st=null,t.updateQueue=null,Sl.current=QS,e=n(r,i)}while(zs)}if(Sl.current=no,t=st!==null&&st.next!==null,si=0,ut=st=Ye=null,to=!1,t)throw Error($(300));return e}function mf(){var e=ca!==0;return ca=0,e}function kn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?Ye.memoizedState=ut=e:ut=ut.next=e,ut}function sn(){if(st===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=st.next;var t=ut===null?Ye.memoizedState:ut.next;if(t!==null)ut=t,st=e;else{if(e===null)throw Error($(310));st=e,e={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},ut===null?Ye.memoizedState=ut=e:ut=ut.next=e}return ut}function da(e,t){return typeof t=="function"?t(e):t}function Xu(e){var t=sn(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=st,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,u=null,c=s;do{var d=c.lane;if((si&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(o=u=f,a=r):u=u.next=f,Ye.lanes|=d,ai|=d}c=c.next}while(c!==null&&c!==s);u===null?a=r:u.next=o,gn(r,t.memoizedState)||(Tt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ye.lanes|=s,ai|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Zu(e){var t=sn(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);gn(s,t.memoizedState)||(Tt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Wv(){}function Hv(e,t){var n=Ye,r=sn(),i=t(),s=!gn(r.memoizedState,i);if(s&&(r.memoizedState=i,Tt=!0),r=r.queue,pf(Kv.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||ut!==null&&ut.memoizedState.tag&1){if(n.flags|=2048,fa(9,Gv.bind(null,n,r,i,t),void 0,null),ct===null)throw Error($(349));si&30||Qv(n,t,i)}return i}function Qv(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Gv(e,t,n,r){t.value=n,t.getSnapshot=r,Xv(t)&&Zv(e)}function Kv(e,t,n){return n(function(){Xv(t)&&Zv(e)})}function Xv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!gn(e,n)}catch{return!0}}function Zv(e){var t=tr(e,1);t!==null&&vn(t,e,1,-1)}function Mm(e){var t=kn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:e},t.queue=e,e=e.dispatch=YS.bind(null,Ye,e),[t.memoizedState,e]}function fa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Jv(){return sn().memoizedState}function jl(e,t,n,r){var i=kn();Ye.flags|=e,i.memoizedState=fa(1|t,n,void 0,r===void 0?null:r)}function Bo(e,t,n,r){var i=sn();r=r===void 0?null:r;var s=void 0;if(st!==null){var a=st.memoizedState;if(s=a.destroy,r!==null&&ff(r,a.deps)){i.memoizedState=fa(t,n,s,r);return}}Ye.flags|=e,i.memoizedState=fa(1|t,n,s,r)}function Fm(e,t){return jl(8390656,8,e,t)}function pf(e,t){return Bo(2048,8,e,t)}function eg(e,t){return Bo(4,2,e,t)}function tg(e,t){return Bo(4,4,e,t)}function ng(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function rg(e,t,n){return n=n!=null?n.concat([e]):null,Bo(4,4,ng.bind(null,t,e),n)}function yf(){}function ig(e,t){var n=sn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ff(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function sg(e,t){var n=sn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ff(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ag(e,t,n){return si&21?(gn(n,t)||(n=uv(),Ye.lanes|=n,ai|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Tt=!0),e.memoizedState=n)}function zS(e,t){var n=_e;_e=n!==0&&4>n?n:4,e(!0);var r=Ku.transition;Ku.transition={};try{e(!1),t()}finally{_e=n,Ku.transition=r}}function lg(){return sn().memoizedState}function BS(e,t,n){var r=Er(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},og(e))ug(t,n);else if(n=qv(e,t,n,r),n!==null){var i=It();vn(n,e,r,i),cg(n,t,r)}}function YS(e,t,n){var r=Er(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(og(e))ug(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,gn(o,a)){var u=t.interleaved;u===null?(i.next=i,lf(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=qv(e,t,i,r),n!==null&&(i=It(),vn(n,e,r,i),cg(n,t,r))}}function og(e){var t=e.alternate;return e===Ye||t!==null&&t===Ye}function ug(e,t){zs=to=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function cg(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Wd(e,n)}}var no={readContext:rn,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},WS={readContext:rn,useCallback:function(e,t){return kn().memoizedState=[e,t===void 0?null:t],e},useContext:rn,useEffect:Fm,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,jl(4194308,4,ng.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jl(4194308,4,e,t)},useInsertionEffect:function(e,t){return jl(4,2,e,t)},useMemo:function(e,t){var n=kn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=kn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=BS.bind(null,Ye,e),[r.memoizedState,e]},useRef:function(e){var t=kn();return e={current:e},t.memoizedState=e},useState:Mm,useDebugValue:yf,useDeferredValue:function(e){return kn().memoizedState=e},useTransition:function(){var e=Mm(!1),t=e[0];return e=zS.bind(null,e[1]),kn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ye,i=kn();if(Ve){if(n===void 0)throw Error($(407));n=n()}else{if(n=t(),ct===null)throw Error($(349));si&30||Qv(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Fm(Kv.bind(null,r,s,e),[e]),r.flags|=2048,fa(9,Gv.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=kn(),t=ct.identifierPrefix;if(Ve){var n=Hn,r=Wn;n=(r&~(1<<32-yn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ca++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=VS++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},HS={readContext:rn,useCallback:ig,useContext:rn,useEffect:pf,useImperativeHandle:rg,useInsertionEffect:eg,useLayoutEffect:tg,useMemo:sg,useReducer:Xu,useRef:Jv,useState:function(){return Xu(da)},useDebugValue:yf,useDeferredValue:function(e){var t=sn();return ag(t,st.memoizedState,e)},useTransition:function(){var e=Xu(da)[0],t=sn().memoizedState;return[e,t]},useMutableSource:Wv,useSyncExternalStore:Hv,useId:lg,unstable_isNewReconciler:!1},QS={readContext:rn,useCallback:ig,useContext:rn,useEffect:pf,useImperativeHandle:rg,useInsertionEffect:eg,useLayoutEffect:tg,useMemo:sg,useReducer:Zu,useRef:Jv,useState:function(){return Zu(da)},useDebugValue:yf,useDeferredValue:function(e){var t=sn();return st===null?t.memoizedState=e:ag(t,st.memoizedState,e)},useTransition:function(){var e=Zu(da)[0],t=sn().memoizedState;return[e,t]},useMutableSource:Wv,useSyncExternalStore:Hv,useId:lg,unstable_isNewReconciler:!1};function ts(e,t){try{var n="",r=t;do n+=Sb(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Ju(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Jc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var GS=typeof WeakMap=="function"?WeakMap:Map;function dg(e,t,n){n=Kn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){io||(io=!0,ud=r),Jc(e,t)},n}function fg(e,t,n){n=Kn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Jc(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Jc(e,t),typeof r!="function"&&(Dr===null?Dr=new Set([this]):Dr.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Tm(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new GS;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=uj.bind(null,e,t,n),t.then(e,e))}function Rm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Lm(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Kn(-1,1),t.tag=2,Nr(n,t,1))),n.lanes|=1),e)}var KS=ar.ReactCurrentOwner,Tt=!1;function Dt(e,t,n,r){t.child=e===null?Bv(t,null,n,r):Ji(t,e.child,n,r)}function qm(e,t,n,r,i){n=n.render;var s=t.ref;return Vi(t,i),r=hf(e,t,n,r,s,i),n=mf(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,nr(e,t,i)):(Ve&&n&&ef(t),t.flags|=1,Dt(e,t,r,i),t.child)}function Um(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!kf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,hg(e,t,s,r,i)):(e=Nl(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:ia,n(a,r)&&e.ref===t.ref)return nr(e,t,i)}return t.flags|=1,e=Ir(s,r),e.ref=t.ref,e.return=t,t.child=e}function hg(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(ia(s,r)&&e.ref===t.ref)if(Tt=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Tt=!0);else return t.lanes=e.lanes,nr(e,t,i)}return ed(e,t,n,r,i)}function mg(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(Fi,Vt),Vt|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pe(Fi,Vt),Vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Pe(Fi,Vt),Vt|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Pe(Fi,Vt),Vt|=r;return Dt(e,t,i,n),t.child}function pg(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ed(e,t,n,r,i){var s=Lt(n)?ri:kt.current;return s=Xi(t,s),Vi(t,i),n=hf(e,t,n,r,s,i),r=mf(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,nr(e,t,i)):(Ve&&r&&ef(t),t.flags|=1,Dt(e,t,n,i),t.child)}function $m(e,t,n,r,i){if(Lt(n)){var s=!0;Ql(t)}else s=!1;if(Vi(t,i),t.stateNode===null)kl(e,t),Vv(t,n,r),Zc(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var u=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=rn(c):(c=Lt(n)?ri:kt.current,c=Xi(t,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||u!==c)&&Am(t,a,r,c),pr=!1;var m=t.memoizedState;a.state=m,Jl(t,r,a,i),u=t.memoizedState,o!==r||m!==u||Rt.current||pr?(typeof d=="function"&&(Xc(t,n,d,r),u=t.memoizedState),(o=pr||Pm(t,n,o,r,m,u,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Uv(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:dn(t.type,o),a.props=c,f=t.pendingProps,m=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=rn(u):(u=Lt(n)?ri:kt.current,u=Xi(t,u));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||m!==u)&&Am(t,a,r,u),pr=!1,m=t.memoizedState,a.state=m,Jl(t,r,a,i);var y=t.memoizedState;o!==f||m!==y||Rt.current||pr?(typeof v=="function"&&(Xc(t,n,v,r),y=t.memoizedState),(c=pr||Pm(t,n,c,r,m,y,u)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),a.props=r,a.state=y,a.context=u,r=c):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return td(e,t,n,r,s,i)}function td(e,t,n,r,i,s){pg(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&_m(t,n,!1),nr(e,t,s);r=t.stateNode,KS.current=t;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Ji(t,e.child,null,s),t.child=Ji(t,null,o,s)):Dt(e,t,o,s),t.memoizedState=r.state,i&&_m(t,n,!0),t.child}function yg(e){var t=e.stateNode;t.pendingContext?Cm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Cm(e,t.context,!1),uf(e,t.containerInfo)}function Vm(e,t,n,r,i){return Zi(),nf(i),t.flags|=256,Dt(e,t,n,r),t.child}var nd={dehydrated:null,treeContext:null,retryLane:0};function rd(e){return{baseLanes:e,cachePool:null,transitions:null}}function vg(e,t,n){var r=t.pendingProps,i=Be.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Pe(Be,i&1),e===null)return Gc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Ho(a,r,0,null),e=ei(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=rd(n),t.memoizedState=nd,e):vf(t,a));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return XS(e,t,a,r,o,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,o=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Ir(i,u),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Ir(o,s):(s=ei(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?rd(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=nd,r}return s=e.child,e=s.sibling,r=Ir(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function vf(e,t){return t=Ho({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function al(e,t,n,r){return r!==null&&nf(r),Ji(t,e.child,null,n),e=vf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function XS(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=Ju(Error($(422))),al(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Ho({mode:"visible",children:r.children},i,0,null),s=ei(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Ji(t,e.child,null,a),t.child.memoizedState=rd(a),t.memoizedState=nd,s);if(!(t.mode&1))return al(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error($(419)),r=Ju(s,r,void 0),al(e,t,a,r)}if(o=(a&e.childLanes)!==0,Tt||o){if(r=ct,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,tr(e,i),vn(r,e,i,-1))}return jf(),r=Ju(Error($(421))),al(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=cj.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Bt=_r(i.nextSibling),Yt=t,Ve=!0,hn=null,e!==null&&(Xt[Zt++]=Wn,Xt[Zt++]=Hn,Xt[Zt++]=ii,Wn=e.id,Hn=e.overflow,ii=t),t=vf(t,r.children),t.flags|=4096,t)}function zm(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Kc(e.return,t,n)}function ec(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function gg(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Dt(e,t,r.children,n),r=Be.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zm(e,n,t);else if(e.tag===19)zm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Pe(Be,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&eo(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ec(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&eo(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ec(t,!0,n,null,s);break;case"together":ec(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function kl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function nr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ai|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($(153));if(t.child!==null){for(e=t.child,n=Ir(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ir(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ZS(e,t,n){switch(t.tag){case 3:yg(t),Zi();break;case 5:Yv(t);break;case 1:Lt(t.type)&&Ql(t);break;case 4:uf(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Pe(Xl,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Pe(Be,Be.current&1),t.flags|=128,null):n&t.child.childLanes?vg(e,t,n):(Pe(Be,Be.current&1),e=nr(e,t,n),e!==null?e.sibling:null);Pe(Be,Be.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return gg(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pe(Be,Be.current),r)break;return null;case 22:case 23:return t.lanes=0,mg(e,t,n)}return nr(e,t,n)}var xg,id,wg,bg;xg=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};id=function(){};wg=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Gr(In.current);var s=null;switch(n){case"input":i=_c(e,i),r=_c(e,r),s=[];break;case"select":i=We({},i,{value:void 0}),r=We({},r,{value:void 0}),s=[];break;case"textarea":i=Ec(e,i),r=Ec(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Wl)}Pc(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Xs.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(o=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==o&&(u!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&o[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Xs.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Oe("scroll",e),s||o===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};bg=function(e,t,n,r){n!==r&&(t.flags|=4)};function js(e,t){if(!Ve)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function xt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function JS(e,t,n){var r=t.pendingProps;switch(tf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(t),null;case 1:return Lt(t.type)&&Hl(),xt(t),null;case 3:return r=t.stateNode,es(),Me(Rt),Me(kt),df(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(il(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,hn!==null&&(fd(hn),hn=null))),id(e,t),xt(t),null;case 5:cf(t);var i=Gr(ua.current);if(n=t.type,e!==null&&t.stateNode!=null)wg(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error($(166));return xt(t),null}if(e=Gr(In.current),il(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Cn]=t,r[la]=s,e=(t.mode&1)!==0,n){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(i=0;i<Ts.length;i++)Oe(Ts[i],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":Zh(r,s),Oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Oe("invalid",r);break;case"textarea":em(r,s),Oe("invalid",r)}Pc(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&rl(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&rl(r.textContent,o,e),i=["children",""+o]):Xs.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Oe("scroll",r)}switch(n){case"input":Ga(r),Jh(r,s,!0);break;case"textarea":Ga(r),tm(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Wl)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Qy(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Cn]=t,e[la]=r,xg(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ac(n,r),n){case"dialog":Oe("cancel",e),Oe("close",e),i=r;break;case"iframe":case"object":case"embed":Oe("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ts.length;i++)Oe(Ts[i],e);i=r;break;case"source":Oe("error",e),i=r;break;case"img":case"image":case"link":Oe("error",e),Oe("load",e),i=r;break;case"details":Oe("toggle",e),i=r;break;case"input":Zh(e,r),i=_c(e,r),Oe("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=We({},r,{value:void 0}),Oe("invalid",e);break;case"textarea":em(e,r),i=Ec(e,r),Oe("invalid",e);break;default:i=r}Pc(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var u=o[s];s==="style"?Xy(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Gy(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Zs(e,u):typeof u=="number"&&Zs(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Xs.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Oe("scroll",e):u!=null&&Ud(e,s,u,a))}switch(n){case"input":Ga(e),Jh(e,r,!1);break;case"textarea":Ga(e),tm(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Mr(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Li(e,!!r.multiple,s,!1):r.defaultValue!=null&&Li(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Wl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return xt(t),null;case 6:if(e&&t.stateNode!=null)bg(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error($(166));if(n=Gr(ua.current),Gr(In.current),il(t)){if(r=t.stateNode,n=t.memoizedProps,r[Cn]=t,(s=r.nodeValue!==n)&&(e=Yt,e!==null))switch(e.tag){case 3:rl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&rl(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Cn]=t,t.stateNode=r}return xt(t),null;case 13:if(Me(Be),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ve&&Bt!==null&&t.mode&1&&!(t.flags&128))Lv(),Zi(),t.flags|=98560,s=!1;else if(s=il(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error($(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[Cn]=t}else Zi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;xt(t),s=!1}else hn!==null&&(fd(hn),hn=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Be.current&1?at===0&&(at=3):jf())),t.updateQueue!==null&&(t.flags|=4),xt(t),null);case 4:return es(),id(e,t),e===null&&sa(t.stateNode.containerInfo),xt(t),null;case 10:return af(t.type._context),xt(t),null;case 17:return Lt(t.type)&&Hl(),xt(t),null;case 19:if(Me(Be),s=t.memoizedState,s===null)return xt(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)js(s,!1);else{if(at!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=eo(e),a!==null){for(t.flags|=128,js(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Pe(Be,Be.current&1|2),t.child}e=e.sibling}s.tail!==null&&Ze()>ns&&(t.flags|=128,r=!0,js(s,!1),t.lanes=4194304)}else{if(!r)if(e=eo(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),js(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ve)return xt(t),null}else 2*Ze()-s.renderingStartTime>ns&&n!==1073741824&&(t.flags|=128,r=!0,js(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ze(),t.sibling=null,n=Be.current,Pe(Be,r?n&1|2:n&1),t):(xt(t),null);case 22:case 23:return Sf(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Vt&1073741824&&(xt(t),t.subtreeFlags&6&&(t.flags|=8192)):xt(t),null;case 24:return null;case 25:return null}throw Error($(156,t.tag))}function ej(e,t){switch(tf(t),t.tag){case 1:return Lt(t.type)&&Hl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return es(),Me(Rt),Me(kt),df(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return cf(t),null;case 13:if(Me(Be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($(340));Zi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Me(Be),null;case 4:return es(),null;case 10:return af(t.type._context),null;case 22:case 23:return Sf(),null;case 24:return null;default:return null}}var ll=!1,St=!1,tj=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Mi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ge(e,t,r)}else n.current=null}function sd(e,t,n){try{n()}catch(r){Ge(e,t,r)}}var Bm=!1;function nj(e,t){if(Vc=zl,e=Cv(),Jd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,u=-1,c=0,d=0,f=e,m=null;t:for(;;){for(var v;f!==n||i!==0&&f.nodeType!==3||(o=a+i),f!==s||r!==0&&f.nodeType!==3||(u=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(v=f.firstChild)!==null;)m=f,f=v;for(;;){if(f===e)break t;if(m===n&&++c===i&&(o=a),m===s&&++d===r&&(u=a),(v=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=v}n=o===-1||u===-1?null:{start:o,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(zc={focusedElem:e,selectionRange:n},zl=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,j=y.memoizedState,g=t.stateNode,h=g.getSnapshotBeforeUpdate(t.elementType===t.type?w:dn(t.type,w),j);g.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(b){Ge(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return y=Bm,Bm=!1,y}function Bs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&sd(t,n,s)}i=i.next}while(i!==r)}}function Yo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ad(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Sg(e){var t=e.alternate;t!==null&&(e.alternate=null,Sg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Cn],delete t[la],delete t[Wc],delete t[LS],delete t[qS])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jg(e){return e.tag===5||e.tag===3||e.tag===4}function Ym(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ld(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Wl));else if(r!==4&&(e=e.child,e!==null))for(ld(e,t,n),e=e.sibling;e!==null;)ld(e,t,n),e=e.sibling}function od(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(od(e,t,n),e=e.sibling;e!==null;)od(e,t,n),e=e.sibling}var ft=null,fn=!1;function hr(e,t,n){for(n=n.child;n!==null;)kg(e,t,n),n=n.sibling}function kg(e,t,n){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(Ro,n)}catch{}switch(n.tag){case 5:St||Mi(n,t);case 6:var r=ft,i=fn;ft=null,hr(e,t,n),ft=r,fn=i,ft!==null&&(fn?(e=ft,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ft.removeChild(n.stateNode));break;case 18:ft!==null&&(fn?(e=ft,n=n.stateNode,e.nodeType===8?Hu(e.parentNode,n):e.nodeType===1&&Hu(e,n),na(e)):Hu(ft,n.stateNode));break;case 4:r=ft,i=fn,ft=n.stateNode.containerInfo,fn=!0,hr(e,t,n),ft=r,fn=i;break;case 0:case 11:case 14:case 15:if(!St&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&sd(n,t,a),i=i.next}while(i!==r)}hr(e,t,n);break;case 1:if(!St&&(Mi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ge(n,t,o)}hr(e,t,n);break;case 21:hr(e,t,n);break;case 22:n.mode&1?(St=(r=St)||n.memoizedState!==null,hr(e,t,n),St=r):hr(e,t,n);break;default:hr(e,t,n)}}function Wm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new tj),t.forEach(function(r){var i=dj.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function cn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:ft=o.stateNode,fn=!1;break e;case 3:ft=o.stateNode.containerInfo,fn=!0;break e;case 4:ft=o.stateNode.containerInfo,fn=!0;break e}o=o.return}if(ft===null)throw Error($(160));kg(s,a,i),ft=null,fn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){Ge(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Cg(t,e),t=t.sibling}function Cg(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(cn(t,e),jn(e),r&4){try{Bs(3,e,e.return),Yo(3,e)}catch(w){Ge(e,e.return,w)}try{Bs(5,e,e.return)}catch(w){Ge(e,e.return,w)}}break;case 1:cn(t,e),jn(e),r&512&&n!==null&&Mi(n,n.return);break;case 5:if(cn(t,e),jn(e),r&512&&n!==null&&Mi(n,n.return),e.flags&32){var i=e.stateNode;try{Zs(i,"")}catch(w){Ge(e,e.return,w)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,o=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Wy(i,s),Ac(o,a);var c=Ac(o,s);for(a=0;a<u.length;a+=2){var d=u[a],f=u[a+1];d==="style"?Xy(i,f):d==="dangerouslySetInnerHTML"?Gy(i,f):d==="children"?Zs(i,f):Ud(i,d,f,c)}switch(o){case"input":Nc(i,s);break;case"textarea":Hy(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?Li(i,!!s.multiple,v,!1):m!==!!s.multiple&&(s.defaultValue!=null?Li(i,!!s.multiple,s.defaultValue,!0):Li(i,!!s.multiple,s.multiple?[]:"",!1))}i[la]=s}catch(w){Ge(e,e.return,w)}}break;case 6:if(cn(t,e),jn(e),r&4){if(e.stateNode===null)throw Error($(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(w){Ge(e,e.return,w)}}break;case 3:if(cn(t,e),jn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{na(t.containerInfo)}catch(w){Ge(e,e.return,w)}break;case 4:cn(t,e),jn(e);break;case 13:cn(t,e),jn(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(wf=Ze())),r&4&&Wm(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(St=(c=St)||d,cn(t,e),St=c):cn(t,e),jn(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(Z=e,d=e.child;d!==null;){for(f=Z=d;Z!==null;){switch(m=Z,v=m.child,m.tag){case 0:case 11:case 14:case 15:Bs(4,m,m.return);break;case 1:Mi(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(w){Ge(r,n,w)}}break;case 5:Mi(m,m.return);break;case 22:if(m.memoizedState!==null){Qm(f);continue}}v!==null?(v.return=m,Z=v):Qm(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=Ky("display",a))}catch(w){Ge(e,e.return,w)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(w){Ge(e,e.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:cn(t,e),jn(e),r&4&&Wm(e);break;case 21:break;default:cn(t,e),jn(e)}}function jn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(jg(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Zs(i,""),r.flags&=-33);var s=Ym(e);od(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=Ym(e);ld(e,o,a);break;default:throw Error($(161))}}catch(u){Ge(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function rj(e,t,n){Z=e,_g(e)}function _g(e,t,n){for(var r=(e.mode&1)!==0;Z!==null;){var i=Z,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||ll;if(!a){var o=i.alternate,u=o!==null&&o.memoizedState!==null||St;o=ll;var c=St;if(ll=a,(St=u)&&!c)for(Z=i;Z!==null;)a=Z,u=a.child,a.tag===22&&a.memoizedState!==null?Gm(i):u!==null?(u.return=a,Z=u):Gm(i);for(;s!==null;)Z=s,_g(s),s=s.sibling;Z=i,ll=o,St=c}Hm(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Z=s):Hm(e)}}function Hm(e){for(;Z!==null;){var t=Z;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:St||Yo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!St)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:dn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Im(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Im(t,a,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&na(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}St||t.flags&512&&ad(t)}catch(m){Ge(t,t.return,m)}}if(t===e){Z=null;break}if(n=t.sibling,n!==null){n.return=t.return,Z=n;break}Z=t.return}}function Qm(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Z=n;break}Z=t.return}}function Gm(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Yo(4,t)}catch(u){Ge(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Ge(t,i,u)}}var s=t.return;try{ad(t)}catch(u){Ge(t,s,u)}break;case 5:var a=t.return;try{ad(t)}catch(u){Ge(t,a,u)}}}catch(u){Ge(t,t.return,u)}if(t===e){Z=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Z=o;break}Z=t.return}}var ij=Math.ceil,ro=ar.ReactCurrentDispatcher,gf=ar.ReactCurrentOwner,nn=ar.ReactCurrentBatchConfig,xe=0,ct=null,nt=null,mt=0,Vt=0,Fi=Rr(0),at=0,ha=null,ai=0,Wo=0,xf=0,Ys=null,Ft=null,wf=0,ns=1/0,zn=null,io=!1,ud=null,Dr=null,ol=!1,wr=null,so=0,Ws=0,cd=null,Cl=-1,_l=0;function It(){return xe&6?Ze():Cl!==-1?Cl:Cl=Ze()}function Er(e){return e.mode&1?xe&2&&mt!==0?mt&-mt:$S.transition!==null?(_l===0&&(_l=uv()),_l):(e=_e,e!==0||(e=window.event,e=e===void 0?16:yv(e.type)),e):1}function vn(e,t,n,r){if(50<Ws)throw Ws=0,cd=null,Error($(185));ba(e,n,r),(!(xe&2)||e!==ct)&&(e===ct&&(!(xe&2)&&(Wo|=n),at===4&&gr(e,mt)),qt(e,r),n===1&&xe===0&&!(t.mode&1)&&(ns=Ze()+500,Vo&&Lr()))}function qt(e,t){var n=e.callbackNode;$b(e,t);var r=Vl(e,e===ct?mt:0);if(r===0)n!==null&&im(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&im(n),t===1)e.tag===0?US(Km.bind(null,e)):Fv(Km.bind(null,e)),TS(function(){!(xe&6)&&Lr()}),n=null;else{switch(cv(r)){case 1:n=Yd;break;case 4:n=lv;break;case 16:n=$l;break;case 536870912:n=ov;break;default:n=$l}n=Mg(n,Ng.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ng(e,t){if(Cl=-1,_l=0,xe&6)throw Error($(327));var n=e.callbackNode;if(zi()&&e.callbackNode!==n)return null;var r=Vl(e,e===ct?mt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ao(e,r);else{t=r;var i=xe;xe|=2;var s=Eg();(ct!==e||mt!==t)&&(zn=null,ns=Ze()+500,Jr(e,t));do try{lj();break}catch(o){Dg(e,o)}while(1);sf(),ro.current=s,xe=i,nt!==null?t=0:(ct=null,mt=0,t=at)}if(t!==0){if(t===2&&(i=Rc(e),i!==0&&(r=i,t=dd(e,i))),t===1)throw n=ha,Jr(e,0),gr(e,r),qt(e,Ze()),n;if(t===6)gr(e,r);else{if(i=e.current.alternate,!(r&30)&&!sj(i)&&(t=ao(e,r),t===2&&(s=Rc(e),s!==0&&(r=s,t=dd(e,s))),t===1))throw n=ha,Jr(e,0),gr(e,r),qt(e,Ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error($(345));case 2:Yr(e,Ft,zn);break;case 3:if(gr(e,r),(r&130023424)===r&&(t=wf+500-Ze(),10<t)){if(Vl(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){It(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Yc(Yr.bind(null,e,Ft,zn),t);break}Yr(e,Ft,zn);break;case 4:if(gr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-yn(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=Ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ij(r/1960))-r,10<r){e.timeoutHandle=Yc(Yr.bind(null,e,Ft,zn),r);break}Yr(e,Ft,zn);break;case 5:Yr(e,Ft,zn);break;default:throw Error($(329))}}}return qt(e,Ze()),e.callbackNode===n?Ng.bind(null,e):null}function dd(e,t){var n=Ys;return e.current.memoizedState.isDehydrated&&(Jr(e,t).flags|=256),e=ao(e,t),e!==2&&(t=Ft,Ft=n,t!==null&&fd(t)),e}function fd(e){Ft===null?Ft=e:Ft.push.apply(Ft,e)}function sj(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!gn(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gr(e,t){for(t&=~xf,t&=~Wo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-yn(t),r=1<<n;e[n]=-1,t&=~r}}function Km(e){if(xe&6)throw Error($(327));zi();var t=Vl(e,0);if(!(t&1))return qt(e,Ze()),null;var n=ao(e,t);if(e.tag!==0&&n===2){var r=Rc(e);r!==0&&(t=r,n=dd(e,r))}if(n===1)throw n=ha,Jr(e,0),gr(e,t),qt(e,Ze()),n;if(n===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Yr(e,Ft,zn),qt(e,Ze()),null}function bf(e,t){var n=xe;xe|=1;try{return e(t)}finally{xe=n,xe===0&&(ns=Ze()+500,Vo&&Lr())}}function li(e){wr!==null&&wr.tag===0&&!(xe&6)&&zi();var t=xe;xe|=1;var n=nn.transition,r=_e;try{if(nn.transition=null,_e=1,e)return e()}finally{_e=r,nn.transition=n,xe=t,!(xe&6)&&Lr()}}function Sf(){Vt=Fi.current,Me(Fi)}function Jr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,FS(n)),nt!==null)for(n=nt.return;n!==null;){var r=n;switch(tf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hl();break;case 3:es(),Me(Rt),Me(kt),df();break;case 5:cf(r);break;case 4:es();break;case 13:Me(Be);break;case 19:Me(Be);break;case 10:af(r.type._context);break;case 22:case 23:Sf()}n=n.return}if(ct=e,nt=e=Ir(e.current,null),mt=Vt=t,at=0,ha=null,xf=Wo=ai=0,Ft=Ys=null,Qr!==null){for(t=0;t<Qr.length;t++)if(n=Qr[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Qr=null}return e}function Dg(e,t){do{var n=nt;try{if(sf(),Sl.current=no,to){for(var r=Ye.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}to=!1}if(si=0,ut=st=Ye=null,zs=!1,ca=0,gf.current=null,n===null||n.return===null){at=1,ha=t,nt=null;break}e:{var s=e,a=n.return,o=n,u=t;if(t=mt,o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=Rm(a);if(v!==null){v.flags&=-257,Lm(v,a,o,s,t),v.mode&1&&Tm(s,c,t),t=v,u=c;var y=t.updateQueue;if(y===null){var w=new Set;w.add(u),t.updateQueue=w}else y.add(u);break e}else{if(!(t&1)){Tm(s,c,t),jf();break e}u=Error($(426))}}else if(Ve&&o.mode&1){var j=Rm(a);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Lm(j,a,o,s,t),nf(ts(u,o));break e}}s=u=ts(u,o),at!==4&&(at=2),Ys===null?Ys=[s]:Ys.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var g=dg(s,u,t);Em(s,g);break e;case 1:o=u;var h=s.type,p=s.stateNode;if(!(s.flags&128)&&(typeof h.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Dr===null||!Dr.has(p)))){s.flags|=65536,t&=-t,s.lanes|=t;var b=fg(s,o,t);Em(s,b);break e}}s=s.return}while(s!==null)}Pg(n)}catch(S){t=S,nt===n&&n!==null&&(nt=n=n.return);continue}break}while(1)}function Eg(){var e=ro.current;return ro.current=no,e===null?no:e}function jf(){(at===0||at===3||at===2)&&(at=4),ct===null||!(ai&268435455)&&!(Wo&268435455)||gr(ct,mt)}function ao(e,t){var n=xe;xe|=2;var r=Eg();(ct!==e||mt!==t)&&(zn=null,Jr(e,t));do try{aj();break}catch(i){Dg(e,i)}while(1);if(sf(),xe=n,ro.current=r,nt!==null)throw Error($(261));return ct=null,mt=0,at}function aj(){for(;nt!==null;)Ig(nt)}function lj(){for(;nt!==null&&!Ab();)Ig(nt)}function Ig(e){var t=Og(e.alternate,e,Vt);e.memoizedProps=e.pendingProps,t===null?Pg(e):nt=t,gf.current=null}function Pg(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ej(n,t),n!==null){n.flags&=32767,nt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{at=6,nt=null;return}}else if(n=JS(n,t,Vt),n!==null){nt=n;return}if(t=t.sibling,t!==null){nt=t;return}nt=t=e}while(t!==null);at===0&&(at=5)}function Yr(e,t,n){var r=_e,i=nn.transition;try{nn.transition=null,_e=1,oj(e,t,n,r)}finally{nn.transition=i,_e=r}return null}function oj(e,t,n,r){do zi();while(wr!==null);if(xe&6)throw Error($(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Vb(e,s),e===ct&&(nt=ct=null,mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ol||(ol=!0,Mg($l,function(){return zi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=nn.transition,nn.transition=null;var a=_e;_e=1;var o=xe;xe|=4,gf.current=null,nj(e,n),Cg(n,e),DS(zc),zl=!!Vc,zc=Vc=null,e.current=n,rj(n),Ob(),xe=o,_e=a,nn.transition=s}else e.current=n;if(ol&&(ol=!1,wr=e,so=i),s=e.pendingLanes,s===0&&(Dr=null),Tb(n.stateNode),qt(e,Ze()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(io)throw io=!1,e=ud,ud=null,e;return so&1&&e.tag!==0&&zi(),s=e.pendingLanes,s&1?e===cd?Ws++:(Ws=0,cd=e):Ws=0,Lr(),null}function zi(){if(wr!==null){var e=cv(so),t=nn.transition,n=_e;try{if(nn.transition=null,_e=16>e?16:e,wr===null)var r=!1;else{if(e=wr,wr=null,so=0,xe&6)throw Error($(331));var i=xe;for(xe|=4,Z=e.current;Z!==null;){var s=Z,a=s.child;if(Z.flags&16){var o=s.deletions;if(o!==null){for(var u=0;u<o.length;u++){var c=o[u];for(Z=c;Z!==null;){var d=Z;switch(d.tag){case 0:case 11:case 15:Bs(8,d,s)}var f=d.child;if(f!==null)f.return=d,Z=f;else for(;Z!==null;){d=Z;var m=d.sibling,v=d.return;if(Sg(d),d===c){Z=null;break}if(m!==null){m.return=v,Z=m;break}Z=v}}}var y=s.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var j=w.sibling;w.sibling=null,w=j}while(w!==null)}}Z=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Z=a;else e:for(;Z!==null;){if(s=Z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Bs(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Z=g;break e}Z=s.return}}var h=e.current;for(Z=h;Z!==null;){a=Z;var p=a.child;if(a.subtreeFlags&2064&&p!==null)p.return=a,Z=p;else e:for(a=h;Z!==null;){if(o=Z,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Yo(9,o)}}catch(S){Ge(o,o.return,S)}if(o===a){Z=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,Z=b;break e}Z=o.return}}if(xe=i,Lr(),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(Ro,e)}catch{}r=!0}return r}finally{_e=n,nn.transition=t}}return!1}function Xm(e,t,n){t=ts(n,t),t=dg(e,t,1),e=Nr(e,t,1),t=It(),e!==null&&(ba(e,1,t),qt(e,t))}function Ge(e,t,n){if(e.tag===3)Xm(e,e,n);else for(;t!==null;){if(t.tag===3){Xm(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Dr===null||!Dr.has(r))){e=ts(n,e),e=fg(t,e,1),t=Nr(t,e,1),e=It(),t!==null&&(ba(t,1,e),qt(t,e));break}}t=t.return}}function uj(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=It(),e.pingedLanes|=e.suspendedLanes&n,ct===e&&(mt&n)===n&&(at===4||at===3&&(mt&130023424)===mt&&500>Ze()-wf?Jr(e,0):xf|=n),qt(e,t)}function Ag(e,t){t===0&&(e.mode&1?(t=Za,Za<<=1,!(Za&130023424)&&(Za=4194304)):t=1);var n=It();e=tr(e,t),e!==null&&(ba(e,t,n),qt(e,n))}function cj(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ag(e,n)}function dj(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(t),Ag(e,n)}var Og;Og=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Rt.current)Tt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Tt=!1,ZS(e,t,n);Tt=!!(e.flags&131072)}else Tt=!1,Ve&&t.flags&1048576&&Tv(t,Kl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;kl(e,t),e=t.pendingProps;var i=Xi(t,kt.current);Vi(t,n),i=hf(null,t,r,e,i,n);var s=mf();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lt(r)?(s=!0,Ql(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,of(t),i.updater=zo,t.stateNode=i,i._reactInternals=t,Zc(t,r,e,n),t=td(null,t,r,!0,s,n)):(t.tag=0,Ve&&s&&ef(t),Dt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(kl(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=hj(r),e=dn(r,e),i){case 0:t=ed(null,t,r,e,n);break e;case 1:t=$m(null,t,r,e,n);break e;case 11:t=qm(null,t,r,e,n);break e;case 14:t=Um(null,t,r,dn(r.type,e),n);break e}throw Error($(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:dn(r,i),ed(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:dn(r,i),$m(e,t,r,i,n);case 3:e:{if(yg(t),e===null)throw Error($(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Uv(e,t),Jl(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=ts(Error($(423)),t),t=Vm(e,t,r,n,i);break e}else if(r!==i){i=ts(Error($(424)),t),t=Vm(e,t,r,n,i);break e}else for(Bt=_r(t.stateNode.containerInfo.firstChild),Yt=t,Ve=!0,hn=null,n=Bv(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zi(),r===i){t=nr(e,t,n);break e}Dt(e,t,r,n)}t=t.child}return t;case 5:return Yv(t),e===null&&Gc(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,Bc(r,i)?a=null:s!==null&&Bc(r,s)&&(t.flags|=32),pg(e,t),Dt(e,t,a,n),t.child;case 6:return e===null&&Gc(t),null;case 13:return vg(e,t,n);case 4:return uf(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ji(t,null,r,n):Dt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:dn(r,i),qm(e,t,r,i,n);case 7:return Dt(e,t,t.pendingProps,n),t.child;case 8:return Dt(e,t,t.pendingProps.children,n),t.child;case 12:return Dt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Pe(Xl,r._currentValue),r._currentValue=a,s!==null)if(gn(s.value,a)){if(s.children===i.children&&!Rt.current){t=nr(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var u=o.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Kn(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Kc(s.return,n,t),o.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error($(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),Kc(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Dt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Vi(t,n),i=rn(i),r=r(i),t.flags|=1,Dt(e,t,r,n),t.child;case 14:return r=t.type,i=dn(r,t.pendingProps),i=dn(r.type,i),Um(e,t,r,i,n);case 15:return hg(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:dn(r,i),kl(e,t),t.tag=1,Lt(r)?(e=!0,Ql(t)):e=!1,Vi(t,n),Vv(t,r,i),Zc(t,r,i,n),td(null,t,r,!0,e,n);case 19:return gg(e,t,n);case 22:return mg(e,t,n)}throw Error($(156,t.tag))};function Mg(e,t){return av(e,t)}function fj(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(e,t,n,r){return new fj(e,t,n,r)}function kf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hj(e){if(typeof e=="function")return kf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Vd)return 11;if(e===zd)return 14}return 2}function Ir(e,t){var n=e.alternate;return n===null?(n=en(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nl(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")kf(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ci:return ei(n.children,i,s,t);case $d:a=8,i|=8;break;case Sc:return e=en(12,n,t,i|2),e.elementType=Sc,e.lanes=s,e;case jc:return e=en(13,n,t,i),e.elementType=jc,e.lanes=s,e;case kc:return e=en(19,n,t,i),e.elementType=kc,e.lanes=s,e;case zy:return Ho(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $y:a=10;break e;case Vy:a=9;break e;case Vd:a=11;break e;case zd:a=14;break e;case mr:a=16,r=null;break e}throw Error($(130,e==null?e:typeof e,""))}return t=en(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function ei(e,t,n,r){return e=en(7,e,r,t),e.lanes=n,e}function Ho(e,t,n,r){return e=en(22,e,r,t),e.elementType=zy,e.lanes=n,e.stateNode={isHidden:!1},e}function tc(e,t,n){return e=en(6,e,null,t),e.lanes=n,e}function nc(e,t,n){return t=en(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mj(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tu(0),this.expirationTimes=Tu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Cf(e,t,n,r,i,s,a,o,u){return e=new mj(e,t,n,o,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=en(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},of(s),e}function pj(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ki,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Fg(e){if(!e)return Fr;e=e._reactInternals;e:{if(ci(e)!==e||e.tag!==1)throw Error($(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($(171))}if(e.tag===1){var n=e.type;if(Lt(n))return Mv(e,n,t)}return t}function Tg(e,t,n,r,i,s,a,o,u){return e=Cf(n,r,!0,e,i,s,a,o,u),e.context=Fg(null),n=e.current,r=It(),i=Er(n),s=Kn(r,i),s.callback=t??null,Nr(n,s,i),e.current.lanes=i,ba(e,i,r),qt(e,r),e}function Qo(e,t,n,r){var i=t.current,s=It(),a=Er(i);return n=Fg(n),t.context===null?t.context=n:t.pendingContext=n,t=Kn(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Nr(i,t,a),e!==null&&(vn(e,i,a,s),bl(e,i,a)),a}function lo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Zm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function _f(e,t){Zm(e,t),(e=e.alternate)&&Zm(e,t)}function yj(){return null}var Rg=typeof reportError=="function"?reportError:function(e){console.error(e)};function Nf(e){this._internalRoot=e}Go.prototype.render=Nf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($(409));Qo(e,t,null,null)};Go.prototype.unmount=Nf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;li(function(){Qo(null,e,null,null)}),t[er]=null}};function Go(e){this._internalRoot=e}Go.prototype.unstable_scheduleHydration=function(e){if(e){var t=hv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<vr.length&&t!==0&&t<vr[n].priority;n++);vr.splice(n,0,e),n===0&&pv(e)}};function Df(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ko(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Jm(){}function vj(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=lo(a);s.call(c)}}var a=Tg(t,r,e,0,null,!1,!1,"",Jm);return e._reactRootContainer=a,e[er]=a.current,sa(e.nodeType===8?e.parentNode:e),li(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var c=lo(u);o.call(c)}}var u=Cf(e,0,!1,null,null,!1,!1,"",Jm);return e._reactRootContainer=u,e[er]=u.current,sa(e.nodeType===8?e.parentNode:e),li(function(){Qo(t,u,n,r)}),u}function Xo(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var u=lo(a);o.call(u)}}Qo(t,a,e,i)}else a=vj(n,t,e,i,r);return lo(a)}dv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Fs(t.pendingLanes);n!==0&&(Wd(t,n|1),qt(t,Ze()),!(xe&6)&&(ns=Ze()+500,Lr()))}break;case 13:li(function(){var r=tr(e,1);if(r!==null){var i=It();vn(r,e,1,i)}}),_f(e,1)}};Hd=function(e){if(e.tag===13){var t=tr(e,134217728);if(t!==null){var n=It();vn(t,e,134217728,n)}_f(e,134217728)}};fv=function(e){if(e.tag===13){var t=Er(e),n=tr(e,t);if(n!==null){var r=It();vn(n,e,t,r)}_f(e,t)}};hv=function(){return _e};mv=function(e,t){var n=_e;try{return _e=e,t()}finally{_e=n}};Mc=function(e,t,n){switch(t){case"input":if(Nc(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=$o(r);if(!i)throw Error($(90));Yy(r),Nc(r,i)}}}break;case"textarea":Hy(e,n);break;case"select":t=n.value,t!=null&&Li(e,!!n.multiple,t,!1)}};ev=bf;tv=li;var gj={usingClientEntryPoint:!1,Events:[ja,Ei,$o,Zy,Jy,bf]},ks={findFiberByHostInstance:Hr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},xj={bundleType:ks.bundleType,version:ks.version,rendererPackageName:ks.rendererPackageName,rendererConfig:ks.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=iv(e),e===null?null:e.stateNode},findFiberByHostInstance:ks.findFiberByHostInstance||yj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ul.isDisabled&&ul.supportsFiber)try{Ro=ul.inject(xj),En=ul}catch{}}Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gj;Ht.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Df(t))throw Error($(200));return pj(e,t,null,n)};Ht.createRoot=function(e,t){if(!Df(e))throw Error($(299));var n=!1,r="",i=Rg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Cf(e,1,!1,null,null,n,!1,r,i),e[er]=t.current,sa(e.nodeType===8?e.parentNode:e),new Nf(t)};Ht.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=iv(t),e=e===null?null:e.stateNode,e};Ht.flushSync=function(e){return li(e)};Ht.hydrate=function(e,t,n){if(!Ko(t))throw Error($(200));return Xo(null,e,t,!0,n)};Ht.hydrateRoot=function(e,t,n){if(!Df(e))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=Rg;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Tg(t,null,e,1,n??null,i,!1,s,a),e[er]=t.current,sa(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Go(t)};Ht.render=function(e,t,n){if(!Ko(t))throw Error($(200));return Xo(null,e,t,!1,n)};Ht.unmountComponentAtNode=function(e){if(!Ko(e))throw Error($(40));return e._reactRootContainer?(li(function(){Xo(null,null,e,!1,function(){e._reactRootContainer=null,e[er]=null})}),!0):!1};Ht.unstable_batchedUpdates=bf;Ht.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ko(n))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return Xo(e,t,n,!1,r)};Ht.version="18.2.0-next-9e3b772b8-20220608";function Lg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lg)}catch(e){console.error(e)}}Lg(),Ty.exports=Ht;var qg=Ty.exports;const wj=Cy(qg);var ep=qg;wc.createRoot=ep.createRoot,wc.hydrateRoot=ep.hydrateRoot;var Zo={};(function(e){(function(t){t([],function(){var n=-1,r=-2,i=-3,s=-4,a=-5,o=function(y,w){w=w||{};var j=w.verbose||!1;j&&console.log("Normalize the JSON Object"),y=typeof y=="string"?this.JSON.parse(y):y,j&&console.log("Creating a empty dictionary");var g={strings:[],integers:[],floats:[]};j&&console.log("Creating the AST");var h=function k(_){j&&console.log("Calling recursiveAstBuilder with "+this.JSON.stringify(_));var C=typeof _;if(_===null)return{type:"null",index:i};if(typeof _>"u")return{type:"undefined",index:a};if(_ instanceof Array){var N=["@"];for(var D in _)_.hasOwnProperty(D)&&N.push(k(_[D]));return N}if(C==="object"){var N=["$"];for(var E in _)_.hasOwnProperty(E)&&(N.push(k(E)),N.push(k(_[E])));return N}if(_==="")return{type:"empty",index:s};if(C==="string"){var A=v.call(g.strings,_);return A==-1&&(g.strings.push(c(_)),A=g.strings.length-1),{type:"strings",index:A}}if(C==="number"&&_%1===0){var A=v.call(g.integers,_);return A==-1&&(g.integers.push(f(_)),A=g.integers.length-1),{type:"integers",index:A}}if(C==="number"){var A=v.call(g.floats,_);return A==-1&&(g.floats.push(_),A=g.floats.length-1),{type:"floats",index:A}}if(C==="boolean")return{type:"boolean",index:_?n:r};throw new Error("Unexpected argument of type "+typeof _)}(y),p=g.strings.length,b=g.integers.length;g.floats.length,j&&console.log("Parsing the dictionary");var S=g.strings.join("|");return S+="^"+g.integers.join("|"),S+="^"+g.floats.join("|"),j&&console.log("Parsing the structure"),S+="^"+function k(_){if(j&&console.log("Calling a recursiveParser with "+this.JSON.stringify(_)),_ instanceof Array){var C=_.shift();for(var N in _)_.hasOwnProperty(N)&&(C+=k(_[N])+"|");return(C[C.length-1]==="|"?C.slice(0,-1):C)+"]"}var D=_.type,E=_.index;if(D==="strings")return f(E);if(D==="integers")return f(p+E);if(D==="floats")return f(p+b+E);if(D==="boolean")return _.index;if(D==="null")return i;if(D==="undefined")return a;if(D==="empty")return s;throw new TypeError("The item is alien!")}(h),j&&console.log("Ending parser"),w.debug?{dictionary:g,ast:h,packed:S}:S},u=function(y,w){w=w||{};var j=y.split("^");w.verbose&&console.log("Building dictionary");var g=[],h=j[0];if(h!==""){h=h.split("|"),w.verbose&&console.log("Parse the strings dictionary");for(var p=0,b=h.length;p<b;p++)g.push(d(h[p]))}if(h=j[1],h!==""){h=h.split("|"),w.verbose&&console.log("Parse the integers dictionary");for(var p=0,b=h.length;p<b;p++)g.push(m(h[p]))}if(h=j[2],h!==""){h=h.split("|"),w.verbose&&console.log("Parse the floats dictionary");for(var p=0,b=h.length;p<b;p++)g.push(parseFloat(h[p]))}h=null,w.verbose&&console.log("Tokenizing the structure");for(var S="",k=[],_=j[3].length,p=0;p<_;p++){var C=j[3].charAt(p);C==="|"||C==="$"||C==="@"||C==="]"?(S&&(k.push(m(S)),S=""),C!=="|"&&k.push(C)):S+=C}var N=k.length,D=0;return w.verbose&&console.log("Starting recursive parser"),function E(){var A=k[D++];if(w.verbose&&console.log("Reading collection type "+(A==="$"?"object":"Array")),A==="@"){for(var O=[];D<N;D++){var F=k[D];if(w.verbose&&console.log("Read "+F+" symbol"),F==="]")return O;if(F==="@"||F==="$")O.push(E());else switch(F){case n:O.push(!0);break;case r:O.push(!1);break;case i:O.push(null);break;case a:O.push(void 0);break;case s:O.push("");break;default:O.push(g[F])}}return w.verbose&&console.log("Parsed "+this.JSON.stringify(O)),O}if(A==="$"){for(var O={};D<N;D++){var q=k[D];if(q==="]")return O;q===s?q="":q=g[q];var F=k[++D];if(F==="@"||F==="$")O[q]=E();else switch(F){case n:O[q]=!0;break;case r:O[q]=!1;break;case i:O[q]=null;break;case a:O[q]=void 0;break;case s:O[q]="";break;default:O[q]=g[F]}}return w.verbose&&console.log("Parsed "+this.JSON.stringify(O)),O}throw new TypeError("Bad token "+A+" isn't a type")}()},c=function(y){return typeof y!="string"?y:y.replace(/[\+ \|\^\%]/g,function(w){return{" ":"+","+":"%2B","|":"%7C","^":"%5E","%":"%25"}[w]})},d=function(y){return typeof y!="string"?y:y.replace(/\+|%2B|%7C|%5E|%25/g,function(w){return{"+":" ","%2B":"+","%7C":"|","%5E":"^","%25":"%"}[w]})},f=function(y){return Number.prototype.toString.call(y,36).toUpperCase()},m=function(y){return parseInt(y,36)},v=Array.prototype.indexOf||function(y,w){for(var j=w||0,g=this.length;j<g;j++)if(this[j]===y)return j;return-1};return{JSON,pack:o,unpack:u}})})(function(t,n){var r=n();for(var i in r)e[i]=r[i]})})(Zo);let bj=0;function Ae(e,t){const n=`atom${++bj}`,r={toString:()=>n};return typeof e=="function"?r.read=e:(r.init=e,r.read=i=>i(r),r.write=(i,s,a)=>s(r,typeof a=="function"?a(i(r)):a)),t&&(r.write=t),r}const tp=e=>"init"in e,np=e=>!!e.write,oo=new WeakMap,Sj=(e,t)=>{oo.set(e,t),e.catch(()=>{}).finally(()=>oo.delete(e))},rp=(e,t)=>{const n=oo.get(e);n&&(oo.delete(e),n(t))},ip=(e,t)=>{e.status="fulfilled",e.value=t},sp=(e,t)=>{e.status="rejected",e.reason=t},jj=e=>typeof(e==null?void 0:e.then)=="function",cl=(e,t)=>"v"in e&&"v"in t&&Object.is(e.v,t.v),ap=(e,t)=>"e"in e&&"e"in t&&Object.is(e.e,t.e),Cs=e=>"v"in e&&e.v instanceof Promise,kj=(e,t)=>"v"in e&&"v"in t&&e.v.orig&&e.v.orig===t.v.orig,dl=e=>{if("e"in e)throw e.e;return e.v},Cj=()=>{const e=new WeakMap,t=new WeakMap,n=new Map;let r,i;const s=C=>e.get(C),a=(C,N)=>{const D=e.get(C);if(e.set(C,N),n.has(C)||n.set(C,D),D&&Cs(D)){const E="v"in N?N.v instanceof Promise?N.v:Promise.resolve(N.v):Promise.reject(N.e);D.v!==E&&rp(D.v,E)}},o=(C,N,D)=>{const E=new Map;let A=!1;D.forEach((O,F)=>{!O&&F===C&&(O=N),O&&(E.set(F,O),N.d.get(F)!==O&&(A=!0))}),(A||N.d.size!==E.size)&&(N.d=E)},u=(C,N,D)=>{const E=s(C),A={d:(E==null?void 0:E.d)||new Map,v:N};if(D&&o(C,A,D),E&&cl(E,A)&&E.d===A.d)return E;if(E&&Cs(E)&&Cs(A)&&kj(E,A)){if(E.d===A.d)return E;A.v=E.v}return a(C,A),A},c=(C,N,D,E)=>{if(jj(N)){let A;const O=new Promise((F,q)=>{let z=!1;N.then(Y=>{if(!z){z=!0;const M=s(C),L=u(C,O,D);ip(O,Y),F(Y),t.has(C)&&(M==null?void 0:M.d)!==L.d&&S(C,L,M==null?void 0:M.d)}},Y=>{if(!z){z=!0;const M=s(C),L=u(C,O,D);sp(O,Y),q(Y),t.has(C)&&(M==null?void 0:M.d)!==L.d&&S(C,L,M==null?void 0:M.d)}}),A=Y=>{z||(z=!0,Y.then(M=>ip(O,M),M=>sp(O,M)),F(Y))}});return O.orig=N,O.status="pending",Sj(O,F=>{F&&A(F),E==null||E()}),u(C,O,D)}return u(C,N,D)},d=(C,N,D)=>{const E=s(C),A={d:(E==null?void 0:E.d)||new Map,e:N};return D&&o(C,A,D),E&&ap(E,A)&&E.d===A.d?E:(a(C,A),A)},f=(C,N)=>{const D=s(C);if(!N&&D&&(t.has(C)||Array.from(D.d).every(([Y,M])=>Y===C||f(Y)===M)))return D;const E=new Map;let A=!0;const O=Y=>{if(Y===C){const L=s(Y);if(L)return E.set(Y,L),dl(L);if(tp(Y))return E.set(Y,void 0),Y.init;throw new Error("no atom init")}const M=f(Y);return E.set(Y,M),dl(M)};let F,q;const z={get signal(){return F||(F=new AbortController),F.signal},get setSelf(){return!q&&np(C)&&(q=(...Y)=>{if(!A)return h(C,...Y)}),q}};try{const Y=C.read(O,z);return c(C,Y,E,()=>F==null?void 0:F.abort())}catch(Y){return d(C,Y,E)}finally{A=!1}},m=C=>dl(f(C)),v=C=>{let N=t.get(C);return N||(N=p(C)),N},y=(C,N)=>!N.l.size&&(!N.t.size||N.t.size===1&&N.t.has(C)),w=C=>{const N=t.get(C);N&&y(C,N)&&b(C)},j=C=>{const N=new Map,D=new WeakMap,E=F=>{var q;const z=new Set((q=t.get(F))==null?void 0:q.t);return n.forEach((Y,M)=>{var L;(L=s(M))!=null&&L.d.has(F)&&z.add(M)}),z},A=F=>{E(F).forEach(q=>{q!==F&&(N.set(q,(N.get(q)||new Set).add(F)),D.set(q,(D.get(q)||0)+1),A(q))})};A(C);const O=F=>{E(F).forEach(q=>{var z;if(q!==F){let Y=D.get(q);if(Y&&D.set(q,--Y),!Y){let M=!!((z=N.get(q))!=null&&z.size);if(M){const L=s(q),W=f(q,!0);M=!L||!cl(L,W)}M||N.forEach(L=>L.delete(q))}O(q)}})};O(C)},g=(C,...N)=>{let D=!0;const E=F=>dl(f(F)),A=(F,...q)=>{let z;if(F===C){if(!tp(F))throw new Error("atom not writable");const Y=s(F),M=c(F,q[0]);(!Y||!cl(Y,M))&&j(F)}else z=g(F,...q);if(!D){const Y=k()}return z},O=C.write(E,A,...N);return D=!1,O},h=(C,...N)=>{const D=g(C,...N),E=k();return D},p=(C,N,D)=>{var E;const A=D||[];(E=s(C))==null||E.d.forEach((F,q)=>{const z=t.get(q);z?z.t.add(C):q!==C&&p(q,C,A)}),f(C);const O={t:new Set(N&&[N]),l:new Set};if(t.set(C,O),np(C)&&C.onMount){const{onMount:F}=C;A.push(()=>{const q=F((...z)=>h(C,...z));q&&(O.u=q)})}return D||A.forEach(F=>F()),O},b=C=>{var N;const D=(N=t.get(C))==null?void 0:N.u;D&&D(),t.delete(C);const E=s(C);E&&(Cs(E)&&rp(E.v),E.d.forEach((A,O)=>{if(O!==C){const F=t.get(O);F&&(F.t.delete(C),y(O,F)&&b(O))}}))},S=(C,N,D)=>{const E=new Set(N.d.keys());D==null||D.forEach((A,O)=>{if(E.has(O)){E.delete(O);return}const F=t.get(O);F&&(F.t.delete(C),y(O,F)&&b(O))}),E.forEach(A=>{const O=t.get(A);O?O.t.add(C):t.has(C)&&p(A,C)})},k=()=>{let C;for(;n.size;){const N=Array.from(n);n.clear(),N.forEach(([D,E])=>{const A=s(D);if(A){const O=t.get(D);O&&A.d!==(E==null?void 0:E.d)&&S(D,A,E==null?void 0:E.d),O&&!(E&&!Cs(E)&&(cl(E,A)||ap(E,A)))&&O.l.forEach(F=>F())}})}};return{get:m,set:h,sub:(C,N)=>{const D=v(C),E=k(),A=D.l;return A.add(N),()=>{A.delete(N),w(C)}}}};let rc;const Ug=()=>(rc||(rc=Cj()),rc),_j=P.createContext(void 0),$g=e=>{const t=P.useContext(_j);return(e==null?void 0:e.store)||t||Ug()},Nj=e=>typeof(e==null?void 0:e.then)=="function",Dj=re.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)});function we(e,t){const n=$g(t),[[r,i,s],a]=P.useReducer(c=>{const d=n.get(e);return Object.is(c[0],d)&&c[1]===n&&c[2]===e?c:[d,n,e]},void 0,()=>[n.get(e),n,e]);let o=r;(i!==n||s!==e)&&(a(),o=n.get(e));const u=t==null?void 0:t.delay;return P.useEffect(()=>{const c=n.sub(e,()=>{if(typeof u=="number"){setTimeout(a,u);return}a()});return a(),c},[n,e,u]),P.useDebugValue(o),Nj(o)?Dj(o):o}function Ej(e,t){const n=$g(t);return P.useCallback((...i)=>n.set(e,...i),[n,e])}function Ef(e,t){return[we(e,t),Ej(e,t)]}function Ij(e){return new Promise((t,n)=>{setTimeout(()=>t(),e)})}const Jo=function(){let e,t,n=navigator.languages&&navigator.languages[0]||navigator.language;if(!n)e="zh",t="CN";else{let o=n.split("-");e=o[0],o.length>1&&(t=o[1].toUpperCase())}let r=-new Date().getTimezoneOffset()/60;const s=new RegExp("Android|webOS|iPhone|iPad|BlackBerry|Windows Phone|Opera Mini|IEMobile|Mobile","i").test(navigator.userAgent),a=Pj();return{lang:e,district:t,timeZone:r,isMobile:s,browser:a}}();function Pj(){let e=navigator;if(e)return(e.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))>=0?"Opera":e.userAgent.indexOf("Chrome")>=0?"Chrome":e.userAgent.indexOf("Safari")>=0?"Safari":e.userAgent.indexOf("Firefox")>=0?"Firefox":e.userAgent.indexOf("MSIE")>=0||document.documentMode?"IE":"Unknown"}const di="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",lp=di.charCodeAt(0),Aj=di.charCodeAt(9),op=di.charCodeAt(10),Oj=di.charCodeAt(35),up=di.charCodeAt(36),Mj=di.charCodeAt(61);function rr(e){if(e===null)return null;if(e===void 0)return;if(typeof e!="string")return Number.NaN;let t=e.length;if(t===0)return Number.NaN;let n=0;for(let r=0;r<t;r++){let i=e.charCodeAt(r),s;if(i<lp)return Number.NaN;if(i<=Aj)s=i-lp;else{if(i<op)return Number.NaN;if(i<=Oj)s=i-op+10;else{if(i<up)return Number.NaN;if(i<=Mj)s=i-up+36;else return Number.NaN}}n*=62,n+=s}return n}function Pn(e){if(e===null)return null;if(e===void 0)return;if(typeof e!="number"||e<0)return"";let t="";for(;t=di[e%62]+t,e=Math.floor(e/62),e!==0;);return t}function Pt(e){const t=P.useRef(e),n=P.useRef(),r=P.useRef(!1),i=P.useRef(!1),[,s]=P.useState(0);r.current&&(i.current=!0),P.useEffect(()=>(r.current||(n.current=t.current(),r.current=!0),s(1),()=>{i.current!==!1&&n.current&&n.current()}),[])}function cp(e,...t){return e.replace(/{([0-9]+)}/g,function(n,r){let i=Number(n.substring(1,n.length-1));return t[i]??""})}const Vg=Ug();function fe(e){return Vg.get(e)}function le(e,t){Vg.set(e,t)}class Fj{constructor(t,n){x(this,"container");x(this,"errors",Ae([]));x(this,"memos");x(this,"fields");x(this,"readOnly",!1);this.container=t,this.memos=n,this.fields={},t==null||t.bands.push(this)}setError(t,n){if(this.fields[t]===!0){let r=fe(this.errors);return n?(le(this.errors,[...r,...n.map(i=>({name:t,error:i}))]),!0):r.length>0}return!1}clearError(t){this.fields[t]===!0&&le(this.errors,[])}clearAllErrors(){le(this.errors,[])}}const zg=re.createContext(void 0);function Bg(){return P.useContext(zg)}function J(e){let{name:t,className:n,size:r,spin:i,fixWidth:s,border:a,pull:o,pulse:u,rotate:c,flip:d,inverse:f}=e,m="fa";return n&&(m+=" "+n),t&&(m+=" fa-"+t),r&&(m+=" fa-"+r),s&&(m+=" fa-fw"),a&&(m+=" fa-border"),o&&(m+=" fa-pull-"+o),i&&(m+=" fa-spin"),u&&(m+=" fa-pulse"),c&&(m+=" fa-rotate-"+c),d&&(m+=" fa-flip-"+d),f&&(m+=" fa-inverse"),l.jsx("i",{className:m})}function ze(e){let{className:t,children:n,onClick:r}=e,i=t??"";r!==void 0&&(i+=" cursor-pointer ");let s=P.Children.toArray(n),a=s.length;return a>1&&s.splice(a-1,0,l.jsx("div",{className:"flex-fill"})),l.jsx("div",{className:"d-flex "+i,onClick:r,children:s.map((o,u)=>l.jsx(P.Fragment,{children:o},u))})}function as({size:e,className:t}){let n;if(e!==void 0){let i=`${(Number(e??2)+1)*.5}em`;n={width:i,height:i}}let r="spinner-border "+(t??"");return l.jsx("div",{className:r,role:"status",style:n,children:l.jsx("span",{className:"visually-hidden",children:"Loading..."})})}function If(){return l.jsx(as,{className:"text-info spinner-border-sm"})}function Pf({isWaiting:e}){let t={zIndex:30001,background:"rgba(0, 0, 0, 0.3)",left:0,top:0,right:0,bottom:0};return e!==!0?null:l.jsx("div",{className:"d-flex position-absolute align-items-center justify-content-center",style:t,children:l.jsx("i",{className:"fa fa-spinner fa-spin"})})}function fi(e){const[t,n]=P.useState(!1);let{children:r,onClick:i,tag:s,overtime:a}=e,o=P.useRef(!1),u;if(P.useEffect(()=>(o.current=!0,()=>{o.current=!1})),i&&(u=async c=>{a!==void 0&&setTimeout(()=>{n(!1)},a*1e3),n(!0);try{await i(c)}catch(d){throw console.error(d),d}finally{o.current===!0&&n(!1)}}),t===!0){let{className:c}=e;return c=(c??"")+" position-relative",l.jsxs("button",{...e,disabled:!0,className:c,children:[r,l.jsx(Pf,{isWaiting:!0})]})}else return s!==void 0?re.createElement(s,{...e,onClick:u},r):l.jsx("button",{...e,onClick:u,children:r})}function Tj({className:e,isSubmiting:t,children:n,disabled:r}){return l.jsxs("button",{type:"submit",disabled:t||(r??!1),className:(e??"")+" position-relative",children:[n,t&&l.jsx(Pf,{isWaiting:!0})]})}function Af(e){let{onCheckChanged:t,children:n,labelClassName:r,inputClassName:i,gapClassName:s,name:a,defaultChecked:o}=e,[u,c]=P.useState(!1);async function d(m){if(t===void 0||u===!0)return;c(!0);let{name:v,checked:y}=m.currentTarget;await t(v,y),c(!1)}s===void 0&&(s=" me-3 ");let f;return u===!0&&(f=l.jsx(J,{name:"spinner",spin:!0,className:s+" text-info position-absolute mt-1 "})),l.jsxs("label",{className:(r??"")+" d-inline-block position-relative ",children:[f,l.jsx("input",{type:"checkbox",className:(i??" form-check-input ")+s,name:a,disabled:u,defaultChecked:o,onChange:d}),n]})}function Yg(e){let{name:t,items:n,onCheckChanged:r}=e,[i,s]=P.useState(!1);async function a(u){r!==void 0&&(s(!0),await r(u),s(!1))}let o;return i===!0&&(o=l.jsx("div",{className:"position-absolute d-flex align-items-center",style:{left:0,top:0,right:0,bottom:0},children:l.jsx(If,{})})),l.jsxs(l.Fragment,{children:[o,l.jsx(Rj,{name:t,items:n,onCheckChanged:a,disabled:i})]})}function Rj(e){let{name:t,items:n,onCheckChanged:r,disabled:i}=e,s="me-4 ";return i===!0&&(s+="text-light invisible "),l.jsx(l.Fragment,{children:n.map((a,o)=>{let[u,c,d,f]=a;async function m(){await r(u)}return l.jsxs("label",{className:s,children:[l.jsx("input",{className:"form-check-input",onChange:m,disabled:i,type:"radio",name:t,value:d,defaultChecked:f})," ",c]},o)})})}function Pr({className:e,children:t}){return l.jsx("small",{className:"text-muted "+(e??""),children:t})}function ge({sep:e,className:t,children:n}){return e===null?null:(t=t??"",typeof e=="number"?t+=" border-top border-"+e:re.isValidElement(e)===!0&&(n=l.jsxs(l.Fragment,{children:[e,n]})),n||(t+=" border-top border-1"),l.jsx("div",{className:t,children:n}))}function Wg(e){let{className:t,inputClassName:n,onFocus:r,label:i,placeholder:s,buttonText:a,maxLength:o,size:u}=e;const[c,d]=P.useState(!1);let f=P.useRef(null),m=P.useRef(null),v=null;function y(h){v=h.target.value,v!==void 0&&(v=v.trim(),v===""&&(v=void 0)),e.allowEmptySearch===!0||(m.current.disabled=v===void 0||v.length===0)}async function w(h){if(h.preventDefault(),v===null&&(v=e.initKey||""),e.allowEmptySearch!==!0){if(!v)return;f.current&&(f.current.disabled=!0),m.current&&(m.current.disabled=!0)}d(!0),await e.onSearch(v),f.current&&(f.current.disabled=!1),m.current&&(m.current.disabled=!1),d(!1)}let j;switch(u){default:case"sm":j="input-group-sm";break;case"md":j="input-group-md";break;case"lg":j="input-group-lg";break}let g;return Jo.isMobile===!0&&(g="off"),l.jsx("form",{className:t,onSubmit:w,autoComplete:g,children:l.jsxs("div",{className:"input-group "+j,children:[i&&l.jsx("div",{className:"input-group-addon align-self-center me-2",children:i}),l.jsx("input",{ref:f,onChange:y,type:"text",name:"key",onFocus:r,className:"form-control "+(n??"border-primary"),placeholder:s,defaultValue:e.initKey,maxLength:o}),l.jsx("div",{className:"input-group-append",children:l.jsxs("button",{ref:m,className:"btn btn-primary position-relative",type:"submit",disabled:e.allowEmptySearch!==!0,children:[l.jsx("i",{className:"fa fa-search"}),a,l.jsx(Pf,{isWaiting:c})]})})]})})}var je=(e=>(e[e.rule_required=0]="rule_required",e[e.rule_mustBeInteger=1]="rule_mustBeInteger",e[e.rule_mustBeDecimal=2]="rule_mustBeDecimal",e[e.rule_belowMin=3]="rule_belowMin",e[e.rule_overMax=4]="rule_overMax",e[e.placeholder_pick=5]="placeholder_pick",e[e.placeholder_select=6]="placeholder_select",e[e.string_submit=7]="string_submit",e[e.time_yesterday=8]="time_yesterday",e[e.time_today=9]="time_today",e[e.time_tomorrow=10]="time_tomorrow",e))(je||{});const Of={strings:{[je.rule_required]:"Is required",[je.rule_mustBeInteger]:"Must be integer",[je.rule_mustBeDecimal]:"Must be number",[je.rule_belowMin]:"Min is ",[je.rule_overMax]:"Max is ",[je.placeholder_pick]:"Click to pick",[je.placeholder_select]:"Click to select",[je.string_submit]:"Submit",[je.time_yesterday]:"Yday",[je.time_today]:"Today",[je.time_tomorrow]:"Tmw"},funcs:{time_md:(e,t)=>`${e}-${t}`,time_ymd:(e,t,n)=>`${e}-${t}-${n}`}},Lj={strings:{[je.rule_required]:"请填内容",[je.rule_mustBeInteger]:"必须是整数",[je.rule_mustBeDecimal]:"必须是数字",[je.rule_belowMin]:"最小值",[je.rule_overMax]:"最大值",[je.placeholder_pick]:"请点击选择",[je.placeholder_select]:"请点击选择",[je.string_submit]:"提交",[je.time_yesterday]:"昨天",[je.time_today]:"今天",[je.time_tomorrow]:"明天"},funcs:{time_md:(e,t)=>`${e}-${t}`,time_ymd:(e,t,n)=>`${e}-${t}-${n}`}};function Hg(e,t){return P.useCallback(r=>{let i=e(r);return i||((t==null?void 0:t(r))??r)},[e])}function Qg(e){let t=e[Jo.lang];return function(n){return t[n]}}const qj={en:Of,zh:Lj};let ti=Of.strings,Rs=Of.funcs;(function(){let t=qj[Jo.lang];t&&(ti=t.strings,Rs=t.funcs)})();function dp(e){return ti[e]}function Uj(e,t,n=!1){if(!e)return null;let r;switch(typeof e){default:r=e;break;case"string":r=new Date(e);break;case"number":r=new Date(e*1e3);break}let i=new Date,s,a,o,u,c,d,f=r;s=i.getTime()-f.getTime();let m=f.getHours(),v=f.getMinutes();a=i.getDate(),o=f.getDate(),u=f.getMonth()+1,c=f.getFullYear(),d=i.getFullYear();let y=!1,w=function(){return s<-24*3600*1e3?c===d?(y=!0,Rs.time_md(u,o)):(y=!0,Rs.time_ymd(c,u,o)):s<24*3600*1e3?o!==a?(y=!0,dp(s<0?je.time_tomorrow:je.time_yesterday)):t===!0?(y=!0,""):dp(je.time_today):c===d?Rs.time_md(u,o):Rs.time_ymd(c,u,o)}();if(t===!0&&(y===!0||n===!0)){let j=m+((v<10?":0":":")+v);return w+" "+j}return w}function Mf(e){let{date:t,always:n}=e;return l.jsx(l.Fragment,{children:Uj(t,!0,n)})}/**
 * @remix-run/router v1.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ma(){return ma=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ma.apply(this,arguments)}var tn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(tn||(tn={}));const fp="popstate";function $j(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:a,hash:o}=r.location;return hd("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:uo(i)}return zj(t,n,null,e)}function rt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ff(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Vj(){return Math.random().toString(36).substr(2,8)}function hp(e,t){return{usr:e.state,key:e.key,idx:t}}function hd(e,t,n,r){return n===void 0&&(n=null),ma({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ls(t):t,{state:n,key:t&&t.key||r||Vj()})}function uo(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ls(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function zj(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=tn.Pop,u=null,c=d();c==null&&(c=0,a.replaceState(ma({},a.state,{idx:c}),""));function d(){return(a.state||{idx:null}).idx}function f(){o=tn.Pop;let j=d(),g=j==null?null:j-c;c=j,u&&u({action:o,location:w.location,delta:g})}function m(j,g){o=tn.Push;let h=hd(w.location,j,g);n&&n(h,j),c=d()+1;let p=hp(h,c),b=w.createHref(h);try{a.pushState(p,"",b)}catch{i.location.assign(b)}s&&u&&u({action:o,location:w.location,delta:1})}function v(j,g){o=tn.Replace;let h=hd(w.location,j,g);n&&n(h,j),c=d();let p=hp(h,c),b=w.createHref(h);a.replaceState(p,"",b),s&&u&&u({action:o,location:w.location,delta:0})}function y(j){let g=i.location.origin!=="null"?i.location.origin:i.location.href,h=typeof j=="string"?j:uo(j);return rt(g,"No window.location.(origin|href) available to create URL for href: "+h),new URL(h,g)}let w={get action(){return o},get location(){return e(i,a)},listen(j){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(fp,f),u=j,()=>{i.removeEventListener(fp,f),u=null}},createHref(j){return t(i,j)},createURL:y,encodeLocation(j){let g=y(j);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:m,replace:v,go(j){return a.go(j)}};return w}var mp;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(mp||(mp={}));function Bj(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?ls(t):t,i=Tf(r.pathname||"/",n);if(i==null)return null;let s=Gg(e);Yj(s);let a=null;for(let o=0;a==null&&o<s.length;++o)a=e1(s[o],r1(i));return a}function Gg(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,o)=>{let u={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};u.relativePath.startsWith("/")&&(rt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=Ar([r,u.relativePath]),d=n.concat(u);s.children&&s.children.length>0&&(rt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Gg(s.children,t,d,c)),!(s.path==null&&!s.index)&&t.push({path:c,score:Zj(c,s.index),routesMeta:d})};return e.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let u of Kg(s.path))i(s,a,u)}),t}function Kg(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=Kg(r.join("/")),o=[];return o.push(...a.map(u=>u===""?s:[s,u].join("/"))),i&&o.push(...a),o.map(u=>e.startsWith("/")&&u===""?"/":u)}function Yj(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Jj(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Wj=/^:\w+$/,Hj=3,Qj=2,Gj=1,Kj=10,Xj=-2,pp=e=>e==="*";function Zj(e,t){let n=e.split("/"),r=n.length;return n.some(pp)&&(r+=Xj),t&&(r+=Qj),n.filter(i=>!pp(i)).reduce((i,s)=>i+(Wj.test(s)?Hj:s===""?Gj:Kj),r)}function Jj(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function e1(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let a=0;a<n.length;++a){let o=n[a],u=a===n.length-1,c=i==="/"?t:t.slice(i.length)||"/",d=t1({path:o.relativePath,caseSensitive:o.caseSensitive,end:u},c);if(!d)return null;Object.assign(r,d.params);let f=o.route;s.push({params:r,pathname:Ar([i,d.pathname]),pathnameBase:l1(Ar([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=Ar([i,d.pathnameBase]))}return s}function t1(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=n1(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((c,d,f)=>{if(d==="*"){let m=o[f]||"";a=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}return c[d]=i1(o[f]||"",d),c},{}),pathname:s,pathnameBase:a,pattern:e}}function n1(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Ff(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(a,o)=>(r.push(o),"/([^\\/]+)"));return e.endsWith("*")?(r.push("*"),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function r1(e){try{return decodeURI(e)}catch(t){return Ff(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function i1(e,t){try{return decodeURIComponent(e)}catch(n){return Ff(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function Tf(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function s1(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?ls(e):e;return{pathname:n?n.startsWith("/")?n:a1(n,t):t,search:o1(r),hash:u1(i)}}function a1(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function ic(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Xg(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Zg(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=ls(e):(i=ma({},e),rt(!i.pathname||!i.pathname.includes("?"),ic("?","pathname","search",i)),rt(!i.pathname||!i.pathname.includes("#"),ic("#","pathname","hash",i)),rt(!i.search||!i.search.includes("#"),ic("#","search","hash",i)));let s=e===""||i.pathname==="",a=s?"/":i.pathname,o;if(r||a==null)o=n;else{let f=t.length-1;if(a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}o=f>=0?t[f]:"/"}let u=s1(i,o),c=a&&a!=="/"&&a.endsWith("/"),d=(s||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}const Ar=e=>e.join("/").replace(/\/\/+/g,"/"),l1=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),o1=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,u1=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function c1(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Jg=["post","put","patch","delete"];new Set(Jg);const d1=["get",...Jg];new Set(d1);/**
 * React Router v6.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function f1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const h1=typeof Object.is=="function"?Object.is:f1,{useState:m1,useEffect:p1,useLayoutEffect:y1,useDebugValue:v1}=xc;function g1(e,t,n){const r=t(),[{inst:i},s]=m1({inst:{value:r,getSnapshot:t}});return y1(()=>{i.value=r,i.getSnapshot=t,sc(i)&&s({inst:i})},[e,r,t]),p1(()=>(sc(i)&&s({inst:i}),e(()=>{sc(i)&&s({inst:i})})),[e]),v1(r),r}function sc(e){const t=e.getSnapshot,n=e.value;try{const r=t();return!h1(n,r)}catch{return!0}}function x1(e,t,n){return t()}const w1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",b1=!w1,S1=b1?x1:g1;"useSyncExternalStore"in xc&&(e=>e.useSyncExternalStore)(xc);const ex=P.createContext(null),eu=P.createContext(null),os=P.createContext(null),Ca=P.createContext(null),qr=P.createContext({outlet:null,matches:[]}),tx=P.createContext(null);function md(){return md=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},md.apply(this,arguments)}function j1(e,t){let{relative:n}=t===void 0?{}:t;us()||rt(!1);let{basename:r,navigator:i}=P.useContext(os),{hash:s,pathname:a,search:o}=Rf(e,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:Ar([r,a])),i.createHref({pathname:u,search:o,hash:s})}function us(){return P.useContext(Ca)!=null}function Ur(){return us()||rt(!1),P.useContext(Ca).location}function nx(){return P.useContext(Ca).navigationType}function bn(){us()||rt(!1);let{basename:e,navigator:t}=P.useContext(os),{matches:n}=P.useContext(qr),{pathname:r}=Ur(),i=JSON.stringify(Xg(n).map(o=>o.pathnameBase)),s=P.useRef(!1);return P.useEffect(()=>{s.current=!0}),P.useCallback(function(o,u){if(u===void 0&&(u={}),!s.current)return;if(typeof o=="number"){t.go(o);return}let c=Zg(o,JSON.parse(i),r,u.relative==="path");e!=="/"&&(c.pathname=c.pathname==="/"?e:Ar([e,c.pathname])),(u.replace?t.replace:t.push)(c,u.state,u)},[e,t,i,r])}const k1=P.createContext(null);function C1(e){let t=P.useContext(qr).outlet;return t&&P.createElement(k1.Provider,{value:e},t)}function Mn(){let{matches:e}=P.useContext(qr),t=e[e.length-1];return t?t.params:{}}function Rf(e,t){let{relative:n}=t===void 0?{}:t,{matches:r}=P.useContext(qr),{pathname:i}=Ur(),s=JSON.stringify(Xg(r).map(a=>a.pathnameBase));return P.useMemo(()=>Zg(e,JSON.parse(s),i,n==="path"),[e,s,i,n])}function _1(e,t){us()||rt(!1);let{navigator:n}=P.useContext(os),r=P.useContext(eu),{matches:i}=P.useContext(qr),s=i[i.length-1],a=s?s.params:{};s&&s.pathname;let o=s?s.pathnameBase:"/";s&&s.route;let u=Ur(),c;if(t){var d;let w=typeof t=="string"?ls(t):t;o==="/"||(d=w.pathname)!=null&&d.startsWith(o)||rt(!1),c=w}else c=u;let f=c.pathname||"/",m=o==="/"?f:f.slice(o.length)||"/",v=Bj(e,{pathname:m}),y=I1(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Ar([o,n.encodeLocation?n.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?o:Ar([o,n.encodeLocation?n.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r||void 0);return t&&y?P.createElement(Ca.Provider,{value:{location:md({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:tn.Pop}},y):y}function N1(){let e=M1(),t=c1(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),n?P.createElement("pre",{style:i},n):null,s)}class D1 extends P.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location?{error:t.error,location:t.location}:{error:t.error||n.error,location:n.location}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?P.createElement(qr.Provider,{value:this.props.routeContext},P.createElement(tx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function E1(e){let{routeContext:t,match:n,children:r}=e,i=P.useContext(ex);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(qr.Provider,{value:t},r)}function I1(e,t,n){if(t===void 0&&(t=[]),e==null)if(n!=null&&n.errors)e=n.matches;else return null;let r=e,i=n==null?void 0:n.errors;if(i!=null){let s=r.findIndex(a=>a.route.id&&(i==null?void 0:i[a.route.id]));s>=0||rt(!1),r=r.slice(0,Math.min(r.length,s+1))}return r.reduceRight((s,a,o)=>{let u=a.route.id?i==null?void 0:i[a.route.id]:null,c=null;n&&(a.route.ErrorBoundary?c=P.createElement(a.route.ErrorBoundary,null):a.route.errorElement?c=a.route.errorElement:c=P.createElement(N1,null));let d=t.concat(r.slice(0,o+1)),f=()=>{let m=s;return u?m=c:a.route.Component?m=P.createElement(a.route.Component,null):a.route.element&&(m=a.route.element),P.createElement(E1,{match:a,routeContext:{outlet:s,matches:d},children:m})};return n&&(a.route.ErrorBoundary||a.route.errorElement||o===0)?P.createElement(D1,{location:n.location,component:c,error:u,children:f(),routeContext:{outlet:null,matches:d}}):f()},null)}var yp;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"})(yp||(yp={}));var co;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(co||(co={}));function P1(e){let t=P.useContext(eu);return t||rt(!1),t}function A1(e){let t=P.useContext(qr);return t||rt(!1),t}function O1(e){let t=A1(),n=t.matches[t.matches.length-1];return n.route.id||rt(!1),n.route.id}function M1(){var e;let t=P.useContext(tx),n=P1(co.UseRouteError),r=O1(co.UseRouteError);return t||((e=n.errors)==null?void 0:e[r])}function F1(e){let{to:t,replace:n,state:r,relative:i}=e;us()||rt(!1);let s=P.useContext(eu),a=bn();return P.useEffect(()=>{s&&s.navigation.state!=="idle"||a(t,{replace:n,state:r,relative:i})}),null}function rx(e){return C1(e.context)}function ae(e){rt(!1)}function T1(e){let{basename:t="/",children:n=null,location:r,navigationType:i=tn.Pop,navigator:s,static:a=!1}=e;us()&&rt(!1);let o=t.replace(/^\/*/,"/"),u=P.useMemo(()=>({basename:o,navigator:s,static:a}),[o,s,a]);typeof r=="string"&&(r=ls(r));let{pathname:c="/",search:d="",hash:f="",state:m=null,key:v="default"}=r,y=P.useMemo(()=>{let w=Tf(c,o);return w==null?null:{location:{pathname:w,search:d,hash:f,state:m,key:v},navigationType:i}},[o,c,d,f,m,v,i]);return y==null?null:P.createElement(os.Provider,{value:u},P.createElement(Ca.Provider,{children:n,value:y}))}function Lf(e){let{children:t,location:n}=e,r=P.useContext(ex),i=r&&!t?r.router.routes:pd(t);return _1(i,n)}var vp;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(vp||(vp={}));new Promise(()=>{});function pd(e,t){t===void 0&&(t=[]);let n=[];return P.Children.forEach(e,(r,i)=>{if(!P.isValidElement(r))return;if(r.type===P.Fragment){n.push.apply(n,pd(r.props.children,t));return}r.type!==ae&&rt(!1),!r.props.index||!r.props.children||rt(!1);let s=[...t,i],a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=pd(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fo(){return fo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fo.apply(this,arguments)}function ix(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function R1(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function L1(e,t){return e.button===0&&(!t||t==="_self")&&!R1(e)}const q1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],U1=["aria-current","caseSensitive","className","end","style","to","children"];function $1(e){let{basename:t,children:n,window:r}=e,i=P.useRef();i.current==null&&(i.current=$j({window:r,v5Compat:!0}));let s=i.current,[a,o]=P.useState({action:s.action,location:s.location});return P.useLayoutEffect(()=>s.listen(o),[s]),P.createElement(T1,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:s})}const V1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",z1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ce=P.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:u,to:c,preventScrollReset:d}=t,f=ix(t,q1),{basename:m}=P.useContext(os),v,y=!1;if(typeof c=="string"&&z1.test(c)&&(v=c,V1)){let h=new URL(window.location.href),p=c.startsWith("//")?new URL(h.protocol+c):new URL(c),b=Tf(p.pathname,m);p.origin===h.origin&&b!=null?c=b+p.search+p.hash:y=!0}let w=j1(c,{relative:i}),j=Y1(c,{replace:a,state:o,target:u,preventScrollReset:d,relative:i});function g(h){r&&r(h),h.defaultPrevented||j(h)}return P.createElement("a",fo({},f,{href:v||w,onClick:y||s?r:g,ref:n,target:u}))}),B1=P.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:a=!1,style:o,to:u,children:c}=t,d=ix(t,U1),f=Rf(u,{relative:d.relative}),m=Ur(),v=P.useContext(eu),{navigator:y}=P.useContext(os),w=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,j=m.pathname,g=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(j=j.toLowerCase(),g=g?g.toLowerCase():null,w=w.toLowerCase());let h=j===w||!a&&j.startsWith(w)&&j.charAt(w.length)==="/",p=g!=null&&(g===w||!a&&g.startsWith(w)&&g.charAt(w.length)==="/"),b=h?r:void 0,S;typeof s=="function"?S=s({isActive:h,isPending:p}):S=[s,h?"active":null,p?"pending":null].filter(Boolean).join(" ");let k=typeof o=="function"?o({isActive:h,isPending:p}):o;return P.createElement(Ce,fo({},d,{"aria-current":b,className:S,ref:n,style:k,to:u}),typeof c=="function"?c({isActive:h,isPending:p}):c)});var gp;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(gp||(gp={}));var xp;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(xp||(xp={}));function Y1(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a}=t===void 0?{}:t,o=bn(),u=Ur(),c=Rf(e,{relative:a});return P.useCallback(d=>{if(L1(d,n)){d.preventDefault();let f=r!==void 0?r:uo(u)===uo(c);o(e,{replace:f,state:i,preventScrollReset:s,relative:a})}},[u,o,c,r,i,n,e,s,a])}class PT extends re.Component{constructor(n){super(n);x(this,"menu");x(this,"button");x(this,"handleDocumentClick",n=>{document.removeEventListener("click",this.handleDocumentClick),document.removeEventListener("touchstart",this.handleDocumentClick),this.state.dropdownOpen!==!1&&this.menu&&this.toggle()});x(this,"toggle",()=>{let{dropdownOpen:n}=this.state;n=!n,this.setState({dropdownOpen:n}),n===!0&&setTimeout(()=>{document.addEventListener("click",this.handleDocumentClick),document.addEventListener("touchstart",this.handleDocumentClick)},10)});this.state={dropdownOpen:!1}}render(){let{icon:n,content:r,actions:i,isRight:s,className:a,containerClass:o,itemIconClass:u,itemCaptionClass:c}=this.props;o=o??"",s===void 0&&(s=!0);let d=i.some(y=>y?y.icon!==void 0:!1),{dropdownOpen:f}=this.state,m=a??"cursor-pointer dropdown-toggle btn btn-sm",v="dropdown-menu";return s===!0&&(v+=" dropend dropdown-menu-end"),f===!0&&(v+=" show"),l.jsxs("div",{className:"btn-group "+o,children:[l.jsxs("button",{ref:y=>this.button=y,className:m,"data-toggle":"dropdown","aria-expanded":f,onClick:this.toggle,children:[n!==null&&l.jsx("i",{className:"fa fa-fw fa-"+(n??"ellipsis-v")}),r&&l.jsx("span",{className:"ms-1",children:r})]}),l.jsx("div",{ref:y=>this.menu=y,className:v,children:i.map((y,w)=>{if(!y)return l.jsx("div",{className:"dropdown-divider"},w);let{icon:j,caption:g,action:h,iconClass:p,captionClass:b}=y;if(j===void 0&&g===void 0)return l.jsx("div",{className:"dropdown-divider"});let S;if(d===!0&&(j!==void 0&&(j="fa-"+j),p||(p="text-info"),S=l.jsx("i",{className:"me-2  fa-fw fa "+j+" "+p,"aria-hidden":!0})),h===void 0)return l.jsxs("h6",{className:"dropdown-header",children:[S," ",g]});let k=l.jsxs(l.Fragment,{children:[S," ",l.jsx("span",{className:b||c,children:g})]});if(typeof h=="function"){let _=N=>{N.preventDefault(),h(y)},C=N=>{h(y)};return l.jsx("a",{className:"dropdown-item",href:"#/",onClick:_,onTouchStart:C,children:k},w)}else{let _=h;return l.jsx(Ce,{className:"dropdown-item",to:_,children:k},w)}})})]})}}const W1=3,H1=" py-1 tonwa-bg-gray-1 fw-bold col-form-label border-end",Q1=" ";function G1({children:e}){return l.jsx(l.Fragment,{children:e})}function K1({children:e}){return l.jsx(l.Fragment,{children:e})}function X1({children:e}){return l.jsx(l.Fragment,{children:e})}function pa({className:e,labelSize:t,labelAlign:n,labelClassName:r,LabelContainer:i,midClassName:s,MidContainer:a,RightContainer:o,vAlign:u,to:c,children:d}){t=t??W1;let f;i?f="":f=`justify-content-sm-${n??"end"}`,r=r??H1,s=s??Q1;let m="align-items-"+(u??"center"),v=re.Children.toArray(d),y=v.length;if(y<2)return l.jsx("div",{className:"text-danger",children:"children count must > 2"});i=i??G1,a=a??K1,o=o??X1;let w,j;y>2?(j=l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex-fill"}),l.jsx(o,{children:v[y-1]})]}),w=y-1):w=2;let g=v.slice(1,w),h="row mx-0 "+(e??"bg-white"),p=l.jsxs("div",{className:h,children:[l.jsx("div",{className:`col-sm-${t} d-flex ${m} ${f} ${r}`,children:l.jsx(i,{children:v[0]})}),l.jsxs("div",{className:`col-sm-${12-t} gx-0 d-flex ${m} ${s}`,children:[l.jsx(a,{children:g.map((b,S)=>l.jsx(re.Fragment,{children:b},S))}),j]})]});return c?l.jsx(Ce,{to:c,children:p}):p}const Z1="form-control",J1="form-check-input",ek="form-select",tk="form-control",nk="form-range";class sx{constructor(t){x(this,"valueAtoms");x(this,"defaultStringClassName",Z1);x(this,"defaultCheckClassName",J1);x(this,"defaultSelectClassName",ek);x(this,"defaultPickClassName",tk);x(this,"defaultRangeClassName",nk);x(this,"defaultNone","-");x(this,"fields");x(this,"fieldStates");x(this,"bands");x(this,"BandTemplate");x(this,"props");x(this,"readOnly");x(this,"onValuesChanged",async t=>{var n,r;for(let i in t){let s=t[i],a=this.getValue(i);s!==a&&(await((r=(n=this.props).onValuesChanged)==null?void 0:r.call(n,{name:i,value:s,preValue:a},this)),this.setValue(i,s))}});let{values:n,BandTemplate:r,readOnly:i}=t;if(this.bands=[],this.BandTemplate=r,this.props=t,this.readOnly=i,this.valueAtoms={},n)for(let a in n)this.valueAtoms[a]=Ae(n[a]);this.fields={},this.fieldStates={};let s=a=>{re.Children.forEach(a,o=>{if(!o||re.isValidElement(o)===!1)return;let u=o,{props:c}=u;if(c){let{name:d}=c;d&&(this.fieldStates[d]=Ae({readOnly:!1,disabled:!1})),s(c.children)}})};s(t.children)}getValue(t){let n=this.valueAtoms[t];if(n)return fe(n)}getAtom(t){return this.valueAtoms[t]}setValue(t,n){let r=this.valueAtoms[t];r?le(r,n):this.valueAtoms[t]=Ae(n);let i={};i[t]=n,this.onValuesChanged(i)}getValues(){let t={};for(let n in this.valueAtoms)t[n]=fe(this.valueAtoms[n]);return t}setError(t,n){let r=!1;for(let i of this.bands)i.setError(t,n)!==!1&&(r=!0);return r}clearError(t){for(let n of this.bands)n.clearError(t)}clearAllErrors(){for(let t of this.bands)t.clearAllErrors()}setReadonly(t,n){let r=this.fieldStates[t],i=fe(r);i&&le(r,{...i,readOnly:n})}setDisabled(t,n){let r=this.fieldStates[t],i=fe(r);i&&le(r,{...i,disabled:n})}}const qf=re.createContext(void 0);function cs(){return P.useContext(qf)}var yd=(e=>(e[e.check=0]="check",e[e.com=1]="com",e))(yd||{});function ax({error:e}){return l.jsxs("div",{className:"px-2 py-1 small",children:[l.jsx(J,{name:"exclamation-circle",className:"me-2 text-danger"}),l.jsx("span",{className:"text-info",children:e})]})}function tu({errors:e}){if(!e||e.length===0)return null;let t=[];for(let n of e){let{error:r}=n;t.findIndex(s=>s===r)<0&&t.push(r)}return l.jsx(l.Fragment,{children:t.map((n,r)=>l.jsx(ax,{error:n},r))})}function rk({memo:e}){return typeof e=="string"?l.jsxs("div",{className:"px-2 py-1 small text-muted",children:[l.jsx(J,{name:"caret-right",className:"me-2"}),e]}):e}function nu({memos:e}){return e?l.jsx(l.Fragment,{children:e.map((t,n)=>l.jsx(rk,{memo:t},n))}):null}function ik(e){let t=[];function n(r){re.Children.forEach(r,i=>{if(!i||re.isValidElement(i)===!1)return;let s=i,{props:a}=s;if(a){let{memo:o}=a;o&&typeof o=="string"&&t.push(o),n(a.children)}})}if(n(e),t.length!==0)return t}function sk(e){let t=!0;function n(r){let i=[];return re.Children.forEach(r,s=>{if(s.type===re.Fragment)debugger;if(re.isValidElement(s)===!1){i.push(s);return}let a=s,{props:o}=a;if(o){let{key:u}=a,{name:c,options:d}=o;if(o.readOnly!==!0&&(t=!1),c){i.push(l.jsx(ak,{name:c,options:d},u));return}}r!==s&&i.push(re.createElement(a.type,o,...n(a)))}),i}return[n(e),t]}function ak({name:e,options:t}){let n=cs(),{defaultNone:r}=n,i=we(n.getAtom(e));if(t&&i){let s=t.find(a=>a.value===i);s&&(i=s.label)}return l.jsx("div",{className:"py-2",children:i??r})}function pt(e){let{label:t,labelSize:n,children:r,BandTemplate:i,sep:s,contentType:a,pageEdit:o,toEdit:u,rightIcon:c,contentContainerClassName:d}=e,f=r,m=cs();n=m.props.labelSize;let v=ik(r),{current:y}=P.useRef(new Fj(m,v)),w=we(y.errors);if(!m)return l.jsxs("div",{children:["Error: ","<Band /> can only be in <Form />"]});switch(i=i??m.BandTemplate,a){case 1:break;default:if(m.isDetail===!0)switch(a){case 0:r=l.jsx("div",{className:"py-2",children:r});break;default:let[j,g]=sk(r);r=l.jsx(l.Fragment,{children:j}),(g===!0||m.readOnly===!0)&&(y.readOnly=!0);break}break}return l.jsx(zg.Provider,{value:y,children:l.jsx(i,{label:t,labelSize:n,errors:w,memos:y.memos,content:f,sep:s,contentType:a,pageEdit:o,rightIcon:c,toEdit:u,contentContainerClassName:d,children:r})})}function vd(e){return l.jsx(pt,{...e,contentType:1,children:e.children})}class lk extends sx{constructor(){super(...arguments);x(this,"errorResponse",Ae({hasError:!1,errors:void 0}))}get isDetail(){return!1}setError(n,r){if(!r)return;let i,s;return Array.isArray(r)===!1&&(r=[r]),n?s=super.setError(n,r):r&&r.length>0&&(i=[...r],s=!0),le(this.errorResponse,{hasError:s,errors:i}),s}clearError(n){super.clearError(n),le(this.errorResponse,{hasError:!1,errors:void 0})}clearAllErrors(){super.clearAllErrors(),le(this.errorResponse,{hasError:!1,errors:void 0})}clearValues(){for(let n in this.valueAtoms)this.setValue(n,void 0);for(let n in this.fields)this.fields[n].reset();this.clearAllErrors()}}const lx=re.createContext(void 0);function ox(){return P.useContext(lx)}function ok(e){let{label:t,labelSize:n,children:r,errors:i,memos:s,contentContainerClassName:a}=e;n=n??2;let o,u=`col-sm-${12-n} ${a??""}`;return t?o=l.jsx("label",{className:`col-sm-${n} col-form-label text-sm-end`,children:l.jsx("b",{children:t})}):u+=" offset-sm-2",l.jsxs("div",{className:"mb-3 row bg-white",children:[o,l.jsxs("div",{className:u,children:[r,l.jsx(tu,{errors:i}),l.jsx(nu,{memos:s})]})]})}function hi(e){let{className:t,children:n,BandTemplate:r}=e;r=r??ok;let{current:i}=P.useRef(new lk({...e,BandTemplate:r}));function s(a){a.preventDefault()}return l.jsx(lx.Provider,{value:i,children:l.jsx(qf.Provider,{value:i,children:l.jsx("form",{className:t,onSubmit:s,children:n})})})}function ux(){let e=ox(),{errors:t}=we(e.errorResponse);return t?l.jsx(l.Fragment,{children:t.map((n,r)=>l.jsx(ax,{error:n},r))}):null}function cx(e,t){if(!t)return;let n=[];function r(i){let s=i(e);s&&(Array.isArray(s)===!0?n.push(...s):n.push(s))}if(Array.isArray(t)===!0)for(let i of t)r(i);else r(t);if(n.length>0)return n}function gd(e){if(!e.trim())return ti[je.rule_required]}class uk{constructor(t,n,r){x(this,"name");x(this,"input");x(this,"initValue");this.name=t,this.input=n,this.initValue=r}reset(){this.input&&(this.input.value=this.initValue??"")}}function Uf(e){var i;let t=cs(),{name:n}=e,r=(i=t==null?void 0:t.props.values)==null?void 0:i[n];return l.jsx(ck,{...e,initValue:r})}function ck({name:e,className:t,readOnly:n,placeholder:r,maxLength:i,rule:s,isValidKey:a,initValue:o,type:u,disabled:c}){let d=P.useRef(),[f,m]=P.useState(!1),v=Bg(),y=cs(),{props:w,fields:j,fieldStates:g}=y,h=we(g[e]);n=n??(h==null?void 0:h.readOnly)??w.readOnly??!1,P.useEffect(()=>{var E;if(!v)return;let{fields:C}=v;C[e]=!0;let{props:N,fieldStates:D}=y;j[e]=new uk(e,d.current,(E=N.values)==null?void 0:E[e]),Object.assign(D[e],{readOnly:n,disabled:c})},[v,y,e,j,c,n]);let p=t??w.stringClassName??y.defaultStringClassName??"";if(f===!0&&(p+=" is-invalid"),n===!0)return l.jsx("div",{className:p+" bg-light text-muted",children:o??y.defaultNone});let b=()=>{y.clearError(e),m(!1)},S=()=>{let C=cx(d.current.value,s);y.setError(e,C),m(C!==void 0)},k=C=>{y.setValue(e,C.currentTarget.value)},_=C=>{if(!a)return!0;if(a(C.data)===!1)return C.preventDefault(),!1};return l.jsx("input",{ref:d,name:e,type:u??"text",className:p,disabled:h==null?void 0:h.disabled,readOnly:n,onFocus:b,onBlur:S,onBeforeInput:_,onChange:k,placeholder:r,maxLength:i,defaultValue:o})}function dk(e){let{placeholder:t,maxLength:n}=e;return l.jsx(Uf,{placeholder:t,maxLength:n,...e})}function _a(e){return l.jsx(pt,{...e,children:l.jsx(dk,{...e})})}function fk(e){let{placeholder:t,maxLength:n}=e;return l.jsx(Uf,{placeholder:t,maxLength:n,...e,type:"password"})}function Bi(e){return l.jsx(pt,{...e,children:l.jsx(fk,{...e})})}function hk(e,...t){let n=[...t];return e&&n.push(...Array.isArray(e)===!0?e:[e]),n}function mk(e,t){if(e=e.trim(),e.length===0)return;let n=Number.parseFloat(e);if(isNaN(n)===!0||e.indexOf("+")>0||e.indexOf("-")>0)return!1;let r=String(n),i=t.length;for(let s=0;s<i;s++){let a=t[s];if(r.indexOf(a)>=0)return!1}return!0}function pk(e,t){if(t==null)return!1;let n=Number.parseFloat(e);return isNaN(n)===!0?!1:n<t}function yk(e,t){if(t==null)return!1;let n=Number.parseFloat(e);return isNaN(n)===!0?!1:n>t}const dx="01234567890-+",vk=dx+".";function fx(e){let{placeholder:t,maxLength:n,rule:r,min:i,max:s,chars:a,excludeChars:o}=e;function u(m){return a.indexOf(m)>=0}function c(m){if(mk(m,o)===!1)return ti[je.rule_mustBeDecimal]}function d(m){if(pk(m,i)===!0)return ti[je.rule_belowMin]+i}function f(m){if(yk(m,s)===!0)return ti[je.rule_overMax]+s}return l.jsx(Uf,{placeholder:t,maxLength:n,isValidKey:u,rule:hk(r,c,d,f),...e})}function gk(e){return l.jsx(fx,{...e,chars:vk,excludeChars:"e"})}function xk(e){return l.jsx(pt,{...e,children:l.jsx(gk,{...e})})}function wk(e){return l.jsx(fx,{...e,chars:dx,excludeChars:".e"})}function bk(e){return l.jsx(pt,{...e,children:l.jsx(wk,{...e})})}class Sk{constructor(t,n){x(this,"name");this.name=t}reset(){}}function mi({name:e,className:t,children:n,onSubmit:r,disabled:i}){let s=ox(),[a,o]=Ef(s.errorResponse),u=cs(),{fields:c,fieldStates:d}=u,{current:f}=P.useRef(Ae({readOnly:!1,disabled:i})),m=we(e?d[e]:f);t=t??"btn btn-primary",n=n??l.jsxs(l.Fragment,{children:[l.jsx(J,{name:"share-square-o"})," ",ti[je.string_submit]]}),P.useEffect(()=>{e&&(c[e]=new Sk(e,i),Object.assign(d[e],{readOnly:void 0,disabled:i}))},[c,d,e,i]);async function v(y){y.preventDefault();let{props:w}=s,{rule:j}=w,g=s.getValues(),h=[];for(let p in g)cx(g[p],j);if(h.length>0)o({errors:h,hasError:!0});else{let p=await r(s.getValues());if(p)switch(typeof p){default:if(Array.isArray(p)===!0)for(let b of p)if(!b)s.clearAllErrors();else if(Array.isArray(b)===!0){let[S,k]=b;s.setError(S,k)}else s.setError(void 0,p);break;case"string":s.setError(void 0,p);break}else s.clearAllErrors()}}return l.jsx(fi,{onClick:v,disabled:(m.disabled??!1)||a.hasError,className:t,children:n})}function Fe(e){let[t,n]=P.useState(!1),{items:r,className:i,itemKey:s,ViewItem:a,onItemClick:o,onItemSelect:u,sep:c,none:d,loading:f}=e;if(i=i??"",P.useEffect(()=>{setTimeout(()=>{n(!0)},200)},[]),r===null)return null;if(r===void 0)return t===!1?null:f||l.jsx("div",{className:"mx-3 my-2",children:l.jsx(If,{})});let m=r.length;if(m===0)return d===void 0&&(d=l.jsx("div",{className:"mx-3 my-2 text-muted",children:"-"})),d;a=a??jk;let v;function y(g,h){u(g,h.currentTarget.checked)}let w;o&&(w=async g=>{await o(g)}),u?w?v=(g,h,p)=>l.jsxs("div",{className:"d-flex",children:[l.jsx("label",{className:"ps-3 pe-2 align-self-stretch d-flex align-items-center",children:l.jsx("input",{type:"checkbox",className:"form-check-input",onChange:b=>y(g,b)})}),l.jsx("div",{className:"flex-grow-1 cursor-pointer",onClick:()=>w(g),children:l.jsx(a,{value:g,index:h})})]}):v=(g,h,p)=>l.jsxs("div",{className:"form-check mx-3",children:[l.jsx("input",{type:"checkbox",className:" mt-2 form-check-input",id:p,onChange:b=>y(g,b)}),l.jsx("label",{className:"form-check-label",htmlFor:p,children:l.jsx(a,{value:g,index:h})})]}):(w&&(i+=" tonwa-list-item"),v=(g,h)=>{let p,b;return w&&(p=()=>w(g),b="tonwa-list-item cursor-pointer"),l.jsx("div",{onClick:p,className:b,children:l.jsx(a,{value:g,index:h})})}),c=l.jsx(ge,{sep:c});let j;switch(typeof s){default:j=(g,h)=>h;break;case"string":j=g=>g[s];break;case"function":j=s;break}return l.jsxs(l.Fragment,{children:[l.jsx("ul",{className:"m-0 p-0 "+i,children:r.map((g,h)=>{let p=j(g,h);return l.jsxs(re.Fragment,{children:[v(g,h,p),h<m-1&&c]},p)})}),c]})}function jk(e){let{value:t}=e,n="px-3 py-2";return l.jsx("div",{className:n,children:JSON.stringify(t)})}function xd(e,t){return xd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},xd(e,t)}function Na(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,xd(e,t)}var Da=function(){function e(){this.listeners=[]}var t=e.prototype;return t.subscribe=function(r){var i=this,s=r||function(){};return this.listeners.push(s),this.onSubscribe(),function(){i.listeners=i.listeners.filter(function(a){return a!==s}),i.onUnsubscribe()}},t.hasListeners=function(){return this.listeners.length>0},t.onSubscribe=function(){},t.onUnsubscribe=function(){},e}();function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ke.apply(this,arguments)}var ho=typeof window>"u";function bt(){}function kk(e,t){return typeof e=="function"?e(t):e}function wd(e){return typeof e=="number"&&e>=0&&e!==1/0}function mo(e){return Array.isArray(e)?e:[e]}function hx(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Dl(e,t,n){return ru(e)?typeof t=="function"?ke({},n,{queryKey:e,queryFn:t}):ke({},t,{queryKey:e}):e}function yr(e,t,n){return ru(e)?[ke({},t,{queryKey:e}),n]:[e||{},t]}function Ck(e,t){if(e===!0&&t===!0||e==null&&t==null)return"all";if(e===!1&&t===!1)return"none";var n=e??!t;return n?"active":"inactive"}function wp(e,t){var n=e.active,r=e.exact,i=e.fetching,s=e.inactive,a=e.predicate,o=e.queryKey,u=e.stale;if(ru(o)){if(r){if(t.queryHash!==$f(o,t.options))return!1}else if(!po(t.queryKey,o))return!1}var c=Ck(n,s);if(c==="none")return!1;if(c!=="all"){var d=t.isActive();if(c==="active"&&!d||c==="inactive"&&d)return!1}return!(typeof u=="boolean"&&t.isStale()!==u||typeof i=="boolean"&&t.isFetching()!==i||a&&!a(t))}function bp(e,t){var n=e.exact,r=e.fetching,i=e.predicate,s=e.mutationKey;if(ru(s)){if(!t.options.mutationKey)return!1;if(n){if(Kr(t.options.mutationKey)!==Kr(s))return!1}else if(!po(t.options.mutationKey,s))return!1}return!(typeof r=="boolean"&&t.state.status==="loading"!==r||i&&!i(t))}function $f(e,t){var n=(t==null?void 0:t.queryKeyHashFn)||Kr;return n(e)}function Kr(e){var t=mo(e);return _k(t)}function _k(e){return JSON.stringify(e,function(t,n){return bd(n)?Object.keys(n).sort().reduce(function(r,i){return r[i]=n[i],r},{}):n})}function po(e,t){return mx(mo(e),mo(t))}function mx(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(function(n){return!mx(e[n],t[n])}):!1}function yo(e,t){if(e===t)return e;var n=Array.isArray(e)&&Array.isArray(t);if(n||bd(e)&&bd(t)){for(var r=n?e.length:Object.keys(e).length,i=n?t:Object.keys(t),s=i.length,a=n?[]:{},o=0,u=0;u<s;u++){var c=n?u:i[u];a[c]=yo(e[c],t[c]),a[c]===e[c]&&o++}return r===s&&o===r?e:a}return t}function Nk(e,t){if(e&&!t||t&&!e)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}function bd(e){if(!Sp(e))return!1;var t=e.constructor;if(typeof t>"u")return!0;var n=t.prototype;return!(!Sp(n)||!n.hasOwnProperty("isPrototypeOf"))}function Sp(e){return Object.prototype.toString.call(e)==="[object Object]"}function ru(e){return typeof e=="string"||Array.isArray(e)}function Dk(e){return new Promise(function(t){setTimeout(t,e)})}function jp(e){Promise.resolve().then(e).catch(function(t){return setTimeout(function(){throw t})})}function px(){if(typeof AbortController=="function")return new AbortController}var Ek=function(e){Na(t,e);function t(){var r;return r=e.call(this)||this,r.setup=function(i){var s;if(!ho&&((s=window)!=null&&s.addEventListener)){var a=function(){return i()};return window.addEventListener("visibilitychange",a,!1),window.addEventListener("focus",a,!1),function(){window.removeEventListener("visibilitychange",a),window.removeEventListener("focus",a)}}},r}var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){if(!this.hasListeners()){var i;(i=this.cleanup)==null||i.call(this),this.cleanup=void 0}},n.setEventListener=function(i){var s,a=this;this.setup=i,(s=this.cleanup)==null||s.call(this),this.cleanup=i(function(o){typeof o=="boolean"?a.setFocused(o):a.onFocus()})},n.setFocused=function(i){this.focused=i,i&&this.onFocus()},n.onFocus=function(){this.listeners.forEach(function(i){i()})},n.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},t}(Da),Hs=new Ek,Ik=function(e){Na(t,e);function t(){var r;return r=e.call(this)||this,r.setup=function(i){var s;if(!ho&&((s=window)!=null&&s.addEventListener)){var a=function(){return i()};return window.addEventListener("online",a,!1),window.addEventListener("offline",a,!1),function(){window.removeEventListener("online",a),window.removeEventListener("offline",a)}}},r}var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){if(!this.hasListeners()){var i;(i=this.cleanup)==null||i.call(this),this.cleanup=void 0}},n.setEventListener=function(i){var s,a=this;this.setup=i,(s=this.cleanup)==null||s.call(this),this.cleanup=i(function(o){typeof o=="boolean"?a.setOnline(o):a.onOnline()})},n.setOnline=function(i){this.online=i,i&&this.onOnline()},n.onOnline=function(){this.listeners.forEach(function(i){i()})},n.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},t}(Da),El=new Ik;function Pk(e){return Math.min(1e3*Math.pow(2,e),3e4)}function vo(e){return typeof(e==null?void 0:e.cancel)=="function"}var yx=function(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent};function Il(e){return e instanceof yx}var vx=function(t){var n=this,r=!1,i,s,a,o;this.abort=t.abort,this.cancel=function(m){return i==null?void 0:i(m)},this.cancelRetry=function(){r=!0},this.continueRetry=function(){r=!1},this.continue=function(){return s==null?void 0:s()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(m,v){a=m,o=v});var u=function(v){n.isResolved||(n.isResolved=!0,t.onSuccess==null||t.onSuccess(v),s==null||s(),a(v))},c=function(v){n.isResolved||(n.isResolved=!0,t.onError==null||t.onError(v),s==null||s(),o(v))},d=function(){return new Promise(function(v){s=v,n.isPaused=!0,t.onPause==null||t.onPause()}).then(function(){s=void 0,n.isPaused=!1,t.onContinue==null||t.onContinue()})},f=function m(){if(!n.isResolved){var v;try{v=t.fn()}catch(y){v=Promise.reject(y)}i=function(w){if(!n.isResolved&&(c(new yx(w)),n.abort==null||n.abort(),vo(v)))try{v.cancel()}catch{}},n.isTransportCancelable=vo(v),Promise.resolve(v).then(u).catch(function(y){var w,j;if(!n.isResolved){var g=(w=t.retry)!=null?w:3,h=(j=t.retryDelay)!=null?j:Pk,p=typeof h=="function"?h(n.failureCount,y):h,b=g===!0||typeof g=="number"&&n.failureCount<g||typeof g=="function"&&g(n.failureCount,y);if(r||!b){c(y);return}n.failureCount++,t.onFail==null||t.onFail(n.failureCount,y),Dk(p).then(function(){if(!Hs.isFocused()||!El.isOnline())return d()}).then(function(){r?c(y):m()})}})}};f()},Ak=function(){function e(){this.queue=[],this.transactions=0,this.notifyFn=function(n){n()},this.batchNotifyFn=function(n){n()}}var t=e.prototype;return t.batch=function(r){var i;this.transactions++;try{i=r()}finally{this.transactions--,this.transactions||this.flush()}return i},t.schedule=function(r){var i=this;this.transactions?this.queue.push(r):jp(function(){i.notifyFn(r)})},t.batchCalls=function(r){var i=this;return function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];i.schedule(function(){r.apply(void 0,a)})}},t.flush=function(){var r=this,i=this.queue;this.queue=[],i.length&&jp(function(){r.batchNotifyFn(function(){i.forEach(function(s){r.notifyFn(s)})})})},t.setNotifyFunction=function(r){this.notifyFn=r},t.setBatchNotifyFunction=function(r){this.batchNotifyFn=r},e}(),Ke=new Ak,gx=console;function go(){return gx}function Ok(e){gx=e}var Mk=function(){function e(n){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.cache=n.cache,this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.initialState=n.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=n.meta,this.scheduleGc()}var t=e.prototype;return t.setOptions=function(r){var i;this.options=ke({},this.defaultOptions,r),this.meta=r==null?void 0:r.meta,this.cacheTime=Math.max(this.cacheTime||0,(i=this.options.cacheTime)!=null?i:5*60*1e3)},t.setDefaultOptions=function(r){this.defaultOptions=r},t.scheduleGc=function(){var r=this;this.clearGcTimeout(),wd(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){r.optionalRemove()},this.cacheTime))},t.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},t.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},t.setData=function(r,i){var s,a,o=this.state.data,u=kk(r,o);return(s=(a=this.options).isDataEqual)!=null&&s.call(a,o,u)?u=o:this.options.structuralSharing!==!1&&(u=yo(o,u)),this.dispatch({data:u,type:"success",dataUpdatedAt:i==null?void 0:i.updatedAt}),u},t.setState=function(r,i){this.dispatch({type:"setState",state:r,setStateOptions:i})},t.cancel=function(r){var i,s=this.promise;return(i=this.retryer)==null||i.cancel(r),s?s.then(bt).catch(bt):Promise.resolve()},t.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},t.reset=function(){this.destroy(),this.setState(this.initialState)},t.isActive=function(){return this.observers.some(function(r){return r.options.enabled!==!1})},t.isFetching=function(){return this.state.isFetching},t.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(r){return r.getCurrentResult().isStale})},t.isStaleByTime=function(r){return r===void 0&&(r=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!hx(this.state.dataUpdatedAt,r)},t.onFocus=function(){var r,i=this.observers.find(function(s){return s.shouldFetchOnWindowFocus()});i&&i.refetch(),(r=this.retryer)==null||r.continue()},t.onOnline=function(){var r,i=this.observers.find(function(s){return s.shouldFetchOnReconnect()});i&&i.refetch(),(r=this.retryer)==null||r.continue()},t.addObserver=function(r){this.observers.indexOf(r)===-1&&(this.observers.push(r),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:r}))},t.removeObserver=function(r){this.observers.indexOf(r)!==-1&&(this.observers=this.observers.filter(function(i){return i!==r}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:r}))},t.getObserversCount=function(){return this.observers.length},t.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},t.fetch=function(r,i){var s=this,a,o,u;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(i!=null&&i.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var c;return(c=this.retryer)==null||c.continueRetry(),this.promise}}if(r&&this.setOptions(r),!this.options.queryFn){var d=this.observers.find(function(h){return h.options.queryFn});d&&this.setOptions(d.options)}var f=mo(this.queryKey),m=px(),v={queryKey:f,pageParam:void 0,meta:this.meta};Object.defineProperty(v,"signal",{enumerable:!0,get:function(){if(m)return s.abortSignalConsumed=!0,m.signal}});var y=function(){return s.options.queryFn?(s.abortSignalConsumed=!1,s.options.queryFn(v)):Promise.reject("Missing queryFn")},w={fetchOptions:i,options:this.options,queryKey:f,state:this.state,fetchFn:y,meta:this.meta};if((a=this.options.behavior)!=null&&a.onFetch){var j;(j=this.options.behavior)==null||j.onFetch(w)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((o=w.fetchOptions)==null?void 0:o.meta)){var g;this.dispatch({type:"fetch",meta:(g=w.fetchOptions)==null?void 0:g.meta})}return this.retryer=new vx({fn:w.fetchFn,abort:m==null||(u=m.abort)==null?void 0:u.bind(m),onSuccess:function(p){s.setData(p),s.cache.config.onSuccess==null||s.cache.config.onSuccess(p,s),s.cacheTime===0&&s.optionalRemove()},onError:function(p){Il(p)&&p.silent||s.dispatch({type:"error",error:p}),Il(p)||(s.cache.config.onError==null||s.cache.config.onError(p,s),go().error(p)),s.cacheTime===0&&s.optionalRemove()},onFail:function(){s.dispatch({type:"failed"})},onPause:function(){s.dispatch({type:"pause"})},onContinue:function(){s.dispatch({type:"continue"})},retry:w.options.retry,retryDelay:w.options.retryDelay}),this.promise=this.retryer.promise,this.promise},t.dispatch=function(r){var i=this;this.state=this.reducer(this.state,r),Ke.batch(function(){i.observers.forEach(function(s){s.onQueryUpdate(r)}),i.cache.notify({query:i,type:"queryUpdated",action:r})})},t.getDefaultState=function(r){var i=typeof r.initialData=="function"?r.initialData():r.initialData,s=typeof r.initialData<"u",a=s?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0,o=typeof i<"u";return{data:i,dataUpdateCount:0,dataUpdatedAt:o?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:o?"success":"idle"}},t.reducer=function(r,i){var s,a;switch(i.type){case"failed":return ke({},r,{fetchFailureCount:r.fetchFailureCount+1});case"pause":return ke({},r,{isPaused:!0});case"continue":return ke({},r,{isPaused:!1});case"fetch":return ke({},r,{fetchFailureCount:0,fetchMeta:(s=i.meta)!=null?s:null,isFetching:!0,isPaused:!1},!r.dataUpdatedAt&&{error:null,status:"loading"});case"success":return ke({},r,{data:i.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(a=i.dataUpdatedAt)!=null?a:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var o=i.error;return Il(o)&&o.revert&&this.revertState?ke({},this.revertState):ke({},r,{error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return ke({},r,{isInvalidated:!0});case"setState":return ke({},r,i.state);default:return r}},e}(),Fk=function(e){Na(t,e);function t(r){var i;return i=e.call(this)||this,i.config=r||{},i.queries=[],i.queriesMap={},i}var n=t.prototype;return n.build=function(i,s,a){var o,u=s.queryKey,c=(o=s.queryHash)!=null?o:$f(u,s),d=this.get(c);return d||(d=new Mk({cache:this,queryKey:u,queryHash:c,options:i.defaultQueryOptions(s),state:a,defaultOptions:i.getQueryDefaults(u),meta:s.meta}),this.add(d)),d},n.add=function(i){this.queriesMap[i.queryHash]||(this.queriesMap[i.queryHash]=i,this.queries.push(i),this.notify({type:"queryAdded",query:i}))},n.remove=function(i){var s=this.queriesMap[i.queryHash];s&&(i.destroy(),this.queries=this.queries.filter(function(a){return a!==i}),s===i&&delete this.queriesMap[i.queryHash],this.notify({type:"queryRemoved",query:i}))},n.clear=function(){var i=this;Ke.batch(function(){i.queries.forEach(function(s){i.remove(s)})})},n.get=function(i){return this.queriesMap[i]},n.getAll=function(){return this.queries},n.find=function(i,s){var a=yr(i,s),o=a[0];return typeof o.exact>"u"&&(o.exact=!0),this.queries.find(function(u){return wp(o,u)})},n.findAll=function(i,s){var a=yr(i,s),o=a[0];return Object.keys(o).length>0?this.queries.filter(function(u){return wp(o,u)}):this.queries},n.notify=function(i){var s=this;Ke.batch(function(){s.listeners.forEach(function(a){a(i)})})},n.onFocus=function(){var i=this;Ke.batch(function(){i.queries.forEach(function(s){s.onFocus()})})},n.onOnline=function(){var i=this;Ke.batch(function(){i.queries.forEach(function(s){s.onOnline()})})},t}(Da),Tk=function(){function e(n){this.options=ke({},n.defaultOptions,n.options),this.mutationId=n.mutationId,this.mutationCache=n.mutationCache,this.observers=[],this.state=n.state||Rk(),this.meta=n.meta}var t=e.prototype;return t.setState=function(r){this.dispatch({type:"setState",state:r})},t.addObserver=function(r){this.observers.indexOf(r)===-1&&this.observers.push(r)},t.removeObserver=function(r){this.observers=this.observers.filter(function(i){return i!==r})},t.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(bt).catch(bt)):Promise.resolve()},t.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},t.execute=function(){var r=this,i,s=this.state.status==="loading",a=Promise.resolve();return s||(this.dispatch({type:"loading",variables:this.options.variables}),a=a.then(function(){r.mutationCache.config.onMutate==null||r.mutationCache.config.onMutate(r.state.variables,r)}).then(function(){return r.options.onMutate==null?void 0:r.options.onMutate(r.state.variables)}).then(function(o){o!==r.state.context&&r.dispatch({type:"loading",context:o,variables:r.state.variables})})),a.then(function(){return r.executeMutation()}).then(function(o){i=o,r.mutationCache.config.onSuccess==null||r.mutationCache.config.onSuccess(i,r.state.variables,r.state.context,r)}).then(function(){return r.options.onSuccess==null?void 0:r.options.onSuccess(i,r.state.variables,r.state.context)}).then(function(){return r.options.onSettled==null?void 0:r.options.onSettled(i,null,r.state.variables,r.state.context)}).then(function(){return r.dispatch({type:"success",data:i}),i}).catch(function(o){return r.mutationCache.config.onError==null||r.mutationCache.config.onError(o,r.state.variables,r.state.context,r),go().error(o),Promise.resolve().then(function(){return r.options.onError==null?void 0:r.options.onError(o,r.state.variables,r.state.context)}).then(function(){return r.options.onSettled==null?void 0:r.options.onSettled(void 0,o,r.state.variables,r.state.context)}).then(function(){throw r.dispatch({type:"error",error:o}),o})})},t.executeMutation=function(){var r=this,i;return this.retryer=new vx({fn:function(){return r.options.mutationFn?r.options.mutationFn(r.state.variables):Promise.reject("No mutationFn found")},onFail:function(){r.dispatch({type:"failed"})},onPause:function(){r.dispatch({type:"pause"})},onContinue:function(){r.dispatch({type:"continue"})},retry:(i=this.options.retry)!=null?i:0,retryDelay:this.options.retryDelay}),this.retryer.promise},t.dispatch=function(r){var i=this;this.state=Lk(this.state,r),Ke.batch(function(){i.observers.forEach(function(s){s.onMutationUpdate(r)}),i.mutationCache.notify(i)})},e}();function Rk(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function Lk(e,t){switch(t.type){case"failed":return ke({},e,{failureCount:e.failureCount+1});case"pause":return ke({},e,{isPaused:!0});case"continue":return ke({},e,{isPaused:!1});case"loading":return ke({},e,{context:t.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:t.variables});case"success":return ke({},e,{data:t.data,error:null,status:"success",isPaused:!1});case"error":return ke({},e,{data:void 0,error:t.error,failureCount:e.failureCount+1,isPaused:!1,status:"error"});case"setState":return ke({},e,t.state);default:return e}}var qk=function(e){Na(t,e);function t(r){var i;return i=e.call(this)||this,i.config=r||{},i.mutations=[],i.mutationId=0,i}var n=t.prototype;return n.build=function(i,s,a){var o=new Tk({mutationCache:this,mutationId:++this.mutationId,options:i.defaultMutationOptions(s),state:a,defaultOptions:s.mutationKey?i.getMutationDefaults(s.mutationKey):void 0,meta:s.meta});return this.add(o),o},n.add=function(i){this.mutations.push(i),this.notify(i)},n.remove=function(i){this.mutations=this.mutations.filter(function(s){return s!==i}),i.cancel(),this.notify(i)},n.clear=function(){var i=this;Ke.batch(function(){i.mutations.forEach(function(s){i.remove(s)})})},n.getAll=function(){return this.mutations},n.find=function(i){return typeof i.exact>"u"&&(i.exact=!0),this.mutations.find(function(s){return bp(i,s)})},n.findAll=function(i){return this.mutations.filter(function(s){return bp(i,s)})},n.notify=function(i){var s=this;Ke.batch(function(){s.listeners.forEach(function(a){a(i)})})},n.onFocus=function(){this.resumePausedMutations()},n.onOnline=function(){this.resumePausedMutations()},n.resumePausedMutations=function(){var i=this.mutations.filter(function(s){return s.state.isPaused});return Ke.batch(function(){return i.reduce(function(s,a){return s.then(function(){return a.continue().catch(bt)})},Promise.resolve())})},t}(Da);function Uk(){return{onFetch:function(t){t.fetchFn=function(){var n,r,i,s,a,o,u=(n=t.fetchOptions)==null||(r=n.meta)==null?void 0:r.refetchPage,c=(i=t.fetchOptions)==null||(s=i.meta)==null?void 0:s.fetchMore,d=c==null?void 0:c.pageParam,f=(c==null?void 0:c.direction)==="forward",m=(c==null?void 0:c.direction)==="backward",v=((a=t.state.data)==null?void 0:a.pages)||[],y=((o=t.state.data)==null?void 0:o.pageParams)||[],w=px(),j=w==null?void 0:w.signal,g=y,h=!1,p=t.options.queryFn||function(){return Promise.reject("Missing queryFn")},b=function(F,q,z,Y){return g=Y?[q].concat(g):[].concat(g,[q]),Y?[z].concat(F):[].concat(F,[z])},S=function(F,q,z,Y){if(h)return Promise.reject("Cancelled");if(typeof z>"u"&&!q&&F.length)return Promise.resolve(F);var M={queryKey:t.queryKey,signal:j,pageParam:z,meta:t.meta},L=p(M),W=Promise.resolve(L).then(function(oe){return b(F,z,oe,Y)});if(vo(L)){var te=W;te.cancel=L.cancel}return W},k;if(!v.length)k=S([]);else if(f){var _=typeof d<"u",C=_?d:kp(t.options,v);k=S(v,_,C)}else if(m){var N=typeof d<"u",D=N?d:$k(t.options,v);k=S(v,N,D,!0)}else(function(){g=[];var O=typeof t.options.getNextPageParam>"u",F=u&&v[0]?u(v[0],0,v):!0;k=F?S([],O,y[0]):Promise.resolve(b([],y[0],v[0]));for(var q=function(M){k=k.then(function(L){var W=u&&v[M]?u(v[M],M,v):!0;if(W){var te=O?y[M]:kp(t.options,L);return S(L,O,te)}return Promise.resolve(b(L,y[M],v[M]))})},z=1;z<v.length;z++)q(z)})();var E=k.then(function(O){return{pages:O,pageParams:g}}),A=E;return A.cancel=function(){h=!0,w==null||w.abort(),vo(k)&&k.cancel()},E}}}}function kp(e,t){return e.getNextPageParam==null?void 0:e.getNextPageParam(t[t.length-1],t)}function $k(e,t){return e.getPreviousPageParam==null?void 0:e.getPreviousPageParam(t[0],t)}var Vk=function(){function e(n){n===void 0&&(n={}),this.queryCache=n.queryCache||new Fk,this.mutationCache=n.mutationCache||new qk,this.defaultOptions=n.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var t=e.prototype;return t.mount=function(){var r=this;this.unsubscribeFocus=Hs.subscribe(function(){Hs.isFocused()&&El.isOnline()&&(r.mutationCache.onFocus(),r.queryCache.onFocus())}),this.unsubscribeOnline=El.subscribe(function(){Hs.isFocused()&&El.isOnline()&&(r.mutationCache.onOnline(),r.queryCache.onOnline())})},t.unmount=function(){var r,i;(r=this.unsubscribeFocus)==null||r.call(this),(i=this.unsubscribeOnline)==null||i.call(this)},t.isFetching=function(r,i){var s=yr(r,i),a=s[0];return a.fetching=!0,this.queryCache.findAll(a).length},t.isMutating=function(r){return this.mutationCache.findAll(ke({},r,{fetching:!0})).length},t.getQueryData=function(r,i){var s;return(s=this.queryCache.find(r,i))==null?void 0:s.state.data},t.getQueriesData=function(r){return this.getQueryCache().findAll(r).map(function(i){var s=i.queryKey,a=i.state,o=a.data;return[s,o]})},t.setQueryData=function(r,i,s){var a=Dl(r),o=this.defaultQueryOptions(a);return this.queryCache.build(this,o).setData(i,s)},t.setQueriesData=function(r,i,s){var a=this;return Ke.batch(function(){return a.getQueryCache().findAll(r).map(function(o){var u=o.queryKey;return[u,a.setQueryData(u,i,s)]})})},t.getQueryState=function(r,i){var s;return(s=this.queryCache.find(r,i))==null?void 0:s.state},t.removeQueries=function(r,i){var s=yr(r,i),a=s[0],o=this.queryCache;Ke.batch(function(){o.findAll(a).forEach(function(u){o.remove(u)})})},t.resetQueries=function(r,i,s){var a=this,o=yr(r,i,s),u=o[0],c=o[1],d=this.queryCache,f=ke({},u,{active:!0});return Ke.batch(function(){return d.findAll(u).forEach(function(m){m.reset()}),a.refetchQueries(f,c)})},t.cancelQueries=function(r,i,s){var a=this,o=yr(r,i,s),u=o[0],c=o[1],d=c===void 0?{}:c;typeof d.revert>"u"&&(d.revert=!0);var f=Ke.batch(function(){return a.queryCache.findAll(u).map(function(m){return m.cancel(d)})});return Promise.all(f).then(bt).catch(bt)},t.invalidateQueries=function(r,i,s){var a,o,u,c=this,d=yr(r,i,s),f=d[0],m=d[1],v=ke({},f,{active:(a=(o=f.refetchActive)!=null?o:f.active)!=null?a:!0,inactive:(u=f.refetchInactive)!=null?u:!1});return Ke.batch(function(){return c.queryCache.findAll(f).forEach(function(y){y.invalidate()}),c.refetchQueries(v,m)})},t.refetchQueries=function(r,i,s){var a=this,o=yr(r,i,s),u=o[0],c=o[1],d=Ke.batch(function(){return a.queryCache.findAll(u).map(function(m){return m.fetch(void 0,ke({},c,{meta:{refetchPage:u==null?void 0:u.refetchPage}}))})}),f=Promise.all(d).then(bt);return c!=null&&c.throwOnError||(f=f.catch(bt)),f},t.fetchQuery=function(r,i,s){var a=Dl(r,i,s),o=this.defaultQueryOptions(a);typeof o.retry>"u"&&(o.retry=!1);var u=this.queryCache.build(this,o);return u.isStaleByTime(o.staleTime)?u.fetch(o):Promise.resolve(u.state.data)},t.prefetchQuery=function(r,i,s){return this.fetchQuery(r,i,s).then(bt).catch(bt)},t.fetchInfiniteQuery=function(r,i,s){var a=Dl(r,i,s);return a.behavior=Uk(),this.fetchQuery(a)},t.prefetchInfiniteQuery=function(r,i,s){return this.fetchInfiniteQuery(r,i,s).then(bt).catch(bt)},t.cancelMutations=function(){var r=this,i=Ke.batch(function(){return r.mutationCache.getAll().map(function(s){return s.cancel()})});return Promise.all(i).then(bt).catch(bt)},t.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},t.executeMutation=function(r){return this.mutationCache.build(this,r).execute()},t.getQueryCache=function(){return this.queryCache},t.getMutationCache=function(){return this.mutationCache},t.getDefaultOptions=function(){return this.defaultOptions},t.setDefaultOptions=function(r){this.defaultOptions=r},t.setQueryDefaults=function(r,i){var s=this.queryDefaults.find(function(a){return Kr(r)===Kr(a.queryKey)});s?s.defaultOptions=i:this.queryDefaults.push({queryKey:r,defaultOptions:i})},t.getQueryDefaults=function(r){var i;return r?(i=this.queryDefaults.find(function(s){return po(r,s.queryKey)}))==null?void 0:i.defaultOptions:void 0},t.setMutationDefaults=function(r,i){var s=this.mutationDefaults.find(function(a){return Kr(r)===Kr(a.mutationKey)});s?s.defaultOptions=i:this.mutationDefaults.push({mutationKey:r,defaultOptions:i})},t.getMutationDefaults=function(r){var i;return r?(i=this.mutationDefaults.find(function(s){return po(r,s.mutationKey)}))==null?void 0:i.defaultOptions:void 0},t.defaultQueryOptions=function(r){if(r!=null&&r._defaulted)return r;var i=ke({},this.defaultOptions.queries,this.getQueryDefaults(r==null?void 0:r.queryKey),r,{_defaulted:!0});return!i.queryHash&&i.queryKey&&(i.queryHash=$f(i.queryKey,i)),i},t.defaultQueryObserverOptions=function(r){return this.defaultQueryOptions(r)},t.defaultMutationOptions=function(r){return r!=null&&r._defaulted?r:ke({},this.defaultOptions.mutations,this.getMutationDefaults(r==null?void 0:r.mutationKey),r,{_defaulted:!0})},t.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},e}(),zk=function(e){Na(t,e);function t(r,i){var s;return s=e.call(this)||this,s.client=r,s.options=i,s.trackedProps=[],s.selectError=null,s.bindMethods(),s.setOptions(i),s}var n=t.prototype;return n.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},n.onSubscribe=function(){this.listeners.length===1&&(this.currentQuery.addObserver(this),Cp(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},n.onUnsubscribe=function(){this.listeners.length||this.destroy()},n.shouldFetchOnReconnect=function(){return Sd(this.currentQuery,this.options,this.options.refetchOnReconnect)},n.shouldFetchOnWindowFocus=function(){return Sd(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},n.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},n.setOptions=function(i,s){var a=this.options,o=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(i),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=a.queryKey),this.updateQuery();var u=this.hasListeners();u&&_p(this.currentQuery,o,this.options,a)&&this.executeFetch(),this.updateResult(s),u&&(this.currentQuery!==o||this.options.enabled!==a.enabled||this.options.staleTime!==a.staleTime)&&this.updateStaleTimeout();var c=this.computeRefetchInterval();u&&(this.currentQuery!==o||this.options.enabled!==a.enabled||c!==this.currentRefetchInterval)&&this.updateRefetchInterval(c)},n.getOptimisticResult=function(i){var s=this.client.defaultQueryObserverOptions(i),a=this.client.getQueryCache().build(this.client,s);return this.createResult(a,s)},n.getCurrentResult=function(){return this.currentResult},n.trackResult=function(i,s){var a=this,o={},u=function(d){a.trackedProps.includes(d)||a.trackedProps.push(d)};return Object.keys(i).forEach(function(c){Object.defineProperty(o,c,{configurable:!1,enumerable:!0,get:function(){return u(c),i[c]}})}),(s.useErrorBoundary||s.suspense)&&u("error"),o},n.getNextResult=function(i){var s=this;return new Promise(function(a,o){var u=s.subscribe(function(c){c.isFetching||(u(),c.isError&&(i!=null&&i.throwOnError)?o(c.error):a(c))})})},n.getCurrentQuery=function(){return this.currentQuery},n.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},n.refetch=function(i){return this.fetch(ke({},i,{meta:{refetchPage:i==null?void 0:i.refetchPage}}))},n.fetchOptimistic=function(i){var s=this,a=this.client.defaultQueryObserverOptions(i),o=this.client.getQueryCache().build(this.client,a);return o.fetch().then(function(){return s.createResult(o,a)})},n.fetch=function(i){var s=this;return this.executeFetch(i).then(function(){return s.updateResult(),s.currentResult})},n.executeFetch=function(i){this.updateQuery();var s=this.currentQuery.fetch(this.options,i);return i!=null&&i.throwOnError||(s=s.catch(bt)),s},n.updateStaleTimeout=function(){var i=this;if(this.clearStaleTimeout(),!(ho||this.currentResult.isStale||!wd(this.options.staleTime))){var s=hx(this.currentResult.dataUpdatedAt,this.options.staleTime),a=s+1;this.staleTimeoutId=setTimeout(function(){i.currentResult.isStale||i.updateResult()},a)}},n.computeRefetchInterval=function(){var i;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(i=this.options.refetchInterval)!=null?i:!1},n.updateRefetchInterval=function(i){var s=this;this.clearRefetchInterval(),this.currentRefetchInterval=i,!(ho||this.options.enabled===!1||!wd(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(function(){(s.options.refetchIntervalInBackground||Hs.isFocused())&&s.executeFetch()},this.currentRefetchInterval))},n.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},n.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},n.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},n.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},n.createResult=function(i,s){var a=this.currentQuery,o=this.options,u=this.currentResult,c=this.currentResultState,d=this.currentResultOptions,f=i!==a,m=f?i.state:this.currentQueryInitialState,v=f?this.currentResult:this.previousQueryResult,y=i.state,w=y.dataUpdatedAt,j=y.error,g=y.errorUpdatedAt,h=y.isFetching,p=y.status,b=!1,S=!1,k;if(s.optimisticResults){var _=this.hasListeners(),C=!_&&Cp(i,s),N=_&&_p(i,a,s,o);(C||N)&&(h=!0,w||(p="loading"))}if(s.keepPreviousData&&!y.dataUpdateCount&&(v!=null&&v.isSuccess)&&p!=="error")k=v.data,w=v.dataUpdatedAt,p=v.status,b=!0;else if(s.select&&typeof y.data<"u")if(u&&y.data===(c==null?void 0:c.data)&&s.select===this.selectFn)k=this.selectResult;else try{this.selectFn=s.select,k=s.select(y.data),s.structuralSharing!==!1&&(k=yo(u==null?void 0:u.data,k)),this.selectResult=k,this.selectError=null}catch(A){go().error(A),this.selectError=A}else k=y.data;if(typeof s.placeholderData<"u"&&typeof k>"u"&&(p==="loading"||p==="idle")){var D;if(u!=null&&u.isPlaceholderData&&s.placeholderData===(d==null?void 0:d.placeholderData))D=u.data;else if(D=typeof s.placeholderData=="function"?s.placeholderData():s.placeholderData,s.select&&typeof D<"u")try{D=s.select(D),s.structuralSharing!==!1&&(D=yo(u==null?void 0:u.data,D)),this.selectError=null}catch(A){go().error(A),this.selectError=A}typeof D<"u"&&(p="success",k=D,S=!0)}this.selectError&&(j=this.selectError,k=this.selectResult,g=Date.now(),p="error");var E={status:p,isLoading:p==="loading",isSuccess:p==="success",isError:p==="error",isIdle:p==="idle",data:k,dataUpdatedAt:w,error:j,errorUpdatedAt:g,failureCount:y.fetchFailureCount,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>m.dataUpdateCount||y.errorUpdateCount>m.errorUpdateCount,isFetching:h,isRefetching:h&&p!=="loading",isLoadingError:p==="error"&&y.dataUpdatedAt===0,isPlaceholderData:S,isPreviousData:b,isRefetchError:p==="error"&&y.dataUpdatedAt!==0,isStale:Vf(i,s),refetch:this.refetch,remove:this.remove};return E},n.shouldNotifyListeners=function(i,s){if(!s)return!0;var a=this.options,o=a.notifyOnChangeProps,u=a.notifyOnChangePropsExclusions;if(!o&&!u||o==="tracked"&&!this.trackedProps.length)return!0;var c=o==="tracked"?this.trackedProps:o;return Object.keys(i).some(function(d){var f=d,m=i[f]!==s[f],v=c==null?void 0:c.some(function(w){return w===d}),y=u==null?void 0:u.some(function(w){return w===d});return m&&!y&&(!c||v)})},n.updateResult=function(i){var s=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!Nk(this.currentResult,s)){var a={cache:!0};(i==null?void 0:i.listeners)!==!1&&this.shouldNotifyListeners(this.currentResult,s)&&(a.listeners=!0),this.notify(ke({},a,i))}},n.updateQuery=function(){var i=this.client.getQueryCache().build(this.client,this.options);if(i!==this.currentQuery){var s=this.currentQuery;this.currentQuery=i,this.currentQueryInitialState=i.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(s==null||s.removeObserver(this),i.addObserver(this))}},n.onQueryUpdate=function(i){var s={};i.type==="success"?s.onSuccess=!0:i.type==="error"&&!Il(i.error)&&(s.onError=!0),this.updateResult(s),this.hasListeners()&&this.updateTimers()},n.notify=function(i){var s=this;Ke.batch(function(){i.onSuccess?(s.options.onSuccess==null||s.options.onSuccess(s.currentResult.data),s.options.onSettled==null||s.options.onSettled(s.currentResult.data,null)):i.onError&&(s.options.onError==null||s.options.onError(s.currentResult.error),s.options.onSettled==null||s.options.onSettled(void 0,s.currentResult.error)),i.listeners&&s.listeners.forEach(function(a){a(s.currentResult)}),i.cache&&s.client.getQueryCache().notify({query:s.currentQuery,type:"observerResultsUpdated"})})},t}(Da);function Bk(e,t){return t.enabled!==!1&&!e.state.dataUpdatedAt&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Cp(e,t){return Bk(e,t)||e.state.dataUpdatedAt>0&&Sd(e,t,t.refetchOnMount)}function Sd(e,t,n){if(t.enabled!==!1){var r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Vf(e,t)}return!1}function _p(e,t,n,r){return n.enabled!==!1&&(e!==t||r.enabled===!1)&&(!n.suspense||e.state.status!=="error")&&Vf(e,n)}function Vf(e,t){return e.isStaleByTime(t.staleTime)}var Yk=wj.unstable_batchedUpdates;Ke.setBatchNotifyFunction(Yk);var Wk=console;Ok(Wk);var Np=re.createContext(void 0),xx=re.createContext(!1);function wx(e){return e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=Np),window.ReactQueryClientContext):Np}var Hk=function(){var t=re.useContext(wx(re.useContext(xx)));if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Qk=function(t){var n=t.client,r=t.contextSharing,i=r===void 0?!1:r,s=t.children;re.useEffect(function(){return n.mount(),function(){n.unmount()}},[n]);var a=wx(i);return re.createElement(xx.Provider,{value:i},re.createElement(a.Provider,{value:n},s))};function Gk(){var e=!1;return{clearReset:function(){e=!1},reset:function(){e=!0},isReset:function(){return e}}}var Kk=re.createContext(Gk()),Xk=function(){return re.useContext(Kk)};function Zk(e,t,n){return typeof t=="function"?t.apply(void 0,n):typeof t=="boolean"?t:!!e}function Jk(e,t){var n=re.useRef(!1),r=re.useState(0),i=r[1],s=Hk(),a=Xk(),o=s.defaultQueryObserverOptions(e);o.optimisticResults=!0,o.onError&&(o.onError=Ke.batchCalls(o.onError)),o.onSuccess&&(o.onSuccess=Ke.batchCalls(o.onSuccess)),o.onSettled&&(o.onSettled=Ke.batchCalls(o.onSettled)),o.suspense&&(typeof o.staleTime!="number"&&(o.staleTime=1e3),o.cacheTime===0&&(o.cacheTime=1)),(o.suspense||o.useErrorBoundary)&&(a.isReset()||(o.retryOnMount=!1));var u=re.useState(function(){return new t(s,o)}),c=u[0],d=c.getOptimisticResult(o);if(re.useEffect(function(){n.current=!0,a.clearReset();var f=c.subscribe(Ke.batchCalls(function(){n.current&&i(function(m){return m+1})}));return c.updateResult(),function(){n.current=!1,f()}},[a,c]),re.useEffect(function(){c.setOptions(o,{listeners:!1})},[o,c]),o.suspense&&d.isLoading)throw c.fetchOptimistic(o).then(function(f){var m=f.data;o.onSuccess==null||o.onSuccess(m),o.onSettled==null||o.onSettled(m,null)}).catch(function(f){a.clearReset(),o.onError==null||o.onError(f),o.onSettled==null||o.onSettled(void 0,f)});if(d.isError&&!a.isReset()&&!d.isFetching&&Zk(o.suspense,o.useErrorBoundary,[d.error,c.getCurrentQuery()]))throw d.error;return o.notifyOnChangeProps==="tracked"&&(d=c.trackResult(d,o)),d}function lr(e,t,n){var r=Dl(e,t,n);return Jk(r,zk)}function jd(e){this.message=e}jd.prototype=new Error,jd.prototype.name="InvalidCharacterError";var Dp=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new jd("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,s=0,a="";r=t.charAt(s++);~r&&(n=i%4?64*n+r:r,i++%4)?a+=String.fromCharCode(255&n>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return a};function eC(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(n){return decodeURIComponent(Dp(n).replace(/(.)/g,function(r,i){var s=i.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}(t)}catch{return Dp(t)}}function xo(e){this.message=e}function zf(e,t){if(typeof e!="string")throw new xo("Invalid token specified");var n=(t=t||{}).header===!0?0:1;try{return JSON.parse(eC(e.split(".")[n]))}catch(r){throw new xo("Invalid token specified: "+r.message)}}xo.prototype=new Error,xo.prototype.name="InvalidTokenError";function Ep(e){let t=zf(e);return{id:t.id,name:t.name,guest:t.guest,token:e}}function Ip(e){return{id:0,guest:zf(e).guest,token:e}}class tC{createLocalMap(t){return new Sx(this,t)}}let nC=class{constructor(t,n){x(this,"local");x(this,"key");this.local=t,this.key=n}get(){try{let t=this.local.getItem(this.key);return t===null||t===void 0?void 0:JSON.parse(t)}catch{this.local.removeItem(this.key);return}}set(t){let n=JSON.stringify(t,(r,i)=>{if(r!=="_tuid")return i});this.local.setItem(this.key,n)}remove(t){t===void 0?this.local.removeItem(this.key):this.local.removeLocal(t)}child(t){return this.local.child(t)}arr(t){return this.local.arr(t)}map(t){return this.local.map(t)}},bx=class{constructor(t,n){x(this,"caches");x(this,"locals");x(this,"localDb");x(this,"name");this.localDb=t,this.name=n,this.caches={},this.locals={}}getItem(t){let n=this.keyForGet(t);if(n!==void 0)return this.localDb.getItem(n)}setItem(t,n){let r=this.keyForSet(t);this.localDb.setItem(r,n)}removeItem(t){let n=this.keyForRemove(t);n!==void 0&&localStorage.removeItem(n)}arr(t){let n=String(t),r=this.locals[n];if(r===void 0){let i=this.keyForSet(t);this.locals[n]=r=new Pp(this.localDb,i)}return r}map(t){let n=String(t),r=this.locals[n];if(r===void 0){let i=this.keyForSet(t);this.locals[n]=r=new Sx(this.localDb,i)}return r}removeLocal(t){let n=t.name,r=this.keyForRemove(n);if(r===void 0)return;let i=this.locals[n];i===void 0?i=new Pp(this.localDb,r):this.locals[n]=void 0,i.removeAll()}child(t){let n=String(t),r=this.caches[n];return r!==void 0?r:this.caches[n]=r=new nC(this,t)}};const rC=500;let Pp=class extends bx{constructor(n,r){super(n,r);x(this,"index");let i=this.localDb.getItem(this.name);i?this.index=i.split(`
`).map(s=>Number(s)):this.index=[]}saveIndex(){this.localDb.setItem(this.name,this.index.join(`
`))}keyForGet(n){if(!(this.index.indexOf(n)<0))return`${this.name}.${n}`}keyForSet(n){let r=this.index.indexOf(n);return r<0?(this.index.unshift(n),this.index.length>rC&&this.index.pop()):(this.index.splice(r,1),this.index.unshift(n)),this.saveIndex(),`${this.name}.${n}`}keyForRemove(n){let r=this.index.indexOf(n);if(!(r<0))return this.index.splice(r,1),this.saveIndex(),`${this.name}.${n}`}removeAll(){for(let n of this.index)this.localDb.removeItem(`${this.name}.${n}`);this.localDb.removeItem(this.name),this.index.splice(0)}item(n){return this.child(n)}},Sx=class extends bx{constructor(n,r){super(n,r);x(this,"index");x(this,"max");this.max=0,this.index={};let i=this.localDb.getItem(this.name);i&&i.split(`
`).forEach(a=>{let o=a.indexOf("	");if(o<0)return;let u=a.substr(0,o),c=Number(a.substr(o+1));isNaN(c)!==!0&&(this.index[u]=c,c>this.max&&(this.max=c))})}saveIndex(){let n=[];for(let r in this.index){let i=this.index[r];i!==void 0&&n.push(`${r}	${i}`)}this.localDb.setItem(this.name,n.join(`
`))}keyForGet(n){let r=this.index[n];if(r!==void 0)return`${this.name}.${r}`}keyForSet(n){let r=this.index[n];return r===void 0&&(++this.max,r=this.max,this.index[n]=r,this.saveIndex()),`${this.name}.${r}`}keyForRemove(n){let r=this.index[n];if(r!==void 0)return this.index[n]=void 0,this.saveIndex(),`${this.name}.${r}`}removeAll(){for(let n in this.index)this.localDb.removeItem(`${this.name}.${this.index[n]}`),this.index[n]=void 0;this.localDb.removeItem(this.name),this.max=0}item(n){return this.child(n)}};function Ap(e){return e.split(/[-._]/).map(n=>aC(n)).join("_")}const iC="a".charCodeAt(0),sC="z".charCodeAt(0);function aC(e){if(!e)return"";let t=e.charCodeAt(0);return t>=iC&&t<=sC?String.fromCharCode(t-32)+e.substr(1):e}function lC(e,t){if(!e||!t)return;let n=Object.keys(e);t=t.toLowerCase();for(let r of n)if(r.toLowerCase()===t)return e[r]}function jx(e){return!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function"}class oC{constructor(t,n=void 0,r){x(this,"_params");x(this,"$$user");x(this,"method","POST");x(this,"waiting");this._params=t,this.$$user=n,this.waiting=r}get params(){return this._params}buildParams(){return this.params}get headers(){}}class kx{constructor(t,n){x(this,"net");x(this,"path");this.net=t,this.path=n||""}customHeader(){}async xcall(t){return await(await this.getHttpChannel()).xcall(this.path,t)}async call(t,n,r){return await(await this.getHttpChannel()).callFetch(t,n,r)}async get(t,n=void 0){return await(await this.getHttpChannel()).get(this.path+t,n,this.customHeader())}async post(t,n){return await(await this.getHttpChannel()).post(this.path+t,n,this.customHeader())}async put(t,n){return await(await this.getHttpChannel()).put(this.path+t,n,this.customHeader())}async delete(t,n){return await(await this.getHttpChannel()).delete(this.path+t,n,this.customHeader())}}class uC extends kx{constructor(n){let{net:r,baseUrl:i}=n;super(r,i);x(this,"uq");this.uq=n}async getHttpChannel(){return await this.net.getHttpChannel(this.uq.name)}customHeader(){let{unit:n}=this.uq;if(n!==void 0)return{unit:String(n)}}async loadEntities(){return await this.get("entities")}async bizSheet(n,r){await this.post("biz",{id:n,act:r})}async bizSheetAct(n,r,i){return await this.post("biz-sheet-act",{id:n,detail:r,act:i})}async getAdmins(){return await this.get("get-admins")}async setMeAdmin(){await this.get("set-me-admin")}async setAdmin(n,r,i){await this.post("set-admin",{user:n,role:r,assigned:i})}async isAdmin(){return await this.get("is-admin")}async getRoles(){let n=await this.get("get-roles");if(!n)return null;let r=n.split("|"),i=[];for(let s of r)s=s.trim(),s&&i.push(s);return i.length===0?null:i}async getAllRoleUsers(){return await this.get("get-all-role-users")}async setUserRoles(n,r){await this.post("set-user-roles",{theUser:n,roles:r})}async deleteUserRoles(n){await this.get("delete-user-roles",{theUser:n})}async allSchemas(){return await this.get("all-schemas")}async schema(n){return await this.get("schema/"+n)}async queueModify(n,r,i){return await this.post("queue-modify",{start:n,page:r,entities:i})}async syncUser(n){return await this.post("sync-user",{user:n})}async hello(){return await this.get("hello",{})}async compileHello(){return await this.get("compile/hello",{})}async compile(n){return await this.post("compile/override",{source:n})}async compileEntity(n,r){return await this.post("compile/entity",{id:n,code:r})}async renameEntity(n,r){return await this.post("compile/rename",{id:n,name:r})}async delEntity(n){return await this.post("compile/del-entity",{id:n})}async biz(){return await this.post("compile/biz",{})}}class Cx extends kx{async getHttpChannel(){return this.net.getCenterChannel()}}const cC="uqTokens";class dC extends Cx{constructor(n,r){super(n,r);x(this,"localMap");this.localMap=n.createLocalMap(cC)}clearLocal(){this.localMap.removeAll()}async uq(n){let{uqOwner:r,uqName:i}=n,s=r+"/"+i,a=this.localMap.child(s);try{let o=a.get();if(o!==void 0){let{unit:f,user:m}=o;(f!==n.unit||m!==this.net.loginedUserId)&&(a.remove(),o=void 0)}let u=Math.floor(Date.now()/1e3);if(o!==void 0){let{tick:f,value:m}=o;if(m!==void 0&&u-f<24*3600)return Object.assign({},m)}let c=Object.assign({},n),d=await this.get("open/uq-token",c);if(d===void 0){let{unit:f,uqOwner:m,uqName:v}=n;throw`center get app-uq(unit=${f}, '${m}/${v}') - not exists or no unit-service`}return o={unit:n.unit,user:this.net.loginedUserId,tick:u,value:d},a.set(o),Object.assign({},d)}catch(o){throw a.remove(),o}}}class fC extends Cx{async login(t){let n=await this.post("user/login",t);switch(typeof n){default:return;case"string":return Ep(n);case"object":let r=n.token,i=Ep(r),{nick:s,icon:a}=n;return s&&(i.nick=s),a&&(i.icon=a),i}}async register(t){return await this.post("user/register",t)}async changePassword(t){return await this.post("tie/change-password",t)}async sendVerify(t,n,r){return await this.post("user/set-verify",{account:t,type:n,oem:r})}async checkVerify(t,n){return await this.post("user/check-verify",{account:t,verify:n})}async isExists(t){return await this.get("user/is-exists",{account:t})}async resetPassword(t,n,r,i){return await this.post("user/reset-password",{account:t,password:n,verify:r,type:i})}async userSetProp(t,n){await this.post("tie/user-set-prop",{prop:t,value:n})}async me(){return await this.get("tie/me")}async user(t){return await this.get("tie/user",{id:t})}async fromKey(t){return await this.get("tie/user-from-key",{key:t})}async guest(){let t=await this.get("guest/",{});switch(typeof t){default:return;case"string":return Ip(t);case"object":return Ip(t.token)}}async userQuit(){await this.get("tie/user-ask-quit",{})}async userAppUnits(t){return await this.get("tie/user-app-units",{app:t})}async userFromKey(t){return await this.get("tie/user-from-key",{key:t})}async userFromId(t){return await this.get("user/user-name-nick-icon-from-id",{userId:t})}async userFromName(t){return await this.get("tie/user-from-key",{key:t})}async usersFromEmail(t){return await this.get("tie/users-from-email",{email:t})}async userFromMobile(t){return await this.get("tie/users-from-mobile",{mobile:t})}}const hC=["POST","PUT"];class Op{constructor(t,n,r){x(this,"language");x(this,"culture");x(this,"timeout");x(this,"net");x(this,"hostUrl");x(this,"authToken");this.net=t,this.hostUrl=n,this.authToken=r,this.timeout=t.fetchTimeout}used(){this.post("",{})}async xcall(t,n){let r=this.buildOptions(void 0),{headers:i,path:s,method:a}=n;if(i!==void 0){let u=r.headers;for(let c in i)u[c]=encodeURI(i[c])}r.method=a;let o=n.buildParams();return hC.indexOf(a)>=0&&o!==void 0&&(r.body=JSON.stringify(o)),await this.innerFetch(t+s,r)}async innerFetchResult(t,n){return(await this.innerFetch(t,n)).res}async get(t,n=void 0,r=void 0){if(n){let s=Object.keys(n);if(s.length>0){let a="?";for(let o of s)n[o]!==void 0&&(t+=a+o+"="+n[o],a="&")}}let i=this.buildOptions(r);return i.method="GET",await this.innerFetchResult(t,i)}async post(t,n,r=void 0){let i=this.buildOptions(r);return i.method="POST",i.body=JSON.stringify(n),await this.innerFetchResult(t,i)}async put(t,n,r=void 0){let i=this.buildOptions(r);return i.method="PUT",i.body=JSON.stringify(n),await this.innerFetchResult(t,i)}async delete(t,n,r=void 0){let i=this.buildOptions(r);return i.method="DELETE",i.body=JSON.stringify(n),await this.innerFetchResult(t,i)}async fetch(t,n,r,i){let s=t;try{console.log("%s-%s %s",n.method,s,n.body||"");let a=Date.now(),o=setTimeout(()=>{throw new Error(`webapi timeout: ${Date.now()-a}ms ${t}`)},this.timeout),u=await fetch(encodeURI(s),n);if(u.ok===!1)throw clearTimeout(o),console.log("call error %s",u.statusText),u.statusText;let c=u.headers.get("content-type");if(c&&c.indexOf("json")>=0)return u.json().then(async d=>{if(clearTimeout(o),d.ok===!0){if(typeof d!="object")debugger;else if(Array.isArray(d)===!0)debugger;return r(d)}let f=d.error;i(f===void 0?"not valid tonwa json":f)}).catch(async d=>{i(d)});{let d=await u.text();clearTimeout(o),console.log("text endWait"),r(d)}}catch(a){if(typeof a=="string"){let o=a.toLowerCase();if(o.startsWith("unauthorized")===!0||o.startsWith("$roles")===!0)return}console.error("fecth error (no nav.showError): "+t)}}async innerFetch(t,n){let r=this.hostUrl+t;return new Promise(async(i,s)=>{await this.fetch(r,n,i,s)})}async callFetch(t,n,r){let i=this.buildOptions(void 0);return i.method=n,i.body=r,new Promise(async(s,a)=>{await this.fetch(t,i,s,a)})}buildOptions(t){return{headers:this.buildHeaders(t),method:void 0,body:void 0}}buildHeaders(t){let{language:n,culture:r}=this,i={};i["Content-Type"]="application/json;charset=UTF-8";let s=n??"";return r&&(s+="-"+r),i["Accept-Language"]=s,this.authToken&&(i.Authorization=this.authToken),t!==void 0&&Object.assign(i,t),i}}const mC={center:"localhost:3000",uq:"localhost:3015",res:"localhost:3015"},pC={method:"GET",headers:{"Content-Type":"text/plain;charset=UTF-8"}};async function yC(e,t){return t===!0?await vC(e):(e.endsWith("/")===!1&&(e+="/"),{center:e,uqDebug:void 0,res:void 0,uqs:void 0})}async function vC(e){e.endsWith("/")===!1&&(e+="/");let{center:t,uq:n,res:r}=mC,i=[t,n,r].map(d=>wC(d)),[s,a,o]=await Promise.all(i);s!==null&&(e=`http://${t}/`);let u,c;return a!==null?(u=`http://${n}/`,c=JSON.parse(a).uqs):n=void 0,r=void 0,{center:e,uqDebug:u,res:r,uqs:c}}const gC=2e3;function xC(e){return new Promise(async(t,n)=>{try{setTimeout(n,gC,new Error("Connection timed out"));let r=await fetch(e,pC);if(r.ok===!1){n("resp.ok === false");return}let i=await r.text();t(i)}catch(r){n(r)}})}async function wC(e){if(!e)return null;let t=`http://${e}/hello`;try{return await xC(t)}catch{return null}}class bC{constructor(t){x(this,"centerUrl");x(this,"uqDebug");x(this,"resDebug");x(this,"debugUqs",new Set);x(this,"testing");x(this,"uqChannels",{});x(this,"centerChannel");x(this,"isDevelopment");x(this,"centerToken");x(this,"props");x(this,"_loginedUserId",0);x(this,"localDb");x(this,"userApi");x(this,"uqTokenApi");x(this,"createObservableMap");this.props=t,this.isDevelopment=t.isDevelopment,this.testing=t.testing,this.localDb=this.props.localDb,this.createObservableMap=this.props.createObservableMap,this.userApi=new fC(this,"tv/"),this.uqTokenApi=new dC(this,"tv/")}async init(){if(this.centerUrl!==void 0)return;let{center:t}=this.props,{center:n,uqDebug:r,uqs:i,res:s}=await yC(t,this.isDevelopment);if(this.centerUrl=n,this.uqDebug=r,this.resDebug=s,console.log("centerUrl",n,"uqDebug",r,"res",s),i!==void 0)for(let a of i){let{db:o}=a;this.debugUqs.add(o.toLowerCase())}}get fetchTimeout(){return this.isDevelopment===!0?3e4:5e4}get loginedUserId(){return this._loginedUserId}createLocalMap(t){return this.localDb.createLocalMap(t)}getLocalDbItem(t){return this.localDb.getItem(t)}setLocalDbItem(t,n){this.localDb.setItem(t,n)}getResUrl(t){return this.resDebug+t}logoutApis(){this.uqTokenApi.clearLocal();for(let t in this.uqChannels)this.uqChannels[t]=void 0}setCenterToken(t,n){this._loginedUserId=t,this.centerToken=n,this.centerChannel=void 0}clearCenterToken(){this.setCenterToken(0,void 0)}getCenterChannel(){return this.centerChannel!==void 0?this.centerChannel:this.centerChannel=new Op(this,this.centerUrl,this.centerToken)}buildUqUrl(t,n,r){let i,s=t.toLowerCase();return this.testing===!0?(n=r,s+="$test",i="test"):i="prod",this.uqDebug&&this.debugUqs.has(s)===!0&&(n=this.uqDebug),n.endsWith("/")===!1&&(n+="/"),`${n}uq/${i}/${t}/`}async getHttpChannel(t){let n=this.uqChannels[t];return n===void 0?(this.uqChannels[t]=n=new Promise(async(r,i)=>{let s=await this.initUqToken(t),{url:a,token:o}=s;return this.uqChannels[t]=n=new Op(this,a,o),r(n)}),await n):jx(n)===!1?n:await n}async initUqToken(t){let[n,r]=t.split("/"),{unit:i}=this.props,s=await this.uqTokenApi.uq({unit:i,uqOwner:n,uqName:r});s.token===void 0&&(s.token=this.centerToken);let{db:a,url:o,urlTest:u}=s,c=this.buildUqUrl(a,o,u);return console.log("realUrl: %s",c),s.url=c,s}}const SC="	",_s=`
`,pi="\\ntbfvr",ac=pi.charCodeAt(0),jC=pi.charCodeAt(1),kC=pi.charCodeAt(2),CC=pi.charCodeAt(3),_C=pi.charCodeAt(4),NC=pi.charCodeAt(5),DC=pi.charCodeAt(6),ds=`
	\b\f\v\r`,EC=ds.charCodeAt(0),IC=ds.charCodeAt(1),PC=ds.charCodeAt(2),AC=ds.charCodeAt(3),OC=ds.charCodeAt(4),MC=ds.charCodeAt(5);let yi=class{constructor(t,n,r){x(this,"jName");x(this,"schema");x(this,"ver",0);x(this,"sys");x(this,"uq");x(this,"name");x(this,"typeId");x(this,"schemaLocal");x(this,"uqApi");x(this,"fields");x(this,"arrFields");x(this,"returns");x(this,"face");x(this,"fieldMaps",{});if(n===void 0)debugger;this.uq=t,this.name=n.toLowerCase(),this.typeId=r,this.sys=this.name.indexOf("$")>=0,this.schemaLocal=this.uq.localMap.item(this.name),this.uqApi=this.uq.uqApi}fieldMap(t){t===void 0&&(t="$");let n=this.fieldMaps[t];if(n===void 0){let r;if(t==="$")r=this.fields;else if(this.arrFields!==void 0){let i=this.arrFields.find(s=>s.name===t);i!==void 0&&(r=i.fields)}else if(this.returns!==void 0){let i=this.returns.find(s=>s.name===t);i!==void 0&&(r=i.fields)}if(r===void 0)return{};n={};for(let i of r)n[i.name]=i;this.fieldMaps[t]=n}return n}async loadSchema(){if(this.schema!==void 0)return;let t=this.schemaLocal.get();t||(t=await this.uq.loadEntitySchema(this.name)),this.buildSchema(t),await this.loadValues()}buildSchema(t){this.setSchema(t),this.buildFieldsTuid()}async loadValues(){}clearSchema(){this.schema=void 0}setSchema(t){if(t===void 0)return;let{name:n,version:r,permit:i}=t;this.ver=r||0,this.setJName(n),this.schemaLocal.set(t),this.schema=t,this.buildFieldsTuid(),this.setPermitRole(this.getPermitRole(i))}getPermitRole(t){if(t===void 0)return;let n=t.indexOf("+");return n<0?t:t.substring(0,n)}setPermitRole(t){}setJName(t){t!==this.name&&(this.jName=t)}setKeys(){}buildFieldsTuid(){let{fields:t,arrs:n,returns:r}=this.schema;this.fields=t,this.setKeys(),this.uq.buildFieldTuid(t),this.arrFields=n,this.uq.buildArrFieldsTuid(n,t),this.returns=r,this.uq.buildArrFieldsTuid(r,t)}schemaStringify(){return JSON.stringify(this.schema,(t,n)=>{if(t!=="_tuid")return n},4)}tuidFromName(t,n){if(this.schema===void 0)return;let{fields:r,arrs:i}=this.schema,s=this.uq;function a(d,f){if(f===void 0)return;let m=f.find(v=>v.name===d);if(m!==void 0)return s.getTuid(m.tuid)}let o=t.toLowerCase();if(n===void 0)return a(o,r);if(i===void 0)return;let u=n.toLowerCase(),c=i.find(d=>d.name===u);if(c!==void 0)return a(o,c.fields)}buildParams(t){let n={},r=this.fields;r!==void 0&&this.buildFieldsParams(n,r,t);let i=this.arrFields;if(i!==void 0)for(let s of i){let{name:a,fields:o}=s;if(t[a]===void 0)continue;let c=[];n[a]=c;for(let d of t){let f={};this.buildFieldsParams(f,o,d),c.push(f)}}return n}buildFieldsParams(t,n,r){for(let i of n){let{name:s,type:a}=i,o=r[s],u;switch(a){case"datetime":u=this.buildDateTimeParam(o);break;case"date":o instanceof Date?u=`${o.getFullYear()}-${o.getMonth()+1}-${o.getDate()}`:u=o;break;default:switch(typeof o){default:u=o;break;case"object":if(o instanceof Date){u=o;break}let c=i._tuid;c===void 0?u=o.id:u=c.getIdFromObj(o);break}break}t[s]=u}}buildDateTimeParam(t){let n;switch(typeof t){default:debugger;throw new Error("escape datetime field in pack data error: value="+t);case"undefined":return"";case"object":n=t;break;case"string":case"number":n=new Date(t);break}return Math.floor(n.getTime()/1e3)}buildDateParam(t){let n;switch(typeof t){default:debugger;throw new Error("escape datetime field in pack data error: value="+t);case"undefined":return"";case"string":return t;case"object":n=t;break;case"number":n=new Date(t);break}let r=n.toISOString(),i=r.indexOf("T");return i>0?r.substring(0,i):r}pack(t){let n=[],r=this.fields;r!==void 0&&this.packRow(n,r,t);let i=this.arrFields;if(i!==void 0)for(let s of i){let{name:a,fields:o}=s,u=lC(t,a);this.packArr(n,o,u)}return n.join("")}packJson(t){let n=[],r=this.fields;if(r!==void 0)for(let i of r)n.push(t[i.name]);return JSON.stringify(n)}escape(t,n){let r=t[n.name];if(r===null)return"";switch(n.type){case"datetime":return this.buildDateTimeParam(r);default:switch(typeof r){default:return r;case"object":let i=n._tuid;return i===void 0?r.id:i.getIdFromObj(r);case"string":let s=r.length,a="",o=0;for(let u=0;u<s;u++){let c=r.charCodeAt(u),d;switch(c){default:continue;case ac:d="\\\\";break;case IC:d="\\t";break;case EC:d="\\n";break;case AC:d="\\f";break;case OC:d="\\v";break;case PC:d="\\b";break;case MC:d="\\r";break}a+=r.substring(o,u)+d,o=u+1}return a+r.substring(o);case"undefined":return""}}}packRow(t,n,r){let i=n.length;if(i===0){t.push(_s);return}let s="";s+=this.escape(r,n[0]);for(let a=1;a<i;a++){let o=n[a];s+=SC+this.escape(r,o)}t.push(s+_s)}packArr(t,n,r){if(r!==void 0)if(r.length===0)t.push(_s);else for(let i of r)this.packRow(t,n,i);else t.push(_s);t.push(_s)}cacheFieldsInValue(t,n){for(let r of n){let{name:i,_tuid:s}=r;if(s===void 0)continue;let a=t[i];t[i]=s.boxId(a)}}unpackTuidIdsOfFields(t,n){if(n===void 0)return t;let r=[];for(let i of t){if(!i)continue;let s=i.length,a=0;for(;a<s;){if(i.charCodeAt(a)===10){++a;break}let u={};a=this.unpackRow(u,n,i,a),r.push(u)}}return r}unpackSheet(t){let n={},r=this.fields,i=0;r!==void 0&&(i=this.unpackRow(n,r,t,i));let s=this.arrFields;if(s!==void 0)for(let a of s)i=this.unpackArr(n,a,t,i);return n}unpackReturns(t,n){if(t===void 0)debugger;let r={},i=0,s=n||this.returns;if(s!==void 0)for(let a of s)i=this.unpackArr(r,a,t,i);return r}unpackRow(t,n,r,i,s=9){let a=0,o=0,u=i,c=0,d=r.length,f=n.length;const m=()=>{let v=n[c],{name:y}=v;if(a!==8){if(i>u){let w=r.substring(u,i);t[y]=this.to(t,w,v)}}else t[y]=null};for(;i<d;i++)if(a=o,o=r.charCodeAt(i),o===s){if(m(),u=i+1,++c,c>=f)return i=r.indexOf(`
`,u),i>=0?++i:i=d,i}else if(o===10){let v=n[c],{name:y}=v;if(a!==8){if(i>u){let w=r.substring(u,i);t[y]=this.to(t,w,v)}}else t[y]=null;return++i,++c,i}return m(),d}to(t,n,r){switch(r.type){default:return n;case"text":case"char":return this.reverseNT(n);case"datetime":case"timestamp":let i=Number(n);return isNaN(i)===!0?new Date(n):new Date(i*1e3);case"json":return JSON.parse(n);case"enum":case"tinyint":case"smallint":case"int":case"bigint":case"dec":case"float":case"double":return Number(n);case"id":let a=Number(n),{_tuid:o}=r;return o===void 0?a:o.boxId(a)}}reverseNT(t){if(t===void 0||t===null)return;let n=t.length,r="",i=0;for(let s=0;s<n;s++)if(t.charCodeAt(s)===ac){if(s===n-1)break;let o=t.charCodeAt(s+1),u;switch(o){default:continue;case ac:u="\\";break;case jC:u=`
`;break;case kC:u="	";break;case CC:u="\b";break;case _C:u="\f";break;case NC:u="\v";break;case DC:u="\r";break}r+=t.substring(i,s)+u,i=s+2,++s}return r+=t.substring(i,n),r}unpackArr(t,n,r,i){let s=i,a=[],o=r.length,{name:u,fields:c}=n;for(;i<o;){let d=r.charCodeAt(i);if(d===10){if(i===s){if(d=r.charCodeAt(i),d!==10)throw new Error("upackArr: arr第一个字符是10，则必须紧跟一个10，表示整个arr的结束");++i}++i;break}let f={};a.push(f),i=this.unpackRow(f,c,r,i)}return t[u]=a,i}};class fs extends oC{constructor(n,r,i=void 0,s=!0){super(r,i,s);x(this,"tries");x(this,"_entity");this.tries=0,this._entity=n}get entity(){return this._entity}async request(){return await this.entity.loadSchema(),await this.innerRequest()}async innerCall(){return await this.entity.uqApi.xcall(this)}async innerRequest(){let n=await this.innerCall(),{$uq:r,$modify:i,res:s}=n;return this.entity.uq.pullModify(i),r===void 0?this.xresult(s):await this.retry(r)}xresult(n){return n}get headers(){let{ver:n,uq:r}=this.entity,{uqVersion:i,unit:s}=r;return{uq:`${i}`,en:`${n}`,unit:s===void 0?void 0:String(s)}}async retry(n){if(++this.tries,this.tries>5)throw new Error(`${n.entity.name} can not get right uq response schema, 5 tries`);return this.rebuildSchema(n),await this.innerRequest()}rebuildSchema(n){let{uq:r,entity:i}=n;r!==void 0&&this.entity.uq.buildEntities(),i!==void 0&&this.entity.setSchema(i)}}let _x=class extends fs{get entity(){return this._entity}};class Bf extends fs{get entity(){return this._entity}get path(){return`query/${this.entity.name}`}xresult(t){return this.entity.unpackReturns(t)}buildParams(){return this.entity.buildParams(this.params)}}class Yf extends fs{get params(){return this._params}get entity(){return this._entity}get path(){return`query-page/${this.entity.name}`}buildParams(){let{pageStart:t,pageSize:n,params:r}=this.params,i;return r===void 0?i={key:""}:i=this.entity.buildParams(r),i.$pageStart=t,i.$pageSize=n,i}xresult(t){return this.entity.unpackReturns(t)}}const FC=1e4;class Nx{constructor(t){x(this,"queue",[]);x(this,"cache");x(this,"localArr");x(this,"waitingIds",[]);x(this,"tuidInner");this.cache=t.uq.net.createObservableMap(),this.tuidInner=t,this.initLocalArr()}initLocalArr(){this.localArr=this.tuidInner.schemaLocal.arr(this.tuidInner.name+".ids")}cacheSet(t,n){this.cache.set(t,n)}useId(t,n){if(t){if(typeof t!="number"){console.error("id cache "+t+" is not number");return}if(this.cache.has(t)===!0){this.moveToHead(t);return}if(this.tuidInner.cacheTuids(n===!0?70:20),this.waitingIds.findIndex(r=>r===t)>=0){this.moveToHead(t);return}if(this.queue.length>=FC){let r=this.queue.shift();if(r===t){this.queue.push(r);return}if(this.cache.has(r)===!0)this.cache.delete(r);else{let i=this.waitingIds.findIndex(s=>s===r);this.waitingIds.splice(i,1)}}this.waitingIds.push(t),this.queue.push(t)}}moveToHead(t){let n=this.queue.findIndex(r=>r===t);this.queue.splice(n,1),this.queue.push(t)}getValue(t){return this.cache.get(t)}remove(t){this.cache.delete(t);let n=this.queue.findIndex(r=>r===t);this.queue.splice(n,1),this.localArr.removeItem(t)}valueFromId(t){let n;switch(typeof t){case"object":n=t.id;break;case"number":n=t;break;default:return}return this.getValue(n)}resetCache(t){this.remove(t),this.useId(t)}cacheValue(t){if(t===void 0)return!1;let n=this.getIdFromObj(t);return n===void 0?!1:(this.cacheSet(n,t),!0)}getIdFromObj(t){return this.tuidInner.getIdFromObj(t)}async cacheIds(){let t=await this.loadIds();this.cacheIdValues(t)}cacheIdValues(t){if(t===void 0)return;let n=this.unpackTuidIds(t);for(let r of n)this.cacheValue(r)===!0&&this.cacheTuidFieldValues(r)}async modifyIds(t){let r=(await this.loadTuidIdsOrLocal(t)).filter(i=>{let s=i.indexOf("	");s<0&&(s=i.length);let a=Number(i.substring(0,s));return this.localArr.getItem(a)!==void 0});r.length!==0&&this.cacheIdValues(r)}async loadIds(){if(this.waitingIds.length===0)return;let t=[...this.waitingIds];return this.waitingIds=[],await this.loadTuidIdsOrLocal(t)}unpackTuidIds(t){return this.tuidInner.unpackTuidIds(t)}cacheTuidFieldValues(t){this.tuidInner.cacheTuidFieldValues(t)}async assureObj(t){let n=this.cache.get(t);if(n!==void 0)return n;let r=await this.loadTuidIdsOrLocal([t]);this.cacheIdValues(r)}async loadValuesFromIds(t){return await this.tuidInner.loadValuesFromIds(void 0,t)}async loadTuidIdsOrLocal(t){let n=[],r=[];for(let a of t){let o=this.localArr.getItem(a);o?n.push(o):r.push(a)}let i=r.length;if(i===0)return n;let s=await this.loadValuesFromIds(r);for(let a=0;a<i;a++){let o=s[a];if(!o)continue;let u=o.indexOf("	");u<0&&(u=o.length);let c=Number(o.substring(0,u)),d=r.findIndex(f=>f===c);d>=0&&r.splice(d,1),n.push(o),this.localArr.setItem(c,o)}i=r.length;for(let a=0;a<i;a++)this.localArr.setItem(r[a],"");return n}}class TC extends Nx{constructor(n,r){super(n);x(this,"div");x(this,"divName");this.div=r,this.divName=r.name,this.localArr=n.schemaLocal.arr(n.name+".ids."+this.divName)}initLocalArr(){}getIdFromObj(n){return this.div.getIdFromObj(n)}unpackTuidIds(n){return this.div.unpackTuidIds(n)}cacheTuidFieldValues(n){this.div.cacheTuidFieldValues(n)}async loadValuesFromIds(n){return await this.tuidInner.loadValuesFromIds(this.divName,n)}}class RC extends yi{constructor(){super(...arguments);x(this,"noCache");x(this,"typeName","tuid");x(this,"idName");x(this,"unique");x(this,"isImport",!1)}setSchema(n){super.setSchema(n);let{id:r}=n;this.idName=r}buildTuidBox(){return new Ex(this)}getIdFromObj(n){return n[this.idName]}stopCache(){this.noCache=!0}static idValue(n){let r=typeof n;switch(r){default:debugger;throw new Error("unknown id type: "+r);case"undefined":return;case"object":return n.id;case"number":return n}}static equ(n,r){return n==null||r==null?!1:wo.idValue(n)===wo.idValue(r)}cacheIds(){}async modifyIds(n){}}class wo extends RC{}class Dx extends wo{constructor(n,r,i){super(n,r,i);x(this,"divs");x(this,"cacheFields");x(this,"idCache");x(this,"localArr");this.idCache=new Nx(this),this.localArr=this.schemaLocal.arr(this.name+".whole"),n.newVersion===!0&&this.localArr.removeAll()}setSchema(n){super.setSchema(n);let{arrs:r}=n;if(r!==void 0){this.divs={};for(let i of r){let{name:s}=i,a=new GC(this.uq,this,s);this.divs[s]=a,a.setSchema(i),a.buildFieldsTuid()}}}getObj(n){let r=this.valueFromId(n);return r||(this.useId(n),{id:n})}useId(n,r){this.noCache!==!0&&n&&this.idCache.useId(n,r)}boxId(n){if(n)return typeof n=="object"?n:(this.useId(n),{id:n})}valueFromId(n){return this.idCache.getValue(n)}resetCache(n){typeof n=="object"&&(n=n.id),this.idCache.resetCache(n)}async assureBox(n){if(n)return typeof n=="object"&&(n=n.id),await this.idCache.assureObj(n),this.idCache.getValue(n)}cacheIds(){if(this.idCache.cacheIds(),this.divs!==void 0)for(let n in this.divs)this.divs[n].cacheIds()}async modifyIds(n){await this.idCache.modifyIds(n)}cacheTuids(n){this.uq.cacheTuids(n)}get hasDiv(){return this.divs!==void 0}div(n){return this.divs&&this.divs[n]}async loadValuesFromIds(n,r){return await new qC(this,{divName:n,ids:r},void 0,!1).request()}async loadMain(n){return typeof n=="object"&&(n=n.id),await this.idCache.assureObj(n),this.idCache.valueFromId(n)}async load(n){if(n===void 0||n===0)return;typeof n=="object"&&(n=n.id);let r;if(r=await new LC(this,n).request(),r!==void 0){for(let i of this.schema.fields){let{tuid:s}=i;if(s===void 0)continue;let a=this.uq.getTuid(s);if(a===void 0)continue;let o=i.name;r[o]=a.boxId(r[o])}return this.idCache.cacheValue(r),this.cacheTuidFieldValues(r),r}}cacheTuidFieldValues(n){let{fields:r,arrs:i}=this.schema;if(this.cacheFieldsInValue(n,r),i!==void 0)for(let s of i){let{name:a,fields:o}=s,u=n[a];if(u===void 0)continue;let c=this.div(a);for(let d of u)c.cacheValue(d),this.cacheFieldsInValue(d,o)}}buildFieldsTuid(){super.buildFieldsTuid();let{mainFields:n,$create:r,$update:i,stampOnMain:s}=this.schema;this.cacheFields=n||this.fields,s===!0&&(r===!0&&this.cacheFields.push({name:"$create",type:"timestamp",_tuid:void 0}),i===!0&&this.cacheFields.push({name:"$update",type:"timestamp",_tuid:void 0})),this.uq.buildFieldTuid(this.cacheFields)}unpackTuidIds(n){return this.unpackTuidIdsOfFields(n,this.cacheFields)}async save(n,r){let i=await new UC(this,{id:n,props:r}).request();return n!==void 0&&(this.idCache.remove(n),this.localArr.removeItem(n)),i}async saveProp(n,r,i){await new BC(this,{id:n,prop:r,value:i}).request(),this.idCache.remove(n),await this.idCache.assureObj(n)}async all(){return await new VC(this,{}).request()}async search(n,r,i){return await this.searchArr(void 0,n,r,i)}async searchArr(n,r,i,s){let a={arr:void 0,owner:n,key:r,pageStart:i,pageSize:s},o=await new $C(this,a).request(),{fields:u}=this.schema;for(let c of o)this.cacheFieldsInValue(c,u);return o}async loadArr(n,r,i){if(!(i===void 0||i===0))return await new zC(this,{arr:n,owner:r,id:i}).request()}async saveArr(n,r,i,s){return await new YC(this,{arr:n,owner:r,id:i,props:s}).request()}async posArr(n,r,i,s){return await new WC(this,{arr:n,owner:r,id:i,order:s}).request()}async no(){return await new HC(this,void 0).request()}}class Fn extends fs{get entity(){return this._entity}}class LC extends Fn{constructor(){super(...arguments);x(this,"method","GET")}get path(){return`tuid/${this.entity.name}/${this.params}`}}class qC extends Fn{get path(){let{divName:t}=this.params;return`tuidids/${this.entity.name}/${t!==void 0?t:"$"}`}buildParams(){return this.params.ids}xresult(t){return t.split(`
`)}}let UC=class extends Fn{get path(){return`tuid/${this.entity.name}`}buildParams(){let{fields:t,arrs:n}=this.entity.schema,{id:r,props:i}=this.params,s={$id:r};if(this.transParams(s,i,t),n!==void 0)for(let a of n){let o=a.name,u=[],c=a.fields,d=i[o];if(d!==void 0)for(let f of d){let m={};this.transParams(m,f,c),u.push(m)}s[o]=u}return s}transParams(t,n,r){if(n!==void 0)for(let i of r){let{name:s,tuid:a,type:o}=i,u=n[s];if(a!==void 0)typeof u=="object"&&u!==null&&(u=u.id);else switch(o){case"date":u=this.entity.buildDateParam(u);break;case"datetime":u=this.entity.buildDateTimeParam(u);break}t[s]=u}}};class $C extends Fn{get path(){return`tuids/${this.entity.name}`}}let VC=class extends Fn{constructor(){super(...arguments);x(this,"method","GET")}get path(){return`tuid-all/${this.entity.name}`}};class zC extends Fn{constructor(){super(...arguments);x(this,"method","GET")}get path(){let{arr:n,owner:r,id:i}=this.params;return`tuid-arr/${this.entity.name}/${r}/${n}/${i}`}}class BC extends Fn{get path(){return`tuid-prop/${this.entity.name}/`}}class YC extends Fn{get path(){let{arr:t,owner:n}=this.params;return`tuid-arr/${this.entity.name}/${n}/${t}/`}buildParams(){let{id:t,props:n}=this.params,r=Object.assign({},n);return r.$id=t,r}}class WC extends Fn{get path(){let{arr:t,owner:n}=this.params;return`tuid-arr-pos/${this.entity.name}/${n}/${t}/`}buildParams(){let{id:t,order:n}=this.params;return{bid:t,$order:n}}}class HC extends Fn{get path(){return`tuid-no/${this.entity.name}/`}buildParams(){let t=new Date,n=t.getFullYear(),r=t.getMonth()+1,i=t.getDate();return{year:n,month:r,date:i}}}class QC extends wo{constructor(n,r,i,s){super(n,r,i);x(this,"tuidLocal");x(this,"from");x(this,"isImport",!0);this.from=s}setFrom(n){this.tuidLocal=n}getObj(n){var r;return(r=this.tuidLocal)==null?void 0:r.getObj(n)}useId(n){var r;(r=this.tuidLocal)==null||r.useId(n)}boxId(n){var r;if(!this.tuidLocal)debugger;return(r=this.tuidLocal)==null?void 0:r.boxId(n)}valueFromId(n){var r;return(r=this.tuidLocal)==null?void 0:r.valueFromId(n)}resetCache(n){var r;(r=this.tuidLocal)==null||r.resetCache(n)}async assureBox(n){return await this.tuidLocal.assureBox(n),this.tuidLocal.valueFromId(n)}get hasDiv(){var n;return(n=this.tuidLocal)==null?void 0:n.hasDiv}div(n){var r;return(r=this.tuidLocal)==null?void 0:r.div(n)}async loadMain(n){return await this.tuidLocal.loadMain(n)}async load(n){return await this.tuidLocal.load(n)}async save(n,r){return await this.tuidLocal.save(n,r)}async saveProp(n,r,i){await this.tuidLocal.saveProp(n,r,i)}async all(){return await this.tuidLocal.all()}async search(n,r,i){return await this.tuidLocal.search(n,r,i)}async searchArr(n,r,i,s){return await this.tuidLocal.searchArr(n,r,i,s)}async loadArr(n,r,i){return await this.tuidLocal.loadArr(n,r,i)}async saveArr(n,r,i,s){await this.tuidLocal.saveArr(n,r,i,s)}async posArr(n,r,i,s){await this.tuidLocal.posArr(n,r,i,s)}async no(){return await this.tuidLocal.no()}}class Ex{constructor(t){x(this,"tuid");x(this,"ownerField");this.tuid=t}boxId(t){return this.tuid.boxId(t)}getIdFromObj(t){return this.tuid.getIdFromObj(t)}useId(t){return this.tuid.useId(t)}async showInfo(){alert("showInfo not implemented")}}class GC extends Dx{constructor(n,r,i){super(n,i,0);x(this,"typeName","div");x(this,"tuid");this.tuid=r,this.idName="id",this.idCache=new TC(r,this)}get owner(){return this.tuid}buildFieldsTuid(){super.buildFieldsTuid();let{mainFields:n}=this.schema;if(n===void 0)debugger;this.uq.buildFieldTuid(this.cacheFields=n)}buildTuidDivBox(n){return new KC(this.tuid,this,n)}getIdFromObj(n){return n[this.idName]}cacheValue(n){this.idCache.cacheValue(n)}useId(n,r){this.noCache!==!0&&this.idCache.useId(n,r)}valueFromId(n){return this.idCache.getValue(n)}async assureBox(n){return await this.idCache.assureObj(n),this.idCache.getValue(n)}async cacheIds(){await this.idCache.cacheIds()}cacheTuidFieldValues(n){let r=this.schema.fields;this.cacheFieldsInValue(n,r)}unpackTuidIds(n){return this.unpackTuidIdsOfFields(n,this.cacheFields)}}class KC extends Ex{constructor(n,r,i){super(n);x(this,"div");this.div=r,this.ownerField=i}boxId(n){return this.div.boxId(n)}getIdFromObj(n){return this.div.getIdFromObj(n)}useId(n){return this.div.useId(n)}}class XC{constructor(t){x(this,"uq");x(this,"modifyMax");x(this,"cacheTimer");x(this,"loadIds",()=>{this.clearCacheTimer();let{tuids:t}=this.uq;for(let n in t)t[n].cacheIds()});this.uq=t}cacheTuids(t){this.clearCacheTimer(),this.cacheTimer=setTimeout(this.loadIds,t)}clearCacheTimer(){this.cacheTimer!==void 0&&(clearTimeout(this.cacheTimer),this.cacheTimer=void 0)}pullModify(t){if(t===void 0)return;let n=Math.floor(Date.now()/1e3);this.modifyMax===void 0&&(this.modifyMax=this.uq.localModifyMax.get(),this.modifyMax===void 0&&(this.modifyMax={max:t,seconds:n},this.uq.localModifyMax.set(this.modifyMax)));let{max:r,seconds:i}=this.modifyMax,s=3600;if(n-i<s||t<=r)return;let a=[],{tuids:o}=this.uq;for(let u in o)a.push(u);a.length!==0&&(this.modifyMax.seconds=n,this.innerPullModify(a.join("	")))}async innerPullModify(t){let{uqApi:n,tuids:r}=this.uq,{max:i}=this.modifyMax,s=await n.queueModify(i,30,t),a={},o=0;for(let c of s.queue){let{id:d,entity:f,key:m}=c;if(!m)continue;let v=r[f];if(v===void 0)continue;let y=a[f];y===void 0&&(y=a[f]={tuid:v,ids:[]}),y.ids.push(m),d>o&&(o=d)}for(let c in a){let{tuid:d,ids:f}=a[c];await d.modifyIds(f)}let u=Math.floor(Date.now()/1e3);this.modifyMax={max:o,seconds:u},this.uq.localModifyMax.set(this.modifyMax)}}class ZC extends yi{get typeName(){return"action"}async submit(t,n=void 0,r=!0){return await(this.schema.jsoned===!0?new e_(this,t,n,r):new Ea(this,t,n,r)).request()}async submitReturns(t,n=void 0){return await new t_(this,t,n).request()}async submitConvert(t,n=void 0){return await new n_(this,t,n).request()}}class JC extends ZC{}class Ea extends _x{get path(){return"action/"+this.entity.name}buildParams(){return{$$user:this.$$user,data:this.entity.pack(this.params)}}}class e_ extends _x{get path(){return"action/"+this.entity.name}buildParams(){return{$$user:this.$$user,data:this.entity.packJson(this.params)}}}class t_ extends Ea{get path(){return"action/"+this.entity.name+"/returns"}xresult(t){let{returns:n}=this.entity,r=n.length,i={};for(let s=0;s<r;s++){let a=n[s];i[a.name]=t[s]}return i}}class n_ extends Ea{get path(){return"action-convert/"+this.entity.name}buildParams(){return{$$user:this.$$user,data:this.params}}}class r_ extends yi{constructor(){super(...arguments);x(this,"states");x(this,"verify")}get typeName(){return"sheet"}setSchema(n){super.setSchema(n),this.states=n.states,this.verify=n.verify}build(n){this.states=[];for(let r of n.ops)this.states.push({name:r,actions:void 0})}createSheetState(n,r){let i={name:n,actions:[]},s=i.actions;for(let a in r){let o={name:a};s.push(o)}return i}async save(n,r){let{id:i}=this.uq,s={app:i,discription:n,data:r};return await new Ix(this,s).request()}async saveDebugDirect(n,r){let{id:i}=this.uq,s={app:i,discription:n,data:r};return await new s_(this,s).request()}async action(n,r,i,s){return await new Px(this,{id:n,flow:r,state:i,action:s}).request()}async actionDebugDirect(n,r,i,s){return await new a_(this,{id:n,flow:r,state:i,action:s}).request()}unpack(n){let i=n[0][0],s=this.unpackSheet(i.data),a=n[1];return{brief:i,data:s,flows:a}}async getSheet(n){let r=await new l_(this,n).request();return r[0].length===0?await this.getArchive(n):this.unpack(r)}async getArchive(n){let r=await new o_(this,n).request();return this.unpack(r)}async getArchives(n,r){let i={pageStart:n,pageSize:r};return await new u_(this,i).request()}async getStateSheets(n,r,i){let s={state:n,pageStart:r,pageSize:i};return await new c_(this,s).request()}async stateSheetCount(){return await new d_(this,void 0).request()}async userSheets(n,r,i,s){let a={state:n,user:r,pageStart:i,pageSize:s};return await new f_(this,a).request()}async mySheets(n,r,i){let s={state:n,pageStart:r,pageSize:i};return await new h_(this,s).request()}}class i_ extends r_{}class or extends fs{constructor(){super(...arguments);x(this,"suffix")}get entity(){return this._entity}get path(){return`sheet/${this.entity.name}/${this.suffix}`}}class Ix extends or{get path(){return`sheet/${this.entity.name}`}buildParams(){let{app:t,discription:n,data:r}=this.params;return{app:t,discription:n,data:this.entity.pack(r)}}xresult(t){let{verify:n}=this.entity;if(n===void 0)return t;let r=t.verify;if(r===void 0||r.length===0)return t.verify=void 0,t;let{returns:i}=n;return t.verify=this.entity.unpackReturns(r,i),t}}class s_ extends Ix{get path(){return`sheet/${this.entity.name}/direct`}}class Px extends or{constructor(){super(...arguments);x(this,"method","PUT")}get path(){return`sheet/${this.entity.name}`}}class a_ extends Px{get path(){return`sheet/${this.entity.name}/direct`}}class l_ extends or{constructor(){super(...arguments);x(this,"method","GET")}buildParams(){}get path(){return`sheet/${this.entity.name}/get/${this.params}`}}class o_ extends or{constructor(){super(...arguments);x(this,"method","GET")}buildParams(){}get path(){return`sheet/${this.entity.name}/archive/${this.params}`}}class u_ extends or{constructor(){super(...arguments);x(this,"suffix","archives")}}class c_ extends or{constructor(){super(...arguments);x(this,"suffix","states")}}class d_ extends or{constructor(){super(...arguments);x(this,"method","GET");x(this,"suffix","statecount")}xresult(n){let{states:r}=this.entity;return r.map(i=>{let s=i.name,a=0,o=n.find(u=>u.state===s);return o!==void 0&&(a=o.count),{state:s,count:a}})}}class f_ extends or{constructor(){super(...arguments);x(this,"suffix","user-sheets")}xresult(n){return n}}class h_ extends or{constructor(){super(...arguments);x(this,"suffix","my-sheets")}xresult(n){return n}}class iu extends yi{constructor(){super(...arguments);x(this,"isPaged");x(this,"order")}get typeName(){return"query"}setSchema(n){super.setSchema(n);let{returns:r,order:i}=n;this.returns=r,this.order=i??"asc",this.isPaged=r&&r.find(s=>s.name==="$page")!==void 0}pageCaller(n,r=void 0,i=!0){return new Yf(this,n,r,i)}async page(n,r,i,s=void 0,a=!0){let o={pageStart:r,pageSize:i,params:n};return await this.pageCaller(o,s,a).request()}queryCaller(n,r=void 0,i=!0){return new Bf(this,n,r,i)}async query(n,r=void 0,i=!0){return await this.queryCaller(n,r,i).request()}async table(n,r=void 0,i=!0){let s=await this.query(n,r,i);for(let a in s)return s[a]}async obj(n,r=void 0,i=!0){let s=await this.table(n,r,i);if(s.length>0)return s[0]}async scalar(n,r=void 0,i=!0){let s=await this.obj(n,r,i);for(let a in s)return s[a]}}class m_ extends iu{}class p_ extends iu{constructor(){super(...arguments);x(this,"queryApiName","book")}get typeName(){return"book"}queryCaller(n){return new v_(this,n)}}class y_ extends p_{}class v_ extends Bf{get path(){return`book/${this.entity.name}`}}class g_ extends iu{constructor(){super(...arguments);x(this,"queryApiName","history")}get typeName(){return"history"}}class x_ extends g_{}class w_ extends yi{constructor(){super(...arguments);x(this,"keys");x(this,"actions",{});x(this,"queries",{});x(this,"schemaFrom")}get typeName(){return"map"}setSchema(n){super.setSchema(n),this.schemaFrom=this.schema.from;let{actions:r,queries:i,keys:s}=n;this.uq.buildFieldTuid(this.keys=s);for(let a in r){let o=r[a],{name:u}=o;if(u===void 0)continue;let c=this.uq.newAction(u,void 0);c.setSchema(o),c.buildFieldsTuid(),this.actions[a]=c}for(let a in i){let o=i[a],{name:u}=o;if(u===void 0)continue;let c=this.uq.newQuery(u,void 0);c.setSchema(o),c.buildFieldsTuid(),this.queries[a]=c}}async add(n){return await new S_(this,n).request()}async del(n){return await new j_(this,n).request()}async all(){return await new k_(this,void 0).request()}async page(n,r,i){return await new C_(this,{pageStart:r,pageSize:i,param:n}).request()}async query(n){return await new __(this,n).request()}async table(n){let r=await this.query(n);for(let i in r)return r[i]}async obj(n){let r=await this.table(n);if(r.length>0)return r[0]}async scalar(n){let r=await this.obj(n);for(let i in r)return r[i]}}let b_=class extends w_{};class Ia extends fs{get entity(){return this._entity}get path(){}async innerCall(){let t=this.getCaller(this.params),n=await this.entity.uqApi.xcall(t);return{res:t.xresult(n.res)}}buildParams(){return super.buildParams()}}class S_ extends Ia{getCaller(t){return new N_(this.entity,this.entity.actions.add,t)}}class j_ extends Ia{getCaller(t){return new D_(this.entity,this.entity.actions.add,t)}}class k_ extends Ia{getCaller(t){return new E_(this.entity,this.entity.queries.all,t)}}class C_ extends Ia{getCaller(t){return new I_(this.entity,this.entity.queries.page,t)}}class __ extends Ia{getCaller(t){return new P_(this.entity,this.entity.queries.query,t)}}class N_ extends Ea{constructor(n,r,i){super(r,i);x(this,"map");this.map=n}get path(){return`map/${this.map.name}/add`}get headers(){}}class D_ extends Ea{constructor(n,r,i){super(r,i);x(this,"map");this.map=n}get path(){return`map/${this.map.name}/del`}get headers(){}}class E_ extends Yf{constructor(n,r,i){super(r,i);x(this,"map");this.map=n}get path(){return`map/${this.map.name}/all`}get headers(){}}class I_ extends Yf{constructor(n,r,i){super(r,i);x(this,"map");this.map=n}get path(){return`map/${this.map.name}/page`}get headers(){}}class P_ extends Bf{constructor(n,r,i){super(r,i);x(this,"map");this.map=n}get path(){return`map/${this.map.name}/query`}get headers(){}}class A_ extends iu{constructor(){super(...arguments);x(this,"queryApiName","pending")}get typeName(){return"pending"}}class O_ extends A_{}class M_ extends yi{get typeName(){return"enum"}}class Wf extends yi{constructor(){super(...arguments);x(this,"permitRole")}setPermitRole(n){this.permitRole=n}}class F_ extends Wf{constructor(){super(...arguments);x(this,"create");x(this,"update");x(this,"owner");x(this,"keys")}get typeName(){return"id"}async NO(){return await this.uqApi.post("id-no",{ID:this.name})}setKeys(){this.keys=this.schema.keys}get isGlobal(){return this.schema.global}getIdFromObj(n){return n.id}valueFromString(n){if(!n)return;let r={};return this.unpackRow(r,this.fields,n,0,12),r}cacheTuids(n){}async valueFromId(n){return(await this.uq.QueryID({ID:this,id:[n]}))[0]}async loadValuesFromIds(n,r){return await this.uq.QueryID({IDX:[this],id:r})}cacheTuidFieldValues(n){}unpackTuidIds(n){}unpackJoins(n,r){let i={};i=this.unpackStr(n==null?void 0:n.value,this.fields,void 0);let s=[],a=0,o=this.schema.joins;for(let u of o){let{ID:c,field:d}=u,f=this.uq.entities[c],{fields:m}=f,v=m.find(w=>w.name===d),y=r[a];s.push([c,y.map(w=>this.unpackStr(w.value,m,v))]),++a}return[[this.name,i],s]}unpackStr(n,r,i){let s={},a=0,o=0,u=a,c=0,d=n.length,f=r.length,m=12;const v=()=>{let y=r[c];y===i&&(++c,y=r[c]);let{name:w}=y;if(a>u){let j=n.substring(u,a);s[w]=this.to(s,j,y)}};for(;a<d&&(o=n.charCodeAt(a),!(o===m&&(v(),u=a+1,++c,c>=f)));a++);return v(),s}}class T_ extends F_{}class R_ extends Wf{get typeName(){return"idx"}}class L_ extends R_{}class q_ extends Wf{get typeName(){return"ix"}}class U_ extends q_{}class $_{constructor(t,n,r){x(this,"entities",{});x(this,"entityTypes",{});x(this,"enums",{});x(this,"actions",{});x(this,"queries",{});x(this,"ids",{});x(this,"idxs",{});x(this,"ixs",{});x(this,"sheets",{});x(this,"books",{});x(this,"maps",{});x(this,"histories",{});x(this,"pendings",{});x(this,"tuidsCache");x(this,"localEntities");x(this,"localMap");x(this,"localModifyMax");x(this,"tuids",{});x(this,"newVersion");x(this,"uqOwner");x(this,"uqName");x(this,"uqSchema");x(this,"name");x(this,"id");x(this,"net");x(this,"uqApi");x(this,"baseUrl","tv/");x(this,"unit");x(this,"proxy");x(this,"$proxy");x(this,"uqVersion");x(this,"config");x(this,"roles");x(this,"Role");x(this,"tuidArr",[]);x(this,"actionArr",[]);x(this,"queryArr",[]);x(this,"idArr",[]);x(this,"idxArr",[]);x(this,"ixArr",[]);x(this,"enumArr",[]);x(this,"sheetArr",[]);x(this,"bookArr",[]);x(this,"mapArr",[]);x(this,"historyArr",[]);x(this,"pendingArr",[]);x(this,"Biz",async(t,n)=>{await this.uqApi.bizSheet(t,n)});x(this,"BizSheetAct",async(t,n,r)=>await this.uqApi.bizSheetAct(t,n,r));x(this,"Acts",async t=>{let r=(await this.apiActs(t,0))[0].ret.split(`
`),i=[];for(let a in t)i.push(a);let s={};for(let a=0;a<i.length;a++)s[i[a]]=Ns(r[a].split("	"));return s});x(this,"AdminGetList",async()=>await this.uqApi.getAdmins());x(this,"AdminSetMe",async()=>await this.uqApi.setMeAdmin());x(this,"AdminSet",async(t,n,r)=>await this.uqApi.setAdmin(t,n,r));x(this,"AdminIsMe",async()=>await this.uqApi.isAdmin());x(this,"IDValue",(t,n)=>{if(!t)return;let r=this.ids[t.toLowerCase()];if(r!==void 0)return r.valueFromString(n)});x(this,"$Acts",async t=>await this.apiActs(t,1));x(this,"ActIX",async t=>(await this.apiActIX(t,0))[0].ret.trim().split("	").map(a=>Number(a)));x(this,"$ActIX",async t=>await this.apiActIX(t,1));x(this,"ActIXSort",async t=>await this.apiActIxSort(t,0));x(this,"$ActIXSort",async t=>await this.apiActIxSort(t,1));x(this,"ActIDProp",async(t,n,r,i)=>{await this.uqApi.post("act-id-prop",{ID:t.name,id:n,name:r,value:i})});x(this,"ActID",async t=>{let r=(await this.apiActID(t,0))[0].ret.split("	").map(i=>Number(i))[0];if(isNaN(r)!==!0)return r});x(this,"$ActID",async t=>await this.apiActID(t,1));x(this,"ActDetail",async t=>{let n=await this.apiActDetail(t,0),s=n[0].ret.split(`
`).map(a=>a.split("	"));return n={main:Ns(s[0])[0],detail:Ns(s[1]),detail2:Ns(s[2]),detail3:Ns(s[3])},n});x(this,"$ActDetail",async t=>await this.apiActDetail(t,1));x(this,"QueryID",async t=>await this.apiQueryID(t,0));x(this,"$QueryID",async t=>await this.apiQueryID(t,1));x(this,"IDTv",async t=>{let n=await this.apiIDTv(t,0),r=[];for(let i of n){let{$type:s,$tv:a}=i;if(!a)continue;let o=this.ids[s];if(!o)continue;let{schema:u}=o;u||(await o.loadSchema(),u=o.schema);let{nameNoVice:c}=u;if(!c)continue;let d=a.split(`
`),f=c.length;for(let m=0;m<f;m++){let v=c[m];i[v]=d[m]}delete i.$tv,r.push(i)}return r});x(this,"$IDTv",async t=>await this.apiIDTv(t,1));x(this,"IDNO",async t=>{var r;return(r=(await this.apiIDNO(t,0))[0])==null?void 0:r.no});x(this,"IDEntity",t=>this.entityTypes[t]);x(this,"IDFromName",t=>this.ids[t]);x(this,"$IDNO",async t=>await this.apiIDNO(t,1));x(this,"IDDetailGet",async t=>await this.apiIDDetailGet(t,0));x(this,"$IDDetailGet",async t=>await this.apiIDDetailGet(t,1));x(this,"cache",{});x(this,"cachePromise",{});x(this,"idCache",t=>this.cache[t]);x(this,"idObj",async t=>{let n=this.cache[t];if(n===void 0){let r=this.cachePromise[t];r===void 0&&(r=this.apiID({id:t,IDX:void 0},0),this.cachePromise[t]=r);let i;try{i=await r}catch(s){console.error(s)}if(i!==void 0){n=i[0],this.cache[t]=n===void 0?null:n;let s=i.length;for(let a=1;a<s;a++){let o=i[a],{id:u}=o===void 0?null:o;this.cache[u]=o}}else this.cache[t]=null;delete this.cachePromise[t]}return n});x(this,"idJoins",async t=>{let n=await this.apiPost("id-joins",0,{id:t}),r=n.shift(),i=r==null?void 0:r[0];if(i===void 0)throw new Error("id-joins return no value");let{ID:s}=i,a=this.IDFromName(s),o=n,[u,c]=a.unpackJoins(i,o);return{ID:a,main:u,joins:c}});x(this,"ID",async t=>await this.apiID(t,0));x(this,"$ID",async t=>await this.apiID(t,1));x(this,"KeyID",async t=>await this.apiKeyID(t,0));x(this,"$KeyID",async t=>await this.apiKeyID(t,1));x(this,"IX",async t=>await this.apiIX(t,0));x(this,"$IX",async t=>await this.apiIX(t,1));x(this,"IXValues",async t=>await this.apiIXValues(t,0));x(this,"IXr",async t=>await this.apiIXr(t,0));x(this,"$IXr",async t=>await this.apiIXr(t,1));x(this,"KeyIX",async t=>await this.apiKeyIX(t,0));x(this,"$KeyIX",async t=>await this.apiKeyIX(t,1));x(this,"IDLog",async t=>await this.apiIDLog(t,0));x(this,"$IDLog",async t=>await this.apiIDLog(t,1));x(this,"IDSum",async t=>await this.apiIDSum(t,0));x(this,"$IDSum",async t=>await this.apiIDSum(t,1));x(this,"IDinIX",async t=>await this.apiIDinIX(t,0));x(this,"$IDinIX",async t=>await this.apiIDinIX(t,1));x(this,"IDxID",async t=>await this.apiIDxID(t,0));x(this,"$IDxID",async t=>await this.apiIDxID(t,1));x(this,"IDTree",async t=>await this.apiIDTree(t,0));x(this,"$IDTree",async t=>await this.apiIDTree(t,1));this.net=t,this.unit=0;let{id:i,uqOwner:s,uqName:a,newVersion:o}=n;this.newVersion=o,this.uqOwner=s,this.uqName=a,this.uqSchema=r,this.id=i,this.name=s+"/"+a,this.uqVersion=0,this.localMap=t.createLocalMap(this.name),this.localModifyMax=this.localMap.child("$modifyMax"),this.localEntities=this.localMap.child("$access"),this.tuidsCache=new XC(this),this.uqApi=new uC(this)}getID(t){return this.ids[t.toLowerCase()]}getIDX(t){return this.idxs[t.toLowerCase()]}getIX(t){return this.ixs[t.toLowerCase()]}clearLocalEntites(){this.localMap.removeItem(this.name)}async getRoles(){return this.roles!==void 0?this.roles:(this.roles=await this.uqApi.getRoles(),this.roles)}tuid(t){return this.tuids[t.toLowerCase()]}tuidDiv(t,n){let r=this.tuids[t.toLowerCase()];return r&&r.div(n.toLowerCase())}action(t){return this.actions[t.toLowerCase()]}sheet(t){return this.sheets[t.toLowerCase()]}query(t){return this.queries[t.toLowerCase()]}book(t){return this.books[t.toLowerCase()]}map(t){return this.maps[t.toLowerCase()]}history(t){return this.histories[t.toLowerCase()]}pending(t){return this.pendings[t.toLowerCase()]}sheetFromTypeId(t){for(let n in this.sheets){let r=this.sheets[n];if(r.typeId===t)return r}}buildEntities(){this.buildEntityFromUqSchema()}buildEntityFromUqSchema(){for(let t in this.uqSchema){let n=this.uqSchema[t],{name:r,type:i}=n;if(r===void 0||i===void 0)continue;let s=this.fromType(r,i);s!==void 0&&s.buildSchema(n)}}buildRole(t){if(t===void 0)return;let n={};for(let r in t){let i=t[r];r!=="$"&&(i=i.map(s=>`${r}.${s}`)),n[r]=i}return n}buildTuids(t){for(let n in t){let r=t[n],{typeId:i,from:s}=r,a=this.newTuid(n,i,s);a.sys=!0}for(let n in t){let r=t[n];this.getTuid(n).setSchema(r)}for(let n in this.tuids)this.tuids[n].buildFieldsTuid()}buildIds(t){for(let n in t){let r=t[n],{typeId:i}=r;this.newID(n,i).setSchema(r)}}async loadEntitySchema(t){return await this.uqApi.schema(t)}async loadAllSchemas(){let t=await this.uqApi.allSchemas();[this.actionArr,this.enumArr,this.sheetArr,this.queryArr,this.bookArr,this.mapArr,this.historyArr,this.pendingArr,this.idArr,this.idxArr,this.ixArr].forEach(r=>{r.forEach(i=>{let s=t[i.name.toLowerCase()];if(!s)return;let a=s.call;a&&i.buildSchema(a)})})}getTuid(t){return this.tuids[t]}buildAccess(t){for(let n in t){let r=t[n];switch(typeof r){case"string":this.fromType(n,r);break;case"object":this.fromObj(n,r);break}}}cacheTuids(t){this.tuidsCache.cacheTuids(t)}setEntity(t,n){this.entities[t]=n,this.entities[t.toLowerCase()]=n,this.entityTypes[n.typeId]=n}newEnum(t,n){let r=this.enums[t];return r!==void 0||(r=this.enums[t]=new M_(this,t,n),this.setEntity(t,r),this.enumArr.push(r)),r}newAction(t,n){let r=this.actions[t];return r!==void 0||(r=this.actions[t]=new JC(this,t,n),this.setEntity(t,r),this.actionArr.push(r)),r}newTuid(t,n,r){let i=this.tuids[t];return i!==void 0||(r!==void 0?i=new QC(this,t,n,r):i=new Dx(this,t,n),this.tuids[t]=i,this.setEntity(t,i),this.tuidArr.push(i)),i}newQuery(t,n){let r=this.queries[t];return r!==void 0||(r=this.queries[t]=new m_(this,t,n),this.setEntity(t,r),this.queryArr.push(r)),r}newBook(t,n){let r=this.books[t];return r!==void 0||(r=this.books[t]=new y_(this,t,n),this.setEntity(t,r),this.bookArr.push(r)),r}newMap(t,n){let r=this.maps[t];return r!==void 0||(r=this.maps[t]=new b_(this,t,n),this.setEntity(t,r),this.mapArr.push(r)),r}newHistory(t,n){let r=this.histories[t];if(r===void 0)return r=this.histories[t]=new x_(this,t,n),this.setEntity(t,r),this.historyArr.push(r),r}newPending(t,n){let r=this.pendings[t];if(r===void 0)return r=this.pendings[t]=new O_(this,t,n),this.setEntity(t,r),this.pendingArr.push(r),r}newSheet(t,n){let r=this.sheets[t];return r!==void 0||(r=this.sheets[t]=new i_(this,t,n),this.setEntity(t,r),this.sheetArr.push(r)),r}newID(t,n){let r=t.toLowerCase(),i=this.ids[r];return i!==void 0||(i=this.ids[r]=new T_(this,t,n),this.setEntity(t,i),this.idArr.push(i)),i}newIDX(t,n){let r=t.toLowerCase(),i=this.idxs[r];return i!==void 0||(i=this.idxs[r]=new L_(this,t,n),this.setEntity(t,i),this.idxArr.push(i)),i}newIX(t,n){let r=t.toLowerCase(),i=this.ixs[r];return i!==void 0||(i=this.ixs[r]=new U_(this,t,n),this.setEntity(t,i),this.ixArr.push(i)),i}fromType(t,n){let r=n.split("|");n=r[0];let i=Number(r[1]);switch(n){default:break;case"tuid":break;case"id":return this.newID(t,i);case"idx":return this.newIDX(t,i);case"ix":return this.newIX(t,i);case"action":return this.newAction(t,i);case"query":return this.newQuery(t,i);case"book":return this.newBook(t,i);case"map":return this.newMap(t,i);case"history":return this.newHistory(t,i);case"sheet":return this.newSheet(t,i);case"pending":return this.newPending(t,i);case"enum":return this.newEnum(t,i)}}fromObj(t,n){switch(n.$){case"sheet":this.buildSheet(t,n);break}}buildSheet(t,n){let r=this.sheets[t];r===void 0&&(r=this.newSheet(t,n.id)),r.build(n)}buildFieldTuid(t,n){var r;if(t!==void 0){for(let i of t){let{tuid:s}=i;if(s===void 0)continue;let a=this.getTuid(s);a!==void 0&&(i._tuid=a.buildTuidBox())}for(let i of t){let{owner:s}=i;if(s===void 0)continue;let a=t.find(f=>f.name===s);if(a===void 0&&(n!==void 0&&(a=n.find(f=>f.name===s)),a===void 0)){debugger;throw new Error(`owner field ${s} is undefined`)}let{arr:o,tuid:u}=i,c=this.getTuid((r=a._tuid)==null?void 0:r.tuid.name);if(c===void 0)continue;let d=c.div(o||u);i._tuid=d&&d.buildTuidDivBox(a)}}}buildArrFieldsTuid(t,n){if(t!==void 0)for(let r of t){let{fields:i}=r;i!==void 0&&this.buildFieldTuid(i,n)}}pullModify(t){this.tuidsCache.pullModify(t)}getUqKey(){return this.uqName.split(/[-._]/).join("").toLowerCase()}getUqKeyWithConfig(){if(!this.config)return;let t=this.uqName.split(/[-._]/).join("").toLowerCase(),{dev:n,alias:r}=this.config;return t=Ap(n.alias||n.name)+Ap(r??t),t}hasEntity(t){return this.entities[t]!==void 0||this.entities[t.toLowerCase()]!==void 0}async apiPost(t,n,r){return n===1&&(t="sql-"+t),await this.uqApi.post(t,r)}async apiActs(t,n){let r=[],i={};for(let a in t)r.push(a),i[a]=t[a].map(o=>this.buildValue(o));return i.$=r,await this.apiPost("acts",n,i)}buildValue(t){if(!t)return t;let n={};for(let r in t){let i=t[r];if(r==="ID")switch(typeof i){case"object":i=i.name;break}else if(r==="time")i&&Object.prototype.toString.call(i)==="[object Date]"&&(i=i.getTime());else if(typeof i=="object"){let s=i.id;s===void 0?i=this.buildValue(i):i=s}n[r]=i}return n}async apiActIX(t,n){let{IX:r,ID:i,values:s,IXs:a}=t,o={IX:he(r),ID:he(i),IXs:a==null?void 0:a.map(c=>({IX:he(c.IX),ix:c.ix})),values:s==null?void 0:s.map(c=>this.buildValue(c))};return await this.apiPost("act-ix",n,o)}async apiActIxSort(t,n){let{IX:r,ix:i,id:s,after:a}=t,o={IX:he(r),ix:i,id:s,after:a};return await this.apiPost("act-ix-sort",n,o)}async apiActID(t,n){let{ID:r,value:i,IX:s,ix:a}=t,o={ID:he(r),value:this.buildValue(i),IX:s==null?void 0:s.map(u=>he(u)),ix:a==null?void 0:a.map(u=>this.buildValue(u))};return await this.apiPost("act-id",n,o)}async apiActDetail(t,n){var u,c,d;let{main:r,detail:i,detail2:s,detail3:a}=t,o={main:{name:he(r.ID),value:fl(r.value)},detail:{name:he(i.ID),values:(u=i.values)==null?void 0:u.map(f=>fl(f))}};s&&(o.detail2={name:he(s.ID),values:(c=s.values)==null?void 0:c.map(f=>fl(f))}),a&&(o.detail3={name:he(a.ID),values:(d=a.values)==null?void 0:d.map(f=>fl(f))}),await this.apiPost("act-detail",n,o)}async apiQueryID(t,n){let{ID:r,IX:i,IDX:s}=t;return s||(s=[r]),await this.apiPost("query-id",n,{...t,ID:he(r),IX:i==null?void 0:i.map(o=>he(o)),IDX:this.IDXToString(s)})}async apiIDTv(t,n){return await this.apiPost("id-tv",n,t)}async syncUser(t){return await this.uqApi.syncUser(t)}async apiIDNO(t,n){let{ID:r,stamp:i}=t;return await this.apiPost("id-no",n,{ID:he(r),stamp:i})}async apiIDDetailGet(t,n){let{id:r,main:i,detail:s,detail2:a,detail3:o}=t;return await this.apiPost("id-detail-get",n,{id:r,main:he(i),detail:he(s),detail2:he(a),detail3:he(o)})}IDXToString(t){return Array.isArray(t)===!0?t.map(n=>he(n)):he(t)}async apiID(t,n){let{IDX:r}=t,i={...t,IDX:this.IDXToString(r)};return await this.apiPost("id",n,i)}idCacheDel(t){delete this.cache[t]}async apiKeyID(t,n){let{ID:r,IDX:i}=t;return await this.apiPost("key-id",n,{...t,ID:he(r),IDX:i==null?void 0:i.map(a=>he(a))})}async apiIX(t,n){let{IX:r,IX1:i,IDX:s}=t;return await this.apiPost("ix",n,{...t,IX:he(r),IX1:he(i),IDX:s==null?void 0:s.map(o=>he(o))})}async apiIXValues(t,n){let{IX:r}=t;return await this.apiPost("ix-values",n,{...t,IX:he(r)})}async apiIXr(t,n){let{IX:r,IX1:i,IDX:s}=t;return await this.apiPost("ixr",n,{...t,IX:he(r),IX1:he(i),IDX:s==null?void 0:s.map(o=>he(o))})}async apiKeyIX(t,n){let{ID:r,IX:i,IDX:s}=t;return await this.apiPost("key-ix",n,{...t,ID:he(r),IX:he(i),IDX:s==null?void 0:s.map(o=>he(o))})}async apiIDLog(t,n){let{IDX:r}=t;return await this.apiPost("id-log",n,{...t,IDX:he(r)})}async apiIDSum(t,n){let{IDX:r}=t;return await this.apiPost("id-sum",n,{...t,IDX:he(r)})}async apiIDinIX(t,n){let{ID:r,IX:i}=t;return await this.apiPost("id-in-ix",n,{...t,ID:he(r),IX:he(i)})}async apiIDxID(t,n){let{ID:r,IX:i,ID2:s}=t;return await this.apiPost("id-x-id",n,{...t,ID:he(r),IX:he(i),ID2:he(s)})}async apiIDTree(t,n){let{ID:r}=t;return await this.apiPost("id-tree",n,{...t,ID:he(r)})}}function Ns(e){if(!e)return;let t=e.length;if(t<=1)return;let n=[];for(let r=0;r<t-1;r++)n.push(Number(e[r]));return n}function he(e){if(e)return typeof e=="string"?e:e.name}function fl(e){if(!e)return e;let t={};for(let n in e){let r=e[n];typeof r=="object"&&(r=r.id),t[n]=r}return t}class V_{constructor(t,n){x(this,"net");x(this,"uqsSchema");x(this,"collection");x(this,"uqMans",[]);this.net=t,this.uqsSchema=n,this.uqMans=[],this.collection={}}buildUqs(t,n,r,i){this.init(t);let a=this.net.createLocalMap("$app").child("version"),o=a.get();if(n!==o){for(let u of this.uqMans)u.localMap.removeAll();a.set(n)}if(this.buildUqEntities(),r)for(let u of r){let{dev:c,name:d,alias:f}=u,{name:m,alias:v}=c,y=(v??m).toLowerCase()+"/"+(f??d).toLowerCase(),w=this.collection[y];w.config=u}}uq(t){return this.collection[t.toLowerCase()]}async getUqUserRoles(t){let n=this.collection[t];return n===void 0?null:await n.getRoles()}init(t){for(let n of t){let{uqOwner:r,ownerAlias:i,uqName:s,uqAlias:a}=n,o=r+"/"+s,u=this.collection[o],c;if(u)c=u;else{let f=this.uqsSchema[o];c=new $_(this.net,n,f),this.collection[o]=c}this.uqMans.push(c);let d=o.toLowerCase();this.collection[d]=c,a&&(s=a),i&&(r=i),o=r+"/"+s,d=o.toLowerCase(),this.collection[d]=c}}buildUqEntities(){for(let t of this.uqMans)t.buildEntities()}getUqMans(){return this.uqMans}setTuidImportsLocal(){let t=[];for(let n of this.uqMans)for(let r of n.tuidArr)if(r.isImport===!0){let i=this.setInner(r);i&&t.push(i)}return t}setInner(t){let{from:n}=t,r=n.owner+"/"+n.uq,i=this.collection[r];if(i===void 0)return;let s=t.name,a=i.tuid(s);if(a===void 0)return`setInner(tuidImport: TuidImport): uq ${r} has no Tuid ${s}`;if(a.isImport===!0)return`setInner(tuidImport: TuidImport): uq ${r} Tuid ${s} is import`;t.setFrom(a)}}const z_="uq-data-local-storage";class B_{constructor(t,n,r,i){x(this,"net");x(this,"uqConfigVersion");x(this,"uqConfigs");x(this,"uqsSchema");x(this,"isBuildingUQ",!1);x(this,"uqsMan");this.net=t,this.uqConfigVersion=n,this.uqConfigs=r,this.uqsSchema=i}async build(){return await this.loadUqs()}async loadUqs(){this.uqsMan=new V_(this.net,this.uqsSchema);let t=await this.loadUqData(this.uqConfigs);this.uqsMan.buildUqs(t,this.uqConfigVersion,this.uqConfigs,this.isBuildingUQ)}async loadUqData(t){return t.map(i=>{let{dev:s,name:a,version:o,alias:u}=i,{name:c,alias:d}=s;return{owner:c,ownerAlias:d,name:a,version:o,alias:u}}).map(i=>{let{name:s,alias:a,owner:o,ownerAlias:u}=i,c;return c={id:void 0,uqName:s,uqAlias:a,uqOwner:o,ownerAlias:u,access:void 0,newVersion:void 0},c})}loadLocal(t){let n=this.net.getLocalDbItem(z_);if(n)try{let r=JSON.parse(n);for(let i of t){let{owner:s,name:a}=i;if(r.findIndex(u=>{let{uqOwner:c,uqName:d}=u;return s.toLowerCase()===c.toLowerCase()&&a.toLowerCase()===d.toLowerCase()})<0)return}return r}catch{return}}}async function Y_(e,t,n,r){let i=new B_(e,t,n,r);return await i.build(),i.uqsMan}var Xn=(e=>(e[e.user=0]="user",e[e.admin=1]="admin",e[e.owner=2]="owner",e))(Xn||{});class W_{constructor(t){x(this,"uqMan");x(this,"mySitesColl");x(this,"userSite0");x(this,"mySites");x(this,"userSite");this.uqMan=t}async login(){await this.loadMyRoles()}loginUnit(t){this.userSite=t}logoutUnit(){this.userSite=void 0}hasRole(t){if(this.userSite===void 0)return!1;let{rolesAtom:n,isAdmin:r}=this.userSite;if(r===!0)return!0;if(n===void 0)return!1;let i=fe(n);if(Array.isArray(t)===!0){let s=t;for(let a of s)if(i.indexOf(a)>=0===!0)return!0;return!1}else return i.indexOf(t)>=0}async Poked(){let r=(await this.uqMan.entities.$poked.query({})).ret;return r.length===0?!1:r[0].poke===1}async reloadMyRoles(){this.mySitesColl=void 0,await this.loadMyRoles()}async setSite(t){await this.uqMan.entities.$setsite.submit({site:t}),await this.reloadMyRoles()}async loadMyRoles(){if(this.mySitesColl!==void 0)return;this.mySites=[],this.mySitesColl={};let n=await this.uqMan.entities.$role_my.query({}),{sites:r,roles:i,permits:s}=n;const a=u=>{let c=this.mySitesColl[u];return c===void 0&&(c={site:u,rolesAtom:Ae([]),permits:{}},this.mySitesColl[u]=c,u!==0?this.mySites.push(c):this.userSite0=c),c};let o;for(let u of r){let{id:c,site:d,admin:f,entity:m,assigned:v,def:y}=u,w=a(d);w.id=c,w.siteId=d,w.isAdmin=(f&1)===1,w.isOwner=(f&2)===2,w.entity=m,w.assigned=v,o===void 0&&w!==this.userSite0&&(o=w),y===1&&(o=w)}if(this.userSite=o,o!==void 0){let u=this.mySites.findIndex(c=>c===o);u>=0&&(this.mySites.splice(u,1),this.mySites.unshift(o))}for(let u of i){let{site:c,role:d}=u,f=a(c),{rolesAtom:m}=f,v=fe(m);v===void 0&&(v=[]),v.push(d),le(m,v),f.permits[d]=!0}for(let u of s){let{site:c,permit:d}=u,f=a(c);f.permits[d]=!0}}}class H_{constructor(t){x(this,"$_uqMan");x(this,"$_uqSql");this.$_uqMan=t,this.$_uqSql=this.$_createUqSqlProxy()}$_createProxy(){return new Proxy(this.$_uqMan.entities,{get:(n,r,i)=>{if(r==="SQL")return this.$_uqSql;let s=r.toLowerCase();if(s[0]==="$")switch(s){case"$":return this}let a=n[s];if(a!==void 0)return a;let o=this.$_uqMan[r];if(o!==void 0||(o=this[r],o!==void 0))return o;this.errUnexistEntity(String(r))}})}$_createUqSqlProxy(){return new Proxy(this.$_uqMan,{get:(n,r,i)=>{let s=n["$"+r];if(s!==void 0)return s;this.errUnexistEntity(String(r))}})}errUnexistEntity(t){let n=`entity ${this.$_uqMan.name}.${t} not defined`,r=new Error(n);throw r.name="UnexistEntity",this.$_uqMan.clearLocalEntites(),r}}function Q_(e){const t={};function n(a,o){if(!a)return;let u=a.toLowerCase();t[a]=o,u!==a&&(t[u]=o)}const{uqMans:r}=e,i=r.length;console.log("uqMans",r);for(let a=0;a<i;a++){const o=r[a];let c=new H_(o).$_createProxy();n(o.getUqKey(),c),n(o.getUqKeyWithConfig(),c),a===0&&n("uqdefault",c)}function s(a){for(let o in t)t[o].localMap.removeAll();console.error(`uq proxy ${a} error`)}return new Proxy(t,{get:(a,o,u)=>{let c=o.toLowerCase(),d=a[c];if(d!==void 0)return d;debugger;console.error(`controller.uqs.${String(o)} undefined`),s(String(o))}})}const Mp=[10,3,3,3,3,3,5,5,5,5,5,5,5,5,10,10,10,10,15,15,15,30,30,60];class G_{constructor(t,n){x(this,"uqApp");x(this,"refreshAction");x(this,"timer");x(this,"refreshTime",Date.now()/1e3);x(this,"refresh",async()=>{let t=Date.now()/1e3;t-this.refreshTime<30||(await this.refreshAction(),this.refreshTime=t)});x(this,"tick",0);x(this,"gapIndex",0);x(this,"callTick",async()=>{try{if(++this.tick,this.tick<Mp[this.gapIndex])return;this.tick=0,this.gapIndex<Mp.length-1&&++this.gapIndex;let{uqSites:t}=this.uqApp;if(t){if(await t.Poked()===!1)return;this.gapIndex=1,await this.refresh()}}catch{}});this.uqApp=t,this.refreshAction=n}start(){this.refreshAction!==void 0&&(this.stop(),this.timer=setInterval(this.callTick,1e3),this.refreshAction())}stop(){this.timer!==void 0&&(clearInterval(this.timer),this.timer=void 0)}}class K_{constructor(){x(this,"ls");this.ls=localStorage}getItem(t){var n;return this.ls?(n=this.ls)==null?void 0:n.getItem(t):null}setItem(t,n){var r;(r=this.ls)==null||r.setItem(t,n)}removeItem(t){var n;(n=this.ls)==null||n.removeItem(t)}}const Nn=new K_;class X_{constructor(t,n){x(this,"local");x(this,"key");this.local=t,this.key=n}get(){try{let t=this.local.getItem(this.key);return t===null||t===void 0||t==="undefined"?void 0:JSON.parse(t)}catch{this.local.removeItem(this.key);return}}set(t){let n=JSON.stringify(t,(r,i)=>{if(r!=="_tuid")return i});this.local.setItem(this.key,n)}remove(t){t===void 0?this.local.removeItem(this.key):this.local.removeLocal(t)}child(t){return this.local.child(t)}arr(t){return this.local.arr(t)}map(t){return this.local.map(t)}}class Ax{constructor(t){x(this,"caches");x(this,"locals");x(this,"name");this.name=t,this.caches={},this.locals={}}getItem(t){let n=this.keyForGet(t);if(n!==void 0)return Nn.getItem(n)}setItem(t,n){let r=this.keyForSet(t);Nn.setItem(r,n)}removeItem(t){let n=this.keyForSet(t);n!==void 0&&localStorage.removeItem(n)}arr(t){let n=String(t),r=this.locals[n];if(r===void 0){let i=this.keyForSet(t);this.locals[n]=r=new Fp(i)}return r}map(t){let n=String(t),r=this.locals[n];if(r===void 0){let i=this.keyForSet(t);this.locals[n]=r=new Ox(i)}return r}removeLocal(t){let n=t.name,r=this.keyForRemove(n);if(r===void 0)return;let i=this.locals[n];i===void 0?i=new Fp(r):this.locals[n]=void 0,i.removeAll()}child(t){let n=String(t),r=this.caches[n];return r!==void 0?r:this.caches[n]=r=new X_(this,t)}}const Z_=500;class Fp extends Ax{constructor(n){super(n);x(this,"index");let r=Nn.getItem(this.name);this.index=r===null?[]:r.split(`
`).map(i=>Number(i))}saveIndex(){Nn.setItem(this.name,this.index.join(`
`))}keyForGet(n){if(!(this.index.indexOf(n)<0))return`${this.name}.${n}`}keyForSet(n){let r=this.index.indexOf(n);return r<0?(this.index.unshift(n),this.index.length>Z_&&this.index.pop()):(this.index.splice(r,1),this.index.unshift(n)),this.saveIndex(),`${this.name}.${n}`}keyForRemove(n){let r=this.index.indexOf(n);if(!(r<0))return this.index.splice(r,1),this.saveIndex(),`${this.name}.${n}`}removeAll(){for(let n of this.index)Nn.removeItem(`${this.name}.${n}`);Nn.removeItem(this.name),this.index.splice(0)}item(n){return this.child(n)}}class Ox extends Ax{constructor(n){super(n);x(this,"index");x(this,"max");this.max=0,this.index={};let r=Nn.getItem(this.name);r!==null&&r.split(`
`).forEach(s=>{let a=s.indexOf("	");if(a<0)return;let o=s.substr(0,a),u=Number(s.substr(a+1));isNaN(u)!==!0&&(this.index[o]=u,u>this.max&&(this.max=u))})}saveIndex(){let n=[];for(let r in this.index){let i=this.index[r];i!==void 0&&n.push(`${r}	${i}`)}Nn.setItem(this.name,n.join(`
`))}keyForGet(n){let r=this.index[n];if(r!==void 0)return`${this.name}.${r}`}keyForSet(n){let r=this.index[n];return r===void 0&&(++this.max,r=this.max,this.index[n]=r,this.saveIndex()),`${this.name}.${r}`}keyForRemove(n){let r=this.index[n];if(r!==void 0)return this.index[n]=void 0,this.saveIndex(),`${this.name}.${r}`}removeAll(){for(let n in this.index)Nn.removeItem(`${this.name}.${this.index[n]}`),this.index[n]=void 0;Nn.removeItem(this.name),this.max=0}item(n){return this.child(n)}}class J_{constructor(t){x(this,"localMap");x(this,"user");x(this,"guest");x(this,"unit");x(this,"_user");x(this,"_guest");x(this,"_unit");this.localMap=new Ox(t===!0?"$$":"$"),this.user=this.localMap.child("user"),this.guest=this.localMap.child("guest"),this.unit=this.localMap.child("unit")}readToMemory(){this._user=this.user.get(),this._guest=this.guest.get(),this._unit=this.unit.get()}saveToLocalStorage(){this.user.set(this._user),this.guest.set(this._guest),this.unit.set(this._unit)}logoutClear(){[this.user,this.unit].forEach(t=>t.remove())}}class eN{constructor(){x(this,"p")}onNav(t,n){var i,s;let r;switch(t){case tn.Push:r=this.p;break;case tn.Pop:if(this.p=(i=this.p)==null?void 0:i.prev,this.p!==void 0)return;break;case tn.Replace:r=(s=this.p)==null?void 0:s.prev;break}this.p={prev:r,scrollTop:void 0,data:void 0,pathname:n}}setData(t){this.p!==void 0&&(this.p.data=t)}setScrollTop(t){this.p!==void 0&&(this.p.scrollTop=t)}getCache(){return this.p}getPrev(){var t;return(t=this.p)==null?void 0:t.prev}getData(){var t;return(t=this.p)==null?void 0:t.data}getPrevData(){var t,n;return(n=(t=this.p)==null?void 0:t.prev)==null?void 0:n.data}}class tN{constructor(t,n,r,i){x(this,"appConfig");x(this,"uqConfigs");x(this,"uqsSchema");x(this,"localData");x(this,"net");x(this,"userApi");x(this,"version");x(this,"mustLogin");x(this,"refreshTime",Ae(Date.now()/1e3));x(this,"user",Ae(void 0));x(this,"modal",{stack:Ae([])});x(this,"pageCache");x(this,"uqsMan");x(this,"guest");x(this,"uqs");x(this,"uqSites");x(this,"onCloseModal");x(this,"initErrors");window.history.scrollRestoration="manual",this.appConfig=t,this.uqConfigs=n,this.uqsSchema=r,this.version=t.version,this.mustLogin=t.mustLogin!==!1;const{unit:s,testing:a,isDevelopment:o}=i;let u={center:t.center,isDevelopment:o,unit:s,testing:a,localDb:new nN,createObservableMap:()=>new Map};this.net=new bC(u),this.localData=new J_(a),this.userApi=this.net.userApi;let c=this.localData.user.get();le(this.user,c),this.pageCache=new eN}get autoRefresh(){}get pathBase(){let{pathBase:t}=this.appConfig;return t.startsWith("/")===!0&&t.substring(1),t}get defaultUqRoleNames(){}setSite(t){for(let n of this.uqsMan.uqMans);}loginUnit(t){this.uqSites.loginUnit(t)}logoutUnit(){this.uqSites.logoutUnit()}closeAllModal(){le(this.modal.stack,[])}async logined(t){this.net.logoutApis(),le(this.user,t),t?(zf(t.token),this.net.setCenterToken(t.id,t.token),this.localData.user.set(t),await this.loadOnLogined(),new G_(this,this.autoRefresh).start()):(this.net.clearCenterToken(),this.uqSites=void 0,this.localData.user.remove(),le(this.user,void 0),document.cookie="",localStorage.clear())}restart(){document.location.assign("/")}async setUserProp(t,n){await this.userApi.userSetProp(t,n);let i={...fe(this.user)};i[t]=n,le(this.user,i),this.localData.user.set(i)}saveLocalData(){this.localData.saveToLocalStorage()}onLoadUQs(){}async init(){if(this.uqsMan===void 0){await this.net.init();try{let t=await Y_(this.net,this.appConfig.version,this.uqConfigs,this.uqsSchema);this.uqsMan=t,this.uqs=Q_(t),this.uqs&&this.onLoadUQs();let n=fe(this.user);if(n)await this.loadWithoutLogin(),await this.logined(n);else{let r=this.localData.guest.get();if(r===void 0&&(r=await this.net.userApi.guest()),!r)throw Error("guest can not be undefined");this.net.setCenterToken(0,r.token),this.localData.guest.set(r),await this.loadWithoutLogin()}}catch(t){console.error(t)}}}loadWithoutLogin(){}loadOnLogined(){}}class nN extends tC{getItem(t){return localStorage.getItem(t)}setItem(t,n){localStorage.setItem(t,n)}removeItem(t){localStorage.removeItem(t)}}const Hf=re.createContext(void 0);function ue(){const e=vt();return Qf(e)}function Qf(e){const{modal:t}=e,{stack:n}=t;async function r(s,a){return new Promise(async(o,u)=>{let c=fe(n);if(re.isValidElement(s)!==!0){alert("is not valid element");return}let d=l.jsx(Hf.Provider,{value:!0,children:l.jsx(P.Suspense,{fallback:l.jsx(ir,{}),children:s})});le(n,[...c,[d,o,a]])})}function i(s){var c;let a=fe(n),[,o,u]=a.pop();le(n,[...a]),o(s),u==null||u(s),(c=e.onCloseModal)==null||c.call(e)}return{openModal:r,closeModal:i}}const Gf=re.createContext(void 0);function vt(){return P.useContext(Gf)}const rN=new Vk({defaultOptions:{queries:{suspense:!0}}});function iN({createUqApp:e,children:t}){let n=P.useMemo(e,[]);const[r]=Ef(n.modal.stack);let[i,s]=P.useState(!1);if(Pt(()=>{(async function(){await n.init(),s(!0)})()}),i===!1)return l.jsx("div",{className:"p-5 text-center",children:l.jsx(as,{className:"text-info"})});if(n.initErrors)return l.jsxs("div",{children:[l.jsx("div",{children:"uq app start failed. init errors: "}),l.jsx("ul",{className:"text-danger",children:n.initErrors.map((c,d)=>l.jsx("li",{children:c},d))})]});let a=r.length,o,u;return a===0?(o="",u=null):(o="d-none",u=r.map((c,d)=>{let f=d<a-1?"d-none":"",[m]=c;return l.jsx(re.Fragment,{children:l.jsx("div",{className:f+" h-100",children:m})},d)})),l.jsx(Gf.Provider,{value:n,children:l.jsxs(Qk,{client:rN,children:[l.jsx("div",{className:o+" h-100",children:t}),u]})})}function su(e){let t=vt(),{className:n,style:r,src:i,altImage:s}=e,a;if(i){if(i.indexOf(".")!==0)return i.startsWith(":")===!0&&(i=t.net.getResUrl(i.substring(1))),l.jsx("img",{src:i,className:n,alt:"img",style:r,onError:o=>{s?o.currentTarget.src=s:o.currentTarget.src="https://tv.jkchemical.com/imgs/0001.png"}});a=i.substring(1)}else a="file-o";return l.jsx("span",{className:(n??"")+" image-none",style:r,children:l.jsx("i",{className:"fa fa-"+a})})}const Tp=20;class sN{constructor(t){x(this,"el");this.el=t}scrollToTop(){setTimeout(()=>this.el.scrollTo(0,0),Tp)}scrollToBottom(){setTimeout(()=>this.el.scrollTo(0,this.el.scrollTop+this.el.offsetHeight),Tp)}}function aN(e){let{back:t,onBack:n}=e;function r({Back:o}){switch(t){default:case"back":return l.jsx(o,{icon:"angle-left"});case"none":return l.jsx("div",{className:"py-2 ms-3",children:" "});case"close":return l.jsx(o,{icon:"close"})}}function i({icon:o,onClick:u}){return l.jsx("div",{className:"px-3 py-2 cursor-pointer",onClick:u,children:l.jsx(J,{name:o})})}function s({icon:o}){return l.jsx(i,{icon:o,onClick:n})}function a({icon:o}){const u=bn();function c(){u(-1)}return l.jsx(i,{icon:o,onClick:c})}return n||t==="none"?l.jsx(r,{Back:s}):l.jsx(r,{Back:a})}function ir({header:e}){const t=l.jsx("div",{className:" tonwa-band-container bg-white d-flex justify-content-center",children:l.jsx(as,{className:"m-5 text-center text-info"})});return e===null?t:(e===void 0&&(e="..."),l.jsx(Kf,{header:e,back:"none",children:t}))}const Rp=100,Lp=30;function Kf(e){const t=vt();let{children:n,header:r,back:i,right:s,footer:a,onClosed:o,hideScroll:u}=e;const c=P.useRef();return Pt(()=>{let{current:d}=c;if(!d)return;let f=Mx(d);if(!f)return;u===!0?window.onscroll=void 0:window.onscroll=w;let m=0,v=0,y=f.scrollTop;function w(j){let{onScroll:g,onScrollTop:h,onScrollBottom:p}=e;g&&g(j);let b=j.target.scrollingElement;const{scrollTop:S,offsetHeight:k,scrollHeight:_}=b;S>y&&(y=S);const C=t.pageCache.getCache();C!==void 0&&S>0&&Object.assign(C,{scrollTop:S});let N=new sN(b);if(h!==void 0&&S<Lp){let D=new Date().getTime();D-v>Rp&&(v=D,h(N).then(E=>{if(E===!0){let A=_,O=200;O>A&&(O=A),b.scrollTop=O}}))}if(p!==void 0&&S+k>_-Lp&&S>=y){++y;let D=new Date().getTime();D-m>Rp&&(m=D,setTimeout(()=>p(N),50))}}return()=>{o==null||o()}}),(r||i||s)&&(r=l.jsxs("div",{className:"d-flex align-items-center",children:[l.jsx(aN,{...e}),l.jsx("div",{className:"flex-fill",children:r}),s]})),l.jsx("div",{ref:c,className:"tonwa-page",children:l.jsxs(P.Suspense,{fallback:l.jsx(ir,{}),children:[l.jsx("div",{className:"tonwa-page-header position-sticky top-0",children:l.jsx("div",{className:"container px-0",children:r})}),l.jsx("div",{className:"tonwa-page-content flex-fill d-flex",children:l.jsx("div",{className:"container px-0 d-flex flex-column",children:n})}),l.jsx("div",{className:"tonwa-page-footer position-sticky bottom-0",children:l.jsx("div",{className:"container px-0",children:a})})]})})}function lN(e){const{closeModal:t}=ue(),n={...e,back:"close",onBack:()=>t(void 0)};return l.jsx(Kf,{...n})}function oN(e){const t=vt(),n=nx(),r=bn(),{user:i,mustLogin:s,pathLogin:a}=t,o=we(i),{pathname:u}=Ur();return P.useEffect(()=>{e.auth!==!1&&s&&!o&&a&&r(a,{state:u})},[o,s,a]),e.auth!==!1&&s&&!o?null:(Pt(()=>{if(t.pageCache.onNav(n,u),n!==tn.Pop)return;const c=t.pageCache.getCache();if(c===void 0)return;const{scrollTop:d}=c;d&&setTimeout(()=>{const f={top:d};window.scroll(f)},10)}),l.jsx(Kf,{...e}))}function H(e){return P.useContext(Hf)===!0?l.jsx(lN,{...e}):l.jsx(oN,{...e})}function uN(e){const t=e.scrollHeight>e.clientHeight,r=window.getComputedStyle(e).overflowY.indexOf("hidden")!==-1;return t&&!r}function Mx(e){return!e||e===document.body?document.body:uN(e)?e:Mx(e.parentElement)}function cN({tabs:e}){function t({isActive:r}){return"flex-fill mx-1 text-center py-1 "+(r===!0?"text-primary":"text-secondary")}let n=l.jsx("div",{className:"d-flex container",children:e.map(r=>{const{to:i,caption:s,icon:a}=r;return l.jsxs(B1,{to:i,className:t,replace:!0,children:[l.jsx(J,{name:a})," ",l.jsx("br",{}),s]},s)})});return l.jsxs("div",{className:"d-flex flex-column flex-fill h-100",children:[l.jsx("div",{className:"flex-fill d-flex",children:l.jsx(rx,{})}),l.jsx("div",{className:"invisible",children:n}),l.jsx("div",{className:"tonwa-bg-gray-3 position-fixed bottom-0 w-100 bottom-top",children:n})]})}function Xf({header:e,top:t}){let n=vt();const{closeModal:r}=ue();let[i,s]=P.useState(null),a=async d=>{let f=await n.userApi.userFromName(d);s(f)};e=e??"Select user";let o="border rounded-3 bg-white p-5 mx-auto w-min-20c";async function u(){r(i)}let c;return i===null?c=null:i?c=l.jsxs("div",{className:o,children:[l.jsx(Zf,{user:i}),l.jsx("div",{className:"text-center mt-5",children:l.jsx(fi,{className:"btn btn-primary",onClick:u,children:"OK"})})]}):c=l.jsxs("div",{className:o,children:[l.jsx(J,{name:"info-o",className:"me-3 text-info"})," No user"]}),l.jsx(H,{header:e,back:"close",children:l.jsxs("div",{className:"p-3 d-flex align-items-center flex-column",children:[l.jsx("div",{children:t}),l.jsx("div",{className:"mx-auto mb-3",children:l.jsx(Wg,{className:"w-min-20c",onFocus:()=>s(null),onSearch:a,placeholder:"user account"})}),c]})})}function Zf({user:e}){if(!e)return l.jsx("div",{children:"user is empty"});let{name:t,nick:n,icon:r}=e;return l.jsxs("div",{className:"d-flex",children:[l.jsx(su,{src:r,className:"me-4 w-2-5c h-2-5c"}),l.jsxs("div",{children:[l.jsxs("div",{children:[l.jsx(Pr,{children:"Name:"}),"   ",t]}),l.jsxs("div",{children:[l.jsx(Pr,{children:"Nick:"}),"   ",n]})]})]})}function dN({user:e,assigned:t}){if(!e)return l.jsx("div",{children:"user is empty"});let{name:n,nick:r,icon:i}=e,s;return t!==void 0?s=l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsx("b",{children:t})}),l.jsxs("div",{children:[l.jsx(Pr,{children:"Name:"}),"   ",n]}),l.jsxs("div",{children:[l.jsx(Pr,{children:"Nick:"}),"   ",r]})]}):r!==void 0?s=l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsx("b",{children:r})}),l.jsxs("div",{children:[l.jsx(Pr,{children:"Name:"}),"   ",n]})]}):s=l.jsx(l.Fragment,{children:l.jsx("div",{children:l.jsx("b",{children:n})})}),l.jsxs("div",{className:"d-flex",children:[l.jsx(su,{src:i,className:"me-4 w-2-5c h-2-5c"}),l.jsx("div",{children:s})]})}function Jf(){return l.jsx("div",{className:"small mx-3 my-3 text-muted",children:"[无]"})}function Fx(e){const t=vt();let{label:n,value:r,type:i,readonly:s,pickValue:a,options:o,onValueChanged:u,ValueTemplate:c}=e;const[d,f]=P.useState(r);async function m(){let w=await a(t,{label:n,value:r,type:i},o);w!==void 0&&(f(w),await(u==null?void 0:u(w)))}let v=l.jsx("span",{className:"p-3",children:" "});a!==null&&s!==!0&&(v=l.jsx("div",{onClick:m,className:"cursor-pointer p-3",children:l.jsx(J,{name:"pencil",className:"text-info"})}));let y=c===void 0?l.jsx(l.Fragment,{children:d}):l.jsx(c,{value:d,onValueChanged:u});return l.jsxs(pa,{...e,children:[n,l.jsx("div",{className:"ms-3 position-relative",children:y}),v]})}class fN extends sx{constructor(){super(...arguments);x(this,"label");x(this,"content")}get isDetail(){return!0}}function Tx(e){let{children:t,BandTemplate:n}=e;n=n??hN;let{current:r}=P.useRef(new fN({...e,BandTemplate:n}));return l.jsx(qf.Provider,{value:r,children:t})}function hN(e){const{openModal:t}=ue();let n=cs(),r=Bg(),{label:i,labelSize:s,children:a,errors:o,memos:u,pageEdit:c,toEdit:d,content:f,sep:m,contentType:v,rightIcon:y}=e;s=s??2;let w=v===yd.check?null:l.jsx("b",{children:i}),j=l.jsx("label",{className:`col-sm-${s} col-form-label text-sm-end tonwa-bg-gray-1 border-end align-self-center py-3`,children:w}),g=`col-sm-${12-s} d-flex pe-0 align-items-center`;function h({icon:p,pageEdit:b}){function S(){d?alert(d):t(b)}return l.jsx("div",{onClick:S,className:"px-3 align-self-stretch d-flex align-items-center cursor-pointer",children:p??l.jsx(J,{name:"pencil",className:"text-info"})})}return r.readOnly===!0?y=null:v===yd.com?c&&(y=l.jsx(h,{pageEdit:c,icon:y})):(n.label=i,n.content=f,y=l.jsx(h,{pageEdit:l.jsx(mN,{detail:n}),icon:y})),l.jsx(l.Fragment,{children:l.jsxs("div",{className:"row bg-white mx-0",children:[j,l.jsxs("div",{className:g,children:[l.jsxs("div",{className:"flex-grow-1",children:[l.jsx("div",{children:a}),l.jsx(tu,{errors:o}),l.jsx(nu,{memos:u})]}),y]})]})})}function mN({detail:e}){const{closeModal:t}=ue(),{content:n,label:r,onValuesChanged:i}=e;async function s(o){await i(o),t()}let a=e.getValues();return l.jsx(H,{header:r,back:"close",children:l.jsxs(hi,{className:"container px-3 py-3",values:a,BandTemplate:pN,children:[l.jsx(pt,{children:n}),l.jsx(mi,{onSubmit:s})]})})}function pN(e){let{children:t,errors:n,memos:r}=e;return l.jsxs("div",{className:"bg-white mb-3",children:[t,l.jsx(tu,{errors:n}),l.jsx(nu,{memos:r})]})}function an({id:e,uq:t,Template:n,spinner:r}){const i=t.idCache(e),[s,a]=P.useState(i);return P.useEffect(()=>{(async function(){if(e==null)return;let o=t.idCache(e);if(o===void 0)try{o=await t.idObj(e)}catch(u){console.error(u)}finally{o===void 0&&(o=null)}a(o)})()},[e,i]),e==null?null:s===void 0?r===void 0?l.jsx(If,{}):r:n?l.jsx(n,{value:s}):l.jsx(l.Fragment,{children:JSON.stringify(s)})}function yN({tag:e,className:t,modal:n,children:r}){const{openModal:i}=ue();e===void 0&&(e="div",t=(t??"")+" cursor-pointer");async function s(){re.isValidElement(n)===!1&&(n=await n()),i(n)}return re.createElement(e,{className:t,onClick:s},r)}function Pa({message:e,children:t}){return l.jsxs("div",{className:"border border-danger rounded mx-auto m-3 w-max-30c bg-white ",children:[l.jsx("div",{className:"p-4 border-bottom",children:e}),l.jsx("div",{className:"p-3 text-center",children:t})]})}function au({auth:e,header:t,message:n,yes:r,no:i}){const{closeModal:s}=ue();return l.jsx(H,{auth:e,header:t,children:l.jsxs(Pa,{message:n,children:[l.jsx("button",{className:"btn btn-primary me-3",onClick:()=>s(!0),children:r}),i&&l.jsx("button",{className:"btn btn-outline-primary",onClick:()=>s(!1),children:i})]})})}class eh{constructor(t,n){x(this,"keyCompareFunc");x(this,"atomItems");this.atomItems=Ae(t),this.keyCompareFunc=typeof n=="string"?(r,i)=>r[n]===i[n]:n}keyCompare(t,n){return this.keyCompareFunc(t,n)}get items(){return fe(this.atomItems)}findIndex(t){return this.items.findIndex(i=>this.keyCompare(i,t))}onItemChanged(t){let n=this.findIndex(t),r=this.items;n>=0?Object.assign(r[n],t):r.unshift(t)}onItemDeleted(t){this.items;let n=this.findIndex(t);n>=0&&this.items.splice(n,1)}moveItemToFirst(t){let n=this.items,r=this.findIndex(t);r>=0&&n.splice(r,1),n.unshift(t),le(this.atomItems,[...n])}moveItemToLast(t){let n=this.items,r=this.findIndex(t);r>=0&&n.splice(r,1),n.push(t),le(this.atomItems,[...n])}}function th(e){let{context:t}=e,n=we(t.atomItems);return l.jsx(Fe,{...e,items:n,itemKey:"user"})}const vN=/^[0-9]*$/,gN=/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/,xN=[{type:"mobile",caption:"手机号",regex:vN},{type:"email",caption:"邮箱",regex:gN}];function Rx(e){return xN.find(n=>n.regex.test(e)===!0)}function Aa(e){let{label:t,children:n,errors:r,memos:i,contentContainerClassName:s}=e,a,o="col-sm-9 "+(s??"");return t?a=l.jsx("label",{className:"col-sm-3 col-form-label text-sm-end",children:l.jsx("b",{children:t})}):o+=" offset-sm-3",l.jsxs("div",{className:"mb-3 row bg-white",children:[a,l.jsxs("div",{className:o,children:[n,l.jsx(tu,{errors:r}),l.jsx(nu,{memos:i})]})]})}function wN({passwordParams:e,onVerify:t,header:n}){let{type:r,account:i}=e,s=async c=>{let d=c.verify;if(await t(d)===0)return[["verify","验证码错误"]]};async function a({name:c,value:d},f){f.fields.submit&&f.setDisabled("submit",d.length>0)}let o,u;switch(r){case"mobile":o="手机号";break;case"email":o="邮箱",u=l.jsxs("small",{children:[l.jsx("span",{className:"text-danger",children:"注意"}),": 有可能误为垃圾邮件，请检查",l.jsx("br",{})]});break}return l.jsx(H,{header:n,children:l.jsxs("div",{className:"w-min-20c my-5 py-5 mx-auto",children:[l.jsxs("div",{className:"text-center mb-4",children:["验证码已经发送到",o," ",l.jsx("b",{children:i}),l.jsx("br",{}),u]}),l.jsx("div",{}),l.jsx("div",{className:"h-1c"}),l.jsxs(hi,{onValuesChanged:a,BandTemplate:Aa,children:[l.jsx(bk,{name:"verify",label:"验证码",placeholder:"请输入验证码",maxLength:6,rule:gd}),l.jsx(pt,{contentContainerClassName:"mt-3",children:l.jsxs(mi,{name:"submit",onSubmit:s,children:["下一步 ",">"]})})]})]})})}const qp="forget",Up="register";function Lx({header:e,submitCaption:t,account:n,onPasswordSubmit:r}){const{openModal:i}=ue(),s=P.useRef({});let a=async o=>{let{pwd:u,rePwd:c}=o,d;return!u||u!==c?(d="密码错误，请重新输入密码！",[["pwd",void 0],["rePwd",void 0],["pwd",d]]):(d=await r(u),s.current.error=d,d!==void 0&&i(l.jsx(H,{header:"注册不成功",children:l.jsx("div",{className:"p-5 text-danger",children:s.current.error})})),d)};return l.jsx(H,{header:e,children:l.jsxs("div",{className:"w-min-30c my-5 py-5 mx-auto",children:[l.jsx("div",{className:"h-1c"}),l.jsxs(hi,{BandTemplate:Aa,children:[l.jsx(pt,{label:"账号",contentContainerClassName:"d-flex align-items-center",children:l.jsx("b",{className:"text-primary",children:n})}),l.jsx(Bi,{name:"pwd",label:"密码",placeholder:"密码",maxLength:100}),l.jsx(Bi,{name:"rePwd",label:"重复密码",placeholder:"重复密码",maxLength:100}),l.jsx(pt,{contentContainerClassName:"mt-3",children:l.jsx(mi,{onSubmit:a,children:t})})]})]})})}function bN({passwordParams:e,header:t}){const{openModal:n}=ue();let{userApi:r}=vt(),{type:i,account:s,verify:a}=e,o=async d=>{e.password=d;let f={nick:void 0,user:s,pwd:d,country:void 0,mobile:void 0,mobileCountry:void 0,email:void 0,verify:a};switch(i){case"mobile":f.mobile=Number(s),f.mobileCountry=86;break;case"email":f.email=s;break}let m=await r.register(f);if(m===0){n(l.jsx(c,{}));return}return u(m)};function u(d){let f;switch(d){default:return"服务器发生错误";case 4:return"验证码错误";case 0:return;case 1:f="用户名 "+s;break;case 2:f="手机号 +"+s;break;case 3:f="邮箱 "+s;break}return f+" 已经被注册过了"}return l.jsx(Lx,{header:t,submitCaption:"注册新账号",account:s,onPasswordSubmit:o});function c(){let{account:d,toLogin:f}=e;return l.jsx("div",{className:"container w-min-30c mx-auto",children:l.jsxs("div",{className:"my-5 text-center",children:[l.jsxs("div",{className:"py-5",children:[l.jsx(J,{name:"check-circle",className:"me-2"}),"账号 ",l.jsxs("strong",{className:"text-primary",children:[d," "]})," 注册成功！"]}),l.jsx("button",{className:"btn btn-success btn-block",type:"button",onClick:f,children:"直接登录"})]})})}}function SN({header:e,passwordParams:t}){const{openModal:n,closeModal:r}=ue();let{userApi:i}=vt(),{account:s,verify:a,type:o,toLogin:u}=t,c=async f=>{if(t.password=f,(await i.resetPassword(s,f,a,o)).length===0){let v="something wrong in reseting password";throw console.log(v),v}r(),n(l.jsx(d,{}))};return l.jsx(Lx,{header:e,submitCaption:"改密码",account:s,onPasswordSubmit:c});function d(){return l.jsx("div",{className:"container w-min-30c mx-auto",children:l.jsxs("div",{className:"my-5 text-center",children:[l.jsxs("div",{className:"py-5 text-success",children:[l.jsx(J,{name:"check-circle",className:"me-2"}),"成功修改密码"]}),l.jsx("button",{className:"btn btn-primary btn-block",onClick:u,children:"登录账号"})]})})}}function qx({header:e,accountLable:t,privacy:n,loginTop:r,ModalPassword:i,accountError:s,sendVerifyOem:a}){const{openModal:o}=ue(),u=bn(),c=vt(),{userApi:d,pathLogin:f}=c;let{current:m}=P.useRef({toLogin:v});function v(){c.closeAllModal(),u(f)}async function y({name:j,value:g},h){h.fields.submit&&h.setDisabled("submit",g.length<6)}let w=async j=>{let g="user",h=j[g],p=Rx(h);if(p===void 0)return[void 0,[g,"必须是手机号或邮箱"]];let b=p.type;if(b==="mobile"&&(h.length!==11||h[0]!=="1"))return[void 0,[g,"请输入正确的手机号"]];let S=h,k=await d.isExists(S),_=s(k);if(_!==void 0)return _;k=await d.sendVerify(S,b,a),m.account=S,m.type=b;async function C(N){m.verify=N;let D=await d.checkVerify(S,N);if(D===0)return D;o(l.jsx(i,{header:e,passwordParams:m}))}o(l.jsx(wN,{header:e,onVerify:C,passwordParams:m}))};return l.jsx(H,{auth:!1,header:e,footer:n,children:l.jsx("div",{className:"d-grid",children:l.jsxs("div",{className:"d-grid w-20c my-5 py-5",style:{marginLeft:"auto",marginRight:"auto"},children:[r??l.jsx("div",{className:"text-center p-3 fs-5 text-primary",children:"注册"}),l.jsx("div",{className:"h-3c"}),l.jsxs(hi,{BandTemplate:Aa,onValuesChanged:y,children:[l.jsx(_a,{name:"user",label:t,placeholder:"手机号或邮箱"}),l.jsx(pt,{contentContainerClassName:"mt-3",children:l.jsx(mi,{name:"submit",onSubmit:w,disabled:!0,children:"发送验证码"})})]}),l.jsx("div",{className:"text-center py-3",children:l.jsx(Ce,{className:"btn btn-link text-primary",to:f,children:"已有账号，直接登录"})})]})})})}function Ux(e){let{loginTop:t,privacy:n}=e,r=i=>{if(i>0)return"已经被注册使用了"};return l.jsx(qx,{header:"注册账号",accountLable:"账号",ModalPassword:bN,accountError:r,sendVerifyOem:void 0,loginTop:t,privacy:n})}function jN(e){let{loginTop:t,privacy:n}=e,r=i=>{if(i===0)return"请输入正确的账号"};return l.jsx(qx,{header:"密码找回",accountLable:"账号",ModalPassword:SN,accountError:r,sendVerifyOem:void 0,loginTop:t,privacy:n})}function kN({url:e,withBack:t,loginTop:n,privacy:r,callback:i}){let s=vt(),{userApi:a,guest:o}=s;const u=bn();let c=async(y,w)=>{let j=await a.login({user:y,pwd:w,guest:o});return j===void 0?!1:(console.log("onLoginSubmit: user=%s pwd:%s",j.name,j.token),await s.logined(j),await(i==null?void 0:i(j)),u(e??"/",{replace:!0}),!0)},d=async y=>{let w=y.username,j=y.password;if(j===void 0)return"something wrong, pwd is undefined";if(await c(w,j)===!0)return;let h=Rx(w);return(h!==void 0?h.caption:"用户名")+"或密码错！"},f=t===!0?"登录":!1;function m(){return l.jsx(H,{auth:!1,header:f,footer:r,children:l.jsxs("div",{className:"d-flex p-5 flex-column justify-content-center align-items-center",children:[l.jsx("div",{className:"flex-fill"}),l.jsxs("div",{className:"w-30c",children:[n??l.jsx("div",{className:"text-center p-3 fs-5 text-primary",children:"登录"}),l.jsx("div",{className:"h-2c"}),l.jsxs(hi,{BandTemplate:Aa,children:[l.jsx(_a,{label:"登录账号",name:"username",placeholder:"手机/邮箱/用户名",rule:gd,maxLength:100}),l.jsx(Bi,{label:"密码",name:"password",placeholder:"密码",rule:gd,maxLength:100}),l.jsx(pt,{children:l.jsx(ux,{})}),l.jsx(pt,{contentContainerClassName:"my-3",children:l.jsx(mi,{onSubmit:d,children:l.jsx("div",{className:"mx-5",children:"登录"})})})]}),l.jsx("div",{className:"row",children:l.jsxs("div",{className:"offset-sm-3",children:[l.jsx(Ce,{className:"btn btn-link",to:qp,children:"忘记密码"}),l.jsx(Ce,{className:"btn btn-link",to:Up,children:"注册账号"})]})})]}),l.jsx("div",{className:"flex-fill"}),l.jsx("div",{className:"flex-fill"})]})})}function v(){return l.jsx(rx,{})}return l.jsx(Lf,{children:l.jsxs(ae,{element:l.jsx(v,{}),children:[l.jsx(ae,{index:!0,element:l.jsx(m,{})}),l.jsx(ae,{path:qp,element:l.jsx(jN,{loginTop:n,privacy:r})}),l.jsx(ae,{path:Up,element:l.jsx(Ux,{loginTop:n,privacy:r})})]})})}function CN({onLogout:e,resetAll:t}){let n=vt();async function r(){await n.logined(void 0),await(e==null?void 0:e()),t==null||t(),n.restart()}const i="安全退出";return l.jsx(H,{back:"back",header:i,children:l.jsxs("div",{className:"my-5 border border-info bg-white rounded-3 p-5 text-center mx-auto w-max-40c ",children:[l.jsx("div",{children:"退出当前账号不会删除任何历史数据，下次登录依然可以使用本账号"}),l.jsx("div",{className:"mt-5 text-center",children:l.jsx("button",{className:"btn btn-danger",onClick:r,children:"安全退出"})})]})})}function _N(){const e=bn(),{openModal:t}=ue();let n=vt(),r=async i=>{let{orgPassword:s,newPassword:a,newPassword1:o}=i;if(a!==o)return["newPassword1","新密码错误，请重新输入"];if(await n.userApi.changePassword({orgPassword:s,newPassword:a})===!1)return["orgPassword","原密码错误"];t(l.jsx(NN,{}),()=>e(-1))};return l.jsx(H,{auth:!1,header:"修改密码",children:l.jsxs(hi,{className:"m-3 w-30c mx-auto",BandTemplate:Aa,children:[l.jsx(Bi,{name:"orgPassword",label:"原密码",placeholder:"输入原来的密码",maxLength:60}),l.jsx(Bi,{name:"newPassword",label:"新密码",placeholder:"输入新设的密码",maxLength:60}),l.jsx(Bi,{name:"newPassword1",label:"确认密码",placeholder:"再次输入新设密码",maxLength:60}),l.jsx(pt,{children:l.jsx(ux,{})}),l.jsx(pt,{children:l.jsx(mi,{onSubmit:r,children:"提交"})})]})})}function NN(){return l.jsx(H,{auth:!1,header:"密码修改",children:l.jsx("div",{className:"m-3  text-success",children:"密码修改成功！"})})}const Qs="一小时";function DN(){const e=bn(),{openModal:t}=ue();let n=l.jsxs(l.Fragment,{children:["注意：账号注销后，账号绑定手机、邮件等相关信息将被释放。账号无法将登录。",l.jsx("br",{}),"请确认！"]});const r="注销账号";function i(){e(-1)}return l.jsx(H,{auth:!1,header:r,children:l.jsxs(Pa,{message:n,children:[l.jsx("button",{className:"btn btn-primary",onClick:()=>e(-1),children:"不注销"}),l.jsx("button",{className:"btn btn-outline-info ms-3",onClick:()=>t(l.jsx(EN,{header:r}),i),children:"我已了解，仍然注销"})]})})}function EN({header:e}){let t=vt();const{openModal:n,closeModal:r}=ue();let i=l.jsxs(l.Fragment,{children:["账号注销后，如果在",Qs,"内容重新登录账号，账号自动恢复。",Qs,"之后，账号绑定手机、邮件等相关信息将被释放。账号无法将登录。",l.jsx("br",{}),"请再次确认！"]}),s=async()=>{await t.userApi.userQuit(),r(),await n(l.jsx(IN,{}),()=>t.restart())};return l.jsx(H,{header:e,children:l.jsxs(Pa,{message:i,children:[l.jsx("button",{className:"btn btn-primary",onClick:()=>r(),children:"不注销"}),l.jsx("button",{className:"btn btn-outline-info ms-3",onClick:s,children:"确认注销"})]})})}function IN(){let e=vt();const{openModal:t,closeModal:n}=ue();let r=l.jsxs(l.Fragment,{children:["账号将在",Qs,"后彻底注销。",l.jsx("br",{}),"如果在",Qs,"内容重新登录账号，注销操作自动取消。",Qs,"之后，账号绑定手机、邮件等相关信息将被释放。账号无法将登录。"]}),i=()=>{t(l.jsx(PN,{}),()=>e.restart())};return l.jsx(H,{header:"注销已账号",children:l.jsx(Pa,{message:r,children:l.jsx("button",{className:"btn btn-primary",onClick:i,children:"反悔了，不要注销"})})})}function PN(){let e=vt(),t=l.jsxs(l.Fragment,{children:["重新登录之后，账号将恢复。",l.jsx("br",{})]});async function n(){await e.logined(void 0),e.restart()}return l.jsx(H,{header:"恢复账号",children:l.jsx(Pa,{message:t,children:l.jsx("button",{className:"btn btn-primary",onClick:n,children:"重新登录"})})})}var nh=(e=>(e[e.any=0]="any",e[e.atom=11]="atom",e[e.spec=12]="spec",e[e.bud=13]="bud",e[e.sheet=101]="sheet",e[e.main=102]="main",e[e.detail=103]="detail",e[e.pend=104]="pend",e[e.detailAct=111]="detailAct",e[e.with=151]="with",e[e.pick=161]="pick",e[e.role=201]="role",e[e.permit=202]="permit",e[e.options=301]="options",e[e.tree=401]="tree",e[e.tie=501]="tie",e[e.report=601]="report",e[e.title=901]="title",e[e.key=1001]="key",e[e.prop=1011]="prop",e[e.optionsitem=1031]="optionsitem",e))(nh||{}),Si=(e=>(e[e.person=1]="person",e[e.group=2]="group",e))(Si||{});const AN={$phrase:{name:"$phrase",type:"id",private:!1,fields:[{name:"name",type:"char",size:200},{name:"caption",type:"char",size:100},{name:"base",type:"bigint"},{name:"valid",type:"tinyint"},{name:"owner",type:"bigint"},{name:"type",type:"tinyint"},{name:"index",type:"tinyint"}],keys:[],global:!1,isMinute:!1},$role_my:{name:"$role_my",type:"query",private:!1,sys:!0,fields:[],returns:[{name:"sites",fields:[{name:"id",type:"id"},{name:"site",type:"id"},{name:"admin",type:"tinyint"},{name:"entity",type:"char",size:100},{name:"assigned",type:"char",size:100},{name:"def",type:"tinyint"}]},{name:"roles",fields:[{name:"site",type:"id"},{name:"role",type:"char",size:100}]},{name:"permits",fields:[{name:"site",type:"id"},{name:"permit",type:"char",size:100}]}]},$role_site_users:{name:"$role_site_users",type:"query",private:!1,sys:!0,fields:[{name:"site",type:"bigint"}],returns:[{name:"users",fields:[{name:"id",type:"id"},{name:"user",type:"id"},{name:"admin",type:"tinyint"},{name:"assigned",type:"char",size:100},{name:"name",type:"char",size:100},{name:"nick",type:"char",size:100},{name:"icon",type:"char",size:200},{name:"addBy",type:"id"}]},{name:"roles",fields:[{name:"user",type:"id"},{name:"role",type:"char",size:100}]}]},$role_site_add_admin:{name:"$role_site_add_admin",type:"action",private:!1,sys:!0,fields:[{name:"site",type:"bigint"},{name:"user",type:"bigint"},{name:"admin",type:"tinyint"},{name:"assigned",type:"char",size:100}],returns:[]},$role_site_del_admin:{name:"$role_site_del_admin",type:"action",private:!1,sys:!0,fields:[{name:"site",type:"bigint"},{name:"user",type:"bigint"},{name:"admin",type:"tinyint"}],returns:[]},$role_site_add_user:{name:"$role_site_add_user",type:"action",private:!1,sys:!0,fields:[{name:"site",type:"bigint"},{name:"user",type:"bigint"},{name:"assigned",type:"char",size:100}],returns:[]},$role_site_user_role:{name:"$role_site_user_role",type:"action",private:!1,sys:!0,fields:[{name:"site",type:"bigint"},{name:"user",type:"bigint"},{name:"action",type:"char",size:100},{name:"role",type:"char",size:100}],returns:[]},$role_site_quit_owner:{name:"$role_site_quit_owner",type:"action",private:!1,sys:!0,fields:[{name:"site",type:"bigint"}],returns:[]},$sites:{name:"$sites",type:"query",private:!1,sys:!0,fields:[],returns:[{name:"$page",fields:[{name:"id",type:"id"},{name:"no",type:"char",size:50},{name:"ex",type:"char",size:100}],order:"desc"}]},$setsite:{name:"$setSite",type:"action",private:!1,sys:!0,fields:[{name:"site",type:"id"}],returns:[]},$poked:{name:"$poked",type:"query",private:!1,sys:!0,fields:[],returns:[{name:"ret",fields:[{name:"poke",type:"tinyint"}]}]},$setmytimezone:{name:"$setMyTimezone",type:"action",private:!1,sys:!0,fields:[{name:"_timezone",type:"tinyint"}],returns:[]},$getunittime:{name:"$getUnitTime",type:"query",private:!1,sys:!0,fields:[],returns:[{name:"ret",fields:[{name:"timezone",type:"tinyint"},{name:"unitTimeZone",type:"tinyint"},{name:"unitBizMonth",type:"tinyint"},{name:"unitBizDate",type:"tinyint"}]}]},$allphrases:{name:"$AllPhrases",type:"query",private:!1,sys:!0,fields:[],returns:[{name:"main",fields:[{name:"id",type:"id"},{name:"name",type:"char",size:200},{name:"caption",type:"char",size:100},{name:"type",type:"enum"}]},{name:"detail",fields:[{name:"id",type:"id"},{name:"name",type:"char",size:200},{name:"caption",type:"char",size:100},{name:"owner",type:"id"},{name:"type",type:"enum"}]}]},saveatom:{name:"SaveAtom",type:"action",private:!1,sys:!0,fields:[{name:"atomPhrase",type:"id"},{name:"base",type:"bigint"},{name:"no",type:"char",size:30},{name:"ex",type:"char",size:200}],returns:[{name:"ret",fields:[{name:"id",type:"id"}]}]},savebudvalue:{name:"SaveBudValue",type:"action",private:!1,sys:!0,fields:[{name:"phraseId",type:"id"},{name:"id",type:"id"},{name:"int",type:"bigint"},{name:"dec",type:"dec",scale:6,precision:18},{name:"str",type:"char",size:100}],returns:[]},savebudcheck:{name:"SaveBudCheck",type:"action",private:!1,sys:!0,fields:[{name:"budPhrase",type:"id"},{name:"id",type:"id"},{name:"optionsItemPhrase",type:"id"},{name:"checked",type:"tinyint"}],returns:[]},savebudradio:{name:"SaveBudRadio",type:"action",private:!1,sys:!0,fields:[{name:"budPhrase",type:"id"},{name:"id",type:"id"},{name:"optionsItemPhrase",type:"id"}],returns:[]},delatom:{name:"DelAtom",type:"action",private:!1,sys:!0,fields:[{name:"id",type:"id"}],returns:[]},savespec:{name:"SaveSpec",type:"action",private:!1,sys:!0,fields:[{name:"spec",type:"id"},{name:"base",type:"id"},{name:"keys",type:"json"},{name:"props",type:"json"}],jsoned:!0,returns:[{name:"ret",fields:[{name:"id",type:"id"}]}]},getspec:{name:"GetSpec",type:"query",private:!1,sys:!0,fields:[{name:"id",type:"id"}],returns:[{name:"props",fields:[{name:"id",type:"id"},{name:"phrase",type:"id"},{name:"value",type:"json"}]}]},savesheet:{name:"SaveSheet",type:"action",private:!1,sys:!0,fields:[{name:"phrase",type:"id"},{name:"no",type:"char",size:30},{name:"i",type:"id"},{name:"x",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"price",type:"dec",scale:6,precision:18},{name:"amount",type:"dec",scale:6,precision:18}],returns:[{name:"ret",fields:[{name:"id",type:"id"},{name:"no",type:"char",size:30}]}]},savedetail:{name:"SaveDetail",type:"action",private:!1,sys:!0,fields:[{name:"base",type:"id"},{name:"phrase",type:"id"},{name:"id",type:"id"},{name:"i",type:"id"},{name:"x",type:"id"},{name:"origin",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"price",type:"dec",scale:6,precision:18},{name:"amount",type:"dec",scale:6,precision:18},{name:"pendFrom",type:"id"}],jsoned:!0,returns:[{name:"ret",fields:[{name:"id",type:"id"}]}]},deletebin:{name:"DeleteBin",type:"action",private:!1,sys:!0,fields:[{name:"id",type:"id"}],jsoned:!0,returns:[]},submitsheet:{name:"SubmitSheet",type:"action",private:!1,sys:!0,fields:[{name:"id",type:"id"}],jsoned:!0,returns:[]},getreport:{name:"GetReport",type:"query",private:!1,sys:!0,fields:[{name:"reportPhrase",type:"id"},{name:"atomPhrase",type:"id"},{name:"atomId",type:"id"},{name:"dateStart",type:"date"},{name:"dateEnd",type:"date"},{name:"params",type:"json"}],returns:[{name:"$page",fields:[{name:"id",type:"id"},{name:"phrase",type:"id"},{name:"no",type:"char",size:30},{name:"ex",type:"char",size:200},{name:"value",type:"dec",scale:6,precision:18}],order:"asc"},{name:"specs",fields:[{name:"id",type:"id"},{name:"phrase",type:"id"},{name:"base",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"props",type:"json"}]}]},gethistory:{name:"GetHistory",type:"query",private:!1,sys:!0,fields:[{name:"objId",type:"id"},{name:"title",type:"id"}],returns:[{name:"$page",fields:[{name:"id",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"ref",type:"id"},{name:"plusMinus",type:"tinyint"},{name:"sheetNo",type:"char",size:30},{name:"sheetPhrase",type:"id"},{name:"binPhrase",type:"id"}],order:"desc"}]},removedraft:{name:"RemoveDraft",type:"action",private:!1,sys:!0,fields:[{name:"id",type:"id"}],returns:[]},getmydrafts:{name:"GetMyDrafts",type:"query",private:!1,sys:!0,fields:[],returns:[{name:"$page",fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"no",type:"char",size:20},{name:"operator",type:"id"},{name:"phrase",type:"char",size:200}],order:"desc"}]},searchatom:{name:"SearchAtom",type:"query",private:!1,sys:!0,fields:[{name:"atom",type:"id"},{name:"key",type:"char",size:50}],returns:[{name:"$page",fields:[{name:"id",type:"id"},{name:"no",type:"char",size:50},{name:"ex",type:"char",size:50},{name:"phrase",type:"id"}],order:"desc"}]},searchatombuds:{name:"SearchAtomBuds",type:"query",private:!1,sys:!0,fields:[{name:"phrase",type:"char",size:200},{name:"key",type:"char",size:50},{name:"budNames",type:"char",size:300}],returns:[{name:"$page",fields:[{name:"id",type:"id"},{name:"no",type:"char",size:50},{name:"ex",type:"char",size:50},{name:"phrase",type:"char",size:200}],order:"desc"},{name:"meds",fields:[{name:"id",type:"id"},{name:"main",type:"id"},{name:"detail",type:"id"}]},{name:"budsInt",fields:[{name:"id",type:"id"},{name:"bud",type:"id"},{name:"phrase",type:"char",size:50},{name:"value",type:"int"}]},{name:"budsDec",fields:[{name:"id",type:"id"},{name:"bud",type:"id"},{name:"phrase",type:"char",size:50},{name:"value",type:"dec",scale:6,precision:18}]},{name:"budsStr",fields:[{name:"id",type:"id"},{name:"bud",type:"id"},{name:"phrase",type:"char",size:50},{name:"value",type:"char",size:200}]}]},searchatomuombuds:{name:"SearchAtomUomBuds",type:"query",private:!1,sys:!0,fields:[{name:"phrase",type:"char",size:200},{name:"key",type:"char",size:50},{name:"budNames",type:"char",size:300}],returns:[{name:"$page",fields:[{name:"id",type:"id"},{name:"no",type:"char",size:50},{name:"ex",type:"char",size:50},{name:"phrase",type:"char",size:200}],order:"desc"},{name:"uoms",fields:[{name:"id",type:"id"},{name:"atom",type:"id"},{name:"uom",type:"id"}]},{name:"budsInt",fields:[{name:"id",type:"id"},{name:"bud",type:"id"},{name:"phrase",type:"char",size:50},{name:"value",type:"int"}]},{name:"budsDec",fields:[{name:"id",type:"id"},{name:"bud",type:"id"},{name:"phrase",type:"char",size:50},{name:"value",type:"dec",scale:6,precision:18}]},{name:"budsStr",fields:[{name:"id",type:"id"},{name:"bud",type:"id"},{name:"phrase",type:"char",size:50},{name:"value",type:"char",size:200}]}]},getsheet:{name:"GetSheet",type:"query",private:!1,sys:!0,fields:[{name:"id",type:"id"},{name:"detail",type:"id"}],returns:[{name:"main",fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"no",type:"char",size:20},{name:"operator",type:"id"},{name:"origin",type:"id"},{name:"i",type:"id"},{name:"x",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"amount",type:"dec",scale:6,precision:18},{name:"price",type:"dec",scale:6,precision:18},{name:"phrase",type:"id"}]},{name:"details",fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"origin",type:"id"},{name:"i",type:"id"},{name:"x",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"amount",type:"dec",scale:6,precision:18},{name:"price",type:"dec",scale:6,precision:18},{name:"pendFrom",type:"id"},{name:"pendValue",type:"dec",scale:6,precision:18},{name:"phrase",type:"id"}]},{name:"origins",fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"origin",type:"id"},{name:"i",type:"id"},{name:"x",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"amount",type:"dec",scale:6,precision:18},{name:"price",type:"dec",scale:6,precision:18}]}]},getatom:{name:"GetAtom",type:"query",private:!1,sys:!0,fields:[{name:"id",type:"id"}],returns:[{name:"props",fields:[{name:"phrase",type:"id"},{name:"value",type:"json"}]}]},getspecsfrombase:{name:"GetSpecsFromBase",type:"query",private:!1,sys:!0,fields:[{name:"base",type:"id"}],returns:[{name:"ret",fields:[{name:"id",type:"id"},{name:"keys",type:"json"},{name:"props",type:"json"}]}]},bizphrasetype:{name:"BizPhraseType",type:"enum",private:!1,sys:!0,values:{any:0,atom:11,spec:12,bud:13,sheet:101,main:102,detail:103,pend:104,detailAct:111,with:151,pick:161,role:201,permit:202,options:301,tree:401,tie:501,report:601,title:901,key:1001,prop:1011,optionsitem:1031}},buddatatype:{name:"BudDataType",type:"enum",private:!1,sys:!0,values:{none:0,int:11,atom:12,radio:13,check:14,ID:19,dec:21,char:31,str:32,date:41}},bizbudflag:{name:"BizBudFlag",type:"enum",private:!1,sys:!0,values:{index:1}},getbizobjects:{name:"GetBizObjects",type:"query",private:!1,sys:!0,fields:[{name:"lang",type:"char",size:10},{name:"culture",type:"char",size:10}],returns:[{name:"objs",fields:[{name:"id",type:"id"},{name:"phrase",type:"char",size:200},{name:"source",type:"text"},{name:"caption",type:"char",size:100}]},{name:"buds",fields:[{name:"id",type:"id"},{name:"base",type:"id"},{name:"phrase",type:"char",size:200},{name:"caption",type:"char",size:100},{name:"ex",type:"json"}]}]},getentitycode:{name:"GetEntityCode",type:"query",private:!1,sys:!0,fields:[{name:"id",type:"id"}],returns:[{name:"ret",fields:[{name:"code",type:"text"},{name:"schema",type:"text"}]}]},createsiteforuser:{name:"CreateSiteForUser",type:"action",private:!1,sys:!0,fields:[{name:"no",type:"char",size:30},{name:"ex",type:"char",size:200},{name:"tonwaUser",type:"id"}],jsoned:!0,returns:[{name:"ret",fields:[{name:"site",type:"id"},{name:"userSite",type:"id"}]}]},ixbud:{name:"IxBud",type:"ix",private:!1,sys:!0,fields:[{name:"i",type:"id"},{name:"x",type:"id"}],ixx:!1,hasSort:!1,xType:0},bud:{name:"Bud",type:"id",private:!1,sys:!0,fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"ext",type:"id"}],keys:[{name:"base",type:"id"},{name:"ext",type:"id"}],global:!1,idType:3,isMinute:!0},history:{name:"History",type:"id",private:!1,sys:!0,fields:[{name:"id",type:"id",null:!1},{name:"bud",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"ref",type:"id"},{name:"plusMinus",type:"tinyint"}],keys:[],global:!1,idType:3,isMinute:!0},reportstorage:{name:"ReportStorage",type:"query",private:!1,sys:!0,fields:[{name:"key",type:"char",size:50},{name:"subject",type:"char",size:200}],returns:[{name:"$page",fields:[{name:"atom",type:"id"},{name:"uom",type:"id"},{name:"spec",type:"id"},{name:"id",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"init",type:"dec",scale:6,precision:18}],order:"asc"}]},reportstorageatom:{name:"ReportStorageAtom",type:"query",private:!1,sys:!0,fields:[{name:"key",type:"char",size:50},{name:"subject",type:"char",size:200}],returns:[{name:"$page",fields:[{name:"obj",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"init",type:"dec",scale:6,precision:18}],order:"asc"}]},reportstoragespec:{name:"ReportStorageSpec",type:"query",private:!1,sys:!0,fields:[{name:"key",type:"char",size:50},{name:"subject",type:"char",size:200}],returns:[{name:"$page",fields:[{name:"obj",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"init",type:"dec",scale:6,precision:18}],order:"asc"}]},getpend:{name:"GetPend",type:"query",private:!1,sys:!0,fields:[{name:"pend",type:"id"},{name:"key",type:"char",size:100}],returns:[{name:"$page",fields:[{name:"pend",type:"id"},{name:"sheet",type:"id"},{name:"id",type:"id"},{name:"i",type:"id"},{name:"x",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"price",type:"dec",scale:6,precision:18},{name:"amount",type:"dec",scale:6,precision:18},{name:"mid",type:"json"},{name:"pendValue",type:"dec",scale:6,precision:18}],order:"asc"},{name:"retSheet",fields:[{name:"id",type:"id"},{name:"no",type:"char",size:30},{name:"i",type:"id"},{name:"x",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"price",type:"dec",scale:6,precision:18},{name:"amount",type:"dec",scale:6,precision:18}]},{name:"retAtom",fields:[{name:"atom",type:"id"},{name:"value",type:"json"}]}]},getpendsnotify:{name:"GetPendsNotify",type:"query",private:!1,sys:!0,fields:[],returns:[{name:"ret",fields:[{name:"phrase",type:"id"},{name:"count",type:"int"}]}]},getpendsheetfromno:{name:"GetPendSheetFromNo",type:"query",private:!1,sys:!0,fields:[{name:"pend",type:"char",size:200},{name:"key",type:"char",size:100}],returns:[{name:"$page",fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"no",type:"char",size:20},{name:"operator",type:"id"},{name:"sheet",type:"char",size:200}],order:"asc"}]},getpendsheetfromtarget:{name:"GetPendSheetFromTarget",type:"query",private:!1,sys:!0,fields:[{name:"pend",type:"char",size:200},{name:"key",type:"char",size:100}],returns:[{name:"$page",fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"no",type:"char",size:20},{name:"operator",type:"id"},{name:"sheet",type:"char",size:200}],order:"asc"}]},getpenddetailfromitem:{name:"GetPendDetailFromItem",type:"query",private:!1,sys:!0,fields:[{name:"pend",type:"char",size:200},{name:"key",type:"char",size:100}],returns:[{name:"$page",fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"origin",type:"id"},{name:"i",type:"id"},{name:"x",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"amount",type:"dec",scale:6,precision:18},{name:"price",type:"dec",scale:6,precision:18},{name:"pend",type:"id"},{name:"pendValue",type:"dec",scale:6,precision:18},{name:"sheet",type:"char",size:200},{name:"no",type:"char",size:30}],order:"asc"}]},getpenddetailfromsheetid:{name:"GetPendDetailFromSheetId",type:"query",private:!1,sys:!0,fields:[{name:"pend",type:"char",size:200},{name:"sheetId",type:"id"}],returns:[{name:"ret",fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"origin",type:"id"},{name:"i",type:"id"},{name:"x",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"amount",type:"dec",scale:6,precision:18},{name:"price",type:"dec",scale:6,precision:18},{name:"pend",type:"id"},{name:"pendValue",type:"dec",scale:6,precision:18},{name:"sheet",type:"char",size:200},{name:"no",type:"char",size:30}]}]},atom:{name:"Atom",type:"id",private:!1,sys:!0,fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"no",type:"char",size:30},{name:"ex",type:"char",size:200}],keys:[{name:"base",type:"id"}],global:!1,idType:3,isMinute:!1},spec:{name:"Spec",type:"id",private:!1,sys:!0,fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"}],keys:[{name:"base",type:"id"}],global:!1,idType:3,isMinute:!1},sheet:{name:"Sheet",type:"id",private:!1,sys:!0,fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"no",type:"char",size:20},{name:"operator",type:"id"}],keys:[{name:"base",type:"id"},{name:"no",type:"char",size:20}],global:!1,idType:3,isMinute:!0},bin:{name:"Bin",type:"id",private:!1,sys:!0,fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"origin",type:"id"},{name:"i",type:"id"},{name:"x",type:"id"},{name:"value",type:"dec",scale:6,precision:18},{name:"amount",type:"dec",scale:6,precision:18},{name:"price",type:"dec",scale:6,precision:18}],keys:[{name:"base",type:"id"}],global:!1,idType:3,isMinute:!0},pend:{name:"Pend",type:"id",private:!1,sys:!0,fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"detail",type:"id"},{name:"mid",type:"json"},{name:"value",type:"dec",scale:6,precision:18}],keys:[{name:"base",type:"id"}],global:!1,idType:3,isMinute:!0},sumformulatype:{name:"SumFormulaType",type:"enum",private:!1,sys:!0,values:{person:1,group:2}},sumformula:{name:"SumFormula",type:"id",private:!1,sys:!0,fields:[{name:"id",type:"id",null:!1},{name:"formulaType",type:"enum"},{name:"subject",type:"id"},{name:"post",type:"id"},{name:"sumSubject",type:"id"},{name:"caption",type:"char",size:100},{name:"start",type:"date"},{name:"end",type:"date"},{name:"ratio",type:"dec",scale:6,precision:18},{name:"valid",type:"tinyint"}],keys:[{name:"formulaType",type:"enum"},{name:"subject",type:"id"},{name:"post",type:"id"},{name:"sumSubject",type:"id"}],global:!1,idType:3,isMinute:!0},searchgrouppersons:{name:"SearchGroupPersons",type:"query",private:!1,sys:!0,fields:[{name:"group",type:"id"},{name:"key",type:"char",size:50}],returns:[{name:"$page",fields:[{name:"id",type:"id"},{name:"no",type:"char",size:50},{name:"ex",type:"char",size:50},{name:"phrase",type:"char",size:200},{name:"selected",type:"tinyint"}],order:"desc"}]},savesumformula:{name:"SaveSumFormula",type:"action",private:!1,sys:!0,fields:[{name:"id",type:"id"},{name:"formulaType",type:"enum"},{name:"subject",type:"id"},{name:"post",type:"id"},{name:"sumSubject",type:"id"},{name:"caption",type:"char",size:100},{name:"start",type:"date"},{name:"end",type:"date"},{name:"ratio",type:"dec",scale:6,precision:18}],returns:[{name:"ret",fields:[{name:"id",type:"id"}]}]},changesumformulacaption:{name:"ChangeSumFormulaCaption",type:"action",private:!1,sys:!0,fields:[{name:"id",type:"id"},{name:"caption",type:"char",size:100}],returns:[]},changesumformula:{name:"ChangeSumFormula",type:"action",private:!1,sys:!0,fields:[{name:"id",type:"id"},{name:"start",type:"date"},{name:"end",type:"date"},{name:"ratio",type:"dec",scale:6,precision:18}],returns:[{name:"ret",fields:[{name:"id",type:"id"}]}]},usersitefromtonwauser:{name:"UserSiteFromTonwaUser",type:"action",private:!1,sys:!0,fields:[{name:"tonwaUser",type:"id"}],returns:[{name:"ret",fields:[{name:"userSite",type:"id"}]}]},changeixmysum:{name:"ChangeIxMySum",type:"action",private:!1,sys:!0,fields:[{name:"userSite",type:"id"}],arrs:[{name:"added",fields:[{name:"id",type:"id"}]},{name:"removed",fields:[{name:"idDel",type:"id"}]}],returns:[]},getixmysum:{name:"GetIxMySum",type:"query",private:!1,sys:!0,fields:[{name:"userSite",type:"id"}],returns:[{name:"users",fields:[{name:"tonwaUser",type:"id"},{name:"userSite",type:"id"}]},{name:"atoms",fields:[{name:"userSite",type:"id"},{name:"atom",type:"id"},{name:"phrase",type:"char",size:200},{name:"no",type:"char",size:30},{name:"ex",type:"char",size:200}]}]},getallformula:{name:"GetAllFormula",type:"query",private:!1,sys:!0,fields:[],returns:[{name:"ret",fields:[{name:"id",type:"id",null:!1},{name:"formulaType",type:"enum"},{name:"subject",type:"id"},{name:"post",type:"id"},{name:"sumSubject",type:"id"},{name:"caption",type:"char",size:100},{name:"start",type:"date"},{name:"end",type:"date"},{name:"ratio",type:"dec",scale:6,precision:18},{name:"valid",type:"tinyint"}]}]},setsumgroupperson:{name:"SetSumGroupPerson",type:"action",private:!1,sys:!0,fields:[{name:"group",type:"id"},{name:"person",type:"id"},{name:"act",type:"tinyint"}],returns:[]},getmysums:{name:"GetMySums",type:"query",private:!1,sys:!0,fields:[{name:"start",type:"date"},{name:"end",type:"date"}],returns:[{name:"ret",fields:[{name:"obj",type:"id"},{name:"post",type:"id"},{name:"subject",type:"id"},{name:"value",type:"dec",scale:6,precision:18}]}]},getmybalance:{name:"GetMyBalance",type:"query",private:!1,sys:!0,fields:[],returns:[{name:"ret",fields:[{name:"obj",type:"id"},{name:"post",type:"id"},{name:"subject",type:"id"},{name:"value",type:"dec",scale:6,precision:18}]}]},getsitesetting:{name:"GetSiteSetting",type:"query",private:!1,sys:!0,fields:[],returns:[{name:"budsInt",fields:[{name:"bud",type:"id"},{name:"value",type:"bigint"}]},{name:"budsDec",fields:[{name:"bud",type:"id"},{name:"value",type:"dec",scale:6,precision:18}]},{name:"budsStr",fields:[{name:"bud",type:"id"},{name:"value",type:"char",size:200}]},{name:"budsCheck",fields:[{name:"bud",type:"id"},{name:"item",type:"id"}]}]},atomuom:{name:"AtomUom",type:"id",private:!1,sys:!0,fields:[{name:"id",type:"id",null:!1},{name:"atom",type:"id",ID:"atom",tuid:"atom"},{name:"uom",type:"id",ID:"atom",tuid:"atom"},{name:"visible",type:"tinyint"}],keys:[{name:"atom",type:"id",ID:"atom",tuid:"atom"},{name:"uom",type:"id",ID:"atom",tuid:"atom"}],global:!1,idType:3,isMinute:!1,stars:["atom","uom"]},atomspec:{name:"AtomSpec",type:"id",private:!1,sys:!0,fields:[{name:"id",type:"id",null:!1},{name:"atomUom",type:"id",ID:"atomuom",tuid:"atomuom"},{name:"spec",type:"id"}],keys:[{name:"atomUom",type:"id",ID:"atomuom",tuid:"atomuom"},{name:"spec",type:"id"}],global:!1,idType:3,isMinute:!1,stars:["atomUom","spec"]},saveuomtype:{name:"SaveUomType",type:"action",private:!1,sys:!0,fields:[{name:"id",type:"id"},{name:"type",type:"id"}],returns:[]},saveuomiuom:{name:"SaveUomIUom",type:"action",private:!1,sys:!0,fields:[{name:"id",type:"id"},{name:"type",type:"id"}],returns:[]},getuomfromtype:{name:"GetUomFromType",type:"query",private:!1,sys:!0,fields:[{name:"id",type:"id"}],returns:[{name:"uom",fields:[{name:"id",type:"id"},{name:"no",type:"char",size:30},{name:"ex",type:"char",size:200},{name:"discription",type:"char",size:100}]}]},getuomilistofuom:{name:"GetUomIListOfUom",type:"query",private:!1,sys:!0,fields:[{name:"uom",type:"id"}],returns:[{name:"$page",fields:[{name:"id",type:"id"},{name:"no",type:"char",size:50},{name:"ex",type:"char",size:50},{name:"phrase",type:"char",size:200}],order:"desc"}]},getatomuomi:{name:"GetAtomUomI",type:"query",private:!1,sys:!0,fields:[{name:"id",type:"id"}],returns:[{name:"uomI",fields:[{name:"id",type:"id"},{name:"no",type:"char",size:30},{name:"ex",type:"char",size:200}]},{name:"uomX",fields:[{name:"id",type:"id"},{name:"no",type:"char",size:30},{name:"ex",type:"char",size:200},{name:"ratio",type:"dec",scale:6,precision:18},{name:"prevEx",type:"char",size:200},{name:"prevRatio",type:"dec",scale:6,precision:18},{name:"atomUom",type:"id"}]}]},saveuomx:{name:"SaveUomX",type:"action",private:!1,sys:!0,fields:[{name:"i",type:"id"},{name:"no",type:"char",size:30},{name:"ex",type:"char",size:100},{name:"ratio",type:"dec",scale:6,precision:18}],returns:[{name:"ret",fields:[{name:"id",type:"id"}]}]},deluomx:{name:"DelUomX",type:"action",private:!1,sys:!0,fields:[{name:"uomI",type:"id"},{name:"uomX",type:"id"}],returns:[]},saveatomuom:{name:"SaveAtomUom",type:"action",private:!1,sys:!0,fields:[{name:"atom",type:"id"},{name:"uom",type:"id"}],returns:[{name:"ret",fields:[{name:"id",type:"id",ID:"atomuom",tuid:"atomuom"}]}]},hideatomuomx:{name:"HideAtomUomX",type:"action",private:!1,sys:!0,fields:[{name:"id",type:"id"}],returns:[]},deleteatomuomi:{name:"DeleteAtomUomI",type:"action",private:!1,sys:!0,fields:[{name:"atom",type:"id"},{name:"uomI",type:"id"}],returns:[]},saveatomspec:{name:"SaveAtomSpec",type:"action",private:!1,sys:!0,fields:[{name:"atomUom",type:"id"},{name:"spec",type:"id"}],returns:[{name:"ret",fields:[{name:"id",type:"id",ID:"atomspec",tuid:"atomspec"}]}]},getuomi:{name:"GetUomI",type:"query",private:!1,sys:!0,fields:[{name:"id",type:"id"}],returns:[{name:"UomI",fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"no",type:"char",size:30},{name:"ex",type:"char",size:200},{name:"discription",type:"char",size:100},{name:"ratio",type:"dec",scale:6,precision:18},{name:"uom",type:"id",ID:"atom",tuid:"atom"},{name:"uomNo",type:"char",size:30},{name:"uomEx",type:"char",size:100},{name:"uomDiscription",type:"char",size:100}]},{name:"UomX",fields:[{name:"id",type:"id",null:!1},{name:"base",type:"id"},{name:"no",type:"char",size:30},{name:"ex",type:"char",size:200},{name:"ratio",type:"dec",scale:6,precision:18}]}]},$biz:{$user:{name:"$user",type:"$user"},$unit:{name:"$unit",type:"$unit"},$:{name:"$",type:"atom",props:[{name:"uom",type:"prop",dataType:"ID"}]},sum:{name:"sum",jName:"Sum",type:"moniker",caption:"Sum",assigns:[{name:"psource",type:"assign",dataType:"int"},{name:"psource1",type:"assign",dataType:"int"}]},subject:{name:"subject",jName:"Subject",type:"atom",caption:"科目",props:[{name:"balance",type:"prop",caption:"结余",dataType:"radio",items:[["none","无",0],["yes","有",1]]}],uom:!0},sumpersonpost:{name:"sumpersonpost",jName:"SumPersonPost",type:"atom",caption:"岗位"},sumgrouppost:{name:"sumgrouppost",jName:"SumGroupPost",type:"atom",caption:"职能组"},sumgroup:{name:"sumgroup",jName:"SumGroup",type:"atom",caption:"小组合计"},sitesetting:{name:"sitesetting",jName:"SiteSetting",type:"moniker",caption:"SiteSetting",assigns:[{name:"currency",type:"assign",caption:"默认货币",dataType:"ID"},{name:"startsummonth",type:"assign",caption:"汇总开始月",dataType:"int"},{name:"startfiscalmonth",type:"assign",caption:"财年开始月",dataType:"int"},{name:"startfiscalday",type:"assign",caption:"财年开始日",dataType:"int"}]},uom:{name:"uom",jName:"Uom",type:"atom",caption:"基本单位",props:[{name:"discription",type:"prop",caption:"说明",dataType:"char"},{name:"type",type:"prop",dataType:"radio",items:[["count","计数",1],["length","长度",2],["area","面积",3],["volume","体积",4],["weight","重量",5],["time","时长",6],["currency","货币",7]]}]},uomi:{name:"uomi",jName:"UomI",type:"atom",caption:"计量单位",props:[{name:"discription",type:"prop",caption:"说明",dataType:"char"},{name:"uom",type:"prop",caption:"基本单位",dataType:"atom",atom:"uom"},{name:"ratio",type:"prop",caption:"换算率",dataType:"dec"}]},uomx:{name:"uomx",jName:"UomX",type:"atom",caption:"换算单位"},a菜单:{name:"a菜单",jName:"A菜单",type:"permit",caption:"A菜单",items:[{phrase:"permit.a菜单.i1",name:"i1"},{phrase:"permit.a菜单.i2",name:"i2"},{phrase:"permit.a菜单.i4",name:"i4"}],permits:[]},销售1:{name:"销售1",type:"permit",items:[{phrase:"permit.销售1.入库",name:"入库"},{phrase:"permit.销售1.发货",name:"发货"},{phrase:"permit.销售1.检验",name:"检验"}],permits:[]},入库:{name:"入库",type:"permit",items:[{phrase:"permit.入库.上架",name:"上架"},{phrase:"permit.入库.收货",name:"收货"}],permits:[]},检验:{name:"检验",type:"permit",items:[{phrase:"permit.检验.初检",name:"初检"},{phrase:"permit.检验.复检",name:"复检"}],permits:["入库"]},经理:{name:"经理",type:"role"},销售部经理:{name:"销售部经理",type:"role"},检验员:{name:"检验员",type:"role"},storage:{name:"storage",type:"moniker",caption:"库存",assigns:[{name:"goodsinit",type:"assign",dataType:"dec"},{name:"goodsbalance",type:"assign",dataType:"dec",history:!0}]},c:{name:"c",type:"moniker",assigns:[{name:"流水",type:"assign",caption:"下一步",dataType:"char",value:"s2"}]},accountsetting:{name:"accountsetting",jName:"AccountSetting",type:"moniker",caption:"AccountSetting",assigns:[{name:"name",type:"assign",caption:"单位名称",dataType:"char"},{name:"库存上限",type:"assign",dataType:"dec"},{name:"库存下限",type:"assign",dataType:"dec"}]},personsetting:{name:"personsetting",jName:"PersonSetting",type:"moniker",caption:"PersonSetting",assigns:[{name:"name",type:"assign",caption:"名字",dataType:"char"},{name:"工时上限",type:"assign",dataType:"int"},{name:"工时下限",type:"assign",dataType:"int"}]},price:{name:"price",jName:"Price",type:"moniker",caption:"Price",assigns:[{name:"retail",type:"assign",dataType:"dec"}]},customertree:{name:"customertree",jName:"CustomerTree",type:"tree",caption:"客户分组"},vendortree:{name:"vendortree",jName:"VendorTree",type:"tree",caption:"供应商分组"}}};var it=(e=>(e.$="$",e.Subject="subject",e.SumPersonPost="sumpersonpost",e.SumGroupPost="sumgrouppost",e.SumGroup="sumgroup",e.Uom="uom",e.UomI="uomi",e.UomX="uomx",e))(it||{});const ON={"jksoft/jksoft-mini-jxc-trial":AN},MN={bz:{name:"bizdev",alias:"bz"},br:{name:"bruce",alias:"br"},jksoft:{name:"jksoft",alias:"js"}},FN=[{dev:"jksoft",name:"jksoft-mini-jxc-trial",alias:"Ticket"}],TN=[{dev:"jksoft",name:"ticket",alias:"Ticket"},{dev:"bz",name:"jxc",alias:"Jxc"}],RN={devs:MN,uqs:FN,uqs1:TN},LN=function(){let e,t,n=/\+/g,r=/([^&=]+)=?([^&]*)/g,i=function(c){return decodeURIComponent(c.replace(n," "))},s;window&&(s=window.location.search.substring(1));let a={};for(;s;){let c=r.exec(s);if(!c)break;a[i(c[1])]=i(c[2])}let o=a.u||a.unit;if(o){let c=o.indexOf("-");if(c>=0){let d=o.charCodeAt(c+1);const f="tT";e=d===f.charCodeAt(0)||d===f.charCodeAt(1),o=o.substring(0,c)}else e=!1;o[0]==="0"?t=Number(o):t=rr(o),isNaN(t)===!0&&(t=void 0)}else t=0;return{isDevelopment:!1,testing:e,unit:t}}();class $x{constructor(t,n,r,i){x(this,"biz");x(this,"uq");x(this,"type");x(this,"_name");x(this,"id");x(this,"phrase");x(this,"caption");x(this,"bizPhraseType");this.biz=t,this.uq=t.uq,this.id=n,this._name=r,this.type=i}get name(){return this._name}setName(t){this._name=t}fromSchema(t){for(let n in t)this.fromSwitch(n,t[n])}fromSwitch(t,n){switch(t){default:debugger;throw Error(`unknown ${t}`);case"id":break;case"name":break;case"jName":break;case"type":break;case"dataType":break;case"history":break;case"phrase":this.phrase=n;break;case"caption":this.caption=n;break}}}const qN=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),UN=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),$N=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),VN=[qN,UN,$N];function zN(e,t){let n=VN[t];return n===void 0&&(n=new Intl.NumberFormat("en-US",{minimumFractionDigits:t,maximumFractionDigits:t})),n.format(e??0).split(".")}function BN(e,t,n,r){let i;t!==void 0&&(i=l.jsx("small",{children:l.jsx("small",{className:"text-muted",children:t})})),n===void 0&&(n=2);let s=zN(e,n),a=s[0],o=r===!1?l.jsx(l.Fragment,{children:a}):l.jsx("b",{children:a}),u=s[1],c;return u!==void 0&&(c=l.jsx("span",{className:"small text-muted",children:l.jsxs("small",{children:[" .",u]})})),l.jsxs("span",{children:[o,c," ",i]})}const ur={cacheTime:100,refetchOnWindowFocus:!1};function Vx(e,t){let n,r={},i=t[0];if(i!==void 0){const{phrase:o,value:[u,c]}=i;n={id:e,phrase:o,no:u,ex:c}}let s=t.length,a={};for(let o=1;o<s;o++){let{phrase:u,value:c}=t[o];switch(c.length){default:case 0:debugger;break;case 1:r[u]=c[0];break;case 2:let d=a[u];d===void 0&&(a[u]=d={}),d[c[1]]=!0;break}}for(let o in a)r[o]=a[o];return{main:n,buds:r}}function zx({phrase:e}){const t=G();let r=we(t._notifyCounts)[e];if(r>0)return l.jsxs("span",{className:"ms-3 badge rounded-pill bg-danger",children:[r>100?"99+":r,l.jsx("span",{className:"visually-hidden",children:"unread messages"})]})}function $p(e){switch(typeof e){default:debugger;throw new Error("wrong part in idPart(part)");case"undefined":return"";case"string":return"/:"+e;case"number":return"/"+Pn(e)}}function bo(e,t,n){return`${e}${$p(t)}${$p(n)}`}const Bx=Date.parse("1970-1-1"),Yx=1e3*60*60*24;function Wx(e){return Math.floor((Date.parse(e)-Bx)/Yx)+1}function YN(e){return new Date(Bx+e*Yx)}function Hx(e){let n=YN(e).toISOString(),r=n.indexOf("T");return n.substring(0,r)}var Ie=(e=>(e[e.none=0]="none",e[e.int=11]="int",e[e.atom=12]="atom",e[e.radio=13]="radio",e[e.check=14]="check",e[e.intof=15]="intof",e[e.pick=18]="pick",e[e.ID=19]="ID",e[e.dec=21]="dec",e[e.char=31]="char",e[e.str=32]="str",e[e.date=41]="date",e[e.datetime=42]="datetime",e))(Ie||{});class rh{fromSchema(t){}scan(t){}valueToContent(t){return t}}class vi extends rh{constructor(){super(...arguments);x(this,"dataType","number")}}class Qx extends rh{constructor(){super(...arguments);x(this,"dataType","string")}}class WN extends Qx{constructor(){super(...arguments);x(this,"type",0)}}class HN extends vi{constructor(){super(...arguments);x(this,"type",11)}}class QN extends vi{constructor(){super(...arguments);x(this,"type",21)}}class GN extends Qx{constructor(){super(...arguments);x(this,"type",32)}}class KN extends vi{constructor(){super(...arguments);x(this,"type",12);x(this,"atom");x(this,"bizAtom")}fromSchema(n){this.atom=n.atom}scan(n){this.bizAtom=n.entities[this.atom]}}class XN extends vi{constructor(){super(...arguments);x(this,"type",19);x(this,"IDName");x(this,"ID")}fromSchema(n){this.IDName=n.ID}scan(n){this.IDName!==void 0&&(this.ID=n.uqApp.uq[this.IDName])}}class ih extends rh{constructor(){super(...arguments);x(this,"optionsName");x(this,"options")}get dataType(){}scan(n){this.options=n.entities[this.optionsName]}fromSchema(n){this.optionsName=n.options}}class ZN extends ih{constructor(){super(...arguments);x(this,"type",15)}}class JN extends ih{constructor(){super(...arguments);x(this,"type",13)}}class eD extends ih{constructor(){super(...arguments);x(this,"type",14)}}class tD extends vi{constructor(){super(...arguments);x(this,"type",41)}valueToContent(n){return Hx(n)}}class nD extends vi{constructor(){super(...arguments);x(this,"type",42)}}class rD extends vi{constructor(){super(...arguments);x(this,"type",18);x(this,"schema");x(this,"atom");x(this,"pick");x(this,"value")}fromSchema(n){this.schema=n}scan(n){const{entities:r}=n,{pick:i}=this.schema;if(i!==void 0){const s=r[i];switch(s.type){case"atom":this.atom=s;break;case"pick":this.pick=s;break}}this.schema=void 0}}class lu extends $x{constructor(n,r,i,s,a){super(n,r,i,"bud");x(this,"entity");x(this,"budDataType");x(this,"defaultValue");x(this,"ex");this.entity=a;let o;switch(s){case 0:o=new WN;break;case 11:o=new HN;break;case 21:o=new QN;break;case 31:case 32:o=new GN;break;case 12:o=new KN;break;case 19:o=new XN;break;case 18:o=new rD;break;case 15:o=new ZN;break;case 13:o=new JN;break;case 14:o=new eD;break;case 41:o=new tD;break;case 42:o=new nD;break}this.budDataType=o}scan(){this.budDataType.scan(this.biz)}fromSwitch(n,r){switch(n){default:super.fromSwitch(n,r);break;case"ex":this.ex=r;break;case"items":case"atom":case"options":break;case"value":this.defaultValue=r;break}}}class ln extends $x{constructor(){super(...arguments);x(this,"selfProps",[]);x(this,"buds",{});x(this,"props",[])}fromSwitch(n,r){if(r!==void 0)switch(n){default:super.fromSwitch(n,r);break;case"props":this.fromProps(r);break}}fromProp(n){let{id:r,name:i,dataType:s}=n,a=new lu(this.biz,r,i,s,this),{budDataType:o}=a;if(o===void 0){debugger;return}return o.fromSchema(n),a.fromSchema(n),a}fromProps(n){for(let r of n){let i=this.fromProp(r);i!==void 0&&this.selfProps.push(i)}}buildBuds(){for(let n of this.selfProps){let{id:r,name:i,phrase:s}=n;this.buds[r]=n,this.buds[i]=n,this.buds[s]=n,this.props.push(n)}}scan(){for(let n of this.selfProps)n.scan();this.buildBuds()}}class Gx extends ln{constructor(){super(...arguments);x(this,"_extends");x(this,"children",[])}fromSwitch(n,r){switch(n){default:super.fromSwitch(n,r);break;case"extends":this.fromExtends(r);break}}buildBuds(){const n=[];for(let s=this;s!==void 0;s=s._extends)n.unshift(s);let{buds:r,props:i}=this;for(let s of n)for(let a of s.selfProps){let{name:o,phrase:u}=a;r[o]=a,r[u]=a,i.push(a)}}fromExtends(n){if(n===void 0)return;let r=this._extends=this.biz.entities[n];if(r===void 0)debugger;r.children.push(this)}}class iD extends Gx{constructor(){super(...arguments);x(this,"uom")}fromSwitch(n,r){switch(n){default:super.fromSwitch(n,r);break;case"uom":this.uom=r;break}}}class sD extends Gx{constructor(){super(...arguments);x(this,"base")}fromSwitch(n,r){switch(n){default:super.fromSwitch(n,r);break;case"base":this.base=r;break}}}class aD extends sD{constructor(){super(...arguments);x(this,"keyColl",{});x(this,"keys",[]);x(this,"ix")}fromSwitch(n,r){switch(n){default:super.fromSwitch(n,r);break;case"keys":this.fromKeys(r);break;case"ix":this.ix=r;break}}fromKeys(n){for(let r of n){let{id:i,name:s,dataType:a}=r,o=new lu(this.biz,i,s,a,this),{budDataType:u}=o;if(u===void 0){debugger;continue}u.fromSchema(r),o.fromSchema(r),this.keyColl[o.phrase]=o,this.keys.push(o)}}scan(){super.scan();for(let n of this.keys)n.scan()}getSpecValues(n){if(!n)return"";let r=[];for(let s of this.keys)r.push(n[s.name]??"");for(let s of this.props)r.push(n[s.name]??"");return r.join(String.fromCharCode(12))}fromSpecValues(n){let r={},i=n.split(String.fromCharCode(12)),s=0;for(let a of this.keys)r[a.name]=i[s++];for(let a of this.props)r[a.name]=i[s++];return r}}class lD extends ln{constructor(){super(...arguments);x(this,"atoms");x(this,"specs")}fromSwitch(n,r){const{entities:i}=this.biz;function s(a){return a.map(o=>i[o])}switch(n){default:super.fromSwitch(n,r);break;case"atoms":this.atoms=s(r);break;case"specs":this.specs=s(r);break}}scan(){super.scan();let n=this.specs.length;for(let r=0;r<n;r++)if(this.specs[r].name==="specuom"){this.specs.splice(r,1);break}}}class oD extends ln{}class uD extends ln{constructor(){super(...arguments);x(this,"i");x(this,"x");x(this,"pend");x(this,"value");x(this,"price");x(this,"amount")}fromSwitch(n,r){if(r!==void 0)switch(n){default:super.fromSwitch(n,r);break;case"i":this.i=r;break;case"x":this.x=r;break;case"pend":this.fromPend(r);break;case"value":this.fromValue(r);break;case"price":this.fromPrice(r);break;case"amount":this.fromAmount(r);break}}fromPend(n){let{caption:r,entity:i,search:s}=n;this.pend={caption:r,entity:this.biz.entities[i],search:s}}fromValue(n){this.value=this.fromProp(n)}fromPrice(n){this.price=this.fromProp(n)}fromAmount(n){this.amount=this.fromProp(n)}buildBudPickable(n){const{id:r,name:i,caption:s}=n;let a=new lu(this.biz,r,i,Ie.pick,this);return a.caption=s,a.budDataType.fromSchema(n),a.scan(),a}scan(){super.scan(),this.i!==void 0&&(this.i=this.buildBudPickable(this.i)),this.x!==void 0&&(this.x=this.buildBudPickable(this.x))}}const cD=["s","si","sx","svalue","sprice","samount","i","x","value","price","amount"];class dD extends ln{constructor(){super(...arguments);x(this,"predefined")}fromSwitch(n,r){switch(n){default:if(cD.includes(n)===!0)break;super.fromSwitch(n,r);break;case"predefined":this.predefined=r;break}}}class fD extends ln{constructor(){super(...arguments);x(this,"main");x(this,"coreDetail");x(this,"details",[]);x(this,"detailActs",[])}fromSwitch(n,r){switch(n){default:super.fromSwitch(n,r);break;case"main":this.fromMain(r);break;case"details":this.fromDetails(r);break;case"acts":this.fromActs(r);break}}fromMain(n){this.main=this.biz.entities[n]}fromDetails(n){for(let{detail:r,caption:i}of n)this.details.push({detail:this.biz.entities[r],caption:i});this.coreDetail=this.details[0].detail}fromActs(n){for(const r of n){const{name:i,fromPend:s,detail:a}=r;this.detailActs.push({actName:i,detail:this.biz.entities[a],fromPend:this.biz.entities[s]})}}getAct(n,r){for(let i of this.detailActs){let{actName:s,detail:a}=i;if(s===r&&a.name===n)return i}}}class hD extends ln{}class mD extends ln{}class pD extends ln{constructor(){super(...arguments);x(this,"items");x(this,"permits");x(this,"permitNames")}fromSwitch(n,r){switch(n){default:super.fromSwitch(n,r);break;case"items":this.items=r;break;case"permits":this.permitNames=r;break}}scan(){const{entities:n}=this.biz;this.permits=this.permitNames.map(r=>n[r]),this.permitNames=void 0}}class yD extends ln{}class vD extends ln{constructor(){super(...arguments);x(this,"items",[])}fromSwitch(n,r){switch(n){default:super.fromSwitch(n,r);break;case"items":this.fromItems(r);break}}fromItems(n){this.items.push(...n.map(r=>({...r,phrase:`${this.phrase}.${r.name}`})))}}class gD extends lu{constructor(){super(...arguments);x(this,"atom")}}class xD extends ln{constructor(){super(...arguments);x(this,"title");x(this,"from");x(this,"joins");x(this,"lists")}fromSwitch(n,r){switch(n){default:super.fromSwitch(n,r);break;case"title":this.fromTitle(r);break;case"from":this.fromFrom(r);break;case"joins":this.fromJoins(r);break;case"lists":this.fromLists(r);break}}fromTitle(n){this.title=n.map(r=>{const{caption:i,title:[s,a]}=r;return{caption:i,entity:this.biz.entities[s],bud:a}})}fromFrom(n){this.from=this.biz.entities[n]}fromJoins(n){this.joins=n.map(r=>{const{type:i,entity:s}=r;return{type:i,entity:this.biz.entities[s]}})}fromLists(n){this.lists=n.map(r=>{const{id:i,name:s,caption:a,atom:o}=r;let u=new gD(this.biz,i,s,Ie.none,this);return u.caption=a,u.atom=this.biz.entities[o],u})}scan(){for(let n of this.title)n.bud=n.entity.buds[n.bud]}}class Vp{constructor(t,n){x(this,"uqApp");x(this,"uq");x(this,"atoms",[]);x(this,"atomRoots",[]);x(this,"specs",[]);x(this,"sheets",[]);x(this,"bins",[]);x(this,"pends",[]);x(this,"picks",[]);x(this,"options",[]);x(this,"ties",[]);x(this,"trees",[]);x(this,"titles",[]);x(this,"reports",[]);x(this,"roles",[]);x(this,"permits",[]);x(this,"all",[]);x(this,"_refresh",Ae(!1));x(this,"entities",{});x(this,"entityIds",{});x(this,"buildSheet",(t,n,r)=>{let i=new fD(this,t,n,r);return this.sheets.push(i),i});x(this,"buildBin",(t,n,r)=>{let i=new uD(this,t,n,r);return this.bins.push(i),i});x(this,"buildPend",(t,n,r)=>{let i=new dD(this,t,n,r);return this.pends.push(i),i});x(this,"buildAtom",(t,n,r)=>{let i=new iD(this,t,n,r);return this.atoms.push(i),i});x(this,"buildSpec",(t,n,r)=>{let i=new aD(this,t,n,r);return this.specs.push(i),i});x(this,"buildPick",(t,n,r)=>{let i=new lD(this,t,n,r);return this.picks.push(i),i});x(this,"buildOptions",(t,n,r)=>{let i=new vD(this,t,n,r);return this.options.push(i),i});x(this,"buildPermit",(t,n,r)=>{let i=new pD(this,t,n,r);return this.permits.push(i),i});x(this,"buildRole",(t,n,r)=>{let i=new yD(this,t,n,r);return this.roles.push(i),i});x(this,"buildTitle",(t,n,r)=>{let i=new hD(this,t,n,r);return this.titles.push(i),i});x(this,"buildReport",(t,n,r)=>{let i=new xD(this,t,n,r);return this.reports.push(i),i});x(this,"buildTree",(t,n,r)=>{let i=new oD(this,t,n,r);return this.trees.push(i),i});x(this,"buildTie",(t,n,r)=>{let i=new mD(this,t,n,r);return this.ties.push(i),i});this.uqApp=t,this.uq=t.uq,this.buildEntities(n)}init(){}entityFrom62(t){let n=rr(t);return this.entityIds[n]}buildEntities(t){if(t===void 0)return;const n={sheet:this.buildSheet,bin:this.buildBin,pend:this.buildPend,atom:this.buildAtom,spec:this.buildSpec,pick:this.buildPick,options:this.buildOptions,report:this.buildReport,permit:this.buildPermit,role:this.buildRole,title:this.buildTitle,tree:this.buildTree,tie:this.buildTie};for(let s of this.all)s[0].splice(0);this.all.splice(0);let r=t,i=[];this.entities={},this.entityIds={};for(let s in r){let a=r[s],{id:o,name:u,phrase:c,type:d,caption:f}=a,m=n[d];if(m===void 0){if(u==="$user"||u==="$unit")continue;throw new Error(`unknown biz type='${d}' name='${u}' caption='${f}'`)}let v=m(o,u,d);this.entityIds[o]=v,this.entities[u]=v,u!==c&&(this.entities[c]=v),i.push([v,a])}for(let[s,a]of i)s.fromSchema(a);for(let[s]of i)s.scan();this.buildRootAtoms(),this.all.push([this.atoms],[this.atomRoots,"基础编码","id-card-o"],[this.specs,"细分编码","asterisk"],[this.sheets,"业务单据","file"],[this.reports,"报表","file"],[this.bins,"单据条","file-text-o"],[this.pends,"待处理","clone"],[this.picks,"捡取器","hand-pointer-o"],[this.options,"可选项","check-square-o"],[this.ties,"对照表","list"],[this.trees,"层级结构","indent"],[this.titles,"科目","flag-o"],[this.roles,"角色","user-o"],[this.permits,"许可","user"]),this.refresh()}refresh(){le(this._refresh,!fe(this._refresh))}delEntity(t){this.entities[t.name],this.entityIds[t.id];for(let n of this.all){const[r]=n;for(let i=0;i<r.length;i++)if(r[i]===t){r.splice(i,1);break}}this.refresh()}buildRootAtoms(){for(let t in this.entityIds){const n=this.entityIds[t];if(n.type==="atom"){const r=n,{_extends:i}=r;if(i!==void 0)continue;this.atomRoots.push(r)}}}}var ce=(e=>(e[e.home=0]="home",e[e.relation=1]="relation",e[e.discover=2]="discover",e[e.supervise=3]="supervise",e[e.ids=4]="ids",e[e.test=5]="test",e[e.debug=6]="debug",e[e.me=7]="me",e[e.find=8]="find",e[e.version=9]="version",e[e.changePassword=10]="changePassword",e[e.aboutTheApp=11]="aboutTheApp",e[e.logout=12]="logout",e[e.pleaseLogin=13]="pleaseLogin",e[e.userQuit=14]="userQuit",e[e.content=15]="content",e[e.backend=16]="backend",e[e.list=17]="list",e))(ce||{});const wD={[ce.home]:"Home",[ce.relation]:"Relation",[ce.discover]:"Discover",[ce.supervise]:"Supervise",[ce.ids]:"Items",[ce.test]:"Test",[ce.debug]:"Debug",[ce.me]:"Me",[ce.find]:"Find",[ce.version]:"Version",[ce.changePassword]:"Change password",[ce.aboutTheApp]:"About the APP",[ce.logout]:"Logout",[ce.pleaseLogin]:"Login",[ce.userQuit]:"User quit",[ce.content]:"Content",[ce.backend]:"Backend Management",[ce.list]:"List"},bD={[ce.home]:"首页",[ce.relation]:"关系",[ce.discover]:"发现",[ce.supervise]:"团队",[ce.ids]:"基础ID",[ce.test]:"测试",[ce.debug]:"Debug",[ce.me]:"我",[ce.find]:"发现",[ce.version]:"版本",[ce.changePassword]:"修改密码",[ce.aboutTheApp]:"关于本APP",[ce.logout]:"退出登录",[ce.pleaseLogin]:"登录",[ce.userQuit]:"注销用户",[ce.content]:"内容",[ce.backend]:"后台管理",[ce.list]:"列表"},Kx=Qg({en:wD,zh:bD}),SD="/assets/logo-70aa190a.svg";function Xx(){return l.jsxs("div",{className:"d-flex align-items-center position-relative",children:[l.jsx("img",{className:"App-logo h-3c position-absolute",src:SD,alt:"img"}),l.jsxs("div",{className:"h3 flex-fill text-center",children:[l.jsx("span",{className:"text-primary me-3",children:"同"}),l.jsx("span",{className:"text-danger",children:"花"})]})]})}const Zx="/privacy",jD=l.jsx(l.Fragment,{children:l.jsx(ae,{path:Zx,element:l.jsx(kD,{})})});function Jx(){return l.jsx("div",{className:"d-flex p-3 align-items-center justify-content-center bg-light border-top",children:l.jsx(Ce,{to:Zx,className:"small d-inline-block ",children:"隐私政策"})})}function kD(){return l.jsx(H,{auth:!1,header:"隐私政策",children:l.jsx("div",{className:"d-grid p-3",children:CD.split(`
`).map((e,t)=>l.jsx("p",{children:e},t))})})}const CD=`
我们将保护您的隐私

同花
`;function _D(){const{state:e}=Ur();return l.jsx(kN,{url:e,loginTop:l.jsx(Xx,{}),privacy:l.jsx(Jx,{}),withBack:!1})}function ND(){return l.jsx(Ux,{loginTop:l.jsx(Xx,{}),privacy:l.jsx(Jx,{})})}function DD(){let e=async()=>{},t=()=>{};return l.jsx(CN,{onLogout:e,resetAll:t})}function ED(){let e=G();return l.jsx(H,{header:"关于APP",children:l.jsxs("div",{className:"py-5 px-3 my-3 w-max-30c mx-auto bg-white",children:[l.jsxs("div",{className:"text-center mb-5 position-relative",children:[l.jsxs("small",{className:"text-muted position-absolute",style:{right:"0",top:"-2.8rem"},children:["版本: ",e.version]}),l.jsx("i",{className:"text-danger position-absolute top-0 start-0 fa fa-fire fa-2x",style:{left:"2rem",top:"0.5rem"}}),l.jsxs("b",{className:"text-danger h5 mb-0",children:[l.jsx("span",{className:"text-primary",children:"同"}),l.jsx("b",{className:"mx-1",children:"花"})]}),l.jsx("br",{}),l.jsx("small",{className:"text-info",children:"企业管理系统开发平台"})]}),l.jsxs("ul",{children:[l.jsx("li",{children:"面向企业业务的UQ数据库编程语言。"}),l.jsx("li",{children:"自适应网页编程。"}),l.jsx("li",{children:"前台代码跟服务器代码协同。"})]}),l.jsxs("div",{className:"mt-5 text-center",children:[l.jsx("small",{className:"text-muted me-2",children:"by"}),"同花"]})]})})}function ID(){let e=G(),[t]=Ef(e.user),n=Hg(Kx),r=async o=>{let{name:u,value:c}=o;e.setUserProp(u,c)},i={labelAlign:"end",MidContainer:function({children:o}){return l.jsx("div",{className:"ms-2",children:o})}};function s({text:o,onClick:u}){let c="px-3 py-3";return u&&(c+=" cursor-pointer"),l.jsx("div",{className:c,onClick:u,children:o})}let a=n(ce.changePassword);return l.jsx(H,{header:"个人信息",children:l.jsxs("div",{children:[l.jsxs(pa,{...i,children:["ok",l.jsx("div",{children:"content"}),l.jsx(s,{text:"right"})]}),l.jsx(ge,{}),l.jsxs(pa,{...i,children:["ok1",l.jsx("div",{children:"content"}),l.jsx(s,{text:"right"})]}),l.jsx(ge,{}),l.jsx(Fx,{...i,label:"a",value:1,type:"number"}),l.jsx(ge,{}),l.jsxs(Tx,{className:"container",values:t,onValuesChanged:r,labelSize:3,children:[l.jsx(_a,{label:"别名",name:"nick",placeholder:"好的别名更方便记忆"}),l.jsx(ge,{}),l.jsx(vd,{label:a,toEdit:t0,children:l.jsx(J,{className:"text-info m-2 align-self-center",name:"key"})}),l.jsx(ge,{}),l.jsx(vd,{label:n(ce.userQuit),toEdit:r0,children:l.jsx(J,{className:"text-info m-2 align-self-center",name:"key"})})]}),l.jsx(ge,{}),l.jsx("div",{className:"mt-5 w-100 text-center",children:l.jsxs(Ce,{className:"btn btn-danger w-100 w-max-20c",to:"../"+n0,children:[l.jsx(J,{name:"sign-out",size:"lg"})," ",n(ce.logout)]})})]})})}const kd="me",e0="edit",t0="changePassword",n0="logout",r0="quit",PD="about",AD=l.jsxs(ae,{path:kd+"/*",children:[l.jsx(ae,{path:e0+"/*",element:l.jsx(OD,{})}),l.jsx(ae,{path:PD,element:l.jsx(ED,{})})]});function OD(){return l.jsx(l.Fragment,{children:l.jsxs(Lf,{children:[l.jsx(ae,{path:"*",element:l.jsx(ID,{})}),l.jsx(ae,{path:t0,element:l.jsx(_N,{})}),l.jsx(ae,{path:n0,element:l.jsx(DD,{})}),l.jsx(ae,{path:r0,element:l.jsx(DN,{})})]})})}function i0({permit:e,children:t}){let n=G();if(s0(n,e)===!0)return l.jsx(l.Fragment,{children:t})}function s0(e,t){let{uqSites:n}=e;if(n===void 0)return!1;let{userSite:r}=n;if(r===void 0)return!1;let{permits:i,isAdmin:s}=r;if(s===!0)return!0;if(t!==void 0){if(typeof t=="string"){if(i[t]===!0)return!0}else for(let a of t)if(i[a]===!0)return!0}return!1}var Oa=e=>e.type==="checkbox",Ti=e=>e instanceof Date,Et=e=>e==null;const a0=e=>typeof e=="object";var dt=e=>!Et(e)&&!Array.isArray(e)&&a0(e)&&!Ti(e),MD=e=>dt(e)&&e.target?Oa(e.target)?e.target.checked:e.target.value:e,FD=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,TD=(e,t)=>e.has(FD(t)),Ma=e=>Array.isArray(e)?e.filter(Boolean):[],et=e=>e===void 0,ee=(e,t,n)=>{if(!t||!dt(e))return n;const r=Ma(t.split(/[,[\].]+?/)).reduce((i,s)=>Et(i)?i:i[s],e);return et(r)||r===e?et(e[t])?n:e[t]:r};const zp={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},mn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},$n={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};re.createContext(null);var RD=(e,t,n,r=!0)=>{const i={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(i,s,{get:()=>{const a=s;return t._proxyFormState[a]!==mn.all&&(t._proxyFormState[a]=!r||mn.all),n&&(n[a]=!0),e[a]}});return i},Kt=e=>dt(e)&&!Object.keys(e).length,LD=(e,t,n,r)=>{n(e);const{name:i,...s}=e;return Kt(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(a=>t[a]===(!r||mn.all))},lc=e=>Array.isArray(e)?e:[e];function qD(e){const t=re.useRef(e);t.current=e,re.useEffect(()=>{const n=!e.disabled&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}},[e.disabled])}var Dn=e=>typeof e=="string",UD=(e,t,n,r,i)=>Dn(e)?(r&&t.watch.add(e),ee(n,e,i)):Array.isArray(e)?e.map(s=>(r&&t.watch.add(s),ee(n,s))):(r&&(t.watchAll=!0),n),$D=e=>{const t=e.constructor&&e.constructor.prototype;return dt(t)&&t.hasOwnProperty("isPrototypeOf")},sh=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Wr(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(sh&&(e instanceof Blob||e instanceof FileList))&&(n||dt(e)))if(t=n?[]:{},!Array.isArray(e)&&!$D(e))t=e;else for(const r in e)t[r]=Wr(e[r]);else return e;return t}var VD=(e,t,n,r,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:i||!0}}:{},ah=e=>/^\w*$/.test(e),l0=e=>Ma(e.replace(/["|']|\]/g,"").split(/\.|\[/));function qe(e,t,n){let r=-1;const i=ah(t)?[t]:l0(t),s=i.length,a=s-1;for(;++r<s;){const o=i[r];let u=n;if(r!==a){const c=e[o];u=dt(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}e[o]=u,e=e[o]}return e}const Cd=(e,t,n)=>{for(const r of n||Object.keys(e)){const i=ee(e,r);if(i){const{_f:s,...a}=i;if(s&&t(s.name)){if(s.ref.focus){s.ref.focus();break}else if(s.refs&&s.refs[0].focus){s.refs[0].focus();break}}else dt(a)&&Cd(a,t)}}};var Bp=e=>({isOnSubmit:!e||e===mn.onSubmit,isOnBlur:e===mn.onBlur,isOnChange:e===mn.onChange,isOnAll:e===mn.all,isOnTouch:e===mn.onTouched}),Yp=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length)))),zD=(e,t,n)=>{const r=Ma(ee(e,n));return qe(r,"root",t[n]),qe(e,n,r),e},Yi=e=>typeof e=="boolean",lh=e=>e.type==="file",Wi=e=>typeof e=="function",So=e=>{if(!sh)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Pl=e=>Dn(e)||re.isValidElement(e),oh=e=>e.type==="radio",jo=e=>e instanceof RegExp;const Wp={value:!1,isValid:!1},Hp={value:!0,isValid:!0};var o0=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!et(e[0].attributes.value)?et(e[0].value)||e[0].value===""?Hp:{value:e[0].value,isValid:!0}:Hp:Wp}return Wp};const Qp={isValid:!1,value:null};var u0=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,Qp):Qp;function Gp(e,t,n="validate"){if(Pl(e)||Array.isArray(e)&&e.every(Pl)||Yi(e)&&!e)return{type:n,message:Pl(e)?e:"",ref:t}}var wi=e=>dt(e)&&!jo(e)?e:{value:e,message:""},Kp=async(e,t,n,r,i)=>{const{ref:s,refs:a,required:o,maxLength:u,minLength:c,min:d,max:f,pattern:m,validate:v,name:y,valueAsNumber:w,mount:j,disabled:g}=e._f,h=ee(t,y);if(!j||g)return{};const p=a?a[0]:s,b=A=>{r&&p.reportValidity&&(p.setCustomValidity(Yi(A)?"":A||""),p.reportValidity())},S={},k=oh(s),_=Oa(s),C=k||_,N=(w||lh(s))&&et(s.value)&&et(h)||So(s)&&s.value===""||h===""||Array.isArray(h)&&!h.length,D=VD.bind(null,y,n,S),E=(A,O,F,q=$n.maxLength,z=$n.minLength)=>{const Y=A?O:F;S[y]={type:A?q:z,message:Y,ref:s,...D(A?q:z,Y)}};if(i?!Array.isArray(h)||!h.length:o&&(!C&&(N||Et(h))||Yi(h)&&!h||_&&!o0(a).isValid||k&&!u0(a).isValid)){const{value:A,message:O}=Pl(o)?{value:!!o,message:o}:wi(o);if(A&&(S[y]={type:$n.required,message:O,ref:p,...D($n.required,O)},!n))return b(O),S}if(!N&&(!Et(d)||!Et(f))){let A,O;const F=wi(f),q=wi(d);if(!Et(h)&&!isNaN(h)){const z=s.valueAsNumber||h&&+h;Et(F.value)||(A=z>F.value),Et(q.value)||(O=z<q.value)}else{const z=s.valueAsDate||new Date(h),Y=W=>new Date(new Date().toDateString()+" "+W),M=s.type=="time",L=s.type=="week";Dn(F.value)&&h&&(A=M?Y(h)>Y(F.value):L?h>F.value:z>new Date(F.value)),Dn(q.value)&&h&&(O=M?Y(h)<Y(q.value):L?h<q.value:z<new Date(q.value))}if((A||O)&&(E(!!A,F.message,q.message,$n.max,$n.min),!n))return b(S[y].message),S}if((u||c)&&!N&&(Dn(h)||i&&Array.isArray(h))){const A=wi(u),O=wi(c),F=!Et(A.value)&&h.length>A.value,q=!Et(O.value)&&h.length<O.value;if((F||q)&&(E(F,A.message,O.message),!n))return b(S[y].message),S}if(m&&!N&&Dn(h)){const{value:A,message:O}=wi(m);if(jo(A)&&!h.match(A)&&(S[y]={type:$n.pattern,message:O,ref:s,...D($n.pattern,O)},!n))return b(O),S}if(v){if(Wi(v)){const A=await v(h,t),O=Gp(A,p);if(O&&(S[y]={...O,...D($n.validate,O.message)},!n))return b(O.message),S}else if(dt(v)){let A={};for(const O in v){if(!Kt(A)&&!n)break;const F=Gp(await v[O](h,t),p,O);F&&(A={...F,...D(O,F.message)},b(F.message),n&&(S[y]=A))}if(!Kt(A)&&(S[y]={ref:p,...A},!n))return S}}return b(!0),S};function BD(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=et(e)?r++:e[t[r++]];return e}function YD(e){for(const t in e)if(!et(e[t]))return!1;return!0}function wt(e,t){const n=Array.isArray(t)?t:ah(t)?[t]:l0(t),r=n.length===1?e:BD(e,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(dt(r)&&Kt(r)||Array.isArray(r)&&YD(r))&&wt(e,n.slice(0,-1)),e}function oc(){let e=[];return{get observers(){return e},next:i=>{for(const s of e)s.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(s=>s!==i)}}),unsubscribe:()=>{e=[]}}}var ko=e=>Et(e)||!a0(e);function Xr(e,t){if(ko(e)||ko(t))return e===t;if(Ti(e)&&Ti(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){const s=e[i];if(!r.includes(i))return!1;if(i!=="ref"){const a=t[i];if(Ti(s)&&Ti(a)||dt(s)&&dt(a)||Array.isArray(s)&&Array.isArray(a)?!Xr(s,a):s!==a)return!1}}return!0}var c0=e=>e.type==="select-multiple",WD=e=>oh(e)||Oa(e),uc=e=>So(e)&&e.isConnected,d0=e=>{for(const t in e)if(Wi(e[t]))return!0;return!1};function Co(e,t={}){const n=Array.isArray(e);if(dt(e)||n)for(const r in e)Array.isArray(e[r])||dt(e[r])&&!d0(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Co(e[r],t[r])):Et(e[r])||(t[r]=!0);return t}function f0(e,t,n){const r=Array.isArray(e);if(dt(e)||r)for(const i in e)Array.isArray(e[i])||dt(e[i])&&!d0(e[i])?et(t)||ko(n[i])?n[i]=Array.isArray(e[i])?Co(e[i],[]):{...Co(e[i])}:f0(e[i],Et(t)?{}:t[i],n[i]):Xr(e[i],t[i])?delete n[i]:n[i]=!0;return n}var cc=(e,t)=>f0(e,t,Co(t)),h0=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>et(e)?e:t?e===""?NaN:e&&+e:n&&Dn(e)?new Date(e):r?r(e):e;function dc(e){const t=e.ref;if(!(e.refs?e.refs.every(n=>n.disabled):t.disabled))return lh(t)?t.files:oh(t)?u0(e.refs).value:c0(t)?[...t.selectedOptions].map(({value:n})=>n):Oa(t)?o0(e.refs).value:h0(et(t.value)?e.ref.value:t.value,e)}var HD=(e,t,n,r)=>{const i={};for(const s of e){const a=ee(t,s);a&&qe(i,s,a._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}},Ds=e=>et(e)?e:jo(e)?e.source:dt(e)?jo(e.value)?e.value.source:e.value:e,QD=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function Xp(e,t,n){const r=ee(e,n);if(r||ah(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),a=ee(t,s),o=ee(e,s);if(a&&!Array.isArray(a)&&n!==s)return{name:n};if(o&&o.type)return{name:s,error:o};i.pop()}return{name:n}}var GD=(e,t,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:(n?r.isOnChange:i.isOnChange)?e:!0,KD=(e,t)=>!Ma(ee(e,t)).length&&wt(e,t);const XD={mode:mn.onSubmit,reValidateMode:mn.onChange,shouldFocusError:!0};function ZD(e={},t){let n={...XD,...e};const r=e.resetOptions&&e.resetOptions.keepDirtyValues;let i={submitCount:0,isDirty:!1,isLoading:!0,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},s={},a=dt(n.defaultValues)?Wr(n.defaultValues)||{}:{},o=n.shouldUnregister?{}:Wr(a),u={action:!1,mount:!1,watch:!1},c={mount:new Set,unMount:new Set,array:new Set,watch:new Set},d,f=0;const m={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},v={watch:oc(),array:oc(),state:oc()},y=Bp(n.mode),w=Bp(n.reValidateMode),j=n.criteriaMode===mn.all,g=I=>R=>{clearTimeout(f),f=window.setTimeout(I,R)},h=async I=>{if(m.isValid||I){const R=n.resolver?Kt((await N()).errors):await E(s,!0);R!==i.isValid&&(i.isValid=R,v.state.next({isValid:R}))}},p=I=>m.isValidating&&v.state.next({isValidating:I}),b=(I,R=[],U,K,ne=!0,B=!0)=>{if(K&&U){if(u.action=!0,B&&Array.isArray(ee(s,I))){const se=U(ee(s,I),K.argA,K.argB);ne&&qe(s,I,se)}if(B&&Array.isArray(ee(i.errors,I))){const se=U(ee(i.errors,I),K.argA,K.argB);ne&&qe(i.errors,I,se),KD(i.errors,I)}if(m.touchedFields&&B&&Array.isArray(ee(i.touchedFields,I))){const se=U(ee(i.touchedFields,I),K.argA,K.argB);ne&&qe(i.touchedFields,I,se)}m.dirtyFields&&(i.dirtyFields=cc(a,o)),v.state.next({name:I,isDirty:O(I,R),dirtyFields:i.dirtyFields,errors:i.errors,isValid:i.isValid})}else qe(o,I,R)},S=(I,R)=>{qe(i.errors,I,R),v.state.next({errors:i.errors})},k=(I,R,U,K)=>{const ne=ee(s,I);if(ne){const B=ee(o,I,et(U)?ee(a,I):U);et(B)||K&&K.defaultChecked||R?qe(o,I,R?B:dc(ne._f)):z(I,B),u.mount&&h()}},_=(I,R,U,K,ne)=>{let B=!1,se=!1;const Je={name:I};if(!U||K){m.isDirty&&(se=i.isDirty,i.isDirty=Je.isDirty=O(),B=se!==Je.isDirty);const Qe=Xr(ee(a,I),R);se=ee(i.dirtyFields,I),Qe?wt(i.dirtyFields,I):qe(i.dirtyFields,I,!0),Je.dirtyFields=i.dirtyFields,B=B||m.dirtyFields&&se!==!Qe}if(U){const Qe=ee(i.touchedFields,I);Qe||(qe(i.touchedFields,I,U),Je.touchedFields=i.touchedFields,B=B||m.touchedFields&&Qe!==U)}return B&&ne&&v.state.next(Je),B?Je:{}},C=(I,R,U,K)=>{const ne=ee(i.errors,I),B=m.isValid&&Yi(R)&&i.isValid!==R;if(e.delayError&&U?(d=g(()=>S(I,U)),d(e.delayError)):(clearTimeout(f),d=null,U?qe(i.errors,I,U):wt(i.errors,I)),(U?!Xr(ne,U):ne)||!Kt(K)||B){const se={...K,...B&&Yi(R)?{isValid:R}:{},errors:i.errors,name:I};i={...i,...se},v.state.next(se)}p(!1)},N=async I=>await n.resolver(o,n.context,HD(I||c.mount,s,n.criteriaMode,n.shouldUseNativeValidation)),D=async I=>{const{errors:R}=await N();if(I)for(const U of I){const K=ee(R,U);K?qe(i.errors,U,K):wt(i.errors,U)}else i.errors=R;return R},E=async(I,R,U={valid:!0})=>{for(const K in I){const ne=I[K];if(ne){const{_f:B,...se}=ne;if(B){const Je=c.array.has(B.name),Qe=await Kp(ne,o,j,n.shouldUseNativeValidation,Je);if(Qe[B.name]&&(U.valid=!1,R))break;!R&&(ee(Qe,B.name)?Je?zD(i.errors,Qe,B.name):qe(i.errors,B.name,Qe[B.name]):wt(i.errors,B.name))}se&&await E(se,R,U)}}return U.valid},A=()=>{for(const I of c.unMount){const R=ee(s,I);R&&(R._f.refs?R._f.refs.every(U=>!uc(U)):!uc(R._f.ref))&&Le(I)}c.unMount=new Set},O=(I,R)=>(I&&R&&qe(o,I,R),!Xr(te(),a)),F=(I,R,U)=>UD(I,c,{...u.mount?o:et(R)?a:Dn(I)?{[I]:R}:R},U,R),q=I=>Ma(ee(u.mount?o:a,I,e.shouldUnregister?ee(a,I,[]):[])),z=(I,R,U={})=>{const K=ee(s,I);let ne=R;if(K){const B=K._f;B&&(!B.disabled&&qe(o,I,h0(R,B)),ne=So(B.ref)&&Et(R)?"":R,c0(B.ref)?[...B.ref.options].forEach(se=>se.selected=ne.includes(se.value)):B.refs?Oa(B.ref)?B.refs.length>1?B.refs.forEach(se=>(!se.defaultChecked||!se.disabled)&&(se.checked=Array.isArray(ne)?!!ne.find(Je=>Je===se.value):ne===se.value)):B.refs[0]&&(B.refs[0].checked=!!ne):B.refs.forEach(se=>se.checked=se.value===ne):lh(B.ref)?B.ref.value="":(B.ref.value=ne,B.ref.type||v.watch.next({name:I})))}(U.shouldDirty||U.shouldTouch)&&_(I,ne,U.shouldTouch,U.shouldDirty,!0),U.shouldValidate&&W(I)},Y=(I,R,U)=>{for(const K in R){const ne=R[K],B=`${I}.${K}`,se=ee(s,B);(c.array.has(I)||!ko(ne)||se&&!se._f)&&!Ti(ne)?Y(B,ne,U):z(B,ne,U)}},M=(I,R,U={})=>{const K=ee(s,I),ne=c.array.has(I),B=Wr(R);qe(o,I,B),ne?(v.array.next({name:I,values:o}),(m.isDirty||m.dirtyFields)&&U.shouldDirty&&(i.dirtyFields=cc(a,o),v.state.next({name:I,dirtyFields:i.dirtyFields,isDirty:O(I,B)}))):K&&!K._f&&!Et(B)?Y(I,B,U):z(I,B,U),Yp(I,c)&&v.state.next({}),v.watch.next({name:I}),!u.mount&&t()},L=async I=>{const R=I.target;let U=R.name;const K=ee(s,U),ne=()=>R.type?dc(K._f):MD(I);if(K){let B,se;const Je=ne(),Qe=I.type===zp.BLUR||I.type===zp.FOCUS_OUT,zw=!QD(K._f)&&!n.resolver&&!ee(i.errors,U)&&!K._f.deps||GD(Qe,ee(i.touchedFields,U),i.isSubmitted,w,y),Eu=Yp(U,c,Qe);qe(o,U,Je),Qe?(K._f.onBlur&&K._f.onBlur(I),d&&d(0)):K._f.onChange&&K._f.onChange(I);const Iu=_(U,Je,Qe,!1),Bw=!Kt(Iu)||Eu;if(!Qe&&v.watch.next({name:U,type:I.type}),zw)return m.isValid&&h(),Bw&&v.state.next({name:U,...Eu?{}:Iu});if(!Qe&&Eu&&v.state.next({}),p(!0),n.resolver){const{errors:Bh}=await N([U]),Yw=Xp(i.errors,s,U),Yh=Xp(Bh,s,Yw.name||U);B=Yh.error,U=Yh.name,se=Kt(Bh)}else B=(await Kp(K,o,j,n.shouldUseNativeValidation))[U],B?se=!1:m.isValid&&(se=await E(s,!0));K._f.deps&&W(K._f.deps),C(U,se,B,Iu)}},W=async(I,R={})=>{let U,K;const ne=lc(I);if(p(!0),n.resolver){const B=await D(et(I)?I:ne);U=Kt(B),K=I?!ne.some(se=>ee(B,se)):U}else I?(K=(await Promise.all(ne.map(async B=>{const se=ee(s,B);return await E(se&&se._f?{[B]:se}:se)}))).every(Boolean),!(!K&&!i.isValid)&&h()):K=U=await E(s);return v.state.next({...!Dn(I)||m.isValid&&U!==i.isValid?{}:{name:I},...n.resolver||!I?{isValid:U}:{},errors:i.errors,isValidating:!1}),R.shouldFocus&&!K&&Cd(s,B=>B&&ee(i.errors,B),I?ne:c.mount),K},te=I=>{const R={...a,...u.mount?o:{}};return et(I)?R:Dn(I)?ee(R,I):I.map(U=>ee(R,U))},oe=(I,R)=>({invalid:!!ee((R||i).errors,I),isDirty:!!ee((R||i).dirtyFields,I),isTouched:!!ee((R||i).touchedFields,I),error:ee((R||i).errors,I)}),He=I=>{I?lc(I).forEach(R=>wt(i.errors,R)):i.errors={},v.state.next({errors:i.errors})},pe=(I,R,U)=>{const K=(ee(s,I,{_f:{}})._f||{}).ref;qe(i.errors,I,{...R,ref:K}),v.state.next({name:I,errors:i.errors,isValid:!1}),U&&U.shouldFocus&&K&&K.focus&&K.focus()},Ee=(I,R)=>Wi(I)?v.watch.subscribe({next:U=>I(F(void 0,R),U)}):F(I,R,!0),Le=(I,R={})=>{for(const U of I?lc(I):c.mount)c.mount.delete(U),c.array.delete(U),ee(s,U)&&(R.keepValue||(wt(s,U),wt(o,U)),!R.keepError&&wt(i.errors,U),!R.keepDirty&&wt(i.dirtyFields,U),!R.keepTouched&&wt(i.touchedFields,U),!n.shouldUnregister&&!R.keepDefaultValue&&wt(a,U));v.watch.next({}),v.state.next({...i,...R.keepDirty?{isDirty:O()}:{}}),!R.keepIsValid&&h()},Ne=(I,R={})=>{let U=ee(s,I);const K=Yi(R.disabled);return qe(s,I,{...U||{},_f:{...U&&U._f?U._f:{ref:{name:I}},name:I,mount:!0,...R}}),c.mount.add(I),U?K&&qe(o,I,R.disabled?void 0:ee(o,I,dc(U._f))):k(I,!0,R.value),{...K?{disabled:R.disabled}:{},...n.shouldUseNativeValidation?{required:!!R.required,min:Ds(R.min),max:Ds(R.max),minLength:Ds(R.minLength),maxLength:Ds(R.maxLength),pattern:Ds(R.pattern)}:{},name:I,onChange:L,onBlur:L,ref:ne=>{if(ne){Ne(I,R),U=ee(s,I);const B=et(ne.value)&&ne.querySelectorAll&&ne.querySelectorAll("input,select,textarea")[0]||ne,se=WD(B),Je=U._f.refs||[];if(se?Je.find(Qe=>Qe===B):B===U._f.ref)return;qe(s,I,{_f:{...U._f,...se?{refs:[...Je.filter(uc),B,...Array.isArray(ee(a,I))?[{}]:[]],ref:{type:B.type,name:I}}:{ref:B}}}),k(I,!1,void 0,B)}else U=ee(s,I,{}),U._f&&(U._f.mount=!1),(n.shouldUnregister||R.shouldUnregister)&&!(TD(c.array,I)&&u.action)&&c.unMount.add(I)}}},$t=()=>n.shouldFocusError&&Cd(s,I=>I&&ee(i.errors,I),c.mount),Un=(I,R)=>async U=>{U&&(U.preventDefault&&U.preventDefault(),U.persist&&U.persist());let K=Wr(o);if(v.state.next({isSubmitting:!0}),n.resolver){const{errors:ne,values:B}=await N();i.errors=ne,K=B}else await E(s);Kt(i.errors)?(v.state.next({errors:{}}),await I(K,U)):(R&&await R({...i.errors},U),$t()),v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Kt(i.errors),submitCount:i.submitCount+1,errors:i.errors})},$r=(I,R={})=>{ee(s,I)&&(et(R.defaultValue)?M(I,ee(a,I)):(M(I,R.defaultValue),qe(a,I,R.defaultValue)),R.keepTouched||wt(i.touchedFields,I),R.keepDirty||(wt(i.dirtyFields,I),i.isDirty=R.defaultValue?O(I,ee(a,I)):O()),R.keepError||(wt(i.errors,I),m.isValid&&h()),v.state.next({...i}))},Vr=(I,R={})=>{const U=I||a,K=Wr(U),ne=I&&!Kt(I)?K:a;if(R.keepDefaultValues||(a=U),!R.keepValues){if(R.keepDirtyValues||r)for(const B of c.mount)ee(i.dirtyFields,B)?qe(ne,B,ee(o,B)):M(B,ee(ne,B));else{if(sh&&et(I))for(const B of c.mount){const se=ee(s,B);if(se&&se._f){const Je=Array.isArray(se._f.refs)?se._f.refs[0]:se._f.ref;if(So(Je)){const Qe=Je.closest("form");if(Qe){Qe.reset();break}}}}s={}}o=e.shouldUnregister?R.keepDefaultValues?Wr(a):{}:K,v.array.next({values:ne}),v.watch.next({values:ne})}c={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!u.mount&&t(),u.mount=!m.isValid||!!R.keepIsValid,u.watch=!!e.shouldUnregister,v.state.next({submitCount:R.keepSubmitCount?i.submitCount:0,isDirty:R.keepDirty||R.keepDirtyValues?i.isDirty:!!(R.keepDefaultValues&&!Xr(I,a)),isSubmitted:R.keepIsSubmitted?i.isSubmitted:!1,dirtyFields:R.keepDirty||R.keepDirtyValues?i.dirtyFields:R.keepDefaultValues&&I?cc(a,I):{},touchedFields:R.keepTouched?i.touchedFields:{},errors:R.keepErrors?i.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},Wa=(I,R)=>Vr(Wi(I)?I(o):I,R),ys=(I,R={})=>{const U=ee(s,I),K=U&&U._f;if(K){const ne=K.refs?K.refs[0]:K.ref;ne.focus&&(ne.focus(),R.shouldSelect&&ne.select())}},Vw=I=>{i={...i,...I}};return Wi(n.defaultValues)&&n.defaultValues().then(I=>{Wa(I,n.resetOptions),v.state.next({isLoading:!1})}),{control:{register:Ne,unregister:Le,getFieldState:oe,_executeSchema:N,_focusError:$t,_getWatch:F,_getDirty:O,_updateValid:h,_removeUnmounted:A,_updateFieldArray:b,_getFieldArray:q,_reset:Vr,_updateFormState:Vw,_subjects:v,_proxyFormState:m,get _fields(){return s},get _formValues(){return o},get _stateFlags(){return u},set _stateFlags(I){u=I},get _defaultValues(){return a},get _names(){return c},set _names(I){c=I},get _formState(){return i},set _formState(I){i=I},get _options(){return n},set _options(I){n={...n,...I}}},trigger:W,register:Ne,handleSubmit:Un,watch:Ee,setValue:M,getValues:te,reset:Wa,resetField:$r,clearErrors:He,unregister:Le,setError:pe,setFocus:ys,getFieldState:oe}}function Tn(e={}){const t=re.useRef(),[n,r]=re.useState({isDirty:!1,isValidating:!1,isLoading:!0,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:Wi(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...ZD(e,()=>r(s=>({...s}))),formState:n});const i=t.current.control;return i._options=e,qD({subject:i._subjects.state,next:s=>{LD(s,i._proxyFormState,i._updateFormState,!0)&&r({...i._formState})}}),re.useEffect(()=>{i._stateFlags.mount||(i._updateValid(),i._stateFlags.mount=!0),i._stateFlags.watch&&(i._stateFlags.watch=!1,i._subjects.state.next({})),i._removeUnmounted()}),re.useEffect(()=>{e.values&&!Xr(e.values,i._defaultValues)&&i._reset(e.values,i._options.resetOptions)},[e.values,i]),re.useEffect(()=>{n.submitCount&&i._focusError()},[i,n.submitCount]),t.current.formState=RD(n,i),t.current}const JD={self:"Self",owner:"Owner",admin:"Admin",user:"User",adminMemo1:"Admin can set user roles",adminMemo2:"Admin has all roles permission",ownerMemo1:"Owner can add or delete an owner",ownerMemo2:"Owner can add or delete an admin",ownerReallyQuit:"Do you really want to quit owner?",ownerLost:"You will lost owner",ownerConfirmQuit:"Confirm quit",userReallyDelete:"Do you really want to delete {0} '{1}'?",deleteThe:"Delete the {0}",save:"Save",new:"New",assigned:"Assigned",searchUser:"Search user",none:"None"},eE={self:"自己",owner:"拥有者",admin:"管理员",user:"用户",adminMemo1:"管理员可以给用户赋予角色",adminMemo2:"管理员拥有全部角色权限",ownerMemo1:"拥有者可以增加其他拥有者",ownerMemo2:"拥有者可以增减管理员",ownerReallyQuit:"真的要退出拥有者吗？",ownerLost:"你将无法设置角色权限",ownerConfirmQuit:"确认退出",userReallyDelete:'真的要删除{0} "{1}" 吗?',deleteThe:"删除此{0}",save:"保存",new:"新增",assigned:"标注",searchUser:"搜索用户账户",none:"无"},$e=Qg({en:JD,zh:eE});function tE({caption:e,entityAtom:t}){const{closeModal:n}=ue(),{children:r}=t;function i({value:a}){const{caption:o}=a;return l.jsx("div",{className:"px-3 py-2",children:o})}function s(a){n(a)}return l.jsx(H,{header:`选择${e}类型`,children:l.jsx(Fe,{items:r,ViewItem:i,onItemClick:s})})}function Fa(e){if(typeof e=="string"){if(e!==":atom")debugger;return e}return Pn(e)}function uh(e){return`atom/${Fa(e)}/new`}function Ta(e){return`atom/${Fa(e)}/list`}function ch(e,t){return`atom/${Fa(e)}/${Pn(t)??":id"}`}function nE(e,t){return`atom/${Fa(e)}/${Pn(t)??":id"}`}function rE(e,t){return`atom/${Fa(e)}/${Pn(t)??":id"}`}async function m0(e,t){let{props:n}=await e.GetAtom.query({id:t}),{main:r,buds:i}=Vx(t,n),s;return{main:r,buds:i,uoms:s}}async function iE(e,t,n){let{main:r,buds:i}=await m0(t,n),s={...r},{phrase:a}=r,o=e.entityIds[a];function u(c,d){let f=o.buds[c];s[f.name]=d}for(let c in i)u(Number(c),i[c]);return s}function ou(e){const{atom:t}=Mn();let n=rr(t);const r=G(),{uq:i,biz:s}=r,a=s.entityIds[n],o=a.phrase,u=a.name,c=a.name+"-list";async function d(w){let j=await m0(i,w),{main:g}=j,{phrase:h}=g,p=s.entityIds[h];return{...j,entityAtom:p}}async function f(w,j,g){await i.ActIDProp(i.Atom,w,j,g)}async function m(w,j,g){let h,p,b;const{budDataType:S,id:k}=j;switch(S.type){default:case Ie.int:h=g;break;case Ie.dec:p=g;break;case Ie.str:b=g;break}await i.SaveBudValue.submit({id:w,phraseId:k,int:h,dec:p,str:b})}async function v(w,j,g){let h={atom:o,...w},p=i.SearchAtom,{$page:b}=await p.page(h,j,g);return b}async function y(w){w===void 0&&(w=a);const{openModal:j}=Qf(r),{children:g}=w;switch(g.length){case 0:return w;case 1:return g[0];default:let h=l.jsx(tE,{entityAtom:w,caption:"选择类型"});if(!h)return w;let p=await j(h);return p===void 0?void 0:await y(p)}}return{uqApp:r,biz:s,entity:a,uom:a.uom,pathView:u,pathList:c,getAtom:d,saveField:f,saveBud:m,searchAtoms:v,selectLeafAtom:y}}function Ra(e){const{top:t}=e,n=ou(),{entity:r,searchAtoms:i}=n;let s=r;const{children:a}=r;switch(a.length){case 0:break;case 1:s=a[0];break;default:return{page:l.jsx(w,{})}}const o=l.jsx(Ce,{className:"btn btn-sm btn-success me-2",to:`../${uh(s.id)}`,children:l.jsx(J,{name:"plus"})}),{ViewItemAtom:u}=e;let{caption:c,name:d}=s;c=c??d;let f={atom:s.id,key:void 0};function m({value:g}){return l.jsx(Ce,{to:`../${ch(s.id,g.id)}`,children:l.jsx("div",{className:"px-3 py-2",children:l.jsx(u,{value:g})})})}const v="id",y=l.jsxs("div",{className:"m-3 small text-muted",children:["[无",c,"]"]});return{header:c,right:o,query:i,param:f,sortField:v,ViewItem:m,none:y,page:l.jsx(j,{}),top:t};function w(){let g=s.caption??s.name;const{children:h}=s;function p({value:S}){const{id:k,caption:_}=S;return l.jsx(Ce,{to:`../${Ta(k)}`,children:l.jsx("div",{className:"px-3 py-2",children:_})})}function b(S){}return l.jsx(H,{header:`${g}列表 - 大类`,children:l.jsx(Fe,{items:h,ViewItem:p,onItemClick:b})})}function j(){return l.jsx(Rn,{header:c,right:o,query:i,param:f,sortField:v,ViewItem:m,none:y,children:t})}}function La(e){const t=ou(),{uqApp:n,pathView:r}=t,{uq:i}=n,{NOLabel:s,exLabel:a}=e,[o,u]=P.useState(void 0);if(Pt(()=>{(async()=>{let g=await t.selectLeafAtom(void 0);u(g)})()}),o===void 0){let g=l.jsx("div",{className:"m-3",children:"暂时没有内容，随后处理"});return{page:l.jsx(H,{header:"新建",children:g}),view:g}}const{id:c,name:d,caption:f}=o;return{page:l.jsx(m,{}),pageContent:l.jsx(v,{}),modal:l.jsx(w,{}),modalContent:l.jsx(y,{})};function m(){return l.jsx(H,{header:`新建${f??d}`,children:l.jsx(v,{})})}function v(){const g=bn();function h(p){g(`../${ch(c,p.id)}`,{replace:!0})}return l.jsx(j,{afterSubmit:h})}function y(){const{closeModal:g}=ue();function h(p){g(p)}return l.jsx(j,{afterSubmit:h})}function w(){return l.jsx(H,{header:`新建${f??d}`,children:l.jsx(y,{})})}function j({afterSubmit:g}){async function h(D,E,A){const{ex:O}=A;return await i.SaveAtom.submit({atomPhrase:D.id,base:void 0,no:E,ex:O})}async function p(){let D=await i.IDNO({ID:i.Atom});return{no:D,formRows:[{name:"no",label:s,type:"text",options:{maxLength:20,disabled:!0,value:D}},{name:"ex",label:a,type:"text",options:{maxLength:50}},{type:"submit",label:"下一步"}]}}const{data:{no:b,formRows:S}}=lr("PageAtomNew",async()=>await p(),ur),{register:k,handleSubmit:_,formState:{errors:C}}=Tn({mode:"onBlur"});async function N(D){let E=await h(o,b,D);g==null||g({...D,...E,no:b})}return l.jsx("form",{onSubmit:_(N),className:"container my-3 pe-5",children:l.jsx(cr,{rows:S,register:k,errors:C})})}}function qa(e){let{label:t,children:n,onEditClick:r,readonly:i}=e,s=l.jsx("span",{className:"p-3",children:" "});return r!==null&&i!==!0&&(s=l.jsx("div",{onClick:r,className:"cursor-pointer p-3",children:l.jsx(J,{name:"pencil",className:"text-info"})})),l.jsxs(pa,{...e,children:[t,l.jsx("div",{className:"ms-3 position-relative",children:n}),s]})}function sE(e){const{uq:t}=G(),{id:n,readonly:r,value:i,bizBud:s,options:a}=e,[o,u]=P.useState(i),{caption:c,name:d,budDataType:f}=s,{bizAtom:m}=f,v=c??d,y=cu();async function w(){let j=await y(m.name);if(j===void 0)return;let g=j.id;await t.SaveBudValue.submit({phraseId:s.id,id:n,int:g,dec:void 0,str:void 0}),u(g)}return l.jsx(qa,{label:v,readonly:r,onEditClick:w,children:l.jsx(jE,{id:o})})}function aE(e){const{uq:t}=G(),{id:n,readonly:r,value:i,bizBud:s}=e,{budDataType:a,caption:o,name:u}=s;let{options:{items:c,phrase:d}}=a,f=i??{},m=[],v=!1;for(let w of c){let{id:j,name:g,caption:h,value:p}=w,b=f[j];b===!0&&(v=!0),m.push([j,h??g,p,b])}v===!1&&(m[0][3]=!0);async function y(w){const{id:j}=s,g=w;await t.SaveBudRadio.submit({budPhrase:j,id:n,optionsItemPhrase:g})}return l.jsx(qa,{label:o??u,readonly:r,onEditClick:null,children:l.jsx(Yg,{name:u,items:m,onCheckChanged:y})})}async function lE(e,t,n){const{label:r,value:i,type:s}=t,{openModal:a,closeModal:o}=Qf(e);return await a(l.jsx(p0,{label:r,value:i,type:s,options:n}))}function p0({label:e,value:t,type:n,options:r,step:i}){const{closeModal:s}=ue(),{register:a,handleSubmit:o,setValue:u,getValues:c,formState:{errors:d}}=Tn({mode:"onBlur"});async function f(v){s(v.value)}const m=[{name:"value",label:e,type:n,options:{...r,value:t},step:i},{type:"submit",label:"提交",options:{}}];return l.jsx(H,{header:e,children:l.jsx("div",{className:"px-5 py-3",children:l.jsx("form",{className:"container",onSubmit:o(f),children:l.jsx(cr,{rows:m,register:a,errors:d})})})})}function oE(e){const{uq:t}=G(),{id:n,readonly:r,value:i,bizBud:s}=e,{budDataType:a,caption:o,name:u}=s;let{options:{items:c,phrase:d}}=a,f="me-4 ";r===!0&&(f+="text-light invisible ");async function m(y,w){const{id:j}=s,g=y.id;await t.SaveBudCheck.submit({budPhrase:j,id:n,optionsItemPhrase:g,checked:w===!0?1:0})}let v=i??{};return l.jsx(qa,{label:o??u,readonly:r,onEditClick:null,children:c.map((y,w)=>{let{id:j,name:g,caption:h,value:p}=y;async function b(S,k){await m(y,k)}return l.jsx(Af,{className:"form-check-input",labelClassName:f,onCheckChanged:b,disabled:r,value:p,defaultChecked:v[j],children:h??g},w)})})}function uu(e){const{uq:t}=G(),{openModal:n}=ue(),{id:r,readonly:i,value:s,bizBud:a,type:o,step:u,convertToBudValue:c,options:d,fromBudValue:f}=e,[m,v]=P.useState(f===void 0?s:f(s)),{caption:y,name:w,ex:j}=a,g=y??w;async function h(){let b=await n(l.jsx(p0,{label:g,value:m,type:o,options:d,step:u})),S=c(b);await t.SaveBudValue.submit({phraseId:a.id,id:r,...S}),v(b)}let p=m;if(j!==void 0){const{format:b}=j;b!==void 0&&(p=b.replace("{value}",m?String(m):"?"))}return l.jsx(qa,{label:g,readonly:i,onEditClick:h,children:p})}function uE(e){function t(n){return{int:void 0,dec:void 0,str:n}}return l.jsx(uu,{...e,type:"text",convertToBudValue:t})}function cE(e){function t(n){return{int:n,dec:void 0,str:void 0}}return l.jsx(uu,{...e,type:"number",convertToBudValue:t})}function dE(e){const{ex:t}=e.bizBud;function n(i){return{int:void 0,dec:i,str:void 0}}let r="0.000001";if(t!==void 0){let{fraction:i}=t;r=String(1/Math.pow(10,i))}return l.jsx(uu,{...e,type:"number",step:r,convertToBudValue:n})}function fE(e){const t=P.useCallback(function(r){return{int:Wx(r),dec:void 0,str:void 0}},[]);return l.jsx(uu,{...e,type:"date",fromBudValue:Hx,convertToBudValue:t})}function hE(e){const{uq:t}=G(),{id:n,readonly:r,value:i,bizBud:s}=e,{budDataType:a,caption:o,name:u}=s;let{options:{items:c,phrase:d}}=a,f=i??{},m=[],v=!1;for(let w of c){let{name:j,caption:g,value:h,phrase:p}=w,b=f[p];b===!0&&(v=!0),m.push([p,g??j,h,b])}v===!1&&(m[0][3]=!0);async function y(w){const{id:j}=s,g=c.find(h=>h.phrase===w).value;await t.SaveBudValue.submit({phraseId:j,id:n,int:g,dec:void 0,str:void 0})}return l.jsx(qa,{label:o??u,readonly:r,onEditClick:null,children:l.jsx(Yg,{name:u,items:m,onCheckChanged:y})})}function mE({label:e,name:t,readonly:n,type:r,value:i,saveBud:s,id:a,pickValue:o,ValueTemplate:u}){let c=G(),[d,f]=P.useState(i);async function m(v,y){await s(v);let w=c.pageCache.getPrevData();if(w){let j=w.getItem(g=>g.id===a);j&&(j[t]=v)}f(v)}return l.jsx(Fx,{label:e,value:d,readonly:n,type:r,onValueChanged:m,pickValue:o===null?null:o??lE,ValueTemplate:u})}function pE(e){const{id:t,name:n,saveField:r}=e;async function i(s){await r(t,n,s)}return l.jsx(mE,{...e,saveBud:i})}function y0(e){const{bizBud:t}=e,{type:n}=t.budDataType;switch(n){default:return l.jsxs(l.Fragment,{children:["unknown bud type ",n," ",Ie[n]," "]});case Ie.int:return l.jsx(cE,{...e});case Ie.char:case Ie.str:return l.jsx(uE,{...e});case Ie.dec:return l.jsx(dE,{...e});case Ie.radio:return l.jsx(aE,{...e});case Ie.check:return l.jsx(oE,{...e});case Ie.intof:return l.jsx(hE,{...e});case Ie.atom:return l.jsx(sE,{...e});case Ie.date:return l.jsx(fE,{...e})}}function yE(){const e=G(),{uq:t}=e,{openModal:n,closeModal:r}=ue(),i=P.useRef(void 0),s=cu();async function a(c){return await n(l.jsx(f,{}));function f(){async function m(j,g,h){const{$page:p}=await t.GetUomIListOfUom.page(j,g,h);return p}const v={uom:c.id};function y({value:j}){return l.jsx("div",{className:"px-3 py-2",children:l.jsx(Ct,{value:j})})}async function w(j){r(j)}return l.jsx(Rn,{header:"选择 - "+c.ex,sortField:"id",param:v,query:m,ViewItem:y,onItemClick:w})}}async function o(c){n(l.jsx(ir,{}));const{UomI:d,UomX:f}=await t.GetUomI.query({id:c});r();let m=d[0],v=m;if(f.length===0)return v=await u(void 0),v;let y;function w(g){v.id===g?y=v:y=f.find(h=>h.id===g)}return i.current!==void 0&&w(i.current),y===void 0&&w(c),await n(l.jsx(j,{}));function j(){function g(){r(y)}function h(){r(null)}function p({atom:S,children:k,className:_}){function C(){y=S}return l.jsxs("label",{className:"px-3 py-3 "+(_??""),children:[l.jsx("input",{type:"radio",className:"me-4 form-check-input",name:"uomI-id-"+v.id,value:S.id,defaultChecked:S===y,onChange:C}),k]})}function b({value:S}){const{ex:k,no:_,ratio:C}=S;return l.jsxs(p,{atom:S,children:[l.jsx("b",{className:"d-inline-block w-min-8c me-4",children:k}),l.jsxs("span",{children:[" = ",C," ",v.ex]})]})}return l.jsxs(H,{header:"选择计量单位",children:[l.jsxs(ze,{className:"px-3 py-3 tonwa-bg-gray-2 border-bottom align-items-center",children:[l.jsxs("div",{children:[m.uomEx," ",m.uomDiscription]}),l.jsxs("button",{className:"btn btn-link",onClick:h,children:["其它计量单位",l.jsx(An,{name:"chevron-double-right"})]})]}),l.jsx(p,{atom:v,className:"border-bottom border-2",children:l.jsx("b",{className:"d-inline-block w-min-8c me-4 text-primary",children:v.ex})}),l.jsx(Fe,{items:f,ViewItem:b}),l.jsx(ze,{className:"px-3 py-3",children:l.jsx("button",{className:"btn btn-primary",onClick:g,children:"提交"})})]})}}async function u(c){let d;if(c===void 0){let f=await s(it.Uom);return f===void 0||(d=await a(f),d===void 0)?void 0:d}return d=await o(c),d===null&&(d=await u(void 0)),d}return async function(c){return i.current=c,await u(c)}}function vE({atomId:e,uoms:t,className:n}){G();const[r,i]=P.useState(t);yE();async function s(){}function a({value:o}){const{ex:u,prevEx:c,ratio:d}=o;let f;return c&&(f=l.jsxs("small",{className:"text-secondary",children:[d,c]})),l.jsxs("div",{className:"px-3 py-2",children:[u," ",f]})}return l.jsxs(pa,{className:(n??"")+" border-bottom",vAlign:"top",children:[l.jsx("div",{className:"mt-2",children:l.jsx($a,{atom:it.UomI})}),l.jsx(Fe,{items:r,ViewItem:a,className:"w-100"}),l.jsx("div",{className:"p-3 text-info cursor-pointer border-start",onClick:s,children:l.jsx(J,{name:"pencil"})})]})}function Ua(e){const{id:t}=Mn();return v0({...e,id:rr(t)})}function v0(e){const{NOLabel:t,exLabel:n,id:r}=e,{uom:i,getAtom:s,saveField:a,saveBud:o,entity:u}=ou(),[c,d]=P.useState(void 0);if(Pt(()=>{(async()=>{let k=await s(r);d(k)})()}),c===void 0)return{view:l.jsx(as,{}),page:l.jsx(ir,{})};const{main:f,buds:m}=c;let v=[],{name:y,caption:w,props:j}=u;const h=[{name:"id",label:l.jsxs("span",{className:"text-primary fw-normal",children:[l.jsx(J,{name:"compass",className:"text-danger me-1"})," ID"]}),readonly:!0,type:"number"},{name:"no",label:t??"编号",readonly:!0,type:"string"},{name:"ex",label:n??"名称",type:"string"}];let p;return i===!0&&(p=l.jsx(vE,{atomId:r,uoms:v})),{caption:w,view:l.jsx(b,{}),page:l.jsx(S,{}),obj:f};function b(){return l.jsxs(l.Fragment,{children:[h.map((k,_)=>l.jsxs(re.Fragment,{children:[l.jsx(pE,{...k,id:r,value:f[k.name],saveField:a,saveBud:o},_),l.jsx(ge,{})]},_)),p,j.map(k=>{let{id:_}=k,C=m[_];return l.jsxs(re.Fragment,{children:[l.jsx(y0,{id:r,bizBud:k,value:C}),l.jsx(ge,{})]},_)})]})}function S(){return l.jsx(H,{header:w??y,children:l.jsx(b,{})})}}function gE({entity:e,budNames:t,noMedsMessage:n}){const r=G(),{biz:i}=r,s=i.entities[e.toLowerCase()];let a;switch(typeof t){default:a=t;break;case"undefined":a=[];break;case"string":a=[t];break}let o=a.map(d=>u(d));function u(d){const f=d.toLowerCase().split("."),{length:m}=f;if(m>3)throw new Error(`error Bud name '${d}'`);let v,y;if(m===1)v=s,y=d;else{if(m===3&&f.splice(0,1),v=i.entities[f[0]],v===void 0)throw new Error(`'${d}' is not a valid bud`);y=f[1]}return j(v,y);function j(g,h){if(g===void 0)throw new Error("no Entity in bizBudOfEntity");let p=g.buds[h];if(p!==void 0)return p;throw new Error(`unknown Bud '${h}' of Entity '${g.phrase}'`)}}async function c(d,f){let m=[];for(let y in f){let w=f[y];w!==void 0&&m.push(v(d,Number(y),w))}await Promise.all(m);async function v(y,w,j){let{id:g}=y,h,p,b;switch(y.budDataType.type){case Ie.int:h=j;break;case Ie.dec:p=j;break;case Ie.char:b=j;break}let S={phraseId:g,id:w,int:h,dec:p,str:b},{entity:k}=y;return await k.uq.SaveBudValue.submit({...S})}}return n=n??"no meds",{entity:s,noMedsMessage:n,saveBuds:c,bizBuds:o,getBizBud:u}}function xE(e,t){const{entity:n,bizBuds:r,noMedsMessage:i,saveBuds:s,getBizBud:a}=gE(e);function o(c,d,f){return t.page(c,d,f)}async function u(c,d,f){const m={phrase:n.phrase,budNames:r==null?void 0:r.map(C=>C.phrase).join("	"),key:c==null?void 0:c.key};let v=[],y=await o(m,d,f),{$page:w,meds:j,budsInt:g,budsDec:h,budsStr:p}=y,b={},S={};for(let C of w){let N={atom:C,meds:[]};b[C.id]=N,v.push(N)}for(let C of j){let N={...C,values:[]};S[C.id]=N,b[C.main].meds.push(N)}let k={};function _(C){let{id:N,phrase:D}=C,E=k[D];if(E===void 0){let O=a(D);E=r.indexOf(O),k[D]=E}let A=S[N];A.values[E]=C.value}for(let C of g)_(C);for(let C of h)_(C);for(let C of p)_(C);for(let C of v)for(let N of C.meds)N.atomValues=Ae(N.values);return v}return{search:u,saveBuds:s,noMedsMessage:i,bizBuds:r,entity:n}}function wE(e){const{uq:t}=G();return xE(e,t.SearchAtomBuds)}function cu(){const{openModal:e}=ue();return async function(t,n,r){return await e(l.jsx(bE,{atomName:t,buds:n}))}}function bE(e){const{buds:t,loadOnOpen:n,caption:r,placeholder:i,atomName:s}=e,a=G(),{biz:o}=a,{closeModal:u}=ue();let c=o.entities[s];if(c===void 0){debugger;let p=(s===void 0?"no atomName":`${s} not defined`)+" in PageAtomSelect";throw new Error(p)}const[d,f]=P.useState(n===!1?void 0:{key:void 0}),m=c.caption??c.name,v=l.jsx(Wg,{className:"px-3 py-2",onSearch:y,placeholder:i??m+" 编号或描述"});async function y(p){f({key:p})}async function w(p){let b=p.atom;u(b)}let j=wE({entity:s,budNames:t});async function g(p,b,S){return await j.search(p,b,S)}function h({value:p}){return l.jsx("div",{className:"px-3 py-2",children:l.jsx(SE,{value:p.atom})})}return l.jsx(Rn,{header:`选择${r??m}`,query:g,param:d,sortField:"id",ViewItem:h,onItemClick:w,children:v})}function SE({value:e}){let{no:t,ex:n}=e;return l.jsxs("div",{children:[l.jsx("div",{children:l.jsx("b",{children:n})}),l.jsx("div",{className:"small text-secondary",children:t})]})}function $a({atom:e}){const{biz:t}=G(),n=t==null?void 0:t.entities[e];return l.jsx(l.Fragment,{children:n?n.caption:e})}function Ct({value:e}){let{no:t,ex:n}=e;return l.jsxs("div",{children:[l.jsx("div",{children:l.jsx("b",{children:n})}),l.jsx("div",{className:"small text-secondary",children:t})]})}function jE({id:e}){const{uq:t}=G();return e===void 0?l.jsx(l.Fragment,{children:"/"}):l.jsx(an,{uq:t,id:e,Template:Ct})}const Fo=class Fo{constructor(){x(this,"keyId");this.keyId=++Fo.__keyId}};x(Fo,"__keyId",0);let _o=Fo;class du extends _o{constructor(n){super();x(this,"sheetStore");this.sheetStore=n}}class kE extends du{constructor(n){super(n);x(this,"entityMain");x(this,"_i",Ae(0));x(this,"_id",Ae(0));x(this,"no");this.entityMain=n.entitySheet.main}get id(){return fe(this._id)}async start(n){let{id:r}=this;if(r>0)return;if(await this.pickTarget(n),fe(this._i)>0)return await this.createIfNotExists()}async pickTarget(n){const{i:r}=this.entityMain;if(r===void 0)return;let i=await n(r);if(i===void 0)return;let{spec:s}=i;le(this._i,s)}async createIfNotExists(){let n=fe(this._id),r=fe(this._i);if(n>0)return{id:n,no:this.no,i:r};const{uq:i,entitySheet:s}=this.sheetStore;let a=await i.SaveSheet.submit({phrase:s.id,no:void 0,i:r===0?void 0:r,x:0,value:void 0,price:void 0,amount:void 0}),{id:o,no:u}=a;return le(this._id,o),this.no=u,Object.assign(a,{i:r})}setValue(n){const{id:r,no:i,i:s}=n;this.no=i,le(this._id,r),le(this._i,s)}}class g0 extends du{constructor(n,r,i){super(n);x(this,"entityDetail");x(this,"caption");this.entityDetail=r,this.caption=i??r.caption}}class CE extends g0{constructor(){super(...arguments);x(this,"_sections",Ae([]));x(this,"origin");x(this,"pending")}addRowValues(n){const r=fe(this._sections);for(let i of n)this.addRowValue(r,i);le(this._sections,[...r])}addRowValue(n,r){const{i,x:s,value:a}=r;if(!i||!a)return;let o;if(s){let c=n.findIndex(d=>d.i===i);c<0?(o=new No(this),o.i=i,n.push(o)):o=n[c]}else o=new No(this),n.push(o);let u=new dh(o);return u.setValue(r),o.addRow(u),u}addSection(n){const r=fe(this._sections);le(this._sections,[...r,n])}async delEmptySection(n){if(n.isEmpty===!1)return;let r=fe(this._sections),i=r.findIndex(s=>s===n);i>=0&&(r.splice(i,1),le(this._sections,[...r]))}}class _E extends g0{addRowValues(t){}}class dh extends du{constructor(n){super(n.sheetStore);x(this,"section");x(this,"props",{});this.section=n}async save(){const{uq:n,main:r}=this.sheetStore;if(await r.createIfNotExists()===void 0){debugger;let a="新建单据不成功";throw console.error(a),new Error(a)}const{id:s}=await n.SaveDetail.submit({base:r.id,phrase:this.section.coreDetail.entityDetail.id,...this.props});this.props.id=s}async addToSection(){await this.save(),this.section.addRow(this)}async delFromSection(){const{uq:n}=this.sheetStore;await n.DeleteBin.submit({id:this.props.id}),this.section.delRow(this)}async changed(){await this.save(),this.section.rowChanged()}setValue(n){Object.assign(this.props,n)}}class No extends du{constructor(n){super(n.sheetStore);x(this,"coreDetail");x(this,"_rows",Ae([]));x(this,"i");this.coreDetail=n}get isEmpty(){return fe(this._rows).length===0}addRow(n){let r=fe(this._rows);le(this._rows,[...r,n])}async addRowProps(n){let r=new dh(this);r.setValue(n),await r.addToSection()}delRow(n){let r=fe(this._rows),i=r.findIndex(s=>s===n);i>=0&&(r.splice(i,1),le(this._rows,[...r])),this.coreDetail.delEmptySection(this)}rowChanged(){let n=fe(this._rows);le(this._rows,[...n])}}class Zp extends _o{constructor(n,r,i,s){super();x(this,"uq");x(this,"biz");x(this,"entitySheet");x(this,"main");x(this,"detail");x(this,"detailExs",[]);x(this,"caption");x(this,"idOnUrl");this.uq=n,this.biz=r,this.entitySheet=i,this.main=new kE(this),s>0&&(this.idOnUrl=s,le(this.main._id,s));const{details:a}=this.entitySheet;let o=a.length;if(o>0){const{detail:u,caption:c}=a[0];this.detail=new CE(this,u,c)}for(let u=1;u<o;u++){const{detail:c,caption:d}=a[u];this.detailExs.push(new _E(this,c,d))}this.caption=i.caption??i.name}async load(){let{id:n}=this.main;if(n===void 0||n===0)return;let{main:r,details:i}=await this.uq.GetSheet.query({id:n,detail:void 0});this.main.setValue(r[0]),this.detail.addRowValues(i)}async discard(){let{id:n}=this.main;if(n>=0)return await this.uq.RemoveDraft.submit({id:n}),n}async start(n){let r=await this.main.start(n);if(r!==void 0)return r}}function NE(){const e=cu();async function t(n,r){let i=await e(n.name,[],r);return i===void 0?void 0:{retAtom:i,retViewTop:l.jsxs("div",{children:[r,l.jsx(Ct,{value:i})]})}}return P.useCallback(t,[])}function Jp(e,t=!1){const{name:n,budDataType:r,caption:i,defaultValue:s}=e,a={required:t,value:s};switch(r.type){default:case Ie.char:case Ie.str:return{name:n,label:i??n,type:"string",options:{...a,maxLength:200}};case Ie.int:return{name:n,label:i??n,type:"number",options:a};case Ie.dec:return{name:n,label:i??n,type:"number",options:a};case Ie.date:return{name:n,label:i??n,type:"date",options:a};case Ie.atom:return{name:n,label:i??n,atom:r.bizAtom.name}}}function DE(){const{uq:e}=G(),{openModal:t,closeModal:n}=ue();async function r(i){const{base:s,entitySpec:a,viewTop:o}=i,{ix:u}=a;if(u===!0){let{ret:f}=await e.GetSpecsFromBase.query({base:s}),m;switch(f.length){default:return await t(l.jsx(d,{}));case 0:m={id:s};break;case 1:m=f[0];break}return{retSpec:m,retViewTop:o}}else return await t(l.jsx(c,{}));function c(){const{id:f,caption:m,name:v,keys:y,props:w}=a,{register:j,handleSubmit:g,formState:{errors:h}}=Tn({mode:"onBlur"}),p="提交",b=void 0;let S=[...y.map(_=>Jp(_,!0)),...(w??[]).map(_=>Jp(_)),{type:"submit",label:p,options:{},className:b}];const k=async _=>{const C={};for(let F of y){const{name:q,budDataType:z}=F;let Y=_[q];switch(z.type){case Ie.date:Y=Wx(Y);break}C[q]=Y}const N={};for(let F of w){const{name:q}=F;N[q]=_[q]}const D={spec:f,base:s,keys:C,props:N};let E=await e.SaveSpec.submit(D);const{id:A}=E;let O=Object.assign({id:A},_);n({retSpec:O,retViewTop:l.jsxs("div",{children:[o,l.jsx("div",{children:JSON.stringify(O)})]})})};return l.jsxs(H,{header:m??v,children:[l.jsx("div",{className:"pt-3 tonwa-bg-gray-2",children:l.jsx(ht,{children:l.jsx("div",{className:"mx-3",children:o})})}),l.jsx("div",{className:"m-3",children:l.jsx("form",{className:"container",onSubmit:g(k),children:l.jsx(cr,{rows:S,register:j,errors:h})})})]})}function d(){function f(){n({id:100})}return l.jsx(H,{header:"选择",children:l.jsx("button",{className:"btn btn-primary",onClick:f,children:"确定"})})}}return P.useCallback(r,[])}function fh(){const{biz:e}=G(),t=NE(),n=DE();async function r(i){let{caption:s,budDataType:a}=i;if(a.type!==Ie.pick)debugger;const{atom:o,pick:u}=a;let c,d;if(u!==void 0?(c=u.atoms,d=[...u.specs]):(c=[o],d=[]),s===void 0){let{caption:S,name:k}=c[0];s=S??k}const f="提交",m="btn btn-primary";let v=l.jsx("div",{children:"pick atom top"}),y=await t(c[0],v);if(y===void 0)return;const{retAtom:w,retViewTop:j}=y,{phrase:g}=w;let h=w.id,p,b=e.entities[g];if((b==null?void 0:b.uom)===!0){const S=e.entities.specuom;S!==void 0&&d.push(S)}if(d.length>0){let S=w.id;v=j;async function k(_){let C=await n({base:S,entitySpec:_,viewTop:v,buttonCaption:f,buttonClassName:m});if(C===void 0)return!1;const{retSpec:N,retViewTop:D}=C;return v=D,p=S=N.id,!0}for(let _ of d)if(await k(_)===!1)break}return{atom:h,spec:p??h}}return P.useCallback(r,[])}function EE(e){const t=G(),{uq:n,biz:r}=t;let{data:i}=lr([e],async()=>await IE(n,r,e),ur);return i}const ey={},ty={atom:{entity:void 0,value:void 0},specs:[]};async function IE(e,t,n){if(n===void 0||n===0)return ty;let r=ey[n];if(r===null)return ty;if(r!==void 0)return r;let{props:i}=await e.GetSpec.query({id:n}),s,a=[],o=i.length,u=0;for(;u<o;){let f=i[u++];const{phrase:m}=f;let v=t.entityIds[m],{type:y}=v;if(y==="atom"){s=c(v,f);break}if(y==="spec"){let w=d(v,f);a.push(w)}}function c(f,m){const{id:v,phrase:y,value:[w,j]}=m;return{entity:f,value:{id:v,base:y,no:w,ex:j}}}function d(f,m){let{keys:v,props:y}=f,w={},j=[],g=[];const{id:h,value:p}=m;for(let[b,S]of p)w[b]=S;for(let b of v)j.push(w[b.id]);for(let b of y)g.push(w[b.id]);return{entity:f,id:h,keys:j,props:g}}return ey[n]={atom:s,specs:a}}function oi({id:e}){const{atom:{value:t},specs:n}=EE(e);function r(){if(t===void 0)return null;const{no:s,ex:a}=t;return l.jsxs("div",{children:[l.jsx("div",{className:"small text-secondary",children:s}),l.jsx("div",{children:l.jsx("b",{children:a})})]})}function i(){return n.length===0?null:l.jsx(l.Fragment,{children:n.map(s=>{const{id:a,keys:o,props:u,entity:c}=s;let d=[];function f(m,v){let{length:y}=m;for(let w=0;w<y;w++){let{id:j,caption:g,name:h,budDataType:p}=m[w],b=l.jsxs("div",{children:[l.jsx("span",{className:"d-inline-block me-2 small text-secondary w-min-4c",children:g??h}),p.valueToContent(v[w])]},j);d.push(b)}}return f(c.keys,o),f(c.props,u),l.jsx("div",{children:d},a)})})}return l.jsxs("div",{children:[l.jsx(r,{}),l.jsx(i,{})]})}function PE({phrase:e,props:t,className:n}){const{biz:r}=G();let i=r.entityIds[e],{keys:s,props:a}=i,o=s.length,u=t.length,c=[];for(let f=0;f<u;f++)f<o?c.push(d(s[f],t[f])):c.push(d(a[f-o],t[f]));function d(f,m){return l.jsxs("span",{className:"d-inline-block me-3",children:[l.jsxs("span",{className:"small text-secondary w-min-3c me-1",children:[f.caption,":"]}),m]},f.id)}return l.jsx("div",{className:n,children:c})}const AE=Math.pow(2,20);function x0({id:e}){return l.jsx("span",{className:"small text-secondary",children:l.jsx(Mf,{date:e/AE*60})})}function OE({main:e}){const{id:t,no:n,_i:r,entityMain:i,keyId:s}=e,{i:a}=i,o=we(r);return l.jsxs("div",{className:"tonwa-bg-gray-3 py-3 container",children:[l.jsxs(ht,{label:"单据编号",className:"mb-1",children:[l.jsx("b",{children:n}),"    ",l.jsx(x0,{id:t})]}),o>0&&l.jsx(ht,{label:a.caption,className:"mb-1",children:l.jsx("div",{className:"",children:l.jsx(oi,{id:o})})})]})}class ME{add(t,n,r){if(typeof arguments[0]!="string")for(let i in arguments[0])this.add(i,arguments[0][i],arguments[1]);else(Array.isArray(t)?t:[t]).forEach(function(i){this[i]=this[i]||[],n&&this[i][r?"unshift":"push"](n)},this)}run(t,n){this[t]=this[t]||[],this[t].forEach(function(r){r.call(n&&n.context?n.context:n,n)})}}class FE{constructor(t){this.jsep=t,this.registered={}}register(...t){t.forEach(n=>{if(typeof n!="object"||!n.name||!n.init)throw new Error("Invalid JSEP plugin format");this.registered[n.name]||(n.init(this.jsep),this.registered[n.name]=n)})}}class T{static get version(){return"1.3.8"}static toString(){return"JavaScript Expression Parser (JSEP) v"+T.version}static addUnaryOp(t){return T.max_unop_len=Math.max(t.length,T.max_unop_len),T.unary_ops[t]=1,T}static addBinaryOp(t,n,r){return T.max_binop_len=Math.max(t.length,T.max_binop_len),T.binary_ops[t]=n,r?T.right_associative.add(t):T.right_associative.delete(t),T}static addIdentifierChar(t){return T.additional_identifier_chars.add(t),T}static addLiteral(t,n){return T.literals[t]=n,T}static removeUnaryOp(t){return delete T.unary_ops[t],t.length===T.max_unop_len&&(T.max_unop_len=T.getMaxKeyLen(T.unary_ops)),T}static removeAllUnaryOps(){return T.unary_ops={},T.max_unop_len=0,T}static removeIdentifierChar(t){return T.additional_identifier_chars.delete(t),T}static removeBinaryOp(t){return delete T.binary_ops[t],t.length===T.max_binop_len&&(T.max_binop_len=T.getMaxKeyLen(T.binary_ops)),T.right_associative.delete(t),T}static removeAllBinaryOps(){return T.binary_ops={},T.max_binop_len=0,T}static removeLiteral(t){return delete T.literals[t],T}static removeAllLiterals(){return T.literals={},T}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(t){this.expr=t,this.index=0}static parse(t){return new T(t).parse()}static getMaxKeyLen(t){return Math.max(0,...Object.keys(t).map(n=>n.length))}static isDecimalDigit(t){return t>=48&&t<=57}static binaryPrecedence(t){return T.binary_ops[t]||0}static isIdentifierStart(t){return t>=65&&t<=90||t>=97&&t<=122||t>=128&&!T.binary_ops[String.fromCharCode(t)]||T.additional_identifier_chars.has(String.fromCharCode(t))}static isIdentifierPart(t){return T.isIdentifierStart(t)||T.isDecimalDigit(t)}throwError(t){const n=new Error(t+" at character "+this.index);throw n.index=this.index,n.description=t,n}runHook(t,n){if(T.hooks[t]){const r={context:this,node:n};return T.hooks.run(t,r),r.node}return n}searchHook(t){if(T.hooks[t]){const n={context:this};return T.hooks[t].find(function(r){return r.call(n.context,n),n.node}),n.node}}gobbleSpaces(){let t=this.code;for(;t===T.SPACE_CODE||t===T.TAB_CODE||t===T.LF_CODE||t===T.CR_CODE;)t=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");const t=this.gobbleExpressions(),n=t.length===1?t[0]:{type:T.COMPOUND,body:t};return this.runHook("after-all",n)}gobbleExpressions(t){let n=[],r,i;for(;this.index<this.expr.length;)if(r=this.code,r===T.SEMCOL_CODE||r===T.COMMA_CODE)this.index++;else if(i=this.gobbleExpression())n.push(i);else if(this.index<this.expr.length){if(r===t)break;this.throwError('Unexpected "'+this.char+'"')}return n}gobbleExpression(){const t=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",t)}gobbleBinaryOp(){this.gobbleSpaces();let t=this.expr.substr(this.index,T.max_binop_len),n=t.length;for(;n>0;){if(T.binary_ops.hasOwnProperty(t)&&(!T.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!T.isIdentifierPart(this.expr.charCodeAt(this.index+t.length))))return this.index+=n,t;t=t.substr(0,--n)}return!1}gobbleBinaryExpression(){let t,n,r,i,s,a,o,u,c;if(a=this.gobbleToken(),!a||(n=this.gobbleBinaryOp(),!n))return a;for(s={value:n,prec:T.binaryPrecedence(n),right_a:T.right_associative.has(n)},o=this.gobbleToken(),o||this.throwError("Expected expression after "+n),i=[a,s,o];n=this.gobbleBinaryOp();){if(r=T.binaryPrecedence(n),r===0){this.index-=n.length;break}s={value:n,prec:r,right_a:T.right_associative.has(n)},c=n;const d=f=>s.right_a&&f.right_a?r>f.prec:r<=f.prec;for(;i.length>2&&d(i[i.length-2]);)o=i.pop(),n=i.pop().value,a=i.pop(),t={type:T.BINARY_EXP,operator:n,left:a,right:o},i.push(t);t=this.gobbleToken(),t||this.throwError("Expected expression after "+c),i.push(s,t)}for(u=i.length-1,t=i[u];u>1;)t={type:T.BINARY_EXP,operator:i[u-1].value,left:i[u-2],right:t},u-=2;return t}gobbleToken(){let t,n,r,i;if(this.gobbleSpaces(),i=this.searchHook("gobble-token"),i)return this.runHook("after-token",i);if(t=this.code,T.isDecimalDigit(t)||t===T.PERIOD_CODE)return this.gobbleNumericLiteral();if(t===T.SQUOTE_CODE||t===T.DQUOTE_CODE)i=this.gobbleStringLiteral();else if(t===T.OBRACK_CODE)i=this.gobbleArray();else{for(n=this.expr.substr(this.index,T.max_unop_len),r=n.length;r>0;){if(T.unary_ops.hasOwnProperty(n)&&(!T.isIdentifierStart(this.code)||this.index+n.length<this.expr.length&&!T.isIdentifierPart(this.expr.charCodeAt(this.index+n.length)))){this.index+=r;const s=this.gobbleToken();return s||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:T.UNARY_EXP,operator:n,argument:s,prefix:!0})}n=n.substr(0,--r)}T.isIdentifierStart(t)?(i=this.gobbleIdentifier(),T.literals.hasOwnProperty(i.name)?i={type:T.LITERAL,value:T.literals[i.name],raw:i.name}:i.name===T.this_str&&(i={type:T.THIS_EXP})):t===T.OPAREN_CODE&&(i=this.gobbleGroup())}return i?(i=this.gobbleTokenProperty(i),this.runHook("after-token",i)):this.runHook("after-token",!1)}gobbleTokenProperty(t){this.gobbleSpaces();let n=this.code;for(;n===T.PERIOD_CODE||n===T.OBRACK_CODE||n===T.OPAREN_CODE||n===T.QUMARK_CODE;){let r;if(n===T.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==T.PERIOD_CODE)break;r=!0,this.index+=2,this.gobbleSpaces(),n=this.code}this.index++,n===T.OBRACK_CODE?(t={type:T.MEMBER_EXP,computed:!0,object:t,property:this.gobbleExpression()},this.gobbleSpaces(),n=this.code,n!==T.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):n===T.OPAREN_CODE?t={type:T.CALL_EXP,arguments:this.gobbleArguments(T.CPAREN_CODE),callee:t}:(n===T.PERIOD_CODE||r)&&(r&&this.index--,this.gobbleSpaces(),t={type:T.MEMBER_EXP,computed:!1,object:t,property:this.gobbleIdentifier()}),r&&(t.optional=!0),this.gobbleSpaces(),n=this.code}return t}gobbleNumericLiteral(){let t="",n,r;for(;T.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(this.code===T.PERIOD_CODE)for(t+=this.expr.charAt(this.index++);T.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(n=this.char,n==="e"||n==="E"){for(t+=this.expr.charAt(this.index++),n=this.char,(n==="+"||n==="-")&&(t+=this.expr.charAt(this.index++));T.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);T.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+t+this.char+")")}return r=this.code,T.isIdentifierStart(r)?this.throwError("Variable names cannot start with a number ("+t+this.char+")"):(r===T.PERIOD_CODE||t.length===1&&t.charCodeAt(0)===T.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:T.LITERAL,value:parseFloat(t),raw:t}}gobbleStringLiteral(){let t="";const n=this.index,r=this.expr.charAt(this.index++);let i=!1;for(;this.index<this.expr.length;){let s=this.expr.charAt(this.index++);if(s===r){i=!0;break}else if(s==="\\")switch(s=this.expr.charAt(this.index++),s){case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:t+=s}else t+=s}return i||this.throwError('Unclosed quote after "'+t+'"'),{type:T.LITERAL,value:t,raw:this.expr.substring(n,this.index)}}gobbleIdentifier(){let t=this.code,n=this.index;for(T.isIdentifierStart(t)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(t=this.code,T.isIdentifierPart(t));)this.index++;return{type:T.IDENTIFIER,name:this.expr.slice(n,this.index)}}gobbleArguments(t){const n=[];let r=!1,i=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let s=this.code;if(s===t){r=!0,this.index++,t===T.CPAREN_CODE&&i&&i>=n.length&&this.throwError("Unexpected token "+String.fromCharCode(t));break}else if(s===T.COMMA_CODE){if(this.index++,i++,i!==n.length){if(t===T.CPAREN_CODE)this.throwError("Unexpected token ,");else if(t===T.CBRACK_CODE)for(let a=n.length;a<i;a++)n.push(null)}}else if(n.length!==i&&i!==0)this.throwError("Expected comma");else{const a=this.gobbleExpression();(!a||a.type===T.COMPOUND)&&this.throwError("Expected comma"),n.push(a)}}return r||this.throwError("Expected "+String.fromCharCode(t)),n}gobbleGroup(){this.index++;let t=this.gobbleExpressions(T.CPAREN_CODE);if(this.code===T.CPAREN_CODE)return this.index++,t.length===1?t[0]:t.length?{type:T.SEQUENCE_EXP,expressions:t}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:T.ARRAY_EXP,elements:this.gobbleArguments(T.CBRACK_CODE)}}}const TE=new ME;Object.assign(T,{hooks:TE,plugins:new FE(T),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});T.max_unop_len=T.getMaxKeyLen(T.unary_ops);T.max_binop_len=T.getMaxKeyLen(T.binary_ops);const ya=e=>new T(e).parse(),RE=Object.getOwnPropertyNames(T);RE.forEach(e=>{ya[e]===void 0&&e!=="prototype"&&(ya[e]=T[e])});ya.Jsep=T;const LE="ConditionalExpression";var qE={name:"ternary",init(e){e.hooks.add("after-expression",function(n){if(n.node&&this.code===e.QUMARK_CODE){this.index++;const r=n.node,i=this.gobbleExpression();if(i||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;const s=this.gobbleExpression();if(s||this.throwError("Expected expression"),n.node={type:LE,test:r,consequent:i,alternate:s},r.operator&&e.binary_ops[r.operator]<=.9){let a=r;for(;a.right.operator&&e.binary_ops[a.right.operator]<=.9;)a=a.right;n.node.test=a.right,a.right=n.node,n.node=r}}else this.throwError("Expected :")}})}};ya.plugins.register(qE);class w0{constructor(t){x(this,"name");x(this,"value");this.name=t}}class UE extends w0{constructor(n,r){super(n);x(this,"type",1);x(this,"fixed",!1);this.value=r}}class $E extends w0{constructor(n,r,i,s){super(n);x(this,"type",2);x(this,"exp");x(this,"fixed");this.value=r,this.exp=i,this.fixed=s}}class VE{constructor(t){x(this,"uqApp");x(this,"cells",{});x(this,"_hasValue",Ae(!1));this.uqApp=t}initCell(t,n,r){let i;if(r===void 0)i=new UE(t,n),this.cells[t]=i;else{let s=!0,a=r.indexOf(`
`);if(a>0){let u=r.substring(a+1);switch(r=r.substring(0,a),u){default:s=!0;break;case"init":s=!1;break;case"equ":s=!0;break}}let o=ya(r);i=new $E(t,n,o,s),this.cells[t]=i}return i}getCellValue(t){var n;return(n=this.cells[t])==null?void 0:n.value}refreshHasValue(){let t=!0;for(let n in this.cells)if(this.cells[n].value===void 0){t=!1;break}le(this._hasValue,t)}async setCellValue(t,n,r){const i=this.cells[t];if(i!==void 0&&i.type===1){i.value=n;for(let s in this.cells){const a=this.cells[s];if(a.type===2){let o=a.value=await this.runExp(a.exp);r(a.name,o)}}}}async runExp(t){switch(t.type){case"BinaryExpression":return await this.binary(t);case"Identifier":return await this.identifier(t);case"Literal":return await this.literal(t);case"UnaryExpression":return await this.unary(t)}}async binary(t){const{operator:n,left:r,right:i}=t;let s=await this.runExp(r);if(s===void 0)return;let a=await this.runExp(i);if(a!==void 0)switch(n){default:return;case"-":return s-a;case"+":return s+a;case"*":return s*a;case"/":return a===0?void 0:s/a}}async unary(t){const{operator:n,argument:r}=t;let i=await this.runExp(r);switch(n){default:return;case"-":return-i;case"+":return i}}async identifier(t){const{name:n}=t;let r=this.cells[n];if(r!==void 0)return r.value}async literal(t){return Number(t.value)}}const zE="value",BE="price",YE="amount";function b0({row:e}){const t=G(),{closeModal:n}=ue(),{register:r,handleSubmit:i,setValue:s,formState:{errors:a}}=Tn({mode:"onBlur"}),{props:o,section:u}=e,{entityDetail:c}=u.coreDetail,{i:d,x:f}=c,{i:m,x:v}=o,{current:y}=P.useRef([]),[w,j]=P.useState();if(Pt(()=>{const{value:h,price:p,amount:b}=o,{value:S,price:k,amount:_}=c;S!==void 0&&y.push([zE,h,S,N=>o.value=N,void 0]),k!==void 0&&y.push([BE,p,k,N=>o.price=N,void 0]),_!==void 0&&y.push([YE,b,_,N=>o.amount=N,void 0]);let C=new VE(t);for(let N of y){let[D,E,A]=N,O=C.initCell(D,E,A.defaultValue);N[4]=O}j(C),C.refreshHasValue()}),w===void 0)return null;return l.jsx(g,{});function g(){const h=we(w._hasValue);function p(){return y.map(E=>{const[A,O,F,,q]=E,{name:z,caption:Y,defaultValue:M}=F;return{name:A,label:Y??z,type:"number",options:{value:O,disabled:q.fixed}}})}async function b(E){const{value:A,name:O}=E.target;let F;if(A.trim().length===0)F=void 0;else{let q=Number(A);F=Number.isNaN(q)===!0?void 0:q}await w.setCellValue(O,F,(q,z)=>{s(q,z==null?void 0:z.toFixed(4))}),w.refreshHasValue()}const S={onChange:b,valueAsNumber:!0},k=p();k.forEach(E=>E.options={...E.options,...S}),k.push({type:"submit",label:"提交",options:{disabled:h===!1}});async function _(E){for(let A of y){let[O,,,F]=A;F(w.getCellValue(O))}n(!0)}async function C(){await e.delFromSection(),n()}const N=l.jsx(fi,{onClick:C,className:"btn btn-sm btn-primary me-1",children:l.jsx(J,{name:"trash",fixWidth:!0})});function D({bud:E,value:A}){if(E===void 0)return null;const{caption:O,name:F}=E;return l.jsx(ht,{label:O??F,className:"border-bottom py-2",children:l.jsx("div",{className:"px-3",children:l.jsx(oi,{id:A})})})}return l.jsxs(H,{header:"输入明细",right:N,children:[l.jsxs("div",{className:"py-1 tonwa-bg-gray-2 mb-3 container",children:[l.jsx(D,{bud:d,value:m}),l.jsx(D,{bud:f,value:v})]}),l.jsx("form",{className:"container",onSubmit:i(_),children:l.jsx(cr,{rows:k,register:r,errors:a})})]})}}function WE(e){async function t(n,r){}return P.useCallback(t,[])}function HE({detail:e,editable:t}){const n=we(e._sections),{caption:r}=e;return l.jsxs("div",{children:[l.jsx("div",{className:"py-1 px-3 tonwa-bg-gray-2",children:r??"明细"}),l.jsx("div",{children:n.map(i=>l.jsx(QE,{section:i,editable:t},i.keyId))})]})}function QE({section:e,editable:t}){const{coreDetail:n}=e,{entityDetail:r}=n,{x:i}=r,s=WE(),a=we(e._rows);async function o(){await s(e,void 0)}let u;if(i===void 0){let c=a[0];c!==void 0&&(u=l.jsx(ny,{row:c,editable:t}))}else u=l.jsxs(l.Fragment,{children:[l.jsxs(ze,{className:"tonwa-bg-gray-1 pt-1 px-3",children:[l.jsx("div",{className:"small text-secondary",children:"分组"}),l.jsx("button",{className:"btn btn-sm btn-link",disabled:!t,onClick:o,children:l.jsx(J,{name:"plus"})})]}),a.map(c=>l.jsxs(re.Fragment,{children:[l.jsx(ny,{row:c,editable:t}),l.jsx(ge,{sep:2})]},c.keyId))]});return l.jsx("div",{className:"border-top",children:u})}function ny({row:e,editable:t}){const{openModal:n}=ue(),{props:r,section:{coreDetail:{entityDetail:i}}}=e,{i:s,x:a}=i,{i:o,x:u,value:c,price:d,amount:f}=r,m=2;async function v(){if(t===!1)return;await n(l.jsx(b0,{row:e}))===!0&&await e.changed()}function y({caption:g,value:h}){return l.jsxs("div",{className:"d-flex align-items-center",children:[l.jsx("span",{className:"me-3 small text-secondary",children:g}),l.jsx("span",{className:"w-min-4c",children:h})]})}if(c===void 0)return null;let w=t===!0?"cursor-pointer":"text-light";function j({bud:g,value:h}){return g===void 0?null:l.jsx("div",{children:l.jsx(oi,{id:h})})}return l.jsxs("div",{className:"py-2 align-items-stretch row",children:[l.jsx("div",{className:"col-4",children:l.jsx("div",{className:"ps-3",children:l.jsx(j,{bud:s,value:o})})}),l.jsx("div",{className:"col-4",children:l.jsx("div",{className:"ps-3",children:l.jsx(j,{bud:a,value:u})})}),l.jsx("div",{className:"col-3",children:l.jsxs("div",{className:"pe-3 text-end d-flex flex-column align-items-end",children:[l.jsx(y,{caption:"单价",value:d==null?void 0:d.toFixed(m)}),l.jsx(y,{caption:"金额",value:f==null?void 0:f.toFixed(m)}),l.jsx(y,{caption:"数量",value:l.jsx("span",{className:"fs-larger fw-bold",children:c})})]})}),l.jsx("div",{className:"col-1",children:l.jsx("div",{className:"text-end text-info d-flex flex-column ",children:l.jsx("div",{className:"ps-2 pe-3 "+w,onClick:v,children:l.jsx(J,{name:"pencil",fixWidth:!0})})})})]})}function GE({propPend:e}){const t=G(),{uq:n}=t,{closeModal:r}=ue();let{caption:i,entity:s,search:a}=e,{name:o,id:u,predefined:c}=s,{data:d}=lr([o],async()=>{let{$page:h,retSheet:p,retAtom:b}=await n.GetPend.page({pend:u,key:""},void 0,100),S={};for(let _ of p)S[_.id]=_;let k=[];for(let _ of h){let C={pend:_.pend,sheet:S[_.sheet],detail:_,value:_.pendValue};k.push(C)}return k},ur),[f,m]=P.useState({});i===void 0&&(i=s.caption??o);function v(){let h=Object.values(f).sort((b,S)=>{let k=b.pend,_=S.pend;return k<_?-1:k===_?0:1}),p=[];for(let b of h){const{pend:S,detail:k,value:_}=b;let C={...k,origin:k.id,pendFrom:S,pendValue:_,id:void 0};k.id=void 0,p.push(C)}r(p)}function y({caption:h,value:p}){return l.jsxs("div",{className:"d-flex text-end align-items-center",children:[l.jsx("span",{className:"me-3 small text-secondary",children:h}),l.jsx("span",{className:"w-min-4c",children:p})]})}const w=2;function j({value:h}){const{detail:{i:p,price:b,amount:S,value:k}}=h;return l.jsx("div",{className:"container",children:l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col py-2",children:l.jsx(oi,{id:p})}),l.jsx("div",{className:"col py-2 text-break",children:JSON.stringify(h)}),l.jsxs("div",{className:"col py-2 d-flex flex-column align-items-end me-2",children:[l.jsx(y,{caption:"单价",value:b.toFixed(w)}),l.jsx(y,{caption:"金额",value:S.toFixed(w)}),l.jsx(y,{caption:"数量",value:l.jsx("span",{className:"fs-larger fw-bold",children:k})})]})]})})}function g(h,p){const{pend:b}=h;p===!0?f[b]=h:delete f[b],m({...f})}return l.jsxs(H,{header:i,children:[l.jsxs("div",{className:"p-3 border-bottom",children:[l.jsxs("div",{className:"d-flex",children:[l.jsxs("div",{className:"me-3",children:["pend: ",o]}),l.jsxs("div",{className:"me-3",children:["search: ",JSON.stringify(a)]}),Object.values(c).map(h=>{const{name:p,caption:b,entity:S}=h;return l.jsxs("div",{className:"me-3",children:[p,": ",b]},p)})]}),l.jsx("div",{children:Object.keys(f).map(h=>h).join(", ")})]}),l.jsx(Fe,{items:d,ViewItem:j,className:"",onItemSelect:g}),l.jsx("div",{className:"p-3",children:l.jsx("button",{className:"btn btn-primary",onClick:v,children:"选入"})})]})}function KE(e){const{openModal:t}=ue(),n=fh(),{entityDetail:r}=e,{pend:i,i:s,x:a}=r;async function o(){let c=await t(l.jsx(GE,{propPend:i}));if(c===void 0)return;let d=[],f={};for(let y of c){let{i:w,x:j}=y;if(j===void 0)d.push(y);else{let g=f[w];g===void 0?(g=[y],f[w]=g):g.push(y)}}await m(),await v();async function m(){for(let y of d){let w=new No(e);e.addSection(w),await w.addRowProps(y)}}async function v(){}}async function u(){let c=new No(e),d=new dh(c),f=await n(s);if(f===void 0)return;let{spec:m}=f;if(d.props.i=m,a!==void 0){let v=await n(a);if(v===void 0)return;let{spec:y}=v;d.props.x=y}e.addSection(c),await t(l.jsx(b0,{row:d})),await d.addToSection()}return P.useCallback(i!==void 0?o:u,[])}let XE=1;function ry(){const e=G(),{uq:t,biz:n}=e,{sheet:r,id:i}=Mn(),s=n.entityFrom62(r),a=rr(i),[o,u]=P.useState(),c=Ur(),d=fh();return P.useEffect(()=>{if(!c.state)return;let f=new Zp(t,n,s,void 0);u(f),S0(e,f,d)},[c.state]),Pt(()=>{(async function(){let f=new Zp(t,n,s,i===void 0?void 0:a);await f.load(),u(f)})()}),o===void 0?l.jsx(ir,{header:"..."}):l.jsx(ZE,{store:o})}async function S0(e,t,n){let r=await t.start(n);if(r===void 0)return;let{id:i,no:s,target:a}=r;if(i>0){let o=e.pageCache.getPrevData();if(o){const{phrase:u}=t.entitySheet;o.addItem({id:i,no:s,target:a,phrase:u})}}}function ZE({store:e}){const{uq:t,caption:n,main:r,detail:i}=e,s=G(),a=fh(),{openModal:o,closeModal:u}=ue(),c=bn(),[d,f]=P.useState(!0),m=KE(i),v=P.useCallback(async function(){S0(s,e,a)},[]);Pt(()=>{v()});async function y(){var D;f(!1),await Ij(3e3);let C=await t.SubmitSheet.submit({id:r.id});if(w(),f(!0),(D=s.autoRefresh)==null||D.call(s),await o(l.jsxs(H,{header:"提交成功",back:"none",children:[l.jsxs("div",{className:"p-3",children:[n," ",l.jsx("b",{children:r.no})," 已提交 ",JSON.stringify(C)]}),l.jsxs("div",{className:"border-top p-3",children:[l.jsx("button",{className:"btn btn-outline-primary",onClick:u,children:"返回"}),l.jsxs("button",{className:"ms-3 btn btn-outline-secondary",onClick:()=>u(!0),children:["新建",n]})]})]}))===!0){const{entitySheet:E}=e;c(`/sheet/${Pn(E.id)}`,{replace:!0,state:XE++})}else c(-1)}function w(){let{id:C}=r,N=s.pageCache.getPrevData();N&&N.removeItem(D=>D.id===C)}async function j(){await m()}async function g(){let C=`${n} ${r.no} 真的要作废吗？`;await o(l.jsx(au,{header:"确认",message:C,yes:"单据作废",no:"不作废"}))===!0&&(await e.discard(),w(),c(-1))}let h=we(i._sections),p,b;h.length===0?b="btn btn-primary me-3":(p=l.jsx(fi,{className:"btn btn-primary me",onClick:y,disabled:h.length===0,children:"提交"}),b="btn btn-outline-primary me-3");let S,k=we(r._id);async function _(){await v()===void 0&&await m()}return k===0?S=l.jsx("div",{className:"p-3",children:l.jsx("button",{className:"btn btn-primary",onClick:_,children:"开始录单"})}):S=l.jsxs(l.Fragment,{children:[l.jsx(OE,{main:r}),l.jsx(HE,{detail:i,editable:d}),l.jsxs(ze,{className:"px-3 py-3 border-top",children:[p,d===!0&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{className:b,onClick:j,children:[l.jsx(J,{name:"plus",className:"me-1"}),"明细"]}),k&&l.jsx("button",{className:"btn btn-outline-primary",onClick:g,children:"作废"})]})]})]}),l.jsx(H,{header:n,children:S})}function JE({entityReport:e}){const{uq:t}=G(),{id:n,from:r,title:i}=e,s={reportPhrase:n,atomPhrase:r.id,atomId:void 0,dateStart:"2023-10-3",dateEnd:"2023-10-6",params:{a:1}},a=P.useCallback(async(u,c,d)=>{let{$page:f,specs:m}=await t.GetReport.page(u,c,d),v=[],y={};for(let w of f){let j={...w,specs:[]};const{id:g}=j;y[g]=j,v.push(j)}for(let w of m){let{base:j}=w,g=y[j];g!==void 0&&g.specs.push(w)}return v},[]);function o({value:u}){const{id:c,phrase:d,no:f,ex:m,value:v,specs:y}=u;return l.jsxs("div",{className:"",children:[l.jsxs("div",{className:"px-3 py-3 tonwa-bg-gray-2",children:[c," ",d," ",f," ",l.jsx("b",{children:m})," ",v]}),l.jsx("div",{className:"ms-5 border-start",children:y==null?void 0:y.map(w=>{let{id:j,phrase:g,base:h,value:p,props:b}=w;return l.jsx(Ce,{to:bo("../history",i[0].bud.id,j),children:l.jsxs("div",{className:"d-flex ps-3 pe-3 py-2 border-bottom",children:[l.jsx(PE,{phrase:g,props:b}),l.jsxs("div",{className:"flex-grow-1",children:[j," ",g," ",h]}),l.jsx("b",{className:"me-5",children:p}),l.jsx(J,{name:"angle-right"})]})},j)})})]})}return l.jsx(Rn,{header:e.caption??e.name,query:a,param:s,sortField:"id",ViewItem:o,children:l.jsx("div",{className:"p-3 border-bottom",children:e.caption??e.name})})}function eI(e){if(typeof e=="string"){if(e!==":report")debugger;return e}return Pn(e)}function j0(e){return`report/${eI(e)}`}function tI(){const{report:e}=Mn();let t=rr(e);const n=G(),{biz:r}=n,i=r.entityIds[t];return{page:l.jsx(JE,{entityReport:i})}}function nI(){const{uq:e}=G(),{title:t,id:n}=Mn(),r=rr(n),i=rr(t),s={objId:r,title:i};function a({value:o}){let{id:u,value:c,ref:d,plusMinus:f,sheetNo:m,sheetPhrase:v,binPhrase:y}=o;return l.jsx(Ce,{to:bo("../ref",void 0,d),children:l.jsxs("div",{className:"px-3 py-2 d-flex",children:[l.jsx("div",{className:"w-8c small text-secondary",children:l.jsx(Mf,{date:u/(1024*1024)*60})}),l.jsx("div",{className:"me-3",children:m}),l.jsxs("div",{className:"flex-grow-1",children:["ref: ",d," plusMinus: ",f," sheetPhrase: ",v," binPhrase: ",y]}),l.jsx("div",{className:"fw-bold",children:c})]})})}return l.jsx(Rn,{header:"流水",query:e.GetHistory,param:s,sortField:"id",ViewItem:a,children:l.jsx("div",{className:"p-3 tonwa-bg-gray-2",children:l.jsx(oi,{id:r})})})}function rI(){const{uq:e}=G(),{id:t}=Mn(),n=rr(t),{data:r}=lr([n],async()=>await e.GetSheet.query({id:void 0,detail:n}),ur),{main:[i],details:s,origins:a}=r,{id:o,no:u,i:c}=i;return l.jsxs(H,{header:"追踪单据",children:[l.jsxs("div",{className:"px-3 py-3 tonwa-bg-gray-2 border-bottom",children:[l.jsx("small",{className:"text-secondary",children:"单据编号: "}),l.jsx("b",{children:u}),l.jsx("span",{className:"ms-3 small text-secondary",children:"时间: "}),l.jsx(Mf,{date:o/(1024*1024)*60})]}),l.jsx("div",{className:"px-3 py-2 tonwa-bg-gray-1",children:l.jsx("div",{children:l.jsx(oi,{id:c})})}),l.jsx("div",{className:"border-top",children:s.map(d=>l.jsxs("div",{className:"px-3 py-2 d-flex border-bottom",children:[l.jsx("div",{className:"flex-grow-1",children:l.jsx(oi,{id:d.i})}),l.jsx("div",{className:"fw-bold",children:d.value})]},d.id))}),l.jsxs("div",{className:"px-3 py-2 d-none",children:["orgiins: ",JSON.stringify(a)]})]})}function iy(e,t,n){if(n!==void 0){let r;n.required===!0&&(r="请输入",typeof t=="string"&&(r+=t));let i;const{min:s}=n;s!==void 0&&(i={value:s,message:`最小值${s}`});let a;const{max:o}=n;return o!==void 0&&(a={value:o,message:`最大值${o}`}),{...n,required:r,min:i,max:a}}switch(e){default:return n;case"number":return Object.assign({},n,{valueAsNumber:!0})}}function iI(e){var v;const{inputProps:t,errors:n,type:r,step:i,defaultValue:s,right:a,labelClassName:o}=e;let{label:u}=e;const{name:c}=t;let d=n[c],f="form-control ";d&&(f+="is-invalid");let m=l.jsx("input",{...t,className:f,type:r,step:i,defaultValue:s});return a!==void 0&&!d&&(m=l.jsxs("div",{className:"input-group",children:[m,l.jsx("span",{className:"input-group-text",children:a})]})),r==="hidden"&&(u=null),l.jsxs(ht,{label:u,labelClassName:o,children:[m,d&&l.jsx("div",{className:"invalid-feedback mt-1",children:(v=d.message)==null?void 0:v.toString()})]})}function ht({label:e,labelClassName:t,children:n,className:r}){return t=t??"form-label col-sm-2 col-3 text-end",l.jsxs("div",{className:e===null?"d-none":"row "+(r??"mb-3"),children:[l.jsx("label",{className:t,children:e}),l.jsx("div",{className:"col",children:n})]})}function cr(e){let{rows:t}=e;return l.jsx(l.Fragment,{children:t.map((n,r)=>l.jsx(sI,{row:n,...e},r))})}function sI({row:e,register:t,errors:n,labelClassName:r,clearErrors:i,setValue:s}){var g;const{label:a,inputs:o}=e;if(t&&o!==void 0)return l.jsx(ht,{label:a,labelClassName:r,children:o.map((h,p)=>{const{label:b,name:S,type:k,options:_,readOnly:C}=h;if(k==="checkbox")return l.jsxs("label",{className:"form-check-label me-3",children:[l.jsx("input",{className:"form-check-input me-1",type:"checkbox",readOnly:C,...t(S)}),b??S]},p);{let N=iy(k,b,_);({...t(S,N)})}})});const{radios:u}=e;if(u!==void 0){const{name:h,default:p,readOnly:b}=e;return l.jsx(ht,{label:a,children:u.map((S,k)=>{const{label:_,value:C}=S;return l.jsxs("label",{className:"form-check-label me-3",children:[l.jsx("input",{className:"form-check-input me-1",defaultChecked:C===p,readOnly:b,value:C,type:"radio",...t(h)}),_??h]},k)})})}const{items:c}=e;if(c!==void 0){const{name:h,multiple:p,default:b,placeHolder:S,options:k,readOnly:_}=e;let C=n[h],N="form-select ";C&&(N+="is-invalid");const D=`
`;return k!==void 0&&k.required===!0&&(k.validate=E=>{let A=E!==D;return console.error("select "+E+" ret "+A),A}),l.jsxs(ht,{label:a,labelClassName:r,children:[l.jsxs("select",{multiple:p,className:N,...t(h,k),children:[b===void 0&&l.jsx("option",{selected:!0,disabled:!0,value:D,children:S??"请选择"+a}),c.map((E,A)=>{const{label:O,value:F}=E;return l.jsx("option",{value:F,selected:b===F,children:O},A)})]}),C&&l.jsx("div",{className:"invalid-feedback mt-1",children:(g=C.message)==null?void 0:g.toString()})]})}const{atom:d}=e;if(d!==void 0){let{name:h,options:p}=e,b=n[h];return l.jsx(aI,{row:e,label:a,error:b,inputProps:t(h,p),setValue:s,clearErrors:i})}const{name:f,type:m,options:v,readOnly:y,right:w,step:j}=e;switch(m){default:const h=v.required===!0?l.jsx("b",{className:"text-primary",children:a}):a;let p=iy(m,a,v);return l.jsx(iI,{label:h,type:m,step:j,errors:n,labelClassName:r,inputProps:t(f,p),defaultValue:v==null?void 0:v.value,right:w});case"submit":return l.jsx(ht,{children:l.jsx("input",{type:"submit",disabled:v==null?void 0:v.disabled,readOnly:y,className:e.className??"btn btn-primary",value:a??"提交"})})}}function aI({row:e,label:t,error:n,inputProps:r,clearErrors:i,setValue:s}){var b;const a=G(),{uq:o}=a,u=cu(),{name:c,atom:d,default:f,readOnly:m}=e,[v,y]=P.useState(f);async function w(){if(m===!0)return;i==null||i(c);let S=await u(d);if(S===void 0)return;const{id:k}=S;s(c,k),y(k)}function j({value:S}){const{no:k,ex:_}=S;return l.jsxs(l.Fragment,{children:[_,"   ",l.jsx("small",{className:"text-muted",children:k})]})}let g;if(v===void 0){let{placeHolder:S}=e;S||(S="点击选择"),g=l.jsxs("span",{className:"text-black-50",children:[l.jsx(J,{name:"hand"})," ",S]})}else g=l.jsx(an,{uq:o,id:v,Template:j});let h="form-control ";m!==!0&&(h+=" cursor-pointer ");let p;return n&&(h+="is-invalid",p=l.jsx("div",{className:"invalid-feedback mt-1",children:(b=n.message)==null?void 0:b.toString()})),l.jsxs(ht,{label:t,children:[l.jsxs("div",{className:h,onClick:w,children:[g,"  ",l.jsx("input",{name:c,type:"hidden",...r})]}),p]})}class lI{constructor(t,n){x(this,"start");x(this,"items");this.start=t,this.items=n}getItem(t,n){return this.items.find(t)}removeItem(t,n){let r=this.items.findIndex(t);r>=0&&this.items.splice(r,1)}addItem(t){this.items.unshift(t)}}function Rn(e){if(P.useContext(Hf)===!0)return l.jsx(sy,{...e,isPopFirst:!1,isModal:!0});return l.jsx(n,{...e});function n(r){const i=nx();return l.jsx(sy,{...r,isPopFirst:i==="POP",isModal:!1})}}function sy(e){let{query:t,param:n,sortField:r,pageStart:i,pageSize:s,pageMoreSize:a,ViewItem:o,onItemClick:u,onItemSelect:c,children:d,isPopFirst:f,isModal:m,Top:v,Bottom:y,none:w,itemKey:j}=e;const[g,h]=P.useState(void 0),[p,b]=P.useState(!1),S=P.useRef({param:{...n},pageStart:i,isPopFirst:f,querying:!1,items:void 0,allLoaded:!1}),{current:k}=S;uI(k.param,n)===!1&&(k.allLoaded=!1),s=s??20,a=a??5;const _=G(),C=P.useCallback(async function(z=!1){var Le;if(n===void 0){h(null),k.items=null;return}let Y=await oI(n),{pageStart:M,querying:L,isPopFirst:W,items:te,allLoaded:oe}=k;if(oe===!0)return;if(W===!0){let Ne=_.pageCache.getCache();if(Ne&&m===!1&&((Le=Ne.data)==null?void 0:Le.start)===M&&te!==void 0)return}if(L===!0||p===!0)return;b(!0),k.querying=!0;let He,pe;if(k.isPopFirst===!0){setTimeout(()=>{k.isPopFirst=!1},100);let Ne=_.pageCache.getCache(),$t=Ne==null?void 0:Ne.data;if(M===i&&$t&&m===!1){let{items:Un}=$t;pe=Un,Ne.data=void 0}}let Ee;if(pe)Ee=pe.length;else{let $t=(z===!0?a:s)+1;if(typeof t=="function")pe=await t(Y,M,$t);else{let Un=await t.page(Y,M,$t),{$page:$r}=Un;pe=$r}Ee=pe.length,Ee<$t?k.allLoaded=!0:(pe.splice(Ee-1,1),Ee--)}if(He=M===void 0||te===void 0?pe:[...te,...pe],h(He),k.items=He,Ee>0&&(k.pageStart=pe[Ee-1][r]),m===!1){let Ne=_.pageCache.getCache();Ne!==void 0&&(Ne.data=new lI(M,He))}b(!1),k.querying=!1},[n]);Pt(()=>{C()}),P.useEffect(()=>{k.isPopFirst!==!0&&(k.pageStart=void 0,C())},[n]),m===!1&&(_.onCloseModal=()=>{let q=_.pageCache.getCache();if(q===void 0)return;let{data:z}=q;if(z===void 0)return;let{items:Y}=z,M=[...Y];h(M),k.items=M});let N=!1;function D(q){setTimeout(()=>{let z=document.getElementById(q);z==null||z.scrollIntoView(),N=!1},20)}async function E(q){k.isPopFirst!==!0&&N!==!0&&(N=!0,D("$$bottom"),await C(!0))}o=o??function({value:q}){return l.jsx("div",{className:"px-3 py-2",children:JSON.stringify(q)})};let A;v&&(A=l.jsx(v,{items:g}));let O;y&&(O=l.jsx(y,{items:g}));let F;return p===!0&&g!==void 0?F=l.jsxs("div",{children:[l.jsx(as,{className:"m-3 text-info"}),l.jsx("div",{id:"$$bottom"})]}):g&&(g.length>0?F=l.jsx(l.Fragment,{children:l.jsx(Fe,{items:g,ViewItem:o,onItemClick:u,onItemSelect:c,itemKey:j})}):F=w??l.jsx("div",{className:"m-3",children:"-"})),l.jsxs(H,{...e,onScrollBottom:E,children:[l.jsx("div",{id:"$$top"}),d,A,F,O]})}async function oI(e){if(!e)return e;let t={},n=[],r=[];for(let s in e){let a=e[s];jx(a)===!0?(n.push(s),r.push(a)):t[s]=a}let i=r.length;if(i>0){let s=await Promise.all(r);for(let a=0;a<i;a++){let o=n[a];t[o]=s[a]}}return t}function uI(e,t){if(e===void 0)return t===void 0;if(t===void 0)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i of n)if(e[i]!==t[i])return!1;return!0}function An({name:e,className:t,iconClassName:n,compact:r}){let i="d-inline-block ";return r!==!0&&(i+="text-center w-1-5c "),t!==void 0&&(i+=t),l.jsx("div",{className:i,children:l.jsx("b",{children:l.jsx("i",{className:`bi-${e} `+(n??"")})})})}const ay="btn btn-sm me-2 btn-";function hh({className:e,color:t,onClick:n,children:r,tag:i}){let s;return t!==void 0?s=ay+t:e===void 0?s=ay+"primary":s=e,re.createElement(i??(n===void 0?"div":"button"),{className:s,onClick:n},r)}function cI(e){return l.jsx(hh,{...e,children:l.jsx(An,{name:"plus-lg",compact:!0})})}function mh({onUserAdded:e}){let{openModal:t}=ue();async function n(){let r=l.jsx("div",{className:"my-3",children:$e("searchUser")}),i=await t(l.jsx(Xf,{header:$e("user"),top:r}));if(i===void 0)return;let s=await t(l.jsx(dI,{user:i,assigned:""}));s.trim().length===0&&(s=void 0),await e(i.id,s)}return l.jsxs("button",{className:"btn btn-sm btn-link",onClick:n,children:[l.jsx(J,{name:"plus",className:"me-1"}),$e("new")]})}function dI({user:e,assigned:t}){const{register:n,handleSubmit:r,formState:{errors:i}}=Tn({mode:"onBlur"}),{closeModal:s}=ue(),[a,o]=P.useState(t),u=[{name:"assigned",label:"备注名",type:"string",options:{value:t,onChange:c}},{type:"submit",label:"提交",options:{disabled:a===t}}];function c(f){o(f.currentTarget.value)}async function d(f){s(a)}return l.jsx(H,{header:"用户",children:l.jsx("div",{className:"p-3",children:l.jsxs("form",{className:"container",onSubmit:r(d),children:[l.jsx(ht,{label:"用户",children:l.jsx(Zf,{user:e})}),l.jsx(cr,{rows:u,register:n,errors:i})]})})})}function k0({right:e}){let t=vt(),n=we(t.user);return l.jsxs(ze,{className:"px-3 py-3 border-bottom align-items-center",children:[l.jsxs("span",{children:["[ ",l.jsx(J,{name:"user-circle",className:"me-2 text-danger"})," ",$e("self")," - ",l.jsx(Pr,{children:n.name})," ]"]}),l.jsx("span",{children:e})]})}function ph({siteRole:e,userSite:t}){let n=G(),{openModal:r,closeModal:i}=ue(),[s,a]=P.useState(t),{name:o,icon:u,nick:c,assigned:d}=s,f=$e("user"),m=$e("admin"),v=$e("owner"),y;c&&(y=l.jsx("span",{className:"d-inline me-3",children:c}));let w=d?l.jsxs(l.Fragment,{children:[l.jsx("div",{children:d}),c?l.jsxs(Pr,{children:[y," ",f,": ",o]}):o]}):c?l.jsxs(l.Fragment,{children:[y," ",l.jsxs(Pr,{children:[f,": ",o]})]}):o;function j(){function g(){let h=we(n.user),{user:p,isOwner:b,isAdmin:S,addBy:k}=s,_;b===!0?_=v:S===!0?_=m:_=f;async function C(E){let{assigned:A}=E;await e.addUser(p,A),a({...s,assigned:A}),i()}function N(){let E,A;if(b===!0)if(k===h.id)E=Xn.owner,A=v;else return null;else S===!0?(E=Xn.admin,A=m):(E=Xn.user,A=f);async function O(){let q=cp($e("userReallyDelete"),A,s.name);await r(l.jsx(au,{header:"确认",message:q,yes:"删除",no:"不删除"}))===!0&&(await e.delAdmin(p,E),i())}let F=cp($e("deleteThe"),A);return l.jsx("button",{onClick:O,className:"btn btn-sm btn-outline-primary",children:F})}function D(){if(b===!0||S===!0)return null;const E=" my-2 me-4 w-min-6c ",A=" form-check-input ",O=" me-2 ";let{biz:F}=n,{rolesAtom:q}=t,z=we(q);return l.jsx(pt,{label:"角色",children:F.roles.map((Y,M)=>{let{name:L,caption:W,phrase:te}=Y,oe=(z==null?void 0:z.findIndex(pe=>pe===te))>=0;async function He(pe,Ee){if(await e.setUserRole(p,te,Ee),Ee===!0)z.push(te);else{let Le=z.findIndex(Ne=>Ne===te);Le>=0&&z.splice(Le,1)}le(q,[...z])}return l.jsx(Af,{onCheckChanged:He,labelClassName:E,inputClassName:A,gapClassName:O,defaultChecked:oe,name:L,children:W??L},M)})})}return l.jsx(H,{header:_,children:l.jsxs(hi,{values:s,className:"mx-3",children:[l.jsx(pt,{children:l.jsxs(ze,{className:"p-3 tonwa-bg-gray-2",children:[l.jsx("div",{children:w}),l.jsx(N,{})]})}),l.jsx(_a,{name:"assigned",label:$e("assigned")}),l.jsx(pt,{contentContainerClassName:" my-3",children:l.jsx(mi,{onSubmit:C,children:l.jsx("div",{className:"mx-5",children:$e("save")})})}),l.jsx("div",{className:"mt-5 mb-3",children:l.jsx(D,{})})]})})}r(l.jsx(g,{}))}return l.jsxs(ze,{className:"my-2",children:[l.jsx(su,{className:"w-2c h-2c me-3",src:u}),l.jsx("div",{children:w}),l.jsx("div",{className:"cursor-pointer text-info",onClick:j,children:l.jsx(J,{name:"pencil"})})]})}const yh={cnCard:" card mt-3 mx-2 "};function C0({siteRole:e}){let t=vt(),{openModal:n,closeModal:r}=ue(),i=we(t.user),{onOwnerAdded:s}=e,a=we(e.unitRoles),{owners:o}=a,u=new eh(o,"site"),c=$e("owner");function d({value:f}){function m(){function v(){async function y(){await e.quitOwner(),r(),r()}return l.jsx(H,{header:c,children:l.jsx("div",{className:"w-20c rounded border px-3 py-4 mx-auto my-3 text-center",children:l.jsxs(ze,{children:[l.jsx(J,{name:"question-circle-o",size:"3x",className:"text-danger me-3"}),l.jsxs("div",{className:"text-start",children:[l.jsx("b",{children:$e("ownerReallyQuit")}),l.jsx("br",{}),l.jsx("small",{className:"text-muted",children:$e("ownerLost")}),l.jsx("br",{}),l.jsx("br",{}),l.jsx("button",{className:"btn btn-outline-primary",onClick:y,children:$e("ownerConfirmQuit")})]}),l.jsx("span",{})]})})})}n(l.jsx(v,{}))}if(f.user===i.id){let v;return o.length>1&&(v=l.jsx("span",{className:"cursor-pointer",onClick:m,children:l.jsx(J,{name:"times",className:"text-info"})})),l.jsx(k0,{right:v})}return l.jsx("div",{className:"px-3 py-2",children:l.jsx(ph,{userSite:f,siteRole:e})})}return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:yh.cnCard,children:[l.jsx("div",{className:"card-header pe-0 py-0",children:l.jsxs(ze,{className:"align-items-center",children:[l.jsx("span",{children:c}),l.jsx(mh,{onUserAdded:s})]})}),l.jsx(th,{context:u,none:l.jsx(Jf,{}),ViewItem:d})]}),l.jsxs("ul",{className:"small text-muted mt-2 mb-5 mx-3",children:[l.jsx("li",{children:$e("ownerMemo1")}),l.jsx("li",{children:$e("ownerMemo2")})]})]})}function fI({siteRole:e}){let t=G();const{biz:n}=t;let r=we(e.unitRoles),{users:i}=r,s=new eh(i,(u,c)=>u.user===c.user);function a({value:u}){let{rolesAtom:c,isAdmin:d,isOwner:f,user:m}=u,v=we(t.user),y=we(c);if(m===v.id)return null;let w=n.roles;function j({children:h}){return l.jsxs("label",{className:"me-5",children:[l.jsx("input",{type:"checkbox",className:"form-check-input",checked:!0,disabled:!0}),l.jsx("span",{children:h})]})}let g=l.jsx("div",{className:"ms-4 mt-2 form-check form-check-inline",children:f===!0?l.jsx(j,{children:"roleT('owner')"}):d===!0?l.jsx(j,{children:"roleT('admin')"}):l.jsx(l.Fragment,{children:y.map(h=>{let p=w.find(S=>S.phrase===h),b;if(p===void 0)b="role is not defined in biz";else{let{name:S,caption:k}=p;b=k??S}return l.jsxs("span",{className:"d-inline-block w-min-6c me-3",children:[l.jsx(J,{name:"user",className:"text-info me-1"})," ",b]},h)})})});return l.jsxs("div",{className:"px-3 py-2",children:[l.jsx(ph,{userSite:u,siteRole:e}),g]})}async function o(u,c){let d=await e.addUser(-u,c);d===void 0&&console.error("uqUnit.addUser error",u,c);let{items:f,atomItems:m}=s,v=f.findIndex(w=>w.user===u);v>=0&&f.splice(v,1);let y={...d,id:0,user:d.id,unit:0,admin:0,rolesAtom:Ae([])};c!==void 0&&(y.assigned=c),f=[y,...f],le(m,f)}return l.jsx(l.Fragment,{children:l.jsxs("div",{className:yh.cnCard,children:[l.jsx("div",{className:"card-header pe-0 py-0",children:l.jsxs(ze,{className:"align-items-center",children:[l.jsx("span",{children:$e("user")}),l.jsx(mh,{onUserAdded:o})]})}),l.jsx(th,{context:s,ViewItem:a,none:l.jsx(Jf,{})})]})})}function _0(){var t;const e=G();return N0((t=e.uqSites)==null?void 0:t.userSite)}function hI(){const e=G();return N0(e.uqSites.userSite0)}function N0(e){const t=G();let n=Ae({});if(P.useEffect(()=>{e!==void 0&&s()}),e===void 0)return{};let r=e.siteId,i=t.uqSites.uqMan;async function s(){try{if(e.isAdmin===!1)return;let S=await o();if(S===void 0)return;le(n,S)}catch(S){console.error(S)}}let a;async function o(){let k=await i.entities.$role_site_users.query({site:r});if(k===void 0)return;let{users:_,roles:C}=k,N=[],D=[],E=[],A={};for(let q of _){let z={...q,rolesAtom:Ae([]),permits:{}},{id:Y,admin:M}=q;A[Y]=z;let L=z.isAdmin=(M&1)===1;(z.isOwner=(M&2)===2)===!0?D.push(z):L===!0?E.push(z):N.push(z)}let O={},F={};for(let q of C){let{user:z,role:Y}=q,M=A[z];if(M!==void 0){let{rolesAtom:W}=M,te=fe(W);te===void 0&&(te=[]),te.push(Y),le(W,te)}let L=O[Y];L===void 0&&(O[Y]=L=[],F[Y]=L),L.push(M)}return{owners:D,admins:E,users:N,usersOfRole:F}}async function u(){await(a==null?void 0:a()),await s()}async function c(S,k){let _=Xn.admin;await f(S,_,k)}async function d(S,k){let _=Xn.owner|Xn.admin;await f(S,_,k)}async function f(S,k,_){await j(-S,k,_),u()}async function m(){await p(),await u()}async function v(S,k){await b(S,k),u()}async function y(S,k){return await i.entities.$role_site_add_user.submit({site:r,user:S,assigned:k}),await g(S)}async function w(S,k,_){await h(S,k,_)}async function j(S,k,_){return await i.entities.$role_site_add_admin.submit({site:r,user:S,admin:k,assigned:_}),await g(S)}async function g(S){let k=await i.syncUser(S);return i.idCacheDel(k.id),k}async function h(S,k,_){let C=_===!0?"add":"del";await i.entities.$role_site_user_role.submit({site:r,user:S,action:C,role:k})}async function p(){await i.entities.$role_site_quit_owner.submit({site:r})}async function b(S,k){await i.entities.$role_site_del_admin.submit({site:r,user:S,admin:k})}return{userSite:e,quitOwner:m,unitRoles:n,onAdminAdded:c,onOwnerAdded:d,addUser:y,delAdmin:v,setUserRole:w}}function D0({siteRole:e}){const t=G();let{onAdminAdded:n}=e,r=we(t.user),i=we(e.unitRoles),{admins:s}=i,a=new eh(s,"site"),o=$e("admin");function u({value:c}){return c.user===r.id?l.jsx(k0,{}):l.jsx("div",{className:"px-3 py-2",children:l.jsx(ph,{userSite:c,siteRole:e})})}return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:yh.cnCard,children:[l.jsx("div",{className:"card-header pe-0 py-0",children:l.jsxs(ze,{className:"align-items-center",children:[l.jsx("span",{children:o}),l.jsx(mh,{onUserAdded:n})]})}),l.jsx(th,{context:a,none:l.jsx(Jf,{}),ViewItem:u})]}),l.jsxs("ul",{className:"small text-muted mt-2 mb-5 mx-3",children:[l.jsx("li",{children:$e("adminMemo1")}),l.jsx("li",{children:$e("adminMemo2")})]})]})}function mI({admin:e,viewTop:t}){let n=_0(),{isOwner:r,isAdmin:i}=n.userSite;return l.jsxs(H,{header:$e(e===Xn.admin?"admin":"owner"),children:[t,r===!0&&l.jsxs(l.Fragment,{children:[l.jsx(C0,{siteRole:n}),l.jsx(D0,{siteRole:n})]}),i===!0&&l.jsx(fI,{siteRole:n})]})}function pI({onClick:e,content:t,icon:n,iconColor:r}){return l.jsxs(ze,{className:"p-3 cursor-pointer align-items-center",onClick:e,children:[l.jsx(J,{name:n??"cog",fixWidth:!0,className:" me-3 "+(r??" text-primary "),size:"lg"}),t,l.jsx(J,{name:"angle-right"})]})}function fu({value:e}){let{no:t,ex:n}=e;return l.jsxs(l.Fragment,{children:[l.jsx("b",{children:n??"(无名机构)"}),"   ",l.jsx("small",{className:"text-secondary",children:t})]})}function yI(){const e=G(),{uq:t}=e,{openModal:n,closeModal:r}=ue(),i=l.jsx("button",{className:"btn btn-sm btn-success me-1",onClick:u,children:"新增"}),[s,a]=P.useState(void 0);if(Pt(()=>{(async function(){const{uqMan:d}=e;let m=await d.entities.$sites.page({},void 0,100);a(m.$page)})()}),s===void 0)return l.jsx(ir,{});function o({value:d}){return l.jsx("div",{className:"px-3 py-2",children:l.jsx(fu,{value:d})})}return l.jsx(H,{header:"机构管理",right:i,children:l.jsx(Fe,{items:s,ViewItem:o})});async function u(){let d=l.jsx("div",{className:"my-3",children:$e("searchUser")}),f=await n(l.jsx(Xf,{header:$e("user"),top:d}));await n(l.jsx(c,{user:f}))}function c({user:d}){const{id:f,name:m,assigned:v,nick:y}=d,[w,j]=P.useState(void 0);Pt(()=>{(async function(){let k=await t.IDNO({ID:"$site"});j(k)})()});const{register:g,handleSubmit:h,formState:{errors:p}}=Tn({mode:"onBlur"});async function b(k){const{ex:_}=k;let C=await t.CreateSiteForUser.submit({no:w,ex:_,tonwaUser:d.id}),{site:N,userSite:D}=C;a([{id:N,no:w,ex:_},...s]),r()}if(w===void 0)return l.jsx(ir,{});const S=[{name:"no",label:"编号",type:"text",options:{maxLength:20,disabled:!0,value:w}},{name:"ex",label:"名称",type:"text",options:{maxLength:50}},{type:"submit",label:"提交"}];return l.jsxs(H,{header:"新增机构",children:[l.jsxs("div",{className:"p-3 d-flex",children:[l.jsx("small",{className:"me-3",children:"机构拥有者"}),l.jsxs("div",{children:[l.jsxs("div",{children:[l.jsx("b",{children:v??y??m})," ",m]}),l.jsx("div",{className:"small text-secondary",children:f})]})]}),l.jsx("form",{onSubmit:h(b),className:"container my-3 pe-5",children:l.jsx(cr,{rows:S,register:g,errors:p})})]})}}function vI(){const{openModal:e}=ue(),t=hI();function n(){e(l.jsx(yI,{}))}let{isOwner:r}=t.userSite,i=r===!0?l.jsxs(l.Fragment,{children:[l.jsx(ge,{}),l.jsx(C0,{siteRole:t}),l.jsx(D0,{siteRole:t})]}):void 0;return l.jsxs(H,{header:"系统管理",children:[l.jsx(pI,{content:"机构管理",onClick:n}),i,l.jsx(ge,{})]})}const E0="初始设置",gI="currency",xI="startsummonth",wI="startfiscalmonth",bI="startfiscalday",SI={[gI]:{},[xI]:{min:1,max:12},[wI]:{min:1,max:12},[bI]:{min:1,max:28}};function jI(){const e=G(),{uq:t,biz:n}=e,{data:r}=lr([],i,ur);return l.jsxs(H,{header:E0,children:[l.jsx(Fe,{items:r,ViewItem:s,onItemClick:void 0}),l.jsx(ge,{})]});async function i(){let a=await t.GetSiteSetting.query({});const{buds:o}=Vx(void 0,a),u=n.entities.sitesetting,{buds:c,props:d}=u;return d.map(m=>{const{id:v,name:y}=m,w=`${u.name}.${y}`,j=SI[w],g=o[v];return{bud:c[v],value:g,options:j}})}function s({value:a}){const{value:o,options:u,bud:c}=a;let d;return l.jsx(y0,{id:d,bizBud:c,value:o==null?void 0:o.value,options:u})}}const I0="admin-sum-group";it.SumGroup;function kI(){const e=ou(),{entity:t,searchAtoms:n}=e;let r=t;const i=l.jsx(Ce,{className:"btn btn-sm btn-success me-2",to:`../${uh(r.name)}`,children:l.jsx(J,{name:"plus"})});return l.jsx(s,{});function s(){let a=r.caption??r.name,o={atom:r.phrase,key:void 0};function u({value:d}){async function f(){return l.jsx(CI,{group:d})}return l.jsx(yN,{modal:f,children:l.jsx("div",{className:"px-3 py-2",children:l.jsx(Ct,{value:d})})})}const c=l.jsxs("div",{className:"m-3 small text-muted",children:["[无",a,"]"]});return l.jsx(Rn,{header:`${a}列表`,right:i,query:n,param:o,sortField:"id",ViewItem:u,none:c})}}function CI({group:e}){const{uq:t}=G(),n=l.jsx("div",{className:"m-3 small text-muted",children:"[无]"});function r({value:i}){async function s(a,o){let u=o===!0?1:-1;await t.SetSumGroupPerson.submit({group:e.id,person:i.id,act:u})}return l.jsx(Af,{labelClassName:"d-flex px-3 py-2",onCheckChanged:s,defaultChecked:i.selected===1,children:l.jsx(Ct,{value:i})})}return l.jsx(Rn,{header:"成员",query:t.SearchGroupPersons,param:{group:e.id,key:void 0},sortField:"id",ViewItem:r,none:n,children:l.jsx("div",{className:"p-3 tonwa-bg-gray-2",children:l.jsx(Ct,{value:e})})})}const P0="admin-sum-formula",tt={caption:"标题",person:"个人",group:"小组",sourceSubject:"源科目",peronPost:"岗位",groupPost:"职能组",sumSubject:"科目",ratio:"换算率",formula:"公式",input:"请输入"},_I={postAtom:it.SumPersonPost,postLabel:tt.peronPost,header:tt.person},NI=[["subject",tt.sourceSubject],["post",tt.peronPost],["sumSubject",tt.sumSubject]],DI={postAtom:it.SumGroupPost,postLabel:tt.groupPost,header:tt.group},EI=[["subject",tt.sourceSubject],["post",tt.groupPost],["sumSubject",tt.sumSubject]];function II(){const{uq:e}=G(),{openModal:t,closeModal:n}=ue(),{data:[r,i]}=lr("formulas",async()=>{let{ret:f}=await e.GetAllFormula.query({}),m=[],v=[];for(let y of f)switch(y.formulaType){case Si.person:m.push(y);break;case Si.group:v.push(y);break}return[m,v]},ur);function s(f){return f.map(([m,v],y)=>l.jsxs("div",{className:"me-5",children:[l.jsx("div",{className:"small text-secondary my-1",children:m}),l.jsx(an,{uq:e,id:v,Template:A0})]},y))}function a({value:f,arr:m}){const{caption:v,ratio:y}=f;return l.jsxs("div",{className:"px-3 py-2 d-flex",children:[l.jsxs("div",{className:"flex-grow-1",children:[l.jsx("div",{children:l.jsx("b",{children:v})}),l.jsx("div",{className:"d-flex",children:s(m)})]}),l.jsx("div",{className:"fs-4 me-5",children:y})]})}function o({items:f,arr:m,caption:v,type:y}){const[w,j]=P.useState(f);function g(_){async function C(){let{id:D}=_;await e.ChangeSumFormula.submit({id:D,start:void 0,end:void 0,ratio:void 0});let E=w.findIndex(A=>A.id===D);E>=0&&w.splice(E,1),j([...w]),n()}async function N(D,E){let{id:A}=_,O=w.findIndex(Y=>Y.id===A);if(O<0)return;let F=w[O];async function q(){await e.ChangeSumFormulaCaption.submit({id:A,caption:E}),F.caption=E}async function z(){let Y=await e.ChangeSumFormula.submit({id:A,start:void 0,end:void 0,ratio:E});F.id=Y.id,F.ratio=E}switch(D){case"caption":await q();break;case"ratio":await z();break}w.splice(O,1,F),j([...w])}t(l.jsx(AI,{value:_,onInvalid:C,onValueChanged:N,arr:m}))}function h({value:_}){const C=m.map(([N,D])=>[D,_[N]]);return l.jsx(a,{value:_,arr:C})}const p=" px-3 pt-2 pb-2 tonwa-bg-gray-2 small d-flex align-items-end";async function b(_){const C={..._,formulaType:y};let{id:N}=await e.SaveSumFormula.submit(C);C.id=N,w.unshift(C),j([...w]),n()}function S(){const _=y===Si.person?_I:DI;t(l.jsx(PI,{onSubmit:b,..._}))}function k(){return l.jsxs("div",{className:p,children:[l.jsx("div",{className:"flex-grow-1",children:v}),l.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:S,children:l.jsx(J,{name:"plus"})})]})}return l.jsxs(l.Fragment,{children:[l.jsx(k,{}),l.jsx(Fe,{items:w,ViewItem:h,onItemClick:g})]})}const{formula:u,person:c,group:d}=tt;return l.jsxs(H,{header:u,children:[l.jsx(o,{caption:c+u,type:Si.person,items:r,arr:NI}),l.jsx(ge,{className:"mb-3"}),l.jsx(o,{caption:d+u,type:Si.group,items:i,arr:EI})]})}function PI({postAtom:e,postLabel:t,header:n,onSubmit:r}){const{input:i,caption:s,sourceSubject:a,sumSubject:o,ratio:u}=tt,c=[{name:"caption",label:tt.caption,type:"text",options:{maxLength:100,required:i+s}},{name:"subject",label:tt.sourceSubject,atom:it.Subject,options:{required:i+a}},{name:"post",label:t,atom:e,options:{required:i+t}},{name:"sumSubject",label:tt.sumSubject,atom:it.Subject,options:{required:i+o}},{name:"ratio",label:tt.ratio,type:"number",options:{required:i+u}},{type:"submit"}],{register:d,handleSubmit:f,formState:{errors:m},clearErrors:v,setValue:y}=Tn({mode:"onBlur"});return l.jsx(H,{header:n+tt.formula,children:l.jsx("form",{onSubmit:f(r),className:"container my-3 pe-5",children:l.jsx(cr,{rows:c,setValue:y,clearErrors:v,register:d,errors:m})})})}function AI({value:e,arr:t,onInvalid:n,onValueChanged:r}){const{uq:i}=G();async function s({name:o,value:u,preValue:c},d){await r(o,u)}const{caption:a}=e;return l.jsxs(H,{header:a??tt.formula,children:[l.jsxs(Tx,{className:"container",values:e,onValuesChanged:s,labelSize:3,children:[l.jsx(_a,{label:tt.caption,name:"caption",placeholder:"公式标题"}),l.jsx(ge,{}),t.map((o,u)=>{const[c,d]=o,f=e[c];return l.jsxs(re.Fragment,{children:[l.jsx(vd,{label:d,children:l.jsx(an,{uq:i,id:f,Template:A0})}),l.jsx(ge,{})]},u)}),l.jsx(xk,{label:tt.ratio,name:"ratio"}),l.jsx(ge,{})]}),l.jsx("div",{className:"text-end p-3",children:l.jsx(fi,{className:"btn btn-sm btn-outline-primary",onClick:n,children:l.jsx(J,{name:"trash"})})})]})}function A0({value:e}){const{no:t,ex:n}=e;return l.jsxs(l.Fragment,{children:[n,"   ",l.jsx("small",{className:"text-muted",children:t})]})}const hu={atomName:it.Subject,NOLabel:void 0,exLabel:void 0};function OI(){let{page:e}=La(hu);return e}function ly(){let{page:e}=Ua(hu);return e}function MI(){let e=Object.assign({},hu,{ViewItemAtom:Ct,top:void 0}),{page:t}=Ra(e);return t}const FI={name:hu.atomName,pageNew:l.jsx(OI,{}),pageEdit:l.jsx(ly,{}),pageList:l.jsx(MI,{}),pageView:l.jsx(ly,{}),ViewItem:Ct},mu={atomName:it.SumPersonPost,NOLabel:void 0,exLabel:void 0};function TI(){let{page:e}=La(mu);return e}function oy(){let{page:e}=Ua(mu);return e}function RI(){let e=Object.assign({},mu,{ViewItemAtom:Ct,top:void 0}),{page:t}=Ra(e);return t}const LI={name:mu.atomName,pageNew:l.jsx(TI,{}),pageEdit:l.jsx(oy,{}),pageList:l.jsx(RI,{}),pageView:l.jsx(oy,{}),ViewItem:Ct},pu={atomName:it.SumGroupPost,NOLabel:void 0,exLabel:void 0};function qI(){let{page:e}=La(pu);return e}function uy(){let{page:e}=Ua(pu);return e}function UI(){let e=Object.assign({},pu,{ViewItemAtom:Ct,top:void 0}),{page:t}=Ra(e);return t}const $I={name:pu.atomName,pageNew:l.jsx(qI,{}),pageEdit:l.jsx(uy,{}),pageList:l.jsx(UI,{}),pageView:l.jsx(uy,{}),ViewItem:Ct},vh="admin-achieve",gh="业绩设置";function VI(){const e=G();let t=[{path:P0,caption:"公式"},{path:I0,caption:"销售小组"}],n=[FI,LI,$I];return l.jsxs(H,{header:gh,children:[l.jsx(ge,{sep:3}),t.map((r,i)=>{let{path:s,caption:a}=r;return l.jsxs(re.Fragment,{children:[l.jsx(Ce,{to:`../${s}`,className:"px-3 py-2 border-bottom align-items-center",children:a}),l.jsx(ge,{})]},i)}),n.map((r,i)=>{const{name:s,caption:a}=e.biz.entities[r.name];return l.jsxs(re.Fragment,{children:[l.jsx(Ce,{to:`../${Ta(s)}`,className:"px-3 py-2 border-bottom align-items-center",children:a}),l.jsx(ge,{})]},i)})]})}const zI=l.jsxs(l.Fragment,{children:[l.jsx(ae,{path:vh,element:l.jsx(VI,{})}),l.jsx(ae,{path:I0,element:l.jsx(kI,{})}),l.jsx(ae,{path:P0,element:l.jsx(II,{})})]}),xh="admin-user",wh="用户管理";function BI(){const{uq:e}=G(),{openModal:t}=ue(),[n,r]=P.useState(void 0);Pt(()=>{(async function(){let u=await i(void 0);r(u)})()});async function i(u){let{users:c,atoms:d}=await e.GetIxMySum.query({userSite:u}),f=[],m={};for(let{tonwaUser:v,userSite:y}of c){let w={tonwaUser:v,userSite:y,persons:[],groups:[]};m[y]=w,f.push(w)}for(let{userSite:v,atom:y,phrase:w,no:j,ex:g}of d){let h=m[v],p;switch(w){default:debugger;break;case"person":p=h.persons;break;case"sumgroup":p=h.groups;break}p.push({id:y,no:j,ex:g})}return f}async function s(u){let[c]=await i(u),d=n.findIndex(f=>f.userSite===u);d<0?n.unshift(c):n.splice(d,1,c),r([...n])}async function a(){let u=await t(l.jsx(Xf,{}));if(!u)return;let{userSite:c}=await e.UserSiteFromTonwaUser.submit({tonwaUser:u.id}),[d]=await i(c);await t(l.jsx(cy,{userItems:d,onChanged:s}))}function o({value:u}){const{userSite:c,persons:d,groups:f}=u;function m({caption:y,items:w}){return w.length===0?null:l.jsxs("div",{className:"bg-white",children:[l.jsx(O0,{caption:y,onEdit:void 0}),l.jsx(Fe,{items:w,className:"d-flex",ViewItem:M0,itemKey:j=>j.id})]})}async function v(){let[y]=await i(c);await t(l.jsx(cy,{userItems:y,onChanged:s}))}return l.jsxs("div",{className:"pt-3 mb-3 border-bottom bg-white",children:[l.jsxs(ze,{className:"px-3 pb-3",children:[l.jsx(F0,{uq:e,userSite:c}),l.jsx("div",{className:"text-info cursor-pointer",onClick:v,children:l.jsx(J,{name:"pencil"})})]}),l.jsx(m,{caption:"个人",items:d}),l.jsx(m,{caption:"小组",items:f})]})}return l.jsx(H,{header:wh,right:l.jsx(cI,{onClick:a}),children:l.jsx("div",{className:"tonwa-bg-gray-3",children:l.jsx(Fe,{items:n,ViewItem:o,itemKey:u=>u.userSite})})})}function O0({caption:e,onEdit:t}){const n=" tonwa-bg-gray-1 small d-flex align-items-end";let r;return t!==void 0&&(r=l.jsx("div",{className:"text-primary cursor-pointer py-2 px-3",onClick:t,children:l.jsx(J,{name:"pencil"})})),l.jsxs("div",{className:n,children:[l.jsx("div",{className:"flex-grow-1 ps-3 py-2",children:e}),r]})}function M0({value:e}){return l.jsx("div",{className:"px-3 py-2 mx-3 my-2 border rounded-2 w-min-12c",children:l.jsx(Ct,{value:e})})}function cy({userItems:e,onChanged:t}){const{uq:n,biz:r}=G(),{userSite:i,persons:s,groups:a}=e;function o({caption:d,atomPhrase:f,items:m}){const{openModal:v}=ue(),y=P.useRef(void 0),w=P.useRef(!1),[j,g]=P.useState(m);Pt(()=>{(async function(){const{$page:b}=await n.SearchAtom.page({atom:f,key:void 0},void 0,1e3);y.current=b})()});function h(b){let S=y.current.filter(k=>{let{id:_}=k;return b.find(C=>C===_)>=0});g(S)}async function p(){w.current=!1;async function b(k){let{selected:_,added:C,removed:N}=k;await n.ChangeIxMySum.submit({userSite:i,added:C.map(D=>({id:D})),removed:N.map(D=>({idDel:D}))}),h(_),w.current=!0}let S=j.map(k=>k.id);await v(l.jsx(YI,{atoms:y.current,selected:S,onSelectChanged:b})),w.current===!0&&await t(i)}return l.jsxs(l.Fragment,{children:[l.jsx(O0,{caption:d,onEdit:p}),l.jsx(Fe,{items:j,className:"d-flex",ViewItem:M0})]})}const u=r.entities.person,c=r.entities.sumgroup;return l.jsxs(H,{header:"用户账户",children:[l.jsx("div",{className:"p-3",children:l.jsx(F0,{uq:n,userSite:i})}),l.jsx(o,{caption:"个人",atomPhrase:u.id,items:s}),l.jsx(o,{caption:"小组",atomPhrase:c.id,items:a})]})}function YI({atoms:e,selected:t,onSelectChanged:n}){const{closeModal:r}=ue(),i=P.useRef({selected:[...t],added:[],removed:[]}),s=e.map(u=>{const{id:c}=u;return{atom:u,sel:t.find(d=>d===c)!==void 0}});function a({value:{atom:u,sel:c}}){async function d(f){let{id:m}=u;const{selected:v,added:y,removed:w}=i.current;let j=t.findIndex(b=>b===m),g=v.findIndex(b=>b===m),h=y.findIndex(b=>b===m),p=w.findIndex(b=>b===m);f.currentTarget.checked===!0?(j<0?y.push(m):p>=0&&w.splice(p,1),g<0&&v.push(m)):(j<0?h>=0&&y.splice(h,1):w.push(m),g>=0&&v.splice(g,1)),await n(i.current)}return l.jsxs("label",{className:"d-flex p-3",children:[l.jsx("input",{type:"checkbox",className:"form-check-input me-3",defaultChecked:c,onChange:d}),l.jsx(Ct,{value:u})]})}function o(){r(i.current)}return l.jsxs(H,{header:"请选择",children:[l.jsx(Fe,{items:s,ViewItem:a}),l.jsx("div",{className:"p-3",children:l.jsx("button",{className:"btn btn-primary",onClick:o,children:"关闭"})})]})}function F0({uq:e,userSite:t}){function n({value:r}){const{assigned:i}=r;function s({value:a}){return l.jsx(dN,{user:a,assigned:i})}return l.jsx(an,{uq:e,id:r.user,Template:s})}return l.jsx(an,{uq:e,id:t,Template:n})}const WI=l.jsx(l.Fragment,{children:l.jsx(ae,{path:xh,element:l.jsx(BI,{})})});function HI({content:e}){const t=G(),{openModal:n,closeModal:r}=ue();async function i(){const{uqMan:s,biz:a}=t;let{uqApi:o}=s,{schemas:u,logs:c,hasError:d}=await o.compile(e),f,m;function v({children:w,icon:j,color:g}){return l.jsxs("div",{className:"p-3 border-bottom tonwa-bg-gray-2",children:[l.jsx(J,{className:"me-3 "+g,name:j}),w]})}d===!1?(f=Zo.unpack(u),a.buildEntities(f),m=l.jsx(v,{icon:"check-circle",color:"text-success",children:"提交成功"})):m=l.jsx(v,{icon:"exclamation-circle",color:"text-danger",children:"发生错误"});let y;if(c.length>0){let w=[];c.forEach(j=>{j!==null&&w.push(...j.split(`
`))}),y=w.join(`
`)}else y=JSON.stringify(f,null,4);r(),n(l.jsxs(H,{header:"业务设计已提交",children:[m,l.jsx("pre",{className:"p-3 text-break",style:{whiteSpace:"pre-wrap"},children:y})]}))}return l.jsxs(H,{header:"业务设计",children:[l.jsx("div",{className:"px-3 py-1 tonwa-bg-gray-2 d-flex",children:l.jsx(fi,{className:"btn btn-primary me-3",onClick:i,children:"提交"})}),l.jsx("div",{className:"p-1",children:l.jsx("pre",{className:"p-3 text-break",style:{whiteSpace:"pre-wrap"},children:e})})]})}var T0={exports:{}};(function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var i=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,s=0,a={},o={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function h(p){return p instanceof u?new u(p.type,h(p.content),p.alias):Array.isArray(p)?p.map(h):p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(h){return Object.prototype.toString.call(h).slice(8,-1)},objId:function(h){return h.__id||Object.defineProperty(h,"__id",{value:++s}),h.__id},clone:function h(p,b){b=b||{};var S,k;switch(o.util.type(p)){case"Object":if(k=o.util.objId(p),b[k])return b[k];S={},b[k]=S;for(var _ in p)p.hasOwnProperty(_)&&(S[_]=h(p[_],b));return S;case"Array":return k=o.util.objId(p),b[k]?b[k]:(S=[],b[k]=S,p.forEach(function(C,N){S[N]=h(C,b)}),S);default:return p}},getLanguage:function(h){for(;h;){var p=i.exec(h.className);if(p)return p[1].toLowerCase();h=h.parentElement}return"none"},setLanguage:function(h,p){h.className=h.className.replace(RegExp(i,"gi"),""),h.classList.add("language-"+p)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(S){var h=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(S.stack)||[])[1];if(h){var p=document.getElementsByTagName("script");for(var b in p)if(p[b].src==h)return p[b]}return null}},isActive:function(h,p,b){for(var S="no-"+p;h;){var k=h.classList;if(k.contains(p))return!0;if(k.contains(S))return!1;h=h.parentElement}return!!b}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(h,p){var b=o.util.clone(o.languages[h]);for(var S in p)b[S]=p[S];return b},insertBefore:function(h,p,b,S){S=S||o.languages;var k=S[h],_={};for(var C in k)if(k.hasOwnProperty(C)){if(C==p)for(var N in b)b.hasOwnProperty(N)&&(_[N]=b[N]);b.hasOwnProperty(C)||(_[C]=k[C])}var D=S[h];return S[h]=_,o.languages.DFS(o.languages,function(E,A){A===D&&E!=h&&(this[E]=_)}),_},DFS:function h(p,b,S,k){k=k||{};var _=o.util.objId;for(var C in p)if(p.hasOwnProperty(C)){b.call(p,C,p[C],S||C);var N=p[C],D=o.util.type(N);D==="Object"&&!k[_(N)]?(k[_(N)]=!0,h(N,b,null,k)):D==="Array"&&!k[_(N)]&&(k[_(N)]=!0,h(N,b,C,k))}}},plugins:{},highlightAll:function(h,p){o.highlightAllUnder(document,h,p)},highlightAllUnder:function(h,p,b){var S={callback:b,container:h,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",S),S.elements=Array.prototype.slice.apply(S.container.querySelectorAll(S.selector)),o.hooks.run("before-all-elements-highlight",S);for(var k=0,_;_=S.elements[k++];)o.highlightElement(_,p===!0,S.callback)},highlightElement:function(h,p,b){var S=o.util.getLanguage(h),k=o.languages[S];o.util.setLanguage(h,S);var _=h.parentElement;_&&_.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(_,S);var C=h.textContent,N={element:h,language:S,grammar:k,code:C};function D(A){N.highlightedCode=A,o.hooks.run("before-insert",N),N.element.innerHTML=N.highlightedCode,o.hooks.run("after-highlight",N),o.hooks.run("complete",N),b&&b.call(N.element)}if(o.hooks.run("before-sanity-check",N),_=N.element.parentElement,_&&_.nodeName.toLowerCase()==="pre"&&!_.hasAttribute("tabindex")&&_.setAttribute("tabindex","0"),!N.code){o.hooks.run("complete",N),b&&b.call(N.element);return}if(o.hooks.run("before-highlight",N),!N.grammar){D(o.util.encode(N.code));return}if(p&&r.Worker){var E=new Worker(o.filename);E.onmessage=function(A){D(A.data)},E.postMessage(JSON.stringify({language:N.language,code:N.code,immediateClose:!0}))}else D(o.highlight(N.code,N.grammar,N.language))},highlight:function(h,p,b){var S={code:h,grammar:p,language:b};if(o.hooks.run("before-tokenize",S),!S.grammar)throw new Error('The language "'+S.language+'" has no grammar.');return S.tokens=o.tokenize(S.code,S.grammar),o.hooks.run("after-tokenize",S),u.stringify(o.util.encode(S.tokens),S.language)},tokenize:function(h,p){var b=p.rest;if(b){for(var S in b)p[S]=b[S];delete p.rest}var k=new f;return m(k,k.head,h),d(h,k,p,k.head,0),y(k)},hooks:{all:{},add:function(h,p){var b=o.hooks.all;b[h]=b[h]||[],b[h].push(p)},run:function(h,p){var b=o.hooks.all[h];if(!(!b||!b.length))for(var S=0,k;k=b[S++];)k(p)}},Token:u};r.Prism=o;function u(h,p,b,S){this.type=h,this.content=p,this.alias=b,this.length=(S||"").length|0}u.stringify=function h(p,b){if(typeof p=="string")return p;if(Array.isArray(p)){var S="";return p.forEach(function(D){S+=h(D,b)}),S}var k={type:p.type,content:h(p.content,b),tag:"span",classes:["token",p.type],attributes:{},language:b},_=p.alias;_&&(Array.isArray(_)?Array.prototype.push.apply(k.classes,_):k.classes.push(_)),o.hooks.run("wrap",k);var C="";for(var N in k.attributes)C+=" "+N+'="'+(k.attributes[N]||"").replace(/"/g,"&quot;")+'"';return"<"+k.tag+' class="'+k.classes.join(" ")+'"'+C+">"+k.content+"</"+k.tag+">"};function c(h,p,b,S){h.lastIndex=p;var k=h.exec(b);if(k&&S&&k[1]){var _=k[1].length;k.index+=_,k[0]=k[0].slice(_)}return k}function d(h,p,b,S,k,_){for(var C in b)if(!(!b.hasOwnProperty(C)||!b[C])){var N=b[C];N=Array.isArray(N)?N:[N];for(var D=0;D<N.length;++D){if(_&&_.cause==C+","+D)return;var E=N[D],A=E.inside,O=!!E.lookbehind,F=!!E.greedy,q=E.alias;if(F&&!E.pattern.global){var z=E.pattern.toString().match(/[imsuy]*$/)[0];E.pattern=RegExp(E.pattern.source,z+"g")}for(var Y=E.pattern||E,M=S.next,L=k;M!==p.tail&&!(_&&L>=_.reach);L+=M.value.length,M=M.next){var W=M.value;if(p.length>h.length)return;if(!(W instanceof u)){var te=1,oe;if(F){if(oe=c(Y,L,h,O),!oe||oe.index>=h.length)break;var Le=oe.index,He=oe.index+oe[0].length,pe=L;for(pe+=M.value.length;Le>=pe;)M=M.next,pe+=M.value.length;if(pe-=M.value.length,L=pe,M.value instanceof u)continue;for(var Ee=M;Ee!==p.tail&&(pe<He||typeof Ee.value=="string");Ee=Ee.next)te++,pe+=Ee.value.length;te--,W=h.slice(L,pe),oe.index-=L}else if(oe=c(Y,0,W,O),!oe)continue;var Le=oe.index,Ne=oe[0],$t=W.slice(0,Le),Un=W.slice(Le+Ne.length),$r=L+W.length;_&&$r>_.reach&&(_.reach=$r);var Vr=M.prev;$t&&(Vr=m(p,Vr,$t),L+=$t.length),v(p,Vr,te);var Wa=new u(C,A?o.tokenize(Ne,A):Ne,q,Ne);if(M=m(p,Vr,Wa),Un&&m(p,M,Un),te>1){var ys={cause:C+","+D,reach:$r};d(h,p,b,M.prev,L,ys),_&&ys.reach>_.reach&&(_.reach=ys.reach)}}}}}}function f(){var h={value:null,prev:null,next:null},p={value:null,prev:h,next:null};h.next=p,this.head=h,this.tail=p,this.length=0}function m(h,p,b){var S=p.next,k={value:b,prev:p,next:S};return p.next=k,S.prev=k,h.length++,k}function v(h,p,b){for(var S=p.next,k=0;k<b&&S!==h.tail;k++)S=S.next;p.next=S,S.prev=p,h.length-=k}function y(h){for(var p=[],b=h.head.next;b!==h.tail;)p.push(b.value),b=b.next;return p}if(!r.document)return r.addEventListener&&(o.disableWorkerMessageHandler||r.addEventListener("message",function(h){var p=JSON.parse(h.data),b=p.language,S=p.code,k=p.immediateClose;r.postMessage(o.highlight(S,o.languages[b],b)),k&&r.close()},!1)),o;var w=o.util.currentScript();w&&(o.filename=w.src,w.hasAttribute("data-manual")&&(o.manual=!0));function j(){o.manual||o.highlightAll()}if(!o.manual){var g=document.readyState;g==="loading"||g==="interactive"&&w&&w.defer?document.addEventListener("DOMContentLoaded",j):window.requestAnimationFrame?window.requestAnimationFrame(j):window.setTimeout(j,16)}return o}(t);e.exports&&(e.exports=n),typeof Ut<"u"&&(Ut.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(i,s){var a={};a["language-"+s]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[s]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};o["language-"+s]={pattern:/[\s\S]+/,inside:n.languages[s]};var u={};u[i]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return i}),"i"),lookbehind:!0,greedy:!0,inside:o},n.languages.insertBefore("markup","cdata",u)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,i){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[i,"language-"+i],inside:n.languages[i]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var i=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+i.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+i.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+i.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+i.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:i,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var s=r.languages.markup;s&&(s.tag.addInlined("style","css"),s.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading…",i=function(w,j){return"✖ Error "+w+" while fetching file: "+j},s="✖ Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",u="loading",c="loaded",d="failed",f="pre[data-src]:not(["+o+'="'+c+'"]):not(['+o+'="'+u+'"])';function m(w,j,g){var h=new XMLHttpRequest;h.open("GET",w,!0),h.onreadystatechange=function(){h.readyState==4&&(h.status<400&&h.responseText?j(h.responseText):h.status>=400?g(i(h.status,h.statusText)):g(s))},h.send(null)}function v(w){var j=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(w||"");if(j){var g=Number(j[1]),h=j[2],p=j[3];return h?p?[g,Number(p)]:[g,void 0]:[g,g]}}n.hooks.add("before-highlightall",function(w){w.selector+=", "+f}),n.hooks.add("before-sanity-check",function(w){var j=w.element;if(j.matches(f)){w.code="",j.setAttribute(o,u);var g=j.appendChild(document.createElement("CODE"));g.textContent=r;var h=j.getAttribute("data-src"),p=w.language;if(p==="none"){var b=(/\.(\w+)$/.exec(h)||[,"none"])[1];p=a[b]||b}n.util.setLanguage(g,p),n.util.setLanguage(j,p);var S=n.plugins.autoloader;S&&S.loadLanguages(p),m(h,function(k){j.setAttribute(o,c);var _=v(j.getAttribute("data-range"));if(_){var C=k.split(/\r\n?|\n/g),N=_[0],D=_[1]==null?C.length:_[1];N<0&&(N+=C.length),N=Math.max(0,Math.min(N-1,C.length)),D<0&&(D+=C.length),D=Math.max(0,Math.min(D,C.length)),k=C.slice(N,D).join(`
`),j.hasAttribute("data-start")||j.setAttribute("data-start",String(N+1))}g.textContent=k,n.highlightElement(g)},function(k){j.setAttribute(o,d),g.textContent=k})}}),n.plugins.fileHighlight={highlight:function(j){for(var g=(j||document).querySelectorAll(f),h=0,p;p=g[h++];)n.highlightElement(p)}};var y=!1;n.fileHighlight=function(){y||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),y=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(T0);var QI=T0.exports,R0={},GI=Ut&&Ut.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ot=Ut&&Ut.__assign||function(){return ot=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ot.apply(this,arguments)},KI=Ut&&Ut.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),XI=Ut&&Ut.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ZI=Ut&&Ut.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&KI(t,e,n);return XI(t,e),t},JI=Ut&&Ut.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};Object.defineProperty(R0,"__esModule",{value:!0});var Es=ZI(P),eP=13,tP=9,nP=8,rP=89,hl=90,iP=77,dy=57,fy=219,hy=222,my=192,sP=27,py=100,aP=3e3,lP=typeof window<"u"&&"navigator"in window&&/Win/i.test(navigator.platform),fc=typeof window<"u"&&"navigator"in window&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),Al="npm__react-simple-code-editor__textarea",oP=`
/**
 * Reset the text fill color so that placeholder is visible
 */
.`.concat(Al,`:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .`).concat(Al,` {
    color: transparent !important;
  }

  .`).concat(Al,`::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
`),uP=function(e){GI(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={capture:!0},n._recordCurrentState=function(){var r=n._input;if(r){var i=r.value,s=r.selectionStart,a=r.selectionEnd;n._recordChange({value:i,selectionStart:s,selectionEnd:a})}},n._getLines=function(r,i){return r.substring(0,i).split(`
`)},n._recordChange=function(r,i){var s,a,o;i===void 0&&(i=!1);var u=n._history,c=u.stack,d=u.offset;if(c.length&&d>-1){n._history.stack=c.slice(0,d+1);var f=n._history.stack.length;if(f>py){var m=f-py;n._history.stack=c.slice(m,f),n._history.offset=Math.max(n._history.offset-m,0)}}var v=Date.now();if(i){var y=n._history.stack[n._history.offset];if(y&&v-y.timestamp<aP){var w=/[^a-z0-9]([a-z0-9]+)$/i,j=(s=n._getLines(y.value,y.selectionStart).pop())===null||s===void 0?void 0:s.match(w),g=(a=n._getLines(r.value,r.selectionStart).pop())===null||a===void 0?void 0:a.match(w);if(j!=null&&j[1]&&(!((o=g==null?void 0:g[1])===null||o===void 0)&&o.startsWith(j[1]))){n._history.stack[n._history.offset]=ot(ot({},r),{timestamp:v});return}}}n._history.stack.push(ot(ot({},r),{timestamp:v})),n._history.offset++},n._updateInput=function(r){var i=n._input;i&&(i.value=r.value,i.selectionStart=r.selectionStart,i.selectionEnd=r.selectionEnd,n.props.onValueChange(r.value))},n._applyEdits=function(r){var i=n._input,s=n._history.stack[n._history.offset];s&&i&&(n._history.stack[n._history.offset]=ot(ot({},s),{selectionStart:i.selectionStart,selectionEnd:i.selectionEnd})),n._recordChange(r),n._updateInput(r)},n._undoEdit=function(){var r=n._history,i=r.stack,s=r.offset,a=i[s-1];a&&(n._updateInput(a),n._history.offset=Math.max(s-1,0))},n._redoEdit=function(){var r=n._history,i=r.stack,s=r.offset,a=i[s+1];a&&(n._updateInput(a),n._history.offset=Math.min(s+1,i.length-1))},n._handleKeyDown=function(r){var i=n.props,s=i.tabSize,a=i.insertSpaces,o=i.ignoreTabKey,u=i.onKeyDown;if(!(u&&(u(r),r.defaultPrevented))){r.keyCode===sP&&r.currentTarget.blur();var c=r.currentTarget,d=c.value,f=c.selectionStart,m=c.selectionEnd,v=(a?" ":"	").repeat(s);if(r.keyCode===tP&&!o&&n.state.capture)if(r.preventDefault(),r.shiftKey){var y=n._getLines(d,f),w=y.length-1,j=n._getLines(d,m).length-1,g=d.split(`
`).map(function(A,O){return O>=w&&O<=j&&A.startsWith(v)?A.substring(v.length):A}).join(`
`);if(d!==g){var h=y[w];n._applyEdits({value:g,selectionStart:h!=null&&h.startsWith(v)?f-v.length:f,selectionEnd:m-(d.length-g.length)})}}else if(f!==m){var y=n._getLines(d,f),p=y.length-1,b=n._getLines(d,m).length-1,h=y[p];n._applyEdits({value:d.split(`
`).map(function(F,q){return q>=p&&q<=b?v+F:F}).join(`
`),selectionStart:h&&/\S/.test(h)?f+v.length:f,selectionEnd:m+v.length*(b-p+1)})}else{var S=f+v.length;n._applyEdits({value:d.substring(0,f)+v+d.substring(m),selectionStart:S,selectionEnd:S})}else if(r.keyCode===nP){var k=f!==m,_=d.substring(0,f);if(_.endsWith(v)&&!k){r.preventDefault();var S=f-v.length;n._applyEdits({value:d.substring(0,f-v.length)+d.substring(m),selectionStart:S,selectionEnd:S})}}else if(r.keyCode===eP){if(f===m){var C=n._getLines(d,f).pop(),N=C==null?void 0:C.match(/^\s+/);if(N!=null&&N[0]){r.preventDefault();var D=`
`+N[0],S=f+D.length;n._applyEdits({value:d.substring(0,f)+D+d.substring(m),selectionStart:S,selectionEnd:S})}}}else if(r.keyCode===dy||r.keyCode===fy||r.keyCode===hy||r.keyCode===my){var E=void 0;r.keyCode===dy&&r.shiftKey?E=["(",")"]:r.keyCode===fy?r.shiftKey?E=["{","}"]:E=["[","]"]:r.keyCode===hy?r.shiftKey?E=['"','"']:E=["'","'"]:r.keyCode===my&&!r.shiftKey&&(E=["`","`"]),f!==m&&E&&(r.preventDefault(),n._applyEdits({value:d.substring(0,f)+E[0]+d.substring(f,m)+E[1]+d.substring(m),selectionStart:f,selectionEnd:m+2}))}else(fc?r.metaKey&&r.keyCode===hl:r.ctrlKey&&r.keyCode===hl)&&!r.shiftKey&&!r.altKey?(r.preventDefault(),n._undoEdit()):(fc?r.metaKey&&r.keyCode===hl&&r.shiftKey:lP?r.ctrlKey&&r.keyCode===rP:r.ctrlKey&&r.keyCode===hl&&r.shiftKey)&&!r.altKey?(r.preventDefault(),n._redoEdit()):r.keyCode===iP&&r.ctrlKey&&(!fc||r.shiftKey)&&(r.preventDefault(),n.setState(function(A){return{capture:!A.capture}}))}},n._handleChange=function(r){var i=r.currentTarget,s=i.value,a=i.selectionStart,o=i.selectionEnd;n._recordChange({value:s,selectionStart:a,selectionEnd:o},!0),n.props.onValueChange(s)},n._history={stack:[],offset:-1},n._input=null,n}return t.prototype.componentDidMount=function(){this._recordCurrentState()},Object.defineProperty(t.prototype,"session",{get:function(){return{history:this._history}},set:function(n){this._history=n.history},enumerable:!1,configurable:!0}),t.prototype.render=function(){var n=this,r=this.props,i=r.value,s=r.style,a=r.padding,o=r.highlight,u=r.textareaId,c=r.textareaClassName,d=r.autoFocus,f=r.disabled,m=r.form,v=r.maxLength,y=r.minLength,w=r.name,j=r.placeholder,g=r.readOnly,h=r.required,p=r.onClick,b=r.onFocus,S=r.onBlur,k=r.onKeyUp;r.onKeyDown,r.onValueChange,r.tabSize,r.insertSpaces,r.ignoreTabKey;var _=r.preClassName,C=JI(r,["value","style","padding","highlight","textareaId","textareaClassName","autoFocus","disabled","form","maxLength","minLength","name","placeholder","readOnly","required","onClick","onFocus","onBlur","onKeyUp","onKeyDown","onValueChange","tabSize","insertSpaces","ignoreTabKey","preClassName"]),N={paddingTop:typeof a=="object"?a.top:a,paddingRight:typeof a=="object"?a.right:a,paddingBottom:typeof a=="object"?a.bottom:a,paddingLeft:typeof a=="object"?a.left:a},D=o(i);return Es.createElement("div",ot({},C,{style:ot(ot({},Is.container),s)}),Es.createElement("pre",ot({className:_,"aria-hidden":"true",style:ot(ot(ot({},Is.editor),Is.highlight),N)},typeof D=="string"?{dangerouslySetInnerHTML:{__html:D+"<br />"}}:{children:D})),Es.createElement("textarea",{ref:function(E){return n._input=E},style:ot(ot(ot({},Is.editor),Is.textarea),N),className:Al+(c?" ".concat(c):""),id:u,value:i,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onClick:p,onKeyUp:k,onFocus:b,onBlur:S,disabled:f,form:m,maxLength:v,minLength:y,name:w,placeholder:j,readOnly:g,required:h,autoFocus:d,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),Es.createElement("style",{dangerouslySetInnerHTML:{__html:oP}}))},t.defaultProps={tabSize:2,insertSpaces:!0,ignoreTabKey:!1,padding:0},t}(Es.Component),cP=R0.default=uP,Is={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}};const dP={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\-\-.*/,lookbehind:!0,greedy:!0}],keyword:/\b(?:ATOM|SHEET|prop)\b/,string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/};function fP({entity:e}){const t=G(),{uq:n,uqMan:r,biz:i}=t,{uqApi:s}=r,{openModal:a,closeModal:o}=ue(),{id:u,caption:c,name:d}=e,{data:f}=lr([u],async()=>{let{ret:L}=await n.GetEntityCode.query({id:u});return L[0]},ur),m=P.useRef(),v=P.useRef(),y=P.useRef(),[w,j]=P.useState(c??d);P.useEffect(()=>{let{current:L}=v;L!==void 0&&(L.style.maxHeight=L.parentElement.clientHeight+"px")});const{code:g,schema:h}=f??{},[p,b]=P.useState(g),[S,k]=P.useState(!1),[_,C]=P.useState(!0),[N,D]=P.useState(!1);if(f===void 0)return l.jsx(H,{header:"错误",children:l.jsxs("div",{className:"p-3",children:["没有能够拿到",e.name,"的code"]})});function E(L){b(L),C(!1)}async function A(){const{current:L}=m;let W=0;y.current=setInterval(()=>{L.value+=".",W+=1,W>5&&(L.value="Overtime! 5 seconds",k(!1),clearInterval(y.current),y.current=void 0)},1e3),k(!0),L.value="......";let{schemas:te,hasError:oe}=await s.compileEntity(u,p),He;if(oe===!0)He="不能改实体名，也不能新增实体";else{let Ee=Zo.unpack(te);i.buildEntities(Ee),He=`提交成功!
`+JSON.stringify(Ee,null,4)}L.value=He,k(!1),clearInterval(y.current),y.current=void 0;let pe=i.entityIds[e.id];j(pe.caption??pe.name),C(!0)}function O(){y.current!==void 0&&clearInterval(y.current)}function F(L,W,te){return QI.highlight(L,W,te)}function q(L){return"btn btn-sm mx-2 my-1 "+(L??"")}async function z(){var W;function L(){const{register:te,handleSubmit:oe,setError:He,formState:{errors:pe}}=Tn({mode:"onBlur"}),Ee=async Ne=>{alert("改名有问题，以后再实现")};let Le=[{name:"name",label:"新名字",type:"text",options:{maxLength:150}},{type:"submit",label:"提交"}];return l.jsxs(H,{header:"改名",children:[l.jsx("div",{className:"container border-bottom tonwa-bg-gray-2",children:l.jsx("div",{className:"m-3 mb-0",children:l.jsx(ht,{label:"名字",children:l.jsx("div",{className:"mx-1 fw-bold",children:d})})})}),l.jsx("div",{className:"m-3",children:l.jsx("form",{className:"container",onSubmit:oe(Ee),children:l.jsx(cr,{rows:Le,register:te,errors:pe})})})]})}if(await a(l.jsx(L,{}))===!0){let{ret:te}=await n.GetEntityCode.query({id:u});b((W=te[0])==null?void 0:W.code)}}async function Y(){function L(){async function oe(){let He=await s.delEntity(u);o(He)}return l.jsx(H,{header:`删除 - ${e.name}`,children:l.jsx("div",{className:"p-3",children:l.jsx("button",{className:"btn btn-primary",onClick:oe,children:"确定删除"})})})}let{hasError:W,logs:te}=await a(l.jsx(L,{}));W===!0?m.current.value=te===void 0?"删除出错":te.join(`
`):(D(!0),i.delEntity(e),m.current.value="成功删除")}let M={fontSize:18,border:"none",outline:"none",overflowY:"visible",fontFamily:"ui-monospace,SFMono-Regular,SF Mono,Consolas,Liberation Mono,Menlo,monospace"};return N===!0&&(M.textDecoration="line-through",M.color="lightgray"),l.jsx(H,{header:w,onClosed:O,hideScroll:!0,children:l.jsxs("div",{className:"d-flex flex-column",style:{height:"calc(100% - 1em)"},children:[N===!1&&l.jsxs("div",{className:"text-secondary tonwa-bg-gray-2 d-flex align-items-center px-1 border-bottom",children:[l.jsx(fi,{overtime:5,className:q("btn-primary"),disabled:_,onClick:A,children:"提交"}),l.jsx("div",{className:"flex-grow-1"}),l.jsx("button",{className:q("btn-outline-primary"),onClick:z,children:"改名"}),l.jsx("button",{className:q("btn-outline-primary"),onClick:Y,children:"删除"})]}),l.jsx("div",{className:"border-info rounded flex-grow-1",children:l.jsx("div",{ref:v,className:"container_editor_area w-100",children:l.jsx(cP,{className:"container__editor",autoFocus:!0,spellCheck:!1,readOnly:S||N,placeholder:"Type some code…",value:p,onValueChange:E,highlight:L=>F(L,dP,"uq"),padding:10,tabSize:4,style:M})})}),l.jsx("div",{className:"border-top border-dark h-16c",children:l.jsx("textarea",{ref:m,spellCheck:!1,readOnly:!0,className:"p-2 h-100 w-100 border-0",style:{border:"none",outline:"none",fontFamily:"monospace",resize:"none"}})})]})})}function hP(){const{right:e,view:t}=L0();return l.jsx(H,{header:bh,right:e,children:t})}function L0(){const e=G(),{biz:t}=e,{openModal:n}=ue();we(t._refresh);const r=P.useRef();function i(d){n(l.jsx(HI,{content:d}))}function s(){r.current.click()}async function a(d){let{files:f}=d.target;await o(f[0]),r.current.value=""}async function o(d){return new Promise(f=>{let m=new FileReader;m.readAsText(d),m.onloadend=async function(v){f(),i(v.target.result)}})}function u({value:d,icon:f}){const{id:m,caption:v,name:y}=d;function w(){n(l.jsx(fP,{entity:d}))}let j;return v===void 0||v===y?j=l.jsx("div",{children:y}):j=l.jsxs("div",{children:[l.jsx("div",{className:"small text-secondary",children:y}),l.jsx("div",{children:v})]}),l.jsxs("div",{className:"px-2 py-2 border border-secondary shadow-sm mx-2 my-2 rounded h-min-5c w-16c w-max-16c cursor-pointer link-primary bg-white d-flex",onClick:w,children:[l.jsx(J,{name:f,className:"mt-1 me-2 text-success"}),j]},m)}function c({entitys:d,icon:f}){let m;return d.length===0?m=l.jsx("div",{className:"m-1 text-secondary small",children:"无"}):m=d.map((v,y)=>l.jsx(u,{value:v,icon:f},v.id)),l.jsx("div",{className:"d-flex flex-wrap p-2",children:m})}return{right:l.jsx("button",{className:"btn btn-primary btn-sm me-1",onClick:s,children:"上传业务"}),view:l.jsxs("div",{className:"",children:[l.jsx("div",{className:"tonwa-bg-gray-1",children:t.all.map((d,f)=>{const[m,v,y]=d;return v===void 0?null:l.jsxs("div",{className:"mx-2 my-3 border border-dark-subtle",children:[l.jsx("div",{className:"px-3 pt-1 pb-1 border-bottom tonwa-bg-gray-2 text-secondary",children:v}),l.jsx(c,{entitys:m,icon:y})]},f)})}),l.jsx("div",{children:l.jsx("input",{ref:r,type:"file",className:"w-100 form-control-file d-none",name:"files",multiple:!1,onChange:a})})]})}}const q0="compile",bh="业务设计",mP=l.jsx(ae,{path:`${q0}`,element:l.jsx(hP,{})});function pP(){const{uq:e,uqSites:t}=G(),{openModal:n}=ue(),{site:r}=Mn();function i({onClick:u,content:c,icon:d,iconColor:f}){return l.jsxs(ze,{className:"px-3 py-2 align-items-center",onClick:u,children:[l.jsx(An,{name:d??"cog",className:" fs-x-large me-3 my-1 "+(f??" text-primary ")}),c,l.jsx(An,{name:"chevron-right"})]})}function s(){let{userSite0:u}=t;if(u===void 0)return null;async function c(){n(l.jsx(jI,{}))}return l.jsxs(l.Fragment,{children:[l.jsx(i,{onClick:c,content:E0,icon:"laptop",iconColor:"text-warning"}),l.jsx(ge,{})]})}function a(){async function u(){n(l.jsx(mI,{admin:Xn.owner,viewTop:l.jsx(l.Fragment,{})}))}return l.jsxs(l.Fragment,{children:[l.jsx(i,{onClick:u,content:"机构角色",icon:"person-fill-gear"}),l.jsx(ge,{})]})}const o=[{label:gh,path:vh},{label:wh,path:xh},{label:bh,path:q0}];return l.jsxs(H,{header:l.jsx(an,{uq:e,id:Number(r),Template:fu}),children:[l.jsx(a,{}),o.map((u,c)=>{const{label:d,path:f}=u;return l.jsx(Ce,{to:`../${f}`,className:"border-bottom",children:l.jsx(i,{icon:"caret-right-fill",content:d,iconColor:"text-info"})},c)}),l.jsx(s,{})]})}const U0="site-admin",yP=l.jsx(ae,{path:`${U0}/:site`,element:l.jsx(pP,{})}),vP="about";function gP(){const e=Hg(Kx),t=G(),{openModal:n}=ue(),{uq:r,user:i,uqSites:s}=t,a=we(i);function o(){if(!a)return null;let{id:v,name:y,nick:w,icon:j}=a;return l.jsx(Ce,{to:e0,children:l.jsxs(ze,{className:"py-3 px-3 w-100",children:[l.jsx(su,{className:"w-3c h-3c me-3",src:j||".user-o"}),l.jsxs("div",{children:[l.jsx("div",{children:xP(y,w)}),l.jsxs("div",{className:"small",children:[l.jsx("span",{className:"text-muted",children:"ID:"})," ",v>1e4?v:String(v+1e4).substring(1)]})]}),l.jsx(J,{className:"align-self-end",name:"angle-right"})]})})}function u({onClick:v,content:y,icon:w,iconColor:j}){return l.jsxs(ze,{className:"p-3 cursor-pointer align-items-center",onClick:v,children:[l.jsx(J,{name:w??"cog",fixWidth:!0,className:" me-3 "+(j??" text-primary "),size:"lg"}),y,l.jsx(J,{name:"angle-right"})]})}function c(){const{uq:v}=G(),{data:y}=lr(["adminIsMe"],async()=>await v.AdminIsMe(),ur);if(y===!1)return null;let{userSite0:w}=s;if(w===void 0)return null;async function j(){n(l.jsx(vI,{}))}return l.jsxs(l.Fragment,{children:[l.jsx(u,{onClick:j,content:"系统管理",icon:"database",iconColor:"text-warning"}),l.jsx(ge,{})]})}function d(){let{mySites:v,userSite:y}=s;return l.jsx(l.Fragment,{children:v.map((w,j)=>{let{siteId:g}=w,h=(y==null?void 0:y.siteId)===g,p,b,S,k;h===!0?(p="check-circle-o",S="",b=" text-success "):(p="angle-right",S=" text-primary ",b="",k=C);let _=l.jsxs(ze,{className:"p-3 align-items-center "+S,onClick:k,children:[l.jsx(J,{name:p,fixWidth:!0,className:" me-3 "+b,size:"lg"}),l.jsx(an,{uq:r,id:g,Template:fu}),l.jsx(i0,{permit:[],children:l.jsxs("div",{children:["管理 ",l.jsx("i",{className:"bi-chevron-right"})]})})]});async function C(){h!==!0&&(await t.uqSites.setSite(g),document.location.reload())}return s0(t,[])===!0&&(_=l.jsx(Ce,{to:`/${U0}/${g}`,children:_})),l.jsxs(re.Fragment,{children:[_,l.jsx(ge,{})]},j)})})}function f(){return l.jsx(Ce,{to:vP,children:l.jsxs(ze,{className:"w-100 py-3 px-3 align-items-center",children:[l.jsx(J,{className:"text-info me-3",name:"smile-o",fixWidth:!0,size:"lg"}),l.jsxs("b",{className:"",children:[e(ce.aboutTheApp)," ",l.jsxs("small",{children:[e(ce.version)," ",t.version]})]}),l.jsx(J,{className:"align-self-center",name:"angle-right"})]})})}return l.jsx(H,{header:e(ce.me),back:"none",children:l.jsxs("div",{children:[l.jsx(o,{}),l.jsx(ge,{}),l.jsx(c,{}),l.jsx(d,{}),l.jsx(f,{}),l.jsx(ge,{})]})})}function xP(e,t){return t?l.jsx(l.Fragment,{children:l.jsxs("b",{children:[t,"   ",l.jsx("small",{className:"muted",children:e})]})}):l.jsx("b",{children:e})}const $0="atom-center";function wP(){const{biz:e}=G(),t=e.atomRoots;function n({value:r}){const{id:i,name:s,caption:a}=r;return l.jsx(Ce,{to:`../${Ta(i)}`,children:l.jsxs("div",{className:"px-3 py-2 align-items-center d-flex",children:[l.jsx(An,{name:"credit-card-2-front",className:"fs-larger me-3 text-info"}),l.jsx("span",{className:"text-body",children:a??s})]})})}return l.jsxs(H,{header:"档案中心",children:[l.jsx(ge,{}),l.jsx(Fe,{items:t,ViewItem:n})]})}const Sh={atomName:"atom",NOLabel:void 0,exLabel:void 0};function bP(){let{page:e}=La(Sh);return e}function hc(){let{page:e}=Ua(Sh);return e}function SP(){let e=Object.assign({},Sh,{ViewItemAtom:Ct,top:void 0}),{page:t}=Ra(e);return t}function jP(){const e=":atom";return l.jsxs(l.Fragment,{children:[l.jsx(ae,{path:$0,element:l.jsx(wP,{})}),l.jsx(ae,{path:uh(e),element:l.jsx(bP,{})}),l.jsx(ae,{path:Ta(e),element:l.jsx(SP,{})}),l.jsx(ae,{path:nE(e),element:l.jsx(hc,{})}),l.jsx(ae,{path:ch(e),element:l.jsx(hc,{})}),l.jsx(ae,{path:rE(e),element:l.jsx(hc,{})})]})}const V0="report";function kP(){const{biz:e}=G(),{reports:t}=e;function n({value:r}){const{id:i,caption:s,name:a}=r;return l.jsx(Ce,{to:`../${j0(i)}`,children:l.jsx("div",{className:"px-3 py-3",children:s??a})})}return l.jsx(H,{header:"报表中心",children:l.jsx("div",{className:"mb-3",children:t.map(r=>l.jsxs(re.Fragment,{children:[l.jsx(n,{value:r}),l.jsx(ge,{})]},r.id))})})}function CP(){let{page:e}=tI();return e}function _P(){const e=":report";return l.jsxs(l.Fragment,{children:[l.jsx(ae,{path:V0,element:l.jsx(kP,{})}),l.jsx(ae,{path:j0(e),element:l.jsx(CP,{})}),l.jsx(ae,{path:bo("history","title","id"),element:l.jsx(nI,{})}),l.jsx(ae,{path:bo("ref",void 0,"id"),element:l.jsx(rI,{})})]})}//! moment.js
//! version : 2.29.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var z0;function Q(){return z0.apply(null,arguments)}function NP(e){z0=e}function xn(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function ni(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function be(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function jh(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(be(e,t))return!1;return!0}function Mt(e){return e===void 0}function sr(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Va(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function B0(e,t){var n=[],r,i=e.length;for(r=0;r<i;++r)n.push(t(e[r],r));return n}function br(e,t){for(var n in t)be(t,n)&&(e[n]=t[n]);return be(t,"toString")&&(e.toString=t.toString),be(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Ln(e,t,n,r){return mw(e,t,n,r,!0).utc()}function DP(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function de(e){return e._pf==null&&(e._pf=DP()),e._pf}var _d;Array.prototype.some?_d=Array.prototype.some:_d=function(e){var t=Object(this),n=t.length>>>0,r;for(r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};function kh(e){if(e._isValid==null){var t=de(e),n=_d.call(t.parsedDateParts,function(i){return i!=null}),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=r;else return r}return e._isValid}function yu(e){var t=Ln(NaN);return e!=null?br(de(t),e):de(t).userInvalidated=!0,t}var yy=Q.momentProperties=[],mc=!1;function Ch(e,t){var n,r,i,s=yy.length;if(Mt(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),Mt(t._i)||(e._i=t._i),Mt(t._f)||(e._f=t._f),Mt(t._l)||(e._l=t._l),Mt(t._strict)||(e._strict=t._strict),Mt(t._tzm)||(e._tzm=t._tzm),Mt(t._isUTC)||(e._isUTC=t._isUTC),Mt(t._offset)||(e._offset=t._offset),Mt(t._pf)||(e._pf=de(t)),Mt(t._locale)||(e._locale=t._locale),s>0)for(n=0;n<s;n++)r=yy[n],i=t[r],Mt(i)||(e[r]=i);return e}function za(e){Ch(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),mc===!1&&(mc=!0,Q.updateOffset(this),mc=!1)}function wn(e){return e instanceof za||e!=null&&e._isAMomentObject!=null}function Y0(e){Q.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function on(e,t){var n=!0;return br(function(){if(Q.deprecationHandler!=null&&Q.deprecationHandler(null,e),n){var r=[],i,s,a,o=arguments.length;for(s=0;s<o;s++){if(i="",typeof arguments[s]=="object"){i+=`
[`+s+"] ";for(a in arguments[0])be(arguments[0],a)&&(i+=a+": "+arguments[0][a]+", ");i=i.slice(0,-2)}else i=arguments[s];r.push(i)}Y0(e+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),n=!1}return t.apply(this,arguments)},t)}var vy={};function W0(e,t){Q.deprecationHandler!=null&&Q.deprecationHandler(e,t),vy[e]||(Y0(t),vy[e]=!0)}Q.suppressDeprecationWarnings=!1;Q.deprecationHandler=null;function qn(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function EP(e){var t,n;for(n in e)be(e,n)&&(t=e[n],qn(t)?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Nd(e,t){var n=br({},e),r;for(r in t)be(t,r)&&(ni(e[r])&&ni(t[r])?(n[r]={},br(n[r],e[r]),br(n[r],t[r])):t[r]!=null?n[r]=t[r]:delete n[r]);for(r in e)be(e,r)&&!be(t,r)&&ni(e[r])&&(n[r]=br({},n[r]));return n}function _h(e){e!=null&&this.set(e)}var Dd;Object.keys?Dd=Object.keys:Dd=function(e){var t,n=[];for(t in e)be(e,t)&&n.push(t);return n};var IP={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function PP(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return qn(r)?r.call(t,n):r}function On(e,t,n){var r=""+Math.abs(e),i=t-r.length,s=e>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var Nh=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ml=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,pc={},Hi={};function ie(e,t,n,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),e&&(Hi[e]=i),t&&(Hi[t[0]]=function(){return On(i.apply(this,arguments),t[1],t[2])}),n&&(Hi[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function AP(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function OP(e){var t=e.match(Nh),n,r;for(n=0,r=t.length;n<r;n++)Hi[t[n]]?t[n]=Hi[t[n]]:t[n]=AP(t[n]);return function(i){var s="",a;for(a=0;a<r;a++)s+=qn(t[a])?t[a].call(i,e):t[a];return s}}function Ol(e,t){return e.isValid()?(t=H0(t,e.localeData()),pc[t]=pc[t]||OP(t),pc[t](e)):e.localeData().invalidDate()}function H0(e,t){var n=5;function r(i){return t.longDateFormat(i)||i}for(ml.lastIndex=0;n>=0&&ml.test(e);)e=e.replace(ml,r),ml.lastIndex=0,n-=1;return e}var MP={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function FP(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(Nh).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[e])}var TP="Invalid date";function RP(){return this._invalidDate}var LP="%d",qP=/\d{1,2}/;function UP(e){return this._ordinal.replace("%d",e)}var $P={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function VP(e,t,n,r){var i=this._relativeTime[n];return qn(i)?i(e,t,n,r):i.replace(/%d/i,e)}function zP(e,t){var n=this._relativeTime[e>0?"future":"past"];return qn(n)?n(t):n.replace(/%s/i,t)}var Gs={};function _t(e,t){var n=e.toLowerCase();Gs[n]=Gs[n+"s"]=Gs[t]=e}function un(e){return typeof e=="string"?Gs[e]||Gs[e.toLowerCase()]:void 0}function Dh(e){var t={},n,r;for(r in e)be(e,r)&&(n=un(r),n&&(t[n]=e[r]));return t}var Q0={};function Nt(e,t){Q0[e]=t}function BP(e){var t=[],n;for(n in e)be(e,n)&&t.push({unit:n,priority:Q0[n]});return t.sort(function(r,i){return r.priority-i.priority}),t}function vu(e){return e%4===0&&e%100!==0||e%400===0}function Jt(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function me(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=Jt(t)),n}function hs(e,t){return function(n){return n!=null?(G0(this,e,n),Q.updateOffset(this,t),this):Do(this,e)}}function Do(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function G0(e,t,n){e.isValid()&&!isNaN(n)&&(t==="FullYear"&&vu(e.year())&&e.month()===1&&e.date()===29?(n=me(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),ju(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function YP(e){return e=un(e),qn(this[e])?this[e]():this}function WP(e,t){if(typeof e=="object"){e=Dh(e);var n=BP(e),r,i=n.length;for(r=0;r<i;r++)this[n[r].unit](e[n[r].unit])}else if(e=un(e),qn(this[e]))return this[e](t);return this}var K0=/\d/,Gt=/\d\d/,X0=/\d{3}/,Eh=/\d{4}/,gu=/[+-]?\d{6}/,Re=/\d\d?/,Z0=/\d\d\d\d?/,J0=/\d\d\d\d\d\d?/,xu=/\d{1,3}/,Ih=/\d{1,4}/,wu=/[+-]?\d{1,6}/,ms=/\d+/,bu=/[+-]?\d+/,HP=/Z|[+-]\d\d:?\d\d/gi,Su=/Z|[+-]\d\d(?::?\d\d)?/gi,QP=/[+-]?\d+(\.\d{1,3})?/,Ba=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Eo;Eo={};function X(e,t,n){Eo[e]=qn(t)?t:function(r,i){return r&&n?n:t}}function GP(e,t){return be(Eo,e)?Eo[e](t._strict,t._locale):new RegExp(KP(e))}function KP(e){return zt(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,n,r,i,s){return n||r||i||s}))}function zt(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Ed={};function De(e,t){var n,r=t,i;for(typeof e=="string"&&(e=[e]),sr(t)&&(r=function(s,a){a[t]=me(s)}),i=e.length,n=0;n<i;n++)Ed[e[n]]=r}function Ya(e,t){De(e,function(n,r,i,s){i._w=i._w||{},t(n,i._w,i,s)})}function XP(e,t,n){t!=null&&be(Ed,e)&&Ed[e](t,n._a,n,e)}var jt=0,Qn=1,_n=2,lt=3,pn=4,Gn=5,Zr=6,ZP=7,JP=8;function eA(e,t){return(e%t+t)%t}var Xe;Array.prototype.indexOf?Xe=Array.prototype.indexOf:Xe=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function ju(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=eA(t,12);return e+=(t-n)/12,n===1?vu(e)?29:28:31-n%7%2}ie("M",["MM",2],"Mo",function(){return this.month()+1});ie("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});ie("MMMM",0,0,function(e){return this.localeData().months(this,e)});_t("month","M");Nt("month",8);X("M",Re);X("MM",Re,Gt);X("MMM",function(e,t){return t.monthsShortRegex(e)});X("MMMM",function(e,t){return t.monthsRegex(e)});De(["M","MM"],function(e,t){t[Qn]=me(e)-1});De(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);i!=null?t[Qn]=i:de(n).invalidMonth=e});var tA="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ew="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),tw=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,nA=Ba,rA=Ba;function iA(e,t){return e?xn(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||tw).test(t)?"format":"standalone"][e.month()]:xn(this._months)?this._months:this._months.standalone}function sA(e,t){return e?xn(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[tw.test(t)?"format":"standalone"][e.month()]:xn(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function aA(e,t,n){var r,i,s,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)s=Ln([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(s,"").toLocaleLowerCase();return n?t==="MMM"?(i=Xe.call(this._shortMonthsParse,a),i!==-1?i:null):(i=Xe.call(this._longMonthsParse,a),i!==-1?i:null):t==="MMM"?(i=Xe.call(this._shortMonthsParse,a),i!==-1?i:(i=Xe.call(this._longMonthsParse,a),i!==-1?i:null)):(i=Xe.call(this._longMonthsParse,a),i!==-1?i:(i=Xe.call(this._shortMonthsParse,a),i!==-1?i:null))}function lA(e,t,n){var r,i,s;if(this._monthsParseExact)return aA.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=Ln([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i")),n&&t==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function nw(e,t){var n;if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=me(t);else if(t=e.localeData().monthsParse(t),!sr(t))return e}return n=Math.min(e.date(),ju(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function rw(e){return e!=null?(nw(this,e),Q.updateOffset(this,!0),this):Do(this,"Month")}function oA(){return ju(this.year(),this.month())}function uA(e){return this._monthsParseExact?(be(this,"_monthsRegex")||iw.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(be(this,"_monthsShortRegex")||(this._monthsShortRegex=nA),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function cA(e){return this._monthsParseExact?(be(this,"_monthsRegex")||iw.call(this),e?this._monthsStrictRegex:this._monthsRegex):(be(this,"_monthsRegex")||(this._monthsRegex=rA),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function iw(){function e(a,o){return o.length-a.length}var t=[],n=[],r=[],i,s;for(i=0;i<12;i++)s=Ln([2e3,i]),t.push(this.monthsShort(s,"")),n.push(this.months(s,"")),r.push(this.months(s,"")),r.push(this.monthsShort(s,""));for(t.sort(e),n.sort(e),r.sort(e),i=0;i<12;i++)t[i]=zt(t[i]),n[i]=zt(n[i]);for(i=0;i<24;i++)r[i]=zt(r[i]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}ie("Y",0,0,function(){var e=this.year();return e<=9999?On(e,4):"+"+e});ie(0,["YY",2],0,function(){return this.year()%100});ie(0,["YYYY",4],0,"year");ie(0,["YYYYY",5],0,"year");ie(0,["YYYYYY",6,!0],0,"year");_t("year","y");Nt("year",1);X("Y",bu);X("YY",Re,Gt);X("YYYY",Ih,Eh);X("YYYYY",wu,gu);X("YYYYYY",wu,gu);De(["YYYYY","YYYYYY"],jt);De("YYYY",function(e,t){t[jt]=e.length===2?Q.parseTwoDigitYear(e):me(e)});De("YY",function(e,t){t[jt]=Q.parseTwoDigitYear(e)});De("Y",function(e,t){t[jt]=parseInt(e,10)});function Ks(e){return vu(e)?366:365}Q.parseTwoDigitYear=function(e){return me(e)+(me(e)>68?1900:2e3)};var sw=hs("FullYear",!0);function dA(){return vu(this.year())}function fA(e,t,n,r,i,s,a){var o;return e<100&&e>=0?(o=new Date(e+400,t,n,r,i,s,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,r,i,s,a),o}function va(e){var t,n;return e<100&&e>=0?(n=Array.prototype.slice.call(arguments),n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Io(e,t,n){var r=7+t-n,i=(7+va(e,0,r).getUTCDay()-t)%7;return-i+r-1}function aw(e,t,n,r,i){var s=(7+n-r)%7,a=Io(e,r,i),o=1+7*(t-1)+s+a,u,c;return o<=0?(u=e-1,c=Ks(u)+o):o>Ks(e)?(u=e+1,c=o-Ks(e)):(u=e,c=o),{year:u,dayOfYear:c}}function ga(e,t,n){var r=Io(e.year(),t,n),i=Math.floor((e.dayOfYear()-r-1)/7)+1,s,a;return i<1?(a=e.year()-1,s=i+Zn(a,t,n)):i>Zn(e.year(),t,n)?(s=i-Zn(e.year(),t,n),a=e.year()+1):(a=e.year(),s=i),{week:s,year:a}}function Zn(e,t,n){var r=Io(e,t,n),i=Io(e+1,t,n);return(Ks(e)-r+i)/7}ie("w",["ww",2],"wo","week");ie("W",["WW",2],"Wo","isoWeek");_t("week","w");_t("isoWeek","W");Nt("week",5);Nt("isoWeek",5);X("w",Re);X("ww",Re,Gt);X("W",Re);X("WW",Re,Gt);Ya(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=me(e)});function hA(e){return ga(e,this._week.dow,this._week.doy).week}var mA={dow:0,doy:6};function pA(){return this._week.dow}function yA(){return this._week.doy}function vA(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function gA(e){var t=ga(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}ie("d",0,"do","day");ie("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});ie("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});ie("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});ie("e",0,0,"weekday");ie("E",0,0,"isoWeekday");_t("day","d");_t("weekday","e");_t("isoWeekday","E");Nt("day",11);Nt("weekday",11);Nt("isoWeekday",11);X("d",Re);X("e",Re);X("E",Re);X("dd",function(e,t){return t.weekdaysMinRegex(e)});X("ddd",function(e,t){return t.weekdaysShortRegex(e)});X("dddd",function(e,t){return t.weekdaysRegex(e)});Ya(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);i!=null?t.d=i:de(n).invalidWeekday=e});Ya(["d","e","E"],function(e,t,n,r){t[r]=me(e)});function xA(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function wA(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Ph(e,t){return e.slice(t,7).concat(e.slice(0,t))}var bA="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),lw="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),SA="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),jA=Ba,kA=Ba,CA=Ba;function _A(e,t){var n=xn(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?Ph(n,this._week.dow):e?n[e.day()]:n}function NA(e){return e===!0?Ph(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function DA(e){return e===!0?Ph(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function EA(e,t,n){var r,i,s,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)s=Ln([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(s,"").toLocaleLowerCase();return n?t==="dddd"?(i=Xe.call(this._weekdaysParse,a),i!==-1?i:null):t==="ddd"?(i=Xe.call(this._shortWeekdaysParse,a),i!==-1?i:null):(i=Xe.call(this._minWeekdaysParse,a),i!==-1?i:null):t==="dddd"?(i=Xe.call(this._weekdaysParse,a),i!==-1||(i=Xe.call(this._shortWeekdaysParse,a),i!==-1)?i:(i=Xe.call(this._minWeekdaysParse,a),i!==-1?i:null)):t==="ddd"?(i=Xe.call(this._shortWeekdaysParse,a),i!==-1||(i=Xe.call(this._weekdaysParse,a),i!==-1)?i:(i=Xe.call(this._minWeekdaysParse,a),i!==-1?i:null)):(i=Xe.call(this._minWeekdaysParse,a),i!==-1||(i=Xe.call(this._weekdaysParse,a),i!==-1)?i:(i=Xe.call(this._shortWeekdaysParse,a),i!==-1?i:null))}function IA(e,t,n){var r,i,s;if(this._weekdaysParseExact)return EA.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=Ln([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(s.replace(".",""),"i")),n&&t==="dddd"&&this._fullWeekdaysParse[r].test(e))return r;if(n&&t==="ddd"&&this._shortWeekdaysParse[r].test(e))return r;if(n&&t==="dd"&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function PA(e){if(!this.isValid())return e!=null?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=xA(e,this.localeData()),this.add(e-t,"d")):t}function AA(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function OA(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=wA(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function MA(e){return this._weekdaysParseExact?(be(this,"_weekdaysRegex")||Ah.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(be(this,"_weekdaysRegex")||(this._weekdaysRegex=jA),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function FA(e){return this._weekdaysParseExact?(be(this,"_weekdaysRegex")||Ah.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(be(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=kA),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function TA(e){return this._weekdaysParseExact?(be(this,"_weekdaysRegex")||Ah.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(be(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=CA),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ah(){function e(d,f){return f.length-d.length}var t=[],n=[],r=[],i=[],s,a,o,u,c;for(s=0;s<7;s++)a=Ln([2e3,1]).day(s),o=zt(this.weekdaysMin(a,"")),u=zt(this.weekdaysShort(a,"")),c=zt(this.weekdays(a,"")),t.push(o),n.push(u),r.push(c),i.push(o),i.push(u),i.push(c);t.sort(e),n.sort(e),r.sort(e),i.sort(e),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Oh(){return this.hours()%12||12}function RA(){return this.hours()||24}ie("H",["HH",2],0,"hour");ie("h",["hh",2],0,Oh);ie("k",["kk",2],0,RA);ie("hmm",0,0,function(){return""+Oh.apply(this)+On(this.minutes(),2)});ie("hmmss",0,0,function(){return""+Oh.apply(this)+On(this.minutes(),2)+On(this.seconds(),2)});ie("Hmm",0,0,function(){return""+this.hours()+On(this.minutes(),2)});ie("Hmmss",0,0,function(){return""+this.hours()+On(this.minutes(),2)+On(this.seconds(),2)});function ow(e,t){ie(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}ow("a",!0);ow("A",!1);_t("hour","h");Nt("hour",13);function uw(e,t){return t._meridiemParse}X("a",uw);X("A",uw);X("H",Re);X("h",Re);X("k",Re);X("HH",Re,Gt);X("hh",Re,Gt);X("kk",Re,Gt);X("hmm",Z0);X("hmmss",J0);X("Hmm",Z0);X("Hmmss",J0);De(["H","HH"],lt);De(["k","kk"],function(e,t,n){var r=me(e);t[lt]=r===24?0:r});De(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e});De(["h","hh"],function(e,t,n){t[lt]=me(e),de(n).bigHour=!0});De("hmm",function(e,t,n){var r=e.length-2;t[lt]=me(e.substr(0,r)),t[pn]=me(e.substr(r)),de(n).bigHour=!0});De("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[lt]=me(e.substr(0,r)),t[pn]=me(e.substr(r,2)),t[Gn]=me(e.substr(i)),de(n).bigHour=!0});De("Hmm",function(e,t,n){var r=e.length-2;t[lt]=me(e.substr(0,r)),t[pn]=me(e.substr(r))});De("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[lt]=me(e.substr(0,r)),t[pn]=me(e.substr(r,2)),t[Gn]=me(e.substr(i))});function LA(e){return(e+"").toLowerCase().charAt(0)==="p"}var qA=/[ap]\.?m?\.?/i,UA=hs("Hours",!0);function $A(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var cw={calendar:IP,longDateFormat:MP,invalidDate:TP,ordinal:LP,dayOfMonthOrdinalParse:qP,relativeTime:$P,months:tA,monthsShort:ew,week:mA,weekdays:bA,weekdaysMin:SA,weekdaysShort:lw,meridiemParse:qA},Ue={},Ps={},xa;function VA(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function gy(e){return e&&e.toLowerCase().replace("_","-")}function zA(e){for(var t=0,n,r,i,s;t<e.length;){for(s=gy(e[t]).split("-"),n=s.length,r=gy(e[t+1]),r=r?r.split("-"):null;n>0;){if(i=ku(s.slice(0,n).join("-")),i)return i;if(r&&r.length>=n&&VA(s,r)>=n-1)break;n--}t++}return xa}function BA(e){return e.match("^[^/\\\\]*$")!=null}function ku(e){var t=null,n;if(Ue[e]===void 0&&typeof Rl<"u"&&Rl&&Rl.exports&&BA(e))try{t=xa._abbr,n=require,n("./locale/"+e),Or(t)}catch{Ue[e]=null}return Ue[e]}function Or(e,t){var n;return e&&(Mt(t)?n=dr(e):n=Mh(e,t),n?xa=n:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),xa._abbr}function Mh(e,t){if(t!==null){var n,r=cw;if(t.abbr=e,Ue[e]!=null)W0("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=Ue[e]._config;else if(t.parentLocale!=null)if(Ue[t.parentLocale]!=null)r=Ue[t.parentLocale]._config;else if(n=ku(t.parentLocale),n!=null)r=n._config;else return Ps[t.parentLocale]||(Ps[t.parentLocale]=[]),Ps[t.parentLocale].push({name:e,config:t}),null;return Ue[e]=new _h(Nd(r,t)),Ps[e]&&Ps[e].forEach(function(i){Mh(i.name,i.config)}),Or(e),Ue[e]}else return delete Ue[e],null}function YA(e,t){if(t!=null){var n,r,i=cw;Ue[e]!=null&&Ue[e].parentLocale!=null?Ue[e].set(Nd(Ue[e]._config,t)):(r=ku(e),r!=null&&(i=r._config),t=Nd(i,t),r==null&&(t.abbr=e),n=new _h(t),n.parentLocale=Ue[e],Ue[e]=n),Or(e)}else Ue[e]!=null&&(Ue[e].parentLocale!=null?(Ue[e]=Ue[e].parentLocale,e===Or()&&Or(e)):Ue[e]!=null&&delete Ue[e]);return Ue[e]}function dr(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return xa;if(!xn(e)){if(t=ku(e),t)return t;e=[e]}return zA(e)}function WA(){return Dd(Ue)}function Fh(e){var t,n=e._a;return n&&de(e).overflow===-2&&(t=n[Qn]<0||n[Qn]>11?Qn:n[_n]<1||n[_n]>ju(n[jt],n[Qn])?_n:n[lt]<0||n[lt]>24||n[lt]===24&&(n[pn]!==0||n[Gn]!==0||n[Zr]!==0)?lt:n[pn]<0||n[pn]>59?pn:n[Gn]<0||n[Gn]>59?Gn:n[Zr]<0||n[Zr]>999?Zr:-1,de(e)._overflowDayOfYear&&(t<jt||t>_n)&&(t=_n),de(e)._overflowWeeks&&t===-1&&(t=ZP),de(e)._overflowWeekday&&t===-1&&(t=JP),de(e).overflow=t),e}var HA=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,QA=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,GA=/Z|[+-]\d\d(?::?\d\d)?/,pl=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],yc=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],KA=/^\/?Date\((-?\d+)/i,XA=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ZA={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function dw(e){var t,n,r=e._i,i=HA.exec(r)||QA.exec(r),s,a,o,u,c=pl.length,d=yc.length;if(i){for(de(e).iso=!0,t=0,n=c;t<n;t++)if(pl[t][1].exec(i[1])){a=pl[t][0],s=pl[t][2]!==!1;break}if(a==null){e._isValid=!1;return}if(i[3]){for(t=0,n=d;t<n;t++)if(yc[t][1].exec(i[3])){o=(i[2]||" ")+yc[t][0];break}if(o==null){e._isValid=!1;return}}if(!s&&o!=null){e._isValid=!1;return}if(i[4])if(GA.exec(i[4]))u="Z";else{e._isValid=!1;return}e._f=a+(o||"")+(u||""),Rh(e)}else e._isValid=!1}function JA(e,t,n,r,i,s){var a=[eO(e),ew.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return s&&a.push(parseInt(s,10)),a}function eO(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function tO(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function nO(e,t,n){if(e){var r=lw.indexOf(e),i=new Date(t[0],t[1],t[2]).getDay();if(r!==i)return de(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function rO(e,t,n){if(e)return ZA[e];if(t)return 0;var r=parseInt(n,10),i=r%100,s=(r-i)/100;return s*60+i}function fw(e){var t=XA.exec(tO(e._i)),n;if(t){if(n=JA(t[4],t[3],t[2],t[5],t[6],t[7]),!nO(t[1],n,e))return;e._a=n,e._tzm=rO(t[8],t[9],t[10]),e._d=va.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),de(e).rfc2822=!0}else e._isValid=!1}function iO(e){var t=KA.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(dw(e),e._isValid===!1)delete e._isValid;else return;if(fw(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:Q.createFromInputFallback(e)}Q.createFromInputFallback=on("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function ji(e,t,n){return e??t??n}function sO(e){var t=new Date(Q.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Th(e){var t,n,r=[],i,s,a;if(!e._d){for(i=sO(e),e._w&&e._a[_n]==null&&e._a[Qn]==null&&aO(e),e._dayOfYear!=null&&(a=ji(e._a[jt],i[jt]),(e._dayOfYear>Ks(a)||e._dayOfYear===0)&&(de(e)._overflowDayOfYear=!0),n=va(a,0,e._dayOfYear),e._a[Qn]=n.getUTCMonth(),e._a[_n]=n.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[lt]===24&&e._a[pn]===0&&e._a[Gn]===0&&e._a[Zr]===0&&(e._nextDay=!0,e._a[lt]=0),e._d=(e._useUTC?va:fA).apply(null,r),s=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[lt]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==s&&(de(e).weekdayMismatch=!0)}}function aO(e){var t,n,r,i,s,a,o,u,c;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(s=1,a=4,n=ji(t.GG,e._a[jt],ga(Te(),1,4).year),r=ji(t.W,1),i=ji(t.E,1),(i<1||i>7)&&(u=!0)):(s=e._locale._week.dow,a=e._locale._week.doy,c=ga(Te(),s,a),n=ji(t.gg,e._a[jt],c.year),r=ji(t.w,c.week),t.d!=null?(i=t.d,(i<0||i>6)&&(u=!0)):t.e!=null?(i=t.e+s,(t.e<0||t.e>6)&&(u=!0)):i=s),r<1||r>Zn(n,s,a)?de(e)._overflowWeeks=!0:u!=null?de(e)._overflowWeekday=!0:(o=aw(n,r,i,s,a),e._a[jt]=o.year,e._dayOfYear=o.dayOfYear)}Q.ISO_8601=function(){};Q.RFC_2822=function(){};function Rh(e){if(e._f===Q.ISO_8601){dw(e);return}if(e._f===Q.RFC_2822){fw(e);return}e._a=[],de(e).empty=!0;var t=""+e._i,n,r,i,s,a,o=t.length,u=0,c,d;for(i=H0(e._f,e._locale).match(Nh)||[],d=i.length,n=0;n<d;n++)s=i[n],r=(t.match(GP(s,e))||[])[0],r&&(a=t.substr(0,t.indexOf(r)),a.length>0&&de(e).unusedInput.push(a),t=t.slice(t.indexOf(r)+r.length),u+=r.length),Hi[s]?(r?de(e).empty=!1:de(e).unusedTokens.push(s),XP(s,r,e)):e._strict&&!r&&de(e).unusedTokens.push(s);de(e).charsLeftOver=o-u,t.length>0&&de(e).unusedInput.push(t),e._a[lt]<=12&&de(e).bigHour===!0&&e._a[lt]>0&&(de(e).bigHour=void 0),de(e).parsedDateParts=e._a.slice(0),de(e).meridiem=e._meridiem,e._a[lt]=lO(e._locale,e._a[lt],e._meridiem),c=de(e).era,c!==null&&(e._a[jt]=e._locale.erasConvertYear(c,e._a[jt])),Th(e),Fh(e)}function lO(e,t,n){var r;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):(e.isPM!=null&&(r=e.isPM(n),r&&t<12&&(t+=12),!r&&t===12&&(t=0)),t)}function oO(e){var t,n,r,i,s,a,o=!1,u=e._f.length;if(u===0){de(e).invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<u;i++)s=0,a=!1,t=Ch({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[i],Rh(t),kh(t)&&(a=!0),s+=de(t).charsLeftOver,s+=de(t).unusedTokens.length*10,de(t).score=s,o?s<r&&(r=s,n=t):(r==null||s<r||a)&&(r=s,n=t,a&&(o=!0));br(e,n||t)}function uO(e){if(!e._d){var t=Dh(e._i),n=t.day===void 0?t.date:t.day;e._a=B0([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(r){return r&&parseInt(r,10)}),Th(e)}}function cO(e){var t=new za(Fh(hw(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function hw(e){var t=e._i,n=e._f;return e._locale=e._locale||dr(e._l),t===null||n===void 0&&t===""?yu({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),wn(t)?new za(Fh(t)):(Va(t)?e._d=t:xn(n)?oO(e):n?Rh(e):dO(e),kh(e)||(e._d=null),e))}function dO(e){var t=e._i;Mt(t)?e._d=new Date(Q.now()):Va(t)?e._d=new Date(t.valueOf()):typeof t=="string"?iO(e):xn(t)?(e._a=B0(t.slice(0),function(n){return parseInt(n,10)}),Th(e)):ni(t)?uO(e):sr(t)?e._d=new Date(t):Q.createFromInputFallback(e)}function mw(e,t,n,r,i){var s={};return(t===!0||t===!1)&&(r=t,t=void 0),(n===!0||n===!1)&&(r=n,n=void 0),(ni(e)&&jh(e)||xn(e)&&e.length===0)&&(e=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=i,s._l=n,s._i=e,s._f=t,s._strict=r,cO(s)}function Te(e,t,n,r){return mw(e,t,n,r,!1)}var fO=on("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Te.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:yu()}),hO=on("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Te.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:yu()});function pw(e,t){var n,r;if(t.length===1&&xn(t[0])&&(t=t[0]),!t.length)return Te();for(n=t[0],r=1;r<t.length;++r)(!t[r].isValid()||t[r][e](n))&&(n=t[r]);return n}function mO(){var e=[].slice.call(arguments,0);return pw("isBefore",e)}function pO(){var e=[].slice.call(arguments,0);return pw("isAfter",e)}var yO=function(){return Date.now?Date.now():+new Date},As=["year","quarter","month","week","day","hour","minute","second","millisecond"];function vO(e){var t,n=!1,r,i=As.length;for(t in e)if(be(e,t)&&!(Xe.call(As,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(r=0;r<i;++r)if(e[As[r]]){if(n)return!1;parseFloat(e[As[r]])!==me(e[As[r]])&&(n=!0)}return!0}function gO(){return this._isValid}function xO(){return Sn(NaN)}function Cu(e){var t=Dh(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||t.isoWeek||0,a=t.day||0,o=t.hour||0,u=t.minute||0,c=t.second||0,d=t.millisecond||0;this._isValid=vO(t),this._milliseconds=+d+c*1e3+u*6e4+o*1e3*60*60,this._days=+a+s*7,this._months=+i+r*3+n*12,this._data={},this._locale=dr(),this._bubble()}function Ml(e){return e instanceof Cu}function Id(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function wO(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,a;for(a=0;a<r;a++)(n&&e[a]!==t[a]||!n&&me(e[a])!==me(t[a]))&&s++;return s+i}function yw(e,t){ie(e,0,0,function(){var n=this.utcOffset(),r="+";return n<0&&(n=-n,r="-"),r+On(~~(n/60),2)+t+On(~~n%60,2)})}yw("Z",":");yw("ZZ","");X("Z",Su);X("ZZ",Su);De(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Lh(Su,e)});var bO=/([\+\-]|\d\d)/gi;function Lh(e,t){var n=(t||"").match(e),r,i,s;return n===null?null:(r=n[n.length-1]||[],i=(r+"").match(bO)||["-",0,0],s=+(i[1]*60)+me(i[2]),s===0?0:i[0]==="+"?s:-s)}function qh(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(wn(e)||Va(e)?e.valueOf():Te(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),Q.updateOffset(n,!1),n):Te(e).local()}function Pd(e){return-Math.round(e._d.getTimezoneOffset())}Q.updateOffset=function(){};function SO(e,t,n){var r=this._offset||0,i;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Lh(Su,e),e===null)return this}else Math.abs(e)<16&&!n&&(e=e*60);return!this._isUTC&&t&&(i=Pd(this)),this._offset=e,this._isUTC=!0,i!=null&&this.add(i,"m"),r!==e&&(!t||this._changeInProgress?xw(this,Sn(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Q.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:Pd(this)}function jO(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function kO(e){return this.utcOffset(0,e)}function CO(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Pd(this),"m")),this}function _O(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Lh(HP,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function NO(e){return this.isValid()?(e=e?Te(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function DO(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function EO(){if(!Mt(this._isDSTShifted))return this._isDSTShifted;var e={},t;return Ch(e,this),e=hw(e),e._a?(t=e._isUTC?Ln(e._a):Te(e._a),this._isDSTShifted=this.isValid()&&wO(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function IO(){return this.isValid()?!this._isUTC:!1}function PO(){return this.isValid()?this._isUTC:!1}function vw(){return this.isValid()?this._isUTC&&this._offset===0:!1}var AO=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,OO=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Sn(e,t){var n=e,r=null,i,s,a;return Ml(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:sr(e)||!isNaN(+e)?(n={},t?n[t]=+e:n.milliseconds=+e):(r=AO.exec(e))?(i=r[1]==="-"?-1:1,n={y:0,d:me(r[_n])*i,h:me(r[lt])*i,m:me(r[pn])*i,s:me(r[Gn])*i,ms:me(Id(r[Zr]*1e3))*i}):(r=OO.exec(e))?(i=r[1]==="-"?-1:1,n={y:zr(r[2],i),M:zr(r[3],i),w:zr(r[4],i),d:zr(r[5],i),h:zr(r[6],i),m:zr(r[7],i),s:zr(r[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(a=MO(Te(n.from),Te(n.to)),n={},n.ms=a.milliseconds,n.M=a.months),s=new Cu(n),Ml(e)&&be(e,"_locale")&&(s._locale=e._locale),Ml(e)&&be(e,"_isValid")&&(s._isValid=e._isValid),s}Sn.fn=Cu.prototype;Sn.invalid=xO;function zr(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function xy(e,t){var n={};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function MO(e,t){var n;return e.isValid()&&t.isValid()?(t=qh(t,e),e.isBefore(t)?n=xy(e,t):(n=xy(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function gw(e,t){return function(n,r){var i,s;return r!==null&&!isNaN(+r)&&(W0(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=n,n=r,r=s),i=Sn(n,r),xw(this,i,e),this}}function xw(e,t,n,r){var i=t._milliseconds,s=Id(t._days),a=Id(t._months);e.isValid()&&(r=r??!0,a&&nw(e,Do(e,"Month")+a*n),s&&G0(e,"Date",Do(e,"Date")+s*n),i&&e._d.setTime(e._d.valueOf()+i*n),r&&Q.updateOffset(e,s||a))}var FO=gw(1,"add"),TO=gw(-1,"subtract");function ww(e){return typeof e=="string"||e instanceof String}function RO(e){return wn(e)||Va(e)||ww(e)||sr(e)||qO(e)||LO(e)||e===null||e===void 0}function LO(e){var t=ni(e)&&!jh(e),n=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,s,a=r.length;for(i=0;i<a;i+=1)s=r[i],n=n||be(e,s);return t&&n}function qO(e){var t=xn(e),n=!1;return t&&(n=e.filter(function(r){return!sr(r)&&ww(e)}).length===0),t&&n}function UO(e){var t=ni(e)&&!jh(e),n=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,s;for(i=0;i<r.length;i+=1)s=r[i],n=n||be(e,s);return t&&n}function $O(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function VO(e,t){arguments.length===1&&(arguments[0]?RO(arguments[0])?(e=arguments[0],t=void 0):UO(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Te(),r=qh(n,this).startOf("day"),i=Q.calendarFormat(this,r)||"sameElse",s=t&&(qn(t[i])?t[i].call(this,n):t[i]);return this.format(s||this.localeData().calendar(i,this,Te(n)))}function zO(){return new za(this)}function BO(e,t){var n=wn(e)?e:Te(e);return this.isValid()&&n.isValid()?(t=un(t)||"millisecond",t==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf()):!1}function YO(e,t){var n=wn(e)?e:Te(e);return this.isValid()&&n.isValid()?(t=un(t)||"millisecond",t==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf()):!1}function WO(e,t,n,r){var i=wn(e)?e:Te(e),s=wn(t)?t:Te(t);return this.isValid()&&i.isValid()&&s.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(i,n):!this.isBefore(i,n))&&(r[1]===")"?this.isBefore(s,n):!this.isAfter(s,n))):!1}function HO(e,t){var n=wn(e)?e:Te(e),r;return this.isValid()&&n.isValid()?(t=un(t)||"millisecond",t==="millisecond"?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf())):!1}function QO(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function GO(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function KO(e,t,n){var r,i,s;if(!this.isValid())return NaN;if(r=qh(e,this),!r.isValid())return NaN;switch(i=(r.utcOffset()-this.utcOffset())*6e4,t=un(t),t){case"year":s=Fl(this,r)/12;break;case"month":s=Fl(this,r);break;case"quarter":s=Fl(this,r)/3;break;case"second":s=(this-r)/1e3;break;case"minute":s=(this-r)/6e4;break;case"hour":s=(this-r)/36e5;break;case"day":s=(this-r-i)/864e5;break;case"week":s=(this-r-i)/6048e5;break;default:s=this-r}return n?s:Jt(s)}function Fl(e,t){if(e.date()<t.date())return-Fl(t,e);var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),i,s;return t-r<0?(i=e.clone().add(n-1,"months"),s=(t-r)/(r-i)):(i=e.clone().add(n+1,"months"),s=(t-r)/(i-r)),-(n+s)||0}Q.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Q.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function XO(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ZO(e){if(!this.isValid())return null;var t=e!==!0,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?Ol(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):qn(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Ol(n,"Z")):Ol(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function JO(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",n,r,i,s;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",s=t+'[")]',this.format(n+r+i+s)}function eM(e){e||(e=this.isUtc()?Q.defaultFormatUtc:Q.defaultFormat);var t=Ol(this,e);return this.localeData().postformat(t)}function tM(e,t){return this.isValid()&&(wn(e)&&e.isValid()||Te(e).isValid())?Sn({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function nM(e){return this.from(Te(),e)}function rM(e,t){return this.isValid()&&(wn(e)&&e.isValid()||Te(e).isValid())?Sn({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function iM(e){return this.to(Te(),e)}function bw(e){var t;return e===void 0?this._locale._abbr:(t=dr(e),t!=null&&(this._locale=t),this)}var Sw=on("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function jw(){return this._locale}var Po=1e3,Qi=60*Po,Ao=60*Qi,kw=(365*400+97)*24*Ao;function Gi(e,t){return(e%t+t)%t}function Cw(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-kw:new Date(e,t,n).valueOf()}function _w(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-kw:Date.UTC(e,t,n)}function sM(e){var t,n;if(e=un(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?_w:Cw,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Gi(t+(this._isUTC?0:this.utcOffset()*Qi),Ao);break;case"minute":t=this._d.valueOf(),t-=Gi(t,Qi);break;case"second":t=this._d.valueOf(),t-=Gi(t,Po);break}return this._d.setTime(t),Q.updateOffset(this,!0),this}function aM(e){var t,n;if(e=un(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?_w:Cw,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Ao-Gi(t+(this._isUTC?0:this.utcOffset()*Qi),Ao)-1;break;case"minute":t=this._d.valueOf(),t+=Qi-Gi(t,Qi)-1;break;case"second":t=this._d.valueOf(),t+=Po-Gi(t,Po)-1;break}return this._d.setTime(t),Q.updateOffset(this,!0),this}function lM(){return this._d.valueOf()-(this._offset||0)*6e4}function oM(){return Math.floor(this.valueOf()/1e3)}function uM(){return new Date(this.valueOf())}function cM(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function dM(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function fM(){return this.isValid()?this.toISOString():null}function hM(){return kh(this)}function mM(){return br({},de(this))}function pM(){return de(this).overflow}function yM(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ie("N",0,0,"eraAbbr");ie("NN",0,0,"eraAbbr");ie("NNN",0,0,"eraAbbr");ie("NNNN",0,0,"eraName");ie("NNNNN",0,0,"eraNarrow");ie("y",["y",1],"yo","eraYear");ie("y",["yy",2],0,"eraYear");ie("y",["yyy",3],0,"eraYear");ie("y",["yyyy",4],0,"eraYear");X("N",Uh);X("NN",Uh);X("NNN",Uh);X("NNNN",NM);X("NNNNN",DM);De(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,r){var i=n._locale.erasParse(e,r,n._strict);i?de(n).era=i:de(n).invalidEra=e});X("y",ms);X("yy",ms);X("yyy",ms);X("yyyy",ms);X("yo",EM);De(["y","yy","yyy","yyyy"],jt);De(["yo"],function(e,t,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[jt]=n._locale.eraYearOrdinalParse(e,i):t[jt]=parseInt(e,10)});function vM(e,t){var n,r,i,s=this._eras||dr("en")._eras;for(n=0,r=s.length;n<r;++n){switch(typeof s[n].since){case"string":i=Q(s[n].since).startOf("day"),s[n].since=i.valueOf();break}switch(typeof s[n].until){case"undefined":s[n].until=1/0;break;case"string":i=Q(s[n].until).startOf("day").valueOf(),s[n].until=i.valueOf();break}}return s}function gM(e,t,n){var r,i,s=this.eras(),a,o,u;for(e=e.toUpperCase(),r=0,i=s.length;r<i;++r)if(a=s[r].name.toUpperCase(),o=s[r].abbr.toUpperCase(),u=s[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(o===e)return s[r];break;case"NNNN":if(a===e)return s[r];break;case"NNNNN":if(u===e)return s[r];break}else if([a,o,u].indexOf(e)>=0)return s[r]}function xM(e,t){var n=e.since<=e.until?1:-1;return t===void 0?Q(e.since).year():Q(e.since).year()+(t-e.offset)*n}function wM(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].name;return""}function bM(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].narrow;return""}function SM(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].abbr;return""}function jM(){var e,t,n,r,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(n=i[e].since<=i[e].until?1:-1,r=this.clone().startOf("day").valueOf(),i[e].since<=r&&r<=i[e].until||i[e].until<=r&&r<=i[e].since)return(this.year()-Q(i[e].since).year())*n+i[e].offset;return this.year()}function kM(e){return be(this,"_erasNameRegex")||$h.call(this),e?this._erasNameRegex:this._erasRegex}function CM(e){return be(this,"_erasAbbrRegex")||$h.call(this),e?this._erasAbbrRegex:this._erasRegex}function _M(e){return be(this,"_erasNarrowRegex")||$h.call(this),e?this._erasNarrowRegex:this._erasRegex}function Uh(e,t){return t.erasAbbrRegex(e)}function NM(e,t){return t.erasNameRegex(e)}function DM(e,t){return t.erasNarrowRegex(e)}function EM(e,t){return t._eraYearOrdinalRegex||ms}function $h(){var e=[],t=[],n=[],r=[],i,s,a=this.eras();for(i=0,s=a.length;i<s;++i)t.push(zt(a[i].name)),e.push(zt(a[i].abbr)),n.push(zt(a[i].narrow)),r.push(zt(a[i].name)),r.push(zt(a[i].abbr)),r.push(zt(a[i].narrow));this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}ie(0,["gg",2],0,function(){return this.weekYear()%100});ie(0,["GG",2],0,function(){return this.isoWeekYear()%100});function _u(e,t){ie(0,[e,e.length],0,t)}_u("gggg","weekYear");_u("ggggg","weekYear");_u("GGGG","isoWeekYear");_u("GGGGG","isoWeekYear");_t("weekYear","gg");_t("isoWeekYear","GG");Nt("weekYear",1);Nt("isoWeekYear",1);X("G",bu);X("g",bu);X("GG",Re,Gt);X("gg",Re,Gt);X("GGGG",Ih,Eh);X("gggg",Ih,Eh);X("GGGGG",wu,gu);X("ggggg",wu,gu);Ya(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=me(e)});Ya(["gg","GG"],function(e,t,n,r){t[r]=Q.parseTwoDigitYear(e)});function IM(e){return Nw.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function PM(e){return Nw.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function AM(){return Zn(this.year(),1,4)}function OM(){return Zn(this.isoWeekYear(),1,4)}function MM(){var e=this.localeData()._week;return Zn(this.year(),e.dow,e.doy)}function FM(){var e=this.localeData()._week;return Zn(this.weekYear(),e.dow,e.doy)}function Nw(e,t,n,r,i){var s;return e==null?ga(this,r,i).year:(s=Zn(e,r,i),t>s&&(t=s),TM.call(this,e,t,n,r,i))}function TM(e,t,n,r,i){var s=aw(e,t,n,r,i),a=va(s.year,0,s.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}ie("Q",0,"Qo","quarter");_t("quarter","Q");Nt("quarter",7);X("Q",K0);De("Q",function(e,t){t[Qn]=(me(e)-1)*3});function RM(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}ie("D",["DD",2],"Do","date");_t("date","D");Nt("date",9);X("D",Re);X("DD",Re,Gt);X("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});De(["D","DD"],_n);De("Do",function(e,t){t[_n]=me(e.match(Re)[0])});var Dw=hs("Date",!0);ie("DDD",["DDDD",3],"DDDo","dayOfYear");_t("dayOfYear","DDD");Nt("dayOfYear",4);X("DDD",xu);X("DDDD",X0);De(["DDD","DDDD"],function(e,t,n){n._dayOfYear=me(e)});function LM(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}ie("m",["mm",2],0,"minute");_t("minute","m");Nt("minute",14);X("m",Re);X("mm",Re,Gt);De(["m","mm"],pn);var qM=hs("Minutes",!1);ie("s",["ss",2],0,"second");_t("second","s");Nt("second",15);X("s",Re);X("ss",Re,Gt);De(["s","ss"],Gn);var UM=hs("Seconds",!1);ie("S",0,0,function(){return~~(this.millisecond()/100)});ie(0,["SS",2],0,function(){return~~(this.millisecond()/10)});ie(0,["SSS",3],0,"millisecond");ie(0,["SSSS",4],0,function(){return this.millisecond()*10});ie(0,["SSSSS",5],0,function(){return this.millisecond()*100});ie(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});ie(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});ie(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});ie(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});_t("millisecond","ms");Nt("millisecond",16);X("S",xu,K0);X("SS",xu,Gt);X("SSS",xu,X0);var Sr,Ew;for(Sr="SSSS";Sr.length<=9;Sr+="S")X(Sr,ms);function $M(e,t){t[Zr]=me(("0."+e)*1e3)}for(Sr="S";Sr.length<=9;Sr+="S")De(Sr,$M);Ew=hs("Milliseconds",!1);ie("z",0,0,"zoneAbbr");ie("zz",0,0,"zoneName");function VM(){return this._isUTC?"UTC":""}function zM(){return this._isUTC?"Coordinated Universal Time":""}var V=za.prototype;V.add=FO;V.calendar=VO;V.clone=zO;V.diff=KO;V.endOf=aM;V.format=eM;V.from=tM;V.fromNow=nM;V.to=rM;V.toNow=iM;V.get=YP;V.invalidAt=pM;V.isAfter=BO;V.isBefore=YO;V.isBetween=WO;V.isSame=HO;V.isSameOrAfter=QO;V.isSameOrBefore=GO;V.isValid=hM;V.lang=Sw;V.locale=bw;V.localeData=jw;V.max=hO;V.min=fO;V.parsingFlags=mM;V.set=WP;V.startOf=sM;V.subtract=TO;V.toArray=cM;V.toObject=dM;V.toDate=uM;V.toISOString=ZO;V.inspect=JO;typeof Symbol<"u"&&Symbol.for!=null&&(V[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});V.toJSON=fM;V.toString=XO;V.unix=oM;V.valueOf=lM;V.creationData=yM;V.eraName=wM;V.eraNarrow=bM;V.eraAbbr=SM;V.eraYear=jM;V.year=sw;V.isLeapYear=dA;V.weekYear=IM;V.isoWeekYear=PM;V.quarter=V.quarters=RM;V.month=rw;V.daysInMonth=oA;V.week=V.weeks=vA;V.isoWeek=V.isoWeeks=gA;V.weeksInYear=MM;V.weeksInWeekYear=FM;V.isoWeeksInYear=AM;V.isoWeeksInISOWeekYear=OM;V.date=Dw;V.day=V.days=PA;V.weekday=AA;V.isoWeekday=OA;V.dayOfYear=LM;V.hour=V.hours=UA;V.minute=V.minutes=qM;V.second=V.seconds=UM;V.millisecond=V.milliseconds=Ew;V.utcOffset=SO;V.utc=kO;V.local=CO;V.parseZone=_O;V.hasAlignedHourOffset=NO;V.isDST=DO;V.isLocal=IO;V.isUtcOffset=PO;V.isUtc=vw;V.isUTC=vw;V.zoneAbbr=VM;V.zoneName=zM;V.dates=on("dates accessor is deprecated. Use date instead.",Dw);V.months=on("months accessor is deprecated. Use month instead",rw);V.years=on("years accessor is deprecated. Use year instead",sw);V.zone=on("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",jO);V.isDSTShifted=on("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",EO);function BM(e){return Te(e*1e3)}function YM(){return Te.apply(null,arguments).parseZone()}function Iw(e){return e}var Se=_h.prototype;Se.calendar=PP;Se.longDateFormat=FP;Se.invalidDate=RP;Se.ordinal=UP;Se.preparse=Iw;Se.postformat=Iw;Se.relativeTime=VP;Se.pastFuture=zP;Se.set=EP;Se.eras=vM;Se.erasParse=gM;Se.erasConvertYear=xM;Se.erasAbbrRegex=CM;Se.erasNameRegex=kM;Se.erasNarrowRegex=_M;Se.months=iA;Se.monthsShort=sA;Se.monthsParse=lA;Se.monthsRegex=cA;Se.monthsShortRegex=uA;Se.week=hA;Se.firstDayOfYear=yA;Se.firstDayOfWeek=pA;Se.weekdays=_A;Se.weekdaysMin=DA;Se.weekdaysShort=NA;Se.weekdaysParse=IA;Se.weekdaysRegex=MA;Se.weekdaysShortRegex=FA;Se.weekdaysMinRegex=TA;Se.isPM=LA;Se.meridiem=$A;function Oo(e,t,n,r){var i=dr(),s=Ln().set(r,t);return i[n](s,e)}function Pw(e,t,n){if(sr(e)&&(t=e,e=void 0),e=e||"",t!=null)return Oo(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=Oo(e,r,n,"month");return i}function Vh(e,t,n,r){typeof e=="boolean"?(sr(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,sr(t)&&(n=t,t=void 0),t=t||"");var i=dr(),s=e?i._week.dow:0,a,o=[];if(n!=null)return Oo(t,(n+s)%7,r,"day");for(a=0;a<7;a++)o[a]=Oo(t,(a+s)%7,r,"day");return o}function WM(e,t){return Pw(e,t,"months")}function HM(e,t){return Pw(e,t,"monthsShort")}function QM(e,t,n){return Vh(e,t,n,"weekdays")}function GM(e,t,n){return Vh(e,t,n,"weekdaysShort")}function KM(e,t,n){return Vh(e,t,n,"weekdaysMin")}Or("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=me(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});Q.lang=on("moment.lang is deprecated. Use moment.locale instead.",Or);Q.langData=on("moment.langData is deprecated. Use moment.localeData instead.",dr);var Vn=Math.abs;function XM(){var e=this._data;return this._milliseconds=Vn(this._milliseconds),this._days=Vn(this._days),this._months=Vn(this._months),e.milliseconds=Vn(e.milliseconds),e.seconds=Vn(e.seconds),e.minutes=Vn(e.minutes),e.hours=Vn(e.hours),e.months=Vn(e.months),e.years=Vn(e.years),this}function Aw(e,t,n,r){var i=Sn(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function ZM(e,t){return Aw(this,e,t,1)}function JM(e,t){return Aw(this,e,t,-1)}function wy(e){return e<0?Math.floor(e):Math.ceil(e)}function eF(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,a,o,u;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=wy(Ad(n)+t)*864e5,t=0,n=0),r.milliseconds=e%1e3,i=Jt(e/1e3),r.seconds=i%60,s=Jt(i/60),r.minutes=s%60,a=Jt(s/60),r.hours=a%24,t+=Jt(a/24),u=Jt(Ow(t)),n+=u,t-=wy(Ad(u)),o=Jt(n/12),n%=12,r.days=t,r.months=n,r.years=o,this}function Ow(e){return e*4800/146097}function Ad(e){return e*146097/4800}function tF(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if(e=un(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+r/864e5,n=this._months+Ow(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Ad(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}function nF(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+me(this._months/12)*31536e6:NaN}function fr(e){return function(){return this.as(e)}}var rF=fr("ms"),iF=fr("s"),sF=fr("m"),aF=fr("h"),lF=fr("d"),oF=fr("w"),uF=fr("M"),cF=fr("Q"),dF=fr("y");function fF(){return Sn(this)}function hF(e){return e=un(e),this.isValid()?this[e+"s"]():NaN}function gi(e){return function(){return this.isValid()?this._data[e]:NaN}}var mF=gi("milliseconds"),pF=gi("seconds"),yF=gi("minutes"),vF=gi("hours"),gF=gi("days"),xF=gi("months"),wF=gi("years");function bF(){return Jt(this.days()/7)}var Bn=Math.round,Ri={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function SF(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function jF(e,t,n,r){var i=Sn(e).abs(),s=Bn(i.as("s")),a=Bn(i.as("m")),o=Bn(i.as("h")),u=Bn(i.as("d")),c=Bn(i.as("M")),d=Bn(i.as("w")),f=Bn(i.as("y")),m=s<=n.ss&&["s",s]||s<n.s&&["ss",s]||a<=1&&["m"]||a<n.m&&["mm",a]||o<=1&&["h"]||o<n.h&&["hh",o]||u<=1&&["d"]||u<n.d&&["dd",u];return n.w!=null&&(m=m||d<=1&&["w"]||d<n.w&&["ww",d]),m=m||c<=1&&["M"]||c<n.M&&["MM",c]||f<=1&&["y"]||["yy",f],m[2]=t,m[3]=+e>0,m[4]=r,SF.apply(null,m)}function kF(e){return e===void 0?Bn:typeof e=="function"?(Bn=e,!0):!1}function CF(e,t){return Ri[e]===void 0?!1:t===void 0?Ri[e]:(Ri[e]=t,e==="s"&&(Ri.ss=t-1),!0)}function _F(e,t){if(!this.isValid())return this.localeData().invalidDate();var n=!1,r=Ri,i,s;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(n=e),typeof t=="object"&&(r=Object.assign({},Ri,t),t.s!=null&&t.ss==null&&(r.ss=t.s-1)),i=this.localeData(),s=jF(this,!n,r,i),n&&(s=i.pastFuture(+this,s)),i.postformat(s)}var vc=Math.abs;function bi(e){return(e>0)-(e<0)||+e}function Nu(){if(!this.isValid())return this.localeData().invalidDate();var e=vc(this._milliseconds)/1e3,t=vc(this._days),n=vc(this._months),r,i,s,a,o=this.asSeconds(),u,c,d,f;return o?(r=Jt(e/60),i=Jt(r/60),e%=60,r%=60,s=Jt(n/12),n%=12,a=e?e.toFixed(3).replace(/\.?0+$/,""):"",u=o<0?"-":"",c=bi(this._months)!==bi(o)?"-":"",d=bi(this._days)!==bi(o)?"-":"",f=bi(this._milliseconds)!==bi(o)?"-":"",u+"P"+(s?c+s+"Y":"")+(n?c+n+"M":"")+(t?d+t+"D":"")+(i||r||e?"T":"")+(i?f+i+"H":"")+(r?f+r+"M":"")+(e?f+a+"S":"")):"P0D"}var ve=Cu.prototype;ve.isValid=gO;ve.abs=XM;ve.add=ZM;ve.subtract=JM;ve.as=tF;ve.asMilliseconds=rF;ve.asSeconds=iF;ve.asMinutes=sF;ve.asHours=aF;ve.asDays=lF;ve.asWeeks=oF;ve.asMonths=uF;ve.asQuarters=cF;ve.asYears=dF;ve.valueOf=nF;ve._bubble=eF;ve.clone=fF;ve.get=hF;ve.milliseconds=mF;ve.seconds=pF;ve.minutes=yF;ve.hours=vF;ve.days=gF;ve.weeks=bF;ve.months=xF;ve.years=wF;ve.humanize=_F;ve.toISOString=Nu;ve.toString=Nu;ve.toJSON=Nu;ve.locale=bw;ve.localeData=jw;ve.toIsoString=on("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Nu);ve.lang=Sw;ie("X",0,0,"unix");ie("x",0,0,"valueOf");X("x",bu);X("X",QP);De("X",function(e,t,n){n._d=new Date(parseFloat(e)*1e3)});De("x",function(e,t,n){n._d=new Date(me(e))});//! moment.js
Q.version="2.29.4";NP(Te);Q.fn=V;Q.min=mO;Q.max=pO;Q.now=yO;Q.utc=Ln;Q.unix=BM;Q.months=WM;Q.isDate=Va;Q.locale=Or;Q.invalid=yu;Q.duration=Sn;Q.isMoment=wn;Q.weekdays=QM;Q.parseZone=YM;Q.localeData=dr;Q.isDuration=Ml;Q.monthsShort=HM;Q.weekdaysMin=KM;Q.defineLocale=Mh;Q.updateLocale=YA;Q.locales=WA;Q.weekdaysShort=GM;Q.normalizeUnits=un;Q.relativeTimeRounding=kF;Q.relativeTimeThreshold=CF;Q.calendarFormat=$O;Q.prototype=V;Q.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};var Tl=(e=>(e[e.day=0]="day",e[e.month=1]="month",e[e.week=2]="week",e[e.year=3]="year",e))(Tl||{});const Mw="periodType",by=0;function NF(){let e=localStorage.getItem(Mw);if(e===null)return 0;let t=Number(e);return Number.isNaN(t)===!0||t<0||t>3?by:t}function DF(e){localStorage.setItem(Mw,String(e))}class Du{constructor(t,n,r,i){x(this,"timezone");x(this,"siteBizMonth");x(this,"siteBizDate");x(this,"onChanged");x(this,"type");x(this,"state");x(this,"hasNext");x(this,"caption");this.timezone=t,this.siteBizMonth=n,this.siteBizDate=r,this.onChanged=i;let s=this.newDate();this.state=Ae({to:s,from:new Date(s),caption:null}),this.hasNext=Ae(a=>{let o=this.newDate();return a(this.state).to<=o}),this.caption=Ae(a=>this.getCaption(a)),this.init()}newDate(){let t=new Date;return t.setHours(t.getHours()-Jo.timeZone+this.timezone),t.setHours(0,0,0,0),t}getGrainSize(t){return""}prev(){var t;this.prevInternal(),(t=this.onChanged)==null||t.call(this,this)}next(){var t;this.nextInternal(),(t=this.onChanged)==null||t.call(this,this)}}const EF="日一二三四五六";class IF extends Du{init(){this.type=0;let{from:t,to:n}=fe(this.state),r=new Date(t),i=new Date(n);i.setDate(t.getDate()+1),le(this.state,{from:r,to:i})}prevInternal(){let{from:t,to:n}=fe(this.state);le(this.state,{to:new Date(n.setDate(n.getDate()-1)),from:new Date(t.setDate(t.getDate()-1))})}nextInternal(){let{from:t,to:n}=fe(this.state);le(this.state,{to:new Date(n.setDate(n.getDate()+1)),from:new Date(t.setDate(t.getDate()+1))})}getCaption(t){let{from:n}=t(this.state),r=new Date().getFullYear(),i=n.getFullYear(),s=n.getMonth(),a=n.getDate(),o=n.getDay();return(i===r?"":`${i}年`)+`${s+1}月${a}日 星期${EF[o]}`}}class PF extends Du{init(){let{to:t}=fe(this.state);this.type=2;let n=t.getDay(),i=t.getDate()-n+(n===0?-6:1),s=new Date(t),a=new Date(t.setDate(i));s.setDate(t.getDate()+7),le(this.state,{from:a,to:s})}prevInternal(){let{from:t,to:n}=fe(this.state);le(this.state,{from:new Date(t.setDate(t.getDate()-7)),to:new Date(n.setDate(n.getDate()-7))})}nextInternal(){let{from:t,to:n}=fe(this.state);le(this.state,{from:new Date(t.setDate(t.getDate()+7)),to:new Date(n.setDate(n.getDate()+7))})}getCaption(t){let{from:n,to:r}=t(this.state),i=new Date().getFullYear(),s=n.getFullYear(),a=n.getMonth(),o=n.getDate(),u=new Date(r);u.setDate(r.getDate()-1);let c=u.getMonth(),d=u.getDate();return(s===i?"":`${s}年`)+`${a+1}月${o}日 - `+(c===a?"":`${c+1}月`)+`${d}日`}getGrainSize(t){return Q(t).format("MM-DD")}}class AF extends Du{init(){let{from:t,to:n}=fe(this.state);this.type=1;let r=n.getFullYear(),i=n.getMonth();n.getDate()<this.siteBizDate&&(i--,i<0&&(i=11,r--));let a=new Date(r,i,this.siteBizDate),o=new Date(a);o.setMonth(i+1),le(this.state,{from:a,to:o})}prevInternal(){let{from:t,to:n}=fe(this.state),r=new Date(t.setMonth(t.getMonth()-1)),i=new Date(n.setMonth(n.getMonth()-1));le(this.state,{from:r,to:i})}nextInternal(){let{from:t,to:n}=fe(this.state);le(this.state,{from:new Date(t.setMonth(t.getMonth()+1)),to:new Date(n.setMonth(n.getMonth()+1))})}getCaption(t){let{from:n,to:r}=t(this.state),i=new Date().getFullYear(),s=n.getFullYear(),a=n.getMonth(),o=r.getMonth(),u=`${i===s?"":s+"年"}${a+1}月`;return this.siteBizDate>1&&(u+=`${this.siteBizDate}日-${o+1}月${this.siteBizDate-1}日`),u}getGrainSize(t){return Q(t).format("MM-DD")}}class OF extends Du{init(){let{from:t,to:n}=fe(this.state);this.type=3;let r=n.getFullYear(),i=n.getMonth(),s=n.getDate();i<this.siteBizMonth?r--:s<this.siteBizDate&&(i++,i>11&&r++),i=this.siteBizMonth;let a=new Date(t);a.setFullYear(n.getFullYear()+1),le(this.state,{from:new Date(r,i,this.siteBizDate),to:a})}prevInternal(){let{from:t,to:n}=fe(this.state);le(this.state,{from:new Date(t.setFullYear(t.getFullYear()-1)),to:new Date(n.setFullYear(n.getFullYear()-1))})}nextInternal(){let{from:t,to:n}=fe(this.state);le(this.state,{from:new Date(t.setFullYear(t.getFullYear()+1)),to:new Date(n.setFullYear(n.getFullYear()+1))})}getCaption(t){let{from:n,to:r}=t(this.state),i=n.getFullYear(),s=r.getFullYear(),a;switch(this.siteBizMonth){case 0:a=`${i}年`;break;case 11:a=`${s}年`;break;default:a=`${i}-${s.toString().substring(2)}年`;break}return a}getGrainSize(t){return Q(t).add(1,"M").format("MM")}}function Sy(e,t,n,r,i){let s;switch(e){case 0:s=new IF(t,n,r,i);break;case 2:s=new PF(t,n,r,i);break;case 1:s=new AF(t,n,r,i);break;case 3:s=new OF(t,n,r,i);break}return s}function MF(e,t,n,r){let i=NF();const[s,a]=P.useState(Sy(i,e,n,t,r));function o(u){let c=Sy(u,e,n,t,r);a(c),DF(u),r(c)}return[s,o]}const FF="col text-center border-start border-end",TF=" py-2 px-3 ",RF=" border-3 border-bottom border-primary fw-bold bg-light text-primary",LF=" border-1 border-bottom cursor-pointer text-secondary ",qF=[[Tl.day,"日"],[Tl.week,"周"],[Tl.month,"月"]];function UF({period:e,setEnumPeriod:t}){let n=we(e.hasNext),r=we(e.caption);function i(){e.prev()}function s(){n&&e.next()}return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"row g-0 tonwa-bg-gray-2 border-top",children:qF.map(a=>{let[o,u]=a,c=TF+(o===e.type?RF:LF);return l.jsx("div",{className:FF,onClick:()=>t(o),children:l.jsx("div",{className:c,children:u})},u)})}),l.jsxs("div",{className:"d-flex justify-content-center",children:[l.jsx("div",{className:"cursor-pointer p-3",onClick:i,children:l.jsx(J,{name:"angle-left"})}),l.jsx("div",{className:"text-center px-1 py-3 w-min-10c",children:r}),l.jsx("div",{className:" p-3 "+(n?" cursor-pointer ":" text-light "),onClick:s,children:l.jsx(J,{name:"angle-right"})})]})]})}function $F({balances:e}){async function t(n){}return l.jsx(l.Fragment,{children:e.map((n,r)=>l.jsx(Ce,{to:"PageObjectAccountHistory/accountId",onClick:()=>t(),children:l.jsx(VF,{balance:n})},r))})}function VF({balance:e}){const{obj:t,post:n,subject:r,value:i}=e;let s="元",a=2;return l.jsxs("div",{className:"m-2 p-3 border border-3 border-info-subtle rounded rounded-3 bg-white text-center cursor-pointer w-min-12c",children:[l.jsxs("div",{className:"mb-1",children:[l.jsxs("span",{className:"text-secondary small",children:[t," ",n,"  "]}),l.jsx("span",{className:"text-primary",children:r})]}),l.jsx("div",{className:"fs-larger",children:BN(i,s,a)})]})}const Fw="my";function zF(){const{uq:e}=G();let t=8,n=6,r=1;const[i,s]=MF(t,n,r,m),[a,o]=P.useState(void 0),[u,c]=P.useState(void 0);async function d(y){let{from:w,to:j}=fe(y.state),g={start:w,end:j},{ret:h}=await e.GetMySums.query(g);c(h)}async function f(){let{ret:y}=await e.GetMyBalance.query({});o(y)}Pt(()=>{(async()=>await Promise.all([d(i),f()]))()});async function m(y){await d(y)}let v;return a!==void 0&&(v=l.jsx($F,{balances:a})),l.jsxs(H,{header:"我的",children:[l.jsx("div",{className:"d-flex flex-wrap p-2 justify-content-center",children:v}),l.jsx(UF,{period:i,setEnumPeriod:s}),l.jsx(Fe,{items:u})]})}const BF=l.jsx(ae,{path:Fw,element:l.jsx(zF,{})});function YF(){const e=G(),{uq:t,biz:n}=e,r=n.sheets,i=P.useCallback(async(o,u,c)=>{let{$page:d}=await t.GetMyDrafts.page({},u,c);return d},[]);function s({value:o}){var v,y;let{caption:u,name:c,id:d,coreDetail:f}=o,m;return f!==void 0&&(m=(y=(v=f.pend)==null?void 0:v.entity)==null?void 0:y.id),l.jsx(Ce,{to:`/sheet/${Pn(d)}`,children:l.jsxs("div",{className:"px-3 py-2 align-items-center d-flex",children:[l.jsx(An,{name:"card-list",className:"fs-larger me-3 text-primary"}),l.jsx("span",{className:"text-body",children:u??c}),l.jsx(zx,{phrase:m})]})})}function a({value:o}){const{id:u,no:c,phrase:d,i:f}=o;let m=n.entities[d],v;if(m===void 0)v=d;else{const{caption:w,name:j}=m;v=w??j}function y({value:w}){return l.jsx("span",{children:w.ex})}return l.jsx(Ce,{to:`/sheet/${Pn(m.id)}/${Pn(u)}`,children:l.jsxs("div",{className:"d-flex px-3 py-3",children:[l.jsx(J,{name:"file",className:"me-3 text-danger"}),l.jsx("span",{className:"d-inline-block w-min-8c",children:v}),l.jsx("span",{className:"d-inline-block w-min-10c",children:c}),l.jsx("span",{className:"d-inline-block w-min-8c",children:l.jsx(an,{uq:t,id:f,Template:y})}),l.jsx("div",{className:"flex-grow-1"}),l.jsx(x0,{id:u})]})})}return l.jsxs(Rn,{header:"单据中心",query:i,param:{},sortField:"id",ViewItem:a,none:l.jsx("div",{className:"small text-secondary p-3",children:"[无]"}),children:[l.jsx(Fe,{items:r,ViewItem:s}),l.jsx("div",{className:"tonwa-bg-gray-2 small text-secondary mt-4 px-3 pt-2 pb-1",children:"单据草稿"})]})}const Tw="sheet-center";function WF(){return l.jsxs(l.Fragment,{children:[l.jsx(ae,{path:Tw,element:l.jsx(YF,{})}),l.jsx(ae,{path:"sheet/:sheet/:id",element:l.jsx(ry,{})}),l.jsx(ae,{path:"sheet/:sheet",element:l.jsx(ry,{})})]})}function HF(){const e=G(),t=we(e.user),{biz:n}=e,{roles:r,permits:i}=n,{uqSites:{userSite:s}}=e,a=s.permits;function o({phrase:f}){let m,v;return a[f]===!0?(m="text-success",v="check"):(m="text-danger",v="times"),l.jsx(J,{name:v,className:"me-3 "+m})}function u({permit:f,caption:m}){function v(){alert(`${m}: ${f}`)}return l.jsx(i0,{permit:f,children:l.jsxs("button",{className:"btn btn-outline-primary",onClick:v,children:[m,": ",f]})})}function c({value:f}){let{phrase:m,name:v,caption:y}=f;return l.jsxs("div",{className:"px-3 py-2 text-primary",children:[l.jsxs("div",{children:[l.jsx(o,{phrase:m}),"角色 ",m," ",v,"  ",y]}),l.jsx("div",{className:"ps-4 py-1",children:l.jsx(u,{permit:m,caption:y??v})})]})}function d({value:f}){let{phrase:m,name:v,caption:y,items:w,permits:j}=f;function g({phrase:b,caption:S}){return l.jsxs("div",{className:"ps-5 py-2",children:[l.jsxs("div",{children:[l.jsx(o,{phrase:b}),S," ",b]}),l.jsx("div",{className:"ps-4 py-1",children:l.jsx(u,{permit:b,caption:S})})]})}function h({value:{phrase:b,caption:S,name:k}}){return l.jsx(g,{phrase:b,caption:S??k})}function p({value:{phrase:b,caption:S,name:k}}){return l.jsx(g,{phrase:b,caption:"许可: "+(S??k)})}return l.jsxs("div",{className:"px-3 py-2 text-success",children:["许可 ",m," ",v,"  ",y,l.jsx(Fe,{items:w,ViewItem:h}),j.length>0&&l.jsx(Fe,{items:j,ViewItem:p})]})}return l.jsx(H,{header:"权限演示",children:l.jsxs("div",{children:[l.jsx("div",{className:"p-3",children:l.jsx(Zf,{user:t})}),l.jsx(Fe,{items:r,ViewItem:c}),l.jsx(ge,{}),l.jsx(Fe,{items:i,ViewItem:d})]})})}const Rw="act-setting",Lw="permits";function QF(){const{biz:e}=G();function t({value:r}){const{name:i,type:s}=r;return l.jsxs("div",{className:"px-3 py-2 d-flex",children:[l.jsx("div",{className:"me-3 w-8c",children:s}),l.jsx("div",{children:i})]})}function n({value:r}){const{name:i,type:s,permits:a,items:o}=r;function u({className:f,value:m,icon:v}){let{caption:y,name:w,type:j}=m;return j===void 0&&(j="item"),l.jsxs("div",{className:"px-3 py-2 border rounded mx-2 my-2 w-min-10c "+f,children:[v," ",y??w]})}function c({value:f}){const m=l.jsx(J,{name:"id-card-o",className:"me-2 text-success"});return l.jsx(u,{value:f,className:"",icon:m})}function d({value:f}){const m=l.jsx(J,{name:"calendar-check-o",className:"me-2 text-info"});return l.jsx(u,{value:f,className:"text-primary",icon:m})}return l.jsxs("div",{className:"mx-2 border",children:[l.jsxs("div",{className:"d-flex tonwa-bg-gray-2 px-3 py-2",children:[l.jsx("div",{className:"me-3 w-8c",children:s}),l.jsx("div",{children:i})]}),l.jsx("div",{className:"d-flex flex-wrap px-1",children:o.map(f=>l.jsx(d,{value:f},f.name))}),l.jsx("div",{className:"d-flex flex-wrap px-1",children:a.map(f=>l.jsx(c,{value:f},f.name))})]})}return l.jsxs(H,{header:"操作设置",children:[l.jsx(Ce,{to:"../"+Lw,children:l.jsx("div",{className:"p-3",children:"权限演示"})}),l.jsx(ge,{}),l.jsxs("div",{className:"",children:[l.jsx(Fe,{items:e.roles,ViewItem:t}),l.jsx("div",{className:"py-2"}),l.jsx(Fe,{items:e.permits,ViewItem:n,sep:l.jsx("div",{className:"py-2"})})]})]})}const GF=l.jsxs(l.Fragment,{children:[l.jsx(ae,{path:Rw,element:l.jsx(QF,{})}),l.jsx(ae,{path:Lw,element:l.jsx(HF,{})})]}),KF=[{label:"单据中心",icon:"file-o",path:Tw,phrase:nh.sheet},{label:"档案中心",path:$0},{label:"报表中心",path:V0},{label:"我的",icon:"user-o",path:Fw},{label:"操作设置",icon:"cog",iconColor:"text-info",path:Rw}];function jy(){const e=G(),{uq:t,uqSites:n}=e;let{mySites:r,userSite:i}=n;const s=" px-4 py-3 border-bottom align-items-center";return l.jsxs(H,{header:"同花",back:"none",children:[l.jsx("div",{className:"px-3 py-2 border-bottom small tonwa-bg-gray-1 text-center",children:l.jsx(an,{uq:t,id:i.site,Template:fu})}),KF.map((a,o)=>{const{label:u,icon:c,iconColor:d,path:f,phrase:m}=a;function v(){e.clearNotifyCount(m)}return l.jsxs(Ce,{to:f,className:s,onClick:v,children:[l.jsx(J,{name:c??"file",className:(d??"text-primary")+" me-4",fixWidth:!0,size:"lg"}),u,l.jsx(zx,{phrase:m})]},o)})]})}it.SumGroup;const Od="home";function XF(e){const t=l.jsxs(l.Fragment,{children:[jP(),WF(),_P(),BF,GF]});return l.jsxs(l.Fragment,{children:[l.jsx(ae,{path:`${Od}/*`,children:t}),l.jsx(ae,{path:"/*",children:t})]})}const qw=[],Mo={};(function(){for(let e of qw)Mo[e].type=e})();function ZF(){const e=G(),{uq:t}=e;let n={};async function r(a){let o=n[a];if(o!==void 0)return o}async function i(a){let{IxBud:o}=t,u=await r(a),[c,d]=await Promise.all([t.IX({IX:o,ix:u}),t.IX({IX:o,IX1:o,ix:u})]),f=[];for(let{ix:m,xi:v}of c){let y=[];for(let{ix:w,xi:j}of d)w===v&&y.push({id:j});y.length===0&&(y=void 0),f.push({id:v,items:y})}return f}async function s(a,o){}return{loadIDPropId:r,loadIDProps:i,setRadioItem:s}}function JF(){return l.jsx(H,{header:"属性",children:l.jsx(ge,{})})}function eT(){const{uq:e}=G(),t=ZF(),{openModal:n}=ue(),{prop:r}=Mn(),[i,s]=P.useState(void 0);Pt(()=>{(async function(){let d=await t.loadIDProps(r);s(d)})()});function a({value:d}){let{id:f,items:m}=d;function v({value:y}){const{id:w,name:j,ex:g,type:h,$removed:p}=y,{caption:b,PageNext:S,memo:k}=Mo[h];function _(){S!==void 0?n(l.jsx(S,{id:w,name:j,caption:g,type:h,items:m})):(y.$removed=p!==!0,s([...i]))}let C,N,D="",E=" fw-bold";return p===!0?(C="undo",N="text-muted",D=" text-decoration-line-through text-muted",E=""):S!==void 0?(C="angle-right",N="text-secondary"):(C="trash",N="text-info"),l.jsx("div",{className:"ps-3 py-2",children:l.jsxs("div",{className:"d-flex",children:[l.jsxs("div",{className:"flex-fill me-3 "+D,children:[l.jsxs("div",{className:"mb-1 d-flex",children:[l.jsx("span",{className:"w-min-8c me-3"+E,children:j}),l.jsx("small",{className:"text-muted",children:g})]}),l.jsxs(ze,{children:[l.jsx("span",{children:b}),l.jsx("small",{className:"text-muted",children:k})]})]}),l.jsx("div",{className:"d-flex align-items-center ps-3 pe-3 cursor-pointer",onClick:_,children:l.jsx(J,{name:C,fixWidth:!0,className:N})})]})})}return l.jsx(an,{uq:e,id:f,Template:v})}async function o(){let d=await n(l.jsx(tT,{IDName:r}));if(!d)return;let f=await t.loadIDPropId(r),m=d;s([...i,{ix:f,xi:m}])}const u=l.jsx("button",{className:"btn btn-sm btn-success me-2",onClick:o,children:l.jsx(J,{name:"plus"})}),c="collIDCustom[prop as EnumID].caption";return l.jsx(H,{header:c+"属性编辑",right:u,children:i&&i.length>0&&l.jsxs(l.Fragment,{children:[l.jsx(Fe,{items:i,ViewItem:a}),l.jsx(ge,{})]})})}function tT({IDName:e}){const{register:t,handleSubmit:n,getValues:r}=Tn(),[i,s]=P.useState(void 0),[a,o]=P.useState(!1),[u]=P.useState(!1);async function c(y){}function d(y){let w=Number(y.target.value),j=Mo[w];s(j);let g=r("name");o(g.trim().length>0&&j!==void 0)}function f(y){o(y.target.value.trim().length>0&&i!==void 0)}let m,v="提交";if(i!==void 0){const{PageNext:y,memo:w}=i;w!==void 0&&(m=l.jsxs("div",{className:"mt-1 mb-2 py-2 px-2 text-muted small",children:["说明：",w]})),y!==void 0&&(v="下一步")}return l.jsx(H,{header:"新增属性",children:l.jsxs("form",{className:"container my-3",onSubmit:n(c),children:[l.jsx(ht,{label:"名称",labelClassName:"text-end",children:l.jsx("input",{className:"form-control",...t("name",{maxLength:50,onChange:f})})}),l.jsx(ht,{label:"标识",labelClassName:"text-end",children:l.jsx("input",{className:"form-control",...t("caption",{maxLength:100})})}),l.jsxs(ht,{label:"类型",labelClassName:"text-end",children:[l.jsxs("select",{className:"form-select",...t("type",{onChange:d}),defaultValue:"$",children:[l.jsx("option",{disabled:!0,value:"$",children:"请选择数据类型"}),qw.map(y=>{const{caption:w}=Mo[y];return l.jsx("option",{className:"me-3 w-min-8c mb-2 py-3",value:y,children:w},y)})]}),m]}),l.jsx(ht,{children:l.jsx(Tj,{isSubmiting:u,className:"btn btn-primary",disabled:!a,children:v})})]})})}const ky="prop",nT=l.jsxs(l.Fragment,{children:[l.jsx(ae,{path:ky,element:l.jsx(JF,{})}),l.jsx(ae,{path:`${ky}/:prop`,element:l.jsx(eT,{})})]});function rT({caption:e,right:t,onAdd:n}){return t===void 0&&n&&(t=l.jsx("button",{className:"mt-1 btn btn-sm btn-outline-primary",onClick:n,children:l.jsx(J,{name:"plus"})})),l.jsxs(ze,{className:"px-3 py-1 tonwa-bg-gray-2 small text-black-50 align-items-end",children:[l.jsx("div",{className:"pt-2",children:e}),t]})}function iT(){const{biz:e}=G();return e.entities[it.Uom].buds.type.budDataType,l.jsx("div",{})}const Uw="/uom";function sT(){return l.jsx(H,{header:l.jsx($a,{atom:it.Uom}),children:l.jsx(iT,{})})}const ps={atomName:it.UomI,NOLabel:"编号",exLabel:"名称"};function aT(){let{header:e,right:t,query:n,param:r,sortField:i,ViewItem:s,none:a}=Ra({...ps,ViewItemAtom:zh});const o=l.jsx(Ce,{to:Uw,children:l.jsxs(ze,{className:"px-3 py-2 border-bottom border-3 align-items-center cursor-pointer",children:[l.jsx(An,{name:"archive-fill",className:"w-2c me-4 text-primary",iconClassName:"fs-4"}),l.jsx("span",{className:"text-black",children:l.jsx($a,{atom:it.Uom})}),$w]})});return l.jsx(Rn,{header:e,query:n,param:r,sortField:i,ViewItem:s,none:a,right:t,children:o})}const $w=l.jsx(An,{name:"chevron-right",className:"text-secondary"});function zh({value:e}){const{no:t,ex:n}=e;return l.jsxs(ze,{className:"align-items-center",children:[l.jsx(An,{name:"basket3",className:"w-2c me-4 text-info",iconClassName:"fs-4"}),l.jsxs("span",{children:[l.jsx("b",{className:"me-3 text-black",children:n}),l.jsx("small",{className:"text-secondary",children:t})]}),$w]})}function lT(){let{page:e}=La(ps);return e}function oT(){let{view:e,caption:t}=Ua(ps);return l.jsxs(H,{header:t,children:[l.jsx("div",{children:"EDIT"}),e,l.jsx("div",{children:"UomXList"})]})}const uT={name:ps.atomName,pageNew:l.jsx(lT,{}),pageEdit:l.jsx(oT,{}),pageList:l.jsx(aT,{}),pageView:l.jsx(cT,{}),ViewItem:zh};function cT(){const e=bn(),t=G(),{uq:n,biz:r}=t,{openModal:i}=ue(),{id:s}=Mn(),a=Number(s),{caption:o}=r.entities[ps.atomName],{data:{uomI:u,uomxList:c}}=lr(["GetUomI",s],async()=>{let{UomI:m,UomX:v}=await n.GetUomI.query({id:a}),y;if(m.length>0){let{id:j,no:g,ex:h,discription:p,ratio:b,uom:S,uomNo:k,uomEx:_,uomDiscription:C}=m[0];y={id:j,no:g,ex:h,discription:p,ratio:b,uom:{id:S,no:k,ex:_,discription:C,type:0}}}const w=v.map(j=>({...j}));return{uomI:y,uomxList:w}},ur);async function d(){let m="真的要删除这个计量单位吗？";if(await i(l.jsx(au,{header:"确认",message:m,yes:"删除",no:"不删除"}))===!0){await n.DelAtom.submit({id:a});let y=t.pageCache.getPrevData();y&&y.removeItem(w=>w.id===a),e(-1)}}const f=l.jsx(hh,{color:"outline-info",onClick:d,children:l.jsx(J,{name:"trash"})});return l.jsxs(H,{header:o,right:f,children:[u===void 0?l.jsx("div",{className:"p-3",children:"unknown UomI"}):l.jsx(dT,{uomI:u}),l.jsx(hT,{uomI:u,uomxList:c})]})}function dT({uomI:e}){const{uq:t,biz:n}=G(),{openModal:r}=ue(),[i,s]=P.useState(e);async function a(){const{id:f}=i;await r(l.jsx(fT,{id:f})),s(null);let m=await iE(n,t,f);s(m)}if(i===null)return l.jsx(as,{className:"m-3 text-info"});const{ex:o,discription:u,uom:c,ratio:d}=i;return l.jsxs(ze,{className:"ps-3",children:[l.jsxs("div",{className:"py-3",children:[l.jsx("div",{children:u}),l.jsxs("div",{children:[l.jsx("b",{className:"fs-larger me-3",children:o}),l.jsxs("span",{children:[d,c==null?void 0:c.ex]})]})]}),l.jsx("div",{className:"p-3 cursor-pointer",onClick:a,children:l.jsx(J,{name:"pencil-square-o",className:"text-info"})})]})}function fT({id:e}){const{page:t}=v0({...ps,id:e});return t}function hT({uomI:e,uomxList:t}){const{uq:n,biz:r}=G(),{openModal:i,closeModal:s}=ue(),[a,o]=P.useState(t),{caption:u}=r.entities[it.UomX];async function c(){const w={no:await n.IDNO({ID:n.Atom})},j=await i(l.jsx(f,{uomX:w}));await d(j)}async function d(y){if(y===void 0)return;const{no:w,ex:j,ratio:g}=y;let h=await n.SaveUomX.submit({i:e.id,no:w,ex:j,ratio:g});if(y.id!==h.id)y.id=h.id,a.push(y);else{let p=a.findIndex(b=>b.id===y.id);Object.assign(a[p],y)}a.sort((p,b)=>{const{ratio:S}=p,{ratio:k}=b;return S<k?-1:S>k?1:0}),o([...a])}function f({uomX:y}){const{register:w,handleSubmit:j,formState:{errors:g},setError:h}=Tn({mode:"onBlur"}),{id:p}=y;function b(C){const{ex:N}=C;let D=a.findIndex(A=>A.ex===N);if(D>=0&&a[D].id!==p){h("ex",{message:"重复了"});return}const E={...y,...C};s(E)}const S=[{name:"ex",label:"简称",type:"text",options:{maxLength:30,value:y.ex}},{name:"ratio",label:"换算率",type:"number",options:{required:!0,valueAsNumber:!0,value:y.ratio}},{type:"submit"}];async function k(){let C=`真的要删除这个${u}吗？`;if(await i(l.jsx(au,{header:"确认",message:C,yes:"删除",no:"不删除"}))===!0){await n.DelUomX.submit({uomI:e.id,uomX:p});let D=a.findIndex(E=>E.id===p);if(D>=0){let E=a.splice(D,1);o(E)}s()}}let _;return p>0&&(_=l.jsx(hh,{color:"outline-info",onClick:k,children:l.jsx(J,{name:"trash"})})),l.jsxs(H,{header:"换算率",right:_,children:[l.jsx(ht,{children:l.jsxs("div",{className:"mt-3 small text-secondary",children:[l.jsx(J,{name:"exclamation-circle",className:"text-info me-3"}),"相对",e.ex,"的换算率"]})}),l.jsx("form",{onSubmit:j(b),className:"container my-3 pe-5",children:l.jsx(cr,{rows:S,register:w,errors:g})})]})}function m(y){const{value:w,index:j}=y;let g,h;if(j===0)g=e.ex,h=1;else{let{ex:N,ratio:D}=a[j-1];g=N,h=D}const{no:p,ratio:b,ex:S}=w,k=b/h,_=Number.isInteger(k)===!0?k:k.toFixed(2);async function C(){let N=await i(l.jsx(f,{uomX:w}));N!==void 0&&await d(N)}return l.jsxs(ze,{className:"ps-3",children:[l.jsxs("div",{className:"py-2 w-min-12c",children:["1 ",l.jsx("b",{className:"fs-larger",children:S})]}),l.jsxs("div",{className:"py-2",children:[" = ",_," ",g]}),l.jsx("div",{className:"px-3 py-2 cursor-pointer",onClick:C,children:l.jsx(J,{name:"angle-right"})})]})}const v=l.jsxs("div",{className:"p-3 text-secondary small",children:[l.jsx(An,{name:"info-circle",className:"me-1 text-info"}),"无",u]});return l.jsxs("div",{children:[l.jsx(rT,{caption:u,onAdd:c}),l.jsx(Fe,{items:a,ViewItem:m,itemKey:y=>y.ex,none:v})]})}it.Uom;function mT(e){return"/uomi-list-of-uom/"+e}function pT(){const{uq:e}=G(),{id:t}=Mn(),n=Number(t);async function r(u,c,d){let m=await e.GetUomIListOfUom.page(u,c,d),{$page:v}=m;return v}let i={uom:n};function s({value:u}){return l.jsx(Ce,{to:`/uomi/${u.id}`,children:l.jsx("div",{className:"px-3 py-2",children:l.jsx(zh,{value:u})})})}const a=l.jsx(l.Fragment,{children:"R"}),o=l.jsxs("div",{children:[l.jsx("div",{className:"m-3",children:l.jsx(an,{uq:e,id:n,Template:Ct})}),l.jsx(ge,{})]});return l.jsx(Rn,{header:l.jsx($a,{atom:it.Uom}),query:r,param:i,sortField:"id",ViewItem:s,right:a,children:o})}const yT="admin";function vT(){const e=[{label:gh,path:vh},{label:wh,path:xh},{label:l.jsx($a,{atom:it.UomI}),path:Ta(uT.name)}];return l.jsx(H,{header:"管理员",children:e.map((t,n)=>{const{label:r,path:i}=t;return l.jsx(Ce,{to:`../${i}`,className:"px-3 py-2 border-bottom align-items-center",children:r},n)})})}const gT=l.jsx(l.Fragment,{children:l.jsx(ae,{path:yT,element:l.jsx(vT,{})})});function xT(e){return l.jsxs(l.Fragment,{children:[nT,gT,zI,mP,WI,l.jsx(ae,{path:Uw,element:l.jsx(sT,{})}),l.jsx(ae,{path:mT(":id"),element:l.jsx(pT,{})})]})}function wT(){return l.jsx(H,{header:null,children:l.jsxs("div",{className:"m-3",children:[l.jsx("i",{className:"bi-dash-circle-fill text-danger fs-larger me-3"}),"没有授权。请联系管理员"]})})}function bT(){const{right:e,view:t}=L0();return l.jsx(H,{header:bh,back:"none",right:e,children:t})}function gc({children:e}){let t=G();const{pathBase:n,pathLogin:r}=t;return l.jsx(P.Suspense,{fallback:l.jsx(ir,{header:"..."}),children:l.jsx($1,{basename:n,children:l.jsxs(Lf,{children:[e,l.jsx(ae,{path:`${r}/*`,element:l.jsx(_D,{})}),l.jsx(ae,{path:"/register",element:l.jsx(ND,{})}),jD]})})})}function ST(){let e=G(),{user:t,atomSiteLogined:n,pathLogin:r}=e,i=we(t),s=we(n),{userSite:a}=_0();if(a===void 0)return l.jsx(gc,{children:l.jsx(ae,{path:"/",element:l.jsx(F1,{replace:!0,to:r})})});let o;if(s!==!0)return o=l.jsx(ir,{}),l.jsx(gc,{children:l.jsx(ae,{path:"/",element:o})});if(i===void 0)o=l.jsx(wT,{});else{const u={to:"/"+Od,caption:"首页",icon:"home"},c={to:"/"+kd,caption:"我的",icon:"user"},d={to:"/biz",caption:"业务",icon:"user"},{isAdmin:f}=a;let m=f===!0?[u,d,c]:[u,c];o=l.jsx(cN,{tabs:m})}return l.jsxs(gc,{children:[l.jsxs(ae,{path:"/",element:o,children:[l.jsx(ae,{index:!0,element:l.jsx(jy,{})}),l.jsx(ae,{path:Od+"/*",element:l.jsx(jy,{})}),l.jsx(ae,{path:"biz/*",element:l.jsx(bT,{})}),l.jsx(ae,{path:kd+"/*",element:l.jsx(gP,{})})]}),AD,XF(),xT(),yP,l.jsx(ae,{path:"/test",element:l.jsx(H,{header:"Test",children:"test"})})]})}const jT="",kT={version:"0.1.0",center:"https://tv.jkchemical.com",noUnit:!0,oem:void 0,pathBase:jT};function CT(e){let t=[],{devs:n,uqs:r}=e;for(let i of r){let{dev:s,name:a,alias:o}=i;t.push({dev:n[s],name:a,alias:o})}return t}function G(){return P.useContext(Gf)}class _T extends tN{constructor(){super(...arguments);x(this,"timezone");x(this,"unitTimezone");x(this,"unitBizDate");x(this,"unitBizMonth");x(this,"biz");x(this,"uq");x(this,"refresh",async()=>{let n=Date.now()/1e3,r=fe(this.refreshTime);n-r<30||le(this.refreshTime,n)});x(this,"_notifyCounts",Ae({}));x(this,"atomSiteLogined",Ae(!1));x(this,"loginSite",async()=>{if(console.error("loginSite"),this.uqSites!==void 0)return this.biz;console.error("loginSite start loading"),this.uqSites=new W_(this.uqMan),await this.uqSites.login();let{userSite:n}=this.uqSites,r;if(n!==void 0){this.uqMan.unit=n.siteId,r=!0;let{uqApi:i}=this.uqMan,{schemas:s,logs:a}=await i.biz();if(s===void 0){debugger;console.error("uq-api compile saved bizobject error",a),this.biz=new Vp(this,void 0)}else{let o=Zo.unpack(s);this.biz=new Vp(this,o)}}else r=!1;return le(this.atomSiteLogined,r),this.biz});x(this,"gSpecs",{})}get pathLogin(){return"/login"}get uqMan(){return this.uq.$.$_uqMan}async loadUnitTime(n){let i=(await n.query({})).ret[0];this.timezone=i.timezone??8,this.unitTimezone=i.unitTimeZone??8,this.unitBizMonth=(i.unitBizMonth??1)-1,this.unitBizDate=i.unitBizDate??1}loadWithoutLogin(){}onLoadUQs(){this.uq=this.uqs.UqDefault}async loadOnLogined(){await this.loginSite(),console.log("site logined")}get autoRefresh(){return async()=>{let{ret:n}=await this.uq.GetPendsNotify.query({}),r=fe(this._notifyCounts),i=0;for(let s of this.biz.pends)r[s.id]=0;for(let s of n){let{phrase:a,count:o}=s;r[a]=o,i+=o}r[nh.sheet]=i,le(this._notifyCounts,{...r})}}clearNotifyCount(n){let r=fe(this._notifyCounts);r[n]=0,le(this._notifyCounts,{...r})}specFromAtom(n){if(this.biz.entities[n]!==void 0)debugger}}const NT=CT(RN);function DT(){const e=()=>new _T(kT,NT,ON,LN);return l.jsx(iN,{createUqApp:e,children:l.jsx(ST,{})})}wc.createRoot(document.getElementById("root")).render(l.jsx(re.StrictMode,{children:l.jsx(DT,{})}))});export default ET();
